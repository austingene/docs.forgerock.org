<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>OpenIG Reference</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="Reference documentation for OpenIG. OpenIG provides a high-performance reverse proxy server with specialized session management and credential replay functionality."><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="reference"></a>OpenIG Reference</h1></div><div><h2 class="subtitle">Version 3.1.0</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Paul </span> <span class="surname">Bryan</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Mark </span> <span class="surname">Craig</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Jamie </span> <span class="surname">Nelson</span></h3><div lang="en" class="affiliation"><span class="orgname">ForgeRock AS<br></span><div class="address"><p><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="street">33&nbsp;New&nbsp;Montgomery&nbsp;St.</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="otheraddr">Suite&nbsp;1500</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="city">San&nbsp;Francisco</span>,&nbsp;<span class="state">CA</span>&nbsp;<span class="postcode">94105</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="country">USA</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="phone">+1&nbsp;415-599-1100&nbsp;(US)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<code class="uri">www.forgerock.com</code><br>
&nbsp;&nbsp;&nbsp;</p></div></div></div></div></div><div><p class="releaseinfo">Software release date: December 12, 2014</p></div><div><p class="copyright">Copyright &copy; 2011-2014 ForgeRock AS</p></div><div><a href="legalnotice.html">Legal Notice</a></div><div><p class="pubdate">Publication date: December 12, 2014</p></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>
    Reference documentation for OpenIG.
    OpenIG provides a high-performance reverse proxy server
    with specialized session management and credential replay functionality.
   </p></div></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="preface"><a href="#preface">Preface</a></span></dt><dt><span class="reference"><a href="#required-conf">I. Required Configuration</a></span></dt><dt><span class="reference"><a href="#handlers-conf">II. Handlers</a></span></dt><dt><span class="reference"><a href="#filters-conf">III. Filters</a></span></dt><dt><span class="reference"><a href="#decorators-conf">IV. Decorators</a></span></dt><dt><span class="reference"><a href="#misc-conf">V. Miscellaneous Heap Objects</a></span></dt><dt><span class="reference"><a href="#expressions-conf">VI. Expressions</a></span></dt><dt><span class="reference"><a href="#exchange-object-model-conf">VII. Exchange Object Model</a></span></dt><dt><span class="appendix"><a href="#appendix-interface-stability">A. Release Levels &amp; Interface Stability</a></span></dt><dt><span class="index"><a href="#d132e7793">Index</a></span></dt></dl></div><div lang="en" class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="preface"></a>Preface</h1></div></div></div><p>This reference covers OpenIG configuration.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d132e151"></a>1.&nbsp;Who Should Use this Reference</h2></div></div></div><p>
   This reference is for OpenIG designers, developers, and administrators.
  </p><p>
   For API specifications, see the appropriate
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs" target="_blank">Javadoc</a>.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reserved-field-names"></a>2.&nbsp;Reserved Field Names</h2></div></div></div><p>
   OpenIG reserves all configuration field names
   that contain only alphanumeric characters.
  </p><p>
   If you must define your own field names, for example in custom decorators,
   use names with dots, <code class="literal">.</code>, or dashes, <code class="literal">-</code>.
   Examples include "my-decorator" or "com.example.myDecorator".
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="field-value-conventions"></a>3.&nbsp;Field Value Conventions</h2></div></div></div><p>
   OpenIG configuration uses
   <a class="link" href="http://json.org" target="_blank">JSON</a> notation.
  </p><a class="indexterm" name="d132e182"></a><div class="variablelist"><p>
    This reference uses the following terms
    when referring to the values that configuration object fields take.
   </p><dl class="variablelist"><dt><a name="definition-array"></a><span class="term">array</span></dt><dd><p>
      <a class="link" href="http://json.org" target="_blank">JSON</a> array.
     </p></dd><dt><a name="definition-boolean"></a><span class="term">boolean</span></dt><dd><p>
      Either <code class="literal">true</code> or <code class="literal">false</code>.
     </p></dd><dt><a name="definition-configuration-expression"></a><span class="term">configuration expression</span></dt><dd><p>
      Expression for which no exchange is available.
     </p><p lang="en">
      A configuration expression is independent of the
      <a href="../reference/index.html#Exchange" class="link">exchange</a>,
      so do not use expressions that reference exchange properties.
      You can, however, use
      <code class="literal">${env['<em class="replaceable"><code>variable</code></em>']}</code>,
      <code class="literal">${system['<em class="replaceable"><code>property</code></em>']}</code>,
      and all the built-in
      <a href="../reference/index.html#Functions" class="link">functions</a>.
</p></dd><dt><a name="definition-duration"></a><span class="term">duration</span></dt><dd><div lang="en" class="itemizedlist"><p>
  A
  <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/Duration.html" target="_blank">duration</a> is a lapse of time expressed in English,
  such as "23 hours 59 minutes and 59 seconds".
 </p><p>
    Durations are not case sensitive.
  </p><p>
    Negative durations are not supported.
  </p><p>
  The following units can be used in durations.
 </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      "indefinite", "infinity", "undefined", "unlimited": unlimited duration
    </p></li><li class="listitem"><p>
      "zero", "disabled": zero-length duration
    </p></li><li class="listitem"><p>
   "days", "day", "d": days
  </p></li><li class="listitem"><p>
   "hours", "hour", "h": hours
  </p></li><li class="listitem"><p>
   "minutes", "minute", "min", "m": minutes
  </p></li><li class="listitem"><p>
   "seconds", "second", "sec", "s": seconds
  </p></li><li class="listitem"><p>
   "milliseconds", "millisecond", "millisec", "millis", "milli", "ms": milliseconds
  </p></li><li class="listitem"><p>
   "microseconds", "microsecond", "microsec", "micros", "micro", "us": microseconds
  </p></li><li class="listitem"><p>
   "nanoseconds", "nanosecond", "nanosec", "nanos", "nano", "ns": nanoseconds
  </p></li></ul></div></dd><dt><a name="definition-expression"></a><span class="term">expression</span></dt><dd><p>
      See
      <a href="../reference/index.html#Expressions" class="link">expression</a>.
     </p></dd><dt><a name="definition-lvalue-expression"></a><span class="term">lvalue-expression</span></dt><dd><p>
      Expression yielding an object whose value is to be set.
     </p></dd><dt><a name="definition-number"></a><span class="term">number</span></dt><dd><p>
      <a class="link" href="http://json.org" target="_blank">JSON</a> number.
     </p></dd><dt><a name="definition-object"></a><span class="term">object</span></dt><dd><p>
      <a class="link" href="http://json.org" target="_blank">JSON</a> object
      where the content depends on the object's type.
     </p></dd><dt><a name="definition-pattern"></a><span class="term">pattern</span></dt><dd><p>
      A regular expression according to the rules for the Java
      <a class="link" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html" target="_blank">Pattern</a> class.
     </p></dd><dt><a name="definition-pattern-template"></a><span class="term">pattern-template</span></dt><dd><p>
      Template for referencing capturing groups in a pattern
      by using <code class="literal">$<em class="replaceable"><code>n</code></em></code>,
      where <em class="replaceable"><code>n</code></em> is
      the index number of the capturing group starting from zero.
     </p><p>
      For example, if the pattern is <code class="literal">"\w+\s*=\s*(\w)+"</code>,
      the pattern-template is <code class="literal">"$1"</code>,
      and the text to match is <code class="literal">"key = value"</code>,
      the pattern-template yields <code class="literal">"value"</code>.
     </p></dd><dt><a name="definition-reference"></a><span class="term">reference</span></dt><dd><p>
      Either references an object configured in the heap by the object's "name"
      or uses a local, inline configuration object where the "name" is optional.
     </p></dd><dt><a name="definition-string"></a><span class="term">string</span></dt><dd><p>
      <a class="link" href="http://json.org" target="_blank">JSON</a> string.
     </p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="formatting-conventions"></a>4.&nbsp;Formatting Conventions</h2></div></div></div><p>
  Most examples in the documentation are created on GNU/Linux or Mac OS X.

  Where it is helpful to make a distinction between operating environments,
  examples for UNIX, GNU/Linux, Mac OS X, and so forth are labeled (UNIX).
  Mac OS X specific examples can be labeled (Mac OS X).
  Examples for Microsoft Windows can be labeled (Windows).

  To avoid repetition, however, file system directory names are
  often given only in UNIX format as in <code class="filename">/path/to/server</code>,
  even if the text applies to <code class="filename">C:\path\to\server</code> as well.
 </p><p>
  Absolute path names usually begin with the placeholder
  <code class="filename">/path/to/</code>.

  This path might translate to <code class="filename">/opt/</code>,
  <code class="filename">C:\Program Files\</code>, or somewhere else on your system.
 </p><p>
  Command line, terminal sessions are formatted as follows.
 </p><div class="screen"><pre>$ <strong>echo $JAVA_HOME</strong>
<em>/path/to/jdk</em></pre></div><p>
  Command output is sometimes formatted for narrower, more readable output
  even though formatting parameters are not shown in the command.
  In the following example, the query string parameter
  <code class="literal">_prettyPrint=true</code> is omitted.
 </p><div class="screen"><pre>
$ <strong>curl https://bjensen:hifalutin@opendj.example.com:8443/users/newuser</strong>
<em>{
  "_rev" : "000000005b337348",
  "schemas" : [ "urn:scim:schemas:core:1.0" ],
  "contactInformation" : {
    "telephoneNumber" : "+1 408 555 1212",
    "emailAddress" : "newuser@example.com"
  },
  "_id" : "newuser",
  "name" : {
    "familyName" : "New",
    "givenName" : "User"
  },
  "userName" : "newuser@example.com",
  "displayName" : "New User",
  "meta" : {
    "created" : "2014-06-03T09:58:27Z"
  },
  "manager" : [ {
    "_id" : "kvaughan",
    "displayName" : "Kirsten Vaughan"
  } ]
}</em>
 </pre></div><p>
  Program listings are formatted as follows.
 </p><pre class="brush: java;">class Test {
    public static void main(String [] args)  {
        System.out.println("This is a program listing.");
    }
}</pre></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="accessing-doc-online"></a>5.&nbsp;Accessing Documentation Online</h2></div></div></div><p>
  ForgeRock core documentation, such as what you are now reading, aims to be
  technically accurate and complete with respect to the software documented.
 </p><div class="itemizedlist"><p>
   Core documentation therefore follows a three-phase review process
   designed to eliminate errors.
  </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
    Product managers and software architects review project documentation design
    with respect to the users' software lifecycle needs.
   </p></li><li class="listitem"><p>
    Subject matter experts review proposed documentation changes for
    technical accuracy and completeness
    with respect to the corresponding software.
   </p></li><li class="listitem"><p>
    Quality experts validate implemented documentation changes for
    technical validity with respect to the software,
    technical completeness with respect to the scope of the document,
    and usability for the expected audience.
   </p></li></ul></div><p>
  The review process helps to ensure that documentation published for
  a ForgeRock release is technically accurate and complete.
 </p><p>
  Fully reviewed, published core documentation is available at
  <a class="link" href="http://docs.forgerock.org/" target="_blank">http://docs.forgerock.org/</a>.

  Use this documentation when working with a ForgeRock Enterprise release.
 </p><p>
  In-progress documentation can be found at each project site under the
  <a class="link" href="http://forgerock.org" target="_blank">Developer Community</a> projects page.

  Use this documentation when trying a nightly build.
 </p><p>
  The ForgeRock <a class="link" href="https://wikis.forgerock.org/" target="_blank">Community Wikis</a> and provide additional, user-created information.

  We encourage you to
  <a class="link" href="https://sso.forgerock.com/openam/UI/Login" target="_blank">join the community</a>, so that you can update the Wikis, too.
 </p></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="joining-the-community"></a>6.&nbsp;Joining the ForgeRock Community</h2></div></div></div><p>
  After you
  <a class="link" href="https://backstage.forgerock.com/#/account/register" target="_blank">sign up</a> to join the ForgeRock community,
  you can edit the
  <a class="link" href="https://wikis.forgerock.org/" target="_blank">Community Wikis</a>,
  and also log bugs and feature requests in the
  <a class="link" href="https://bugster.forgerock.org/" target="_blank">issue tracker</a>.
 </p><p>
  If you have a question regarding a project but cannot find an answer
  in the project documentation or Wiki, browse to the
  <a class="link" href="http://forgerock.org" target="_blank">Developer Community</a> page for the project,
  where you can find details on joining the project mailing lists,
  and find links to mailing list archives.

  You can also suggest updates to documentation through the
  <a class="link" href="https://lists.forgerock.org/mailman/listinfo/docs" target="_blank">ForgeRock docs mailing list</a>.
 </p><p>
  The Community Wikis describe how to check out and build source code.

  Should you want to contribute a patch, test, or feature,
  or want to author part of the core documentation,
  first have a look on the ForgeRock site at
  <a class="link" href="http://forgerock.org/get_involved.html" target="_blank">how to get involved</a>.
 </p></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="required-conf"></a>Required Configuration</h1></div></div><hr></div><div class="partintro"><div></div><p>
    You must specify at least the entry point for incoming requests,
    the OpenIG Servlet,
    and the heap objects that configure and initialize objects,
    with dependency injection.
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#gateway-servlet">Gateway Servlet</a></span><span class="refpurpose"> &#8212; entry point for all incoming requests</span></dt><dt><span class="refentrytitle"><a href="#heap-objects">Heap Objects</a></span><span class="refpurpose"> &#8212; configure and initialize objects, with dependency injection</span></dt></dl></div></div><div lang="en" class="refentry"><a name="gateway-servlet"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Gateway Servlet &#8212; entry point for all incoming requests</p></div><div class="refsect1"><a name="d132e499"></a><h2>Description</h2><a class="indexterm" name="d132e502"></a><p>
   The gateway servlet is the entry point for all incoming requests.
   It is responsible for initializing a
   <a href="../reference/index.html#heap-objects" class="link">heap of objects</a>,
   and dispatching all requests to a configured handler.
   The configuration of the gateway servlet is loaded
   from a JSON-encoded configuration file,
   expected by default at <code class="filename">$HOME/.openig/config/config.json</code>.
  </p><div class="itemizedlist"><p>
    The gateway servlet creates the following objects by default.
   </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
     An
     <a href="../reference/index.html#AuditDecorator" class="link">AuditDecorator</a> that you can use
     to trigger notification for audit events.
     The default AuditDecorator is named "audit".
    </p></li><li class="listitem"><p>
     A
     <a href="../reference/index.html#CaptureDecorator" class="link">CaptureDecorator</a> that you can use
     to capture requests and response messages,
     though not the entity body or the exchange.
     The default CaptureDecorator is named "capture".
    </p></li><li class="listitem"><p>
     A
     <a href="../reference/index.html#TimerDecorator" class="link">TimerDecorator</a> that you can use
     to record time spent within Filters and Handlers.
     The default TimerDecorator is named "timer".
    </p></li></ul></div><p>
   The gateway servlet also looks for an object named "Session" in the heap.
   If it finds such an object,
   it uses that object as the default session producer.
   For example, to store session information
   in an HTTP cookie on the user-agent,
   you can define a "JwtSession" named "Session"
   in <code class="filename">config.json</code>.
   In you do that, however, stored session information must
   fit the constraints for storage in a JWT and in a cookie,
   as described in the
   <a href="../reference/index.html#JwtSession" class="link">reference documentation for JwtSession</a>.
   If no such object is found,
   <code class="literal">exchange.session</code> is based on the Servlet HttpSession
   that is handled by the container where OpenIG runs.
  </p></div><div class="refsect1"><a name="d132e547"></a><h2>Usage</h2><pre class="brush: javascript;">
{
  "handler": Handler reference or inline Handler declaration,
  "heap": [ configuration object, ... ],
  "baseURI": string,
  "logSink":  LogSink reference,
  "temporaryStorage": TemporaryStorage reference
}
  </pre></div><div class="refsect1"><a name="d132e552"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch all requests to this handler.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd><dt><span class="term"><code class="code">"heap"</code>: <span class="emphasis"><em>array of configuration objects, optional</em></span></span></dt><dd><p>
      The
      <a href="../reference/index.html#heap-objects" class="link">heap object</a>
      configuration.
     </p><p>
      You can omit an empty array.
      If you only have one object in the heap,
      you can inline it as the handler value.
     </p></dd><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Overrides the existing request URI,
      making requests relative to a new base URI.
     </p><p>
      Only scheme, host and port are used in the supplied URI.
     </p><p>
      Default: leave the request URI untouched.
     </p></dd><dt><span class="term"><code class="code">"logSink"</code>: <span class="emphasis"><em>LogSink reference, optional</em></span></span></dt><dd><p>
      Send log messages to this LogSink.
     </p><p>
      Provide either the name of a LogSink object defined in the heap,
      or an inline LogSink configuration object.
     </p><p>
      Default: use the heap object named "LogSink".
      Otherwise use an internally-created ConsoleLogSink object
      that is named "LogSink" and that uses default settings
      for a ConsoleLogSink object.
     </p></dd><dt><span class="term"><code class="code">"temporaryStorage"</code>: <span class="emphasis"><em><a href="../reference/index.html#TemporaryStorage" class="link">TemporaryStorage</a> reference, optional</em></span></span></dt><dd><p>
      Cache content during processing
      based on this TemporaryStorage configuration.
     </p><p>
      Provide either the name of a TemporaryStorage object defined in the heap,
      or an inline TemporaryStorage configuration object.
     </p><p>
      Default: use the heap object named "TemporaryStorage".
      Otherwise use an internally-created TemporaryStorage object
      that is named "TemporaryStorage" and that uses default settings
      for a TemporaryStorage object.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e629"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/servlet/GatewayServlet.html" target="_blank">org.forgerock.openig.servlet.GatewayServlet</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="heap-objects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Heap Objects &#8212; configure and initialize objects, with dependency injection</p></div><div class="refsect1"><a name="d132e648"></a><h2>Description</h2><a class="indexterm" name="d132e651"></a><p>
   A heap is a collection of associated objects,
   initialized from declarative configuration artifacts.
   All configurable objects in OpenIG are heap objects.
   Heap objects are created and initialized by associated "heaplets",
   which retrieve any objects an object depends on from the heap.
   The heap configuration is included as an object in the
   <a href="../reference/index.html#gateway-servlet" class="link">gateway servlet</a> configuration.
  </p></div><div class="refsect1"><a name="d132e661"></a><h2>Usage</h2><pre class="brush: javascript;">
[
    {
        "name": string,
        "type": string,
        "config": {
            object-specific configuration
        }
    },
    ...
]
  </pre></div><div class="refsect1"><a name="d132e669"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string, required except for inline objects</em></span></span></dt><dd><p>
      The unique name to give the heap object in the heap.
      This name is used to resolve the heap object,
      for example when another heap object names a heap object dependency.
     </p></dd><dt><span class="term"><code class="code">"type"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      The class name of the object to be created.
      To determine the type name,
      see the object's documentation in this reference.
     </p></dd><dt><span class="term"><code class="code">"config"</code>: <span class="emphasis"><em>object, required</em></span></span></dt><dd><p>
      The configuration that is specific to the heap object being created.
     </p><p>
      If all the fields are optional
      and the configuration uses only default settings,
      you can omit the "config" field
      instead of including an empty "config" object as the field value.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e705"></a><h2>Automatically Created Objects</h2><div class="variablelist"><p>
    When a heap is first created,
    it is automatically populated with some objects,
    without required configuration.
    An automatically created object can be overridden
    by creating a heap object with the same name.
   </p><dl class="variablelist"><dt><span class="term"><code class="code">"LogSink"</code></span></dt><dd><p>
      The default object to use for writing all audit and performance logging.
     </p><p>
      Default: a
      <a href="../reference/index.html#ConsoleLogSink" class="link">ConsoleLogSink</a> object with default values.
     </p></dd><dt><span class="term"><code class="code">"TemporaryStorage"</code></span></dt><dd><p>
      The default object to use for managing temporary buffers.
     </p><p>
      Default: a
      <a href="../reference/index.html#TemporaryStorage" class="link">TemporaryStorage</a> object with default values.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e735"></a><h2>Implicit Properties</h2><div class="variablelist"><p>
    Every heap object has a set of implicit properties,
    which can be overridden on an object-by-object basis.
   </p><dl class="variablelist"><dt><span class="term"><code class="code">"logSink"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      Specifies the heap object that should be used
      for audit and performance logging.
     </p><p>
      Default: "LogSink".
     </p></dd><dt><span class="term"><code class="code">"temporaryStorage"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      Specifies the heap object that should be used
      for temporary buffer storage.
     </p><p>
      Default: "TemporaryStorage".
     </p></dd></dl></div></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="handlers-conf"></a>Handlers</h1></div></div><hr></div><div class="partintro"><div></div><p>
    Handler objects process an HTTP exchange request
    by producing an associated response.
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#Chain">Chain</a></span><span class="refpurpose"> &#8212; dispatch exchange to ordered list of filters</span></dt><dt><span class="refentrytitle"><a href="#ClientHandler">ClientHandler</a></span><span class="refpurpose"> &#8212; submit exchange requests to remote servers</span></dt><dt><span class="refentrytitle"><a href="#DispatchHandler">DispatchHandler</a></span><span class="refpurpose"> &#8212; dispatch to one of a list of handlers</span></dt><dt><span class="refentrytitle"><a href="#MonitorEndpointHandler">MonitorEndpointHandler</a></span><span class="refpurpose"> &#8212; return basic audit statistics in JSON format</span></dt><dt><span class="refentrytitle"><a href="#Route">Route</a></span><span class="refpurpose"> &#8212; Configuration for handling a specified Exchange condition</span></dt><dt><span class="refentrytitle"><a href="#Router">Router</a></span><span class="refpurpose"> &#8212; Route processing to distinct configurations</span></dt><dt><span class="refentrytitle"><a href="#SamlFederationHandler">SamlFederationHandler</a></span><span class="refpurpose"> &#8212; play the role of SAML 2.0 Service Provider</span></dt><dt><span class="refentrytitle"><a href="#ScriptableHandler">ScriptableHandler</a></span><span class="refpurpose"> &#8212; handle a request by using a script</span></dt><dt><span class="refentrytitle"><a href="#SequenceHandler">SequenceHandler</a></span><span class="refpurpose"> &#8212; process exchange through sequence of handlers</span></dt><dt><span class="refentrytitle"><a href="#StaticResponseHandler">StaticResponseHandler</a></span><span class="refpurpose"> &#8212; create static response in HTTP exchange</span></dt></dl></div></div><div lang="en" class="refentry"><a name="Chain"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Chain &#8212; dispatch exchange to ordered list of filters</p></div><div class="refsect1"><a name="d132e783"></a><h2>Description</h2><a class="indexterm" name="d132e786"></a><p>
   A chain is responsible for dispatching an exchange
   to an ordered list of filters, and finally a handler.
  </p></div><div class="refsect1"><a name="d132e793"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "Chain",
     "config": {
         "filters": [ Filter reference, ... ],
         "handler": Handler reference
     }
}
</pre></div><div class="refsect1"><a name="d132e798"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"filters"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#filters-conf" class="link">Filter</a> references, required</em></span></span></dt><dd><p>
      An array of names of Filter objects defined in the heap,
      and inline Filter configuration objects.
     </p><p>
      The chain dispatches to dispatch the exchange to these Filters
      in the order they appear in the array.
     </p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      The chain dispatches to this handler
      once the exchange has traversed all of the specified filters.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e831"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LoginChain",
     "type": "Chain",
     "config": {
         "filters": [ "LoginFilter" ],
         "handler": "ClientHandler"
     }
}</pre></div><div class="refsect1"><a name="d132e836"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/Chain.html" target="_blank">org.forgerock.openig.filter.Chain</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ClientHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ClientHandler &#8212; submit exchange requests to remote servers</p></div><div class="refsect1"><a name="d132e856"></a><h2>Description</h2><a class="indexterm" name="d132e859"></a><p>Submits exchange requests to remote servers.</p></div><div class="refsect1"><a name="d132e866"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "ClientHandler",
     "config": {
         "httpClient": HttpClient reference
     }
}</pre></div><div class="refsect1"><a name="d132e871"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"httpClient"</code>: <span class="emphasis"><em><a href="../reference/index.html#HttpClient" class="link">HttpClient</a> reference, optional</em></span></span></dt><dd><p>
      HttpClient used when making HTTP requests to other servers.
     </p><p>
      Provide either the name of an HttpClient object defined in the heap,
      or an inline HttpClient configuration object.
     </p><p>
      Default: use the heap object named "HttpClient",
      which matches the name of the HttpClient object
      created by the gateway servlet by default with default settings
     </p><p>
      If you overload that name
      by configuring your own HttpClient object named "HttpClient",
      then use that heap object.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e893"></a><h2>Example</h2><p>
   The following object configures a <code class="literal">ClientHandler</code>
   named <code class="literal">Client</code> that uses the HTTP client configuration
   specified in the configuration object with name <code class="literal">MyHttpClient</code>.
  </p><pre class="brush: javascript;">
{
  "name": "Client",
  "type": "ClientHandler",
  "config": {
    "httpClient": "MyHttpClient"
  }
}
  </pre></div><div class="refsect1"><a name="d132e909"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/ClientHandler.html" target="_blank">org.forgerock.openig.handler.ClientHandler</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="DispatchHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DispatchHandler &#8212; dispatch to one of a list of handlers</p></div><div class="refsect1"><a name="d132e927"></a><h2>Description</h2><a class="indexterm" name="d132e930"></a><p>
   Dispatches to one of a list of handlers.
   When an exchange is handled,
   each handler's <code class="literal">condition</code> is evaluated.
   If a condition expression yields <code class="literal">true</code>,
   then the exchange is dispatched to the associated handler
   with no further processing.
  </p></div><div class="refsect1"><a name="d132e943"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "DispatchHandler",
    "config": {
        "bindings": [
            {
                "condition": expression,
                "handler": Handler reference,
                "baseURI": string,
            }, ...
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e948"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"bindings"</code>: <span class="emphasis"><em>array of objects, required</em></span></span></dt><dd><p>
      A list of bindings of conditions and associated handlers to dispatch to.
     </p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      Condition to evaluate to determine
      if associated handler should be dispatched to.
      If omitted, then dispatch is unconditional.
     </p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch to this handler
      if the associated condition yields <code class="literal">true</code>.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Overrides the existing request URI,
      making requests relative to a new base URI.
      Only scheme, host and port are used in the supplied URI.
     </p><p>
      Default: leave URI untouched.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e1003"></a><h2>Example</h2><p>
   The following sample is from a SAML 2.0 federation configuration.
   If the incoming URI starts with <code class="literal">/saml</code>,
   then OpenIG dispatches to a "SamlFederationHandler".
   If the user name is not set in the exchange session,
   then the user has not authenticated with the SAML 2.0 Identity Provider,
   so OpenIG dispatches to a "SPInitiatedSSORedirectHandler"
   to initiate SAML 2.0 single sign-on from the Service Provider,
   which is OpenIG.
   All other requests go through a "LoginChain" handler.
  </p><pre class="brush: javascript;">
{
    "name": "DispatchHandler",
    "type": "DispatchHandler",
    "config": {
        "bindings": [
            {
                "condition": "${matches(exchange.request.uri.path, '^/saml')}",
                "handler": "SamlFederationHandler"
            },
            {
                "condition": "${empty exchange.session.username}",
                "handler": "SPInitiatedSSORedirectHandler",
                "baseURI": "http://www.example.com:8081"
            },
            {
                "handler": "LoginChain",
                "baseURI": "http://www.example.com:8081"
            }
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e1013"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/DispatchHandler.html" target="_blank">org.forgerock.openig.handler.DispatchHandler</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="MonitorEndpointHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>MonitorEndpointHandler &#8212; return basic audit statistics in JSON format</p></div><div class="refsect1"><a name="d132e1033"></a><h2>Description</h2><a class="indexterm" name="d132e1036"></a><p>
   This handler collates basic audit statistics, returning them in JSON format.
  </p><p>
   You decorate the objects to audit by adding your own "audit" tags.
   The handler updates the count of messages "in progress", "completed", and "internal errors"
   for each audit event, initializing the counts at OpenIG startup time.
   When accessed, it returns the sums organized by object under audit
   using the tags that you defined.
  </p></div><div class="refsect1"><a name="d132e1045"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "MonitorEndpointHandler"
}
  </pre></div><div class="refsect1"><a name="d132e1050"></a><h2>Example</h2><p>
   The following sample route adds a monitor endpoint
   at <code class="literal">/monitor</code>.
  </p><pre class="brush: javascript;">
{
    "handler": {
        "type": "MonitorEndpointHandler"
    },
    "condition": "${exchange.request.method == 'GET'
                    and exchange.request.uri.path == '/monitor'}"
    "audit": "Monitor route"
}
  </pre><p>
   After adding "audit" tags to a number of other routes,
   the JSON returned from the monitor endpoint shows statistics
   since OpenIG started.
   The following example is formatted for legibility.
  </p><pre class="brush: javascript;">
{
    "ForgeRock.com route": {
        "in progress": 0,
        "completed": 6,
        "internal errors": 0
    },
    "ForgeRock.org route": {
        "in progress": 0,
        "completed": 15,
        "internal errors": 0
    },
    "Monitor route": {
        "in progress": 1,
        "completed": 1,
        "internal errors": 0
    },
    "Static login route": {
        "in progress": 0,
        "completed": 12,
        "internal errors": 0
    },
    "HTTP Basic route": {
        "in progress": 0,
        "completed": 21,
        "internal errors": 3
    }
}
  </pre></div><div class="refsect1"><a name="d132e1064"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/audit/monitor/MonitorEndpointHandler.html" target="_blank">org.forgerock.openig.audit.monitor.MonitorEndpointHandler</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Route"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Route &#8212; Configuration for handling a specified Exchange condition</p></div><div class="refsect1"><a name="Route-description"></a><h2>Description</h2><a class="indexterm" name="d132e1087"></a><p>
   In OpenIG,
   a route is represented by a separate JSON configuration file
   and that handles an
   <a href="../reference/index.html#Exchange" class="link">Exchange</a>
   when a specified condition is met.
  </p><p>
   A top-level
   <a href="../reference/index.html#Router" class="link">Router</a>
   is responsible for reloading the route configuration.
   Use a Router to call route handlers,
   rather than calling a route directly
   as the "handler" of the gateway servlet.
   By default the Router rereads the configurations periodically,
   so that configuration changes to routes apply without restarting OpenIG.
  </p><p>
   Each separate route has its own Heap of configuration objects.
   The route's Heap inherits from its parent Heap,
   which is the global heap for top-level routes,
   so the route configuration can reference configuration objects
   specified in the top-level Router configuration file.
  </p><p>
   For examples of route configurations see the chapter,
   <a href="../gateway-guide/index.html#chap-routing" class="link"><em class="citetitle">Configuring Routes</em></a>.
  </p></div><div class="refsect1"><a name="d132e1110"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "handler": Handler reference or inline Handler declaration,
    "heap": [ configuration object, ... ],
    "baseURI": string,
    "condition": expression,
    "name": string,
    "session": Session reference
}
  </pre></div><div class="refsect1"><a name="d132e1115"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      For this route, dispatch the exchange to this handler.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd><dt><span class="term"><code class="code">"heap"</code>: <span class="emphasis"><em>array of configuration objects, optional</em></span></span></dt><dd><p>
      <a href="../reference/index.html#heap-objects" class="link">Heap object</a> configuration for objects local to this route.
     </p><p>
      Objects referenced but not defined here are inherited from the parent.
     </p><p>
      You can omit an empty array.
      If you only have one object in the heap,
      you can inline it as the handler value.
     </p></dd><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      URI on which to rebase the request URL.
     </p><p>
      If this is set, the request URL is rebased using the value.
      Rebasing changes the scheme, host, and port of the request URL.
      Rebasing does not affect the path, query string, or fragment.
     </p><p>
      Default: the request URL remains unchanged.
     </p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>, optional</em></span></span></dt><dd><p>
      Whether the route accepts to handle the Exchange.
     </p><p>
      Default: If the condition is not set, or is <code class="literal">null</code>,
      then this route accepts any Exchange.
     </p></dd><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Name for the route, used by the Router to order the routes.
     </p><p>
      Default: Route configuration file name
     </p></dd><dt><span class="term"><code class="code">"session"</code>: <span class="emphasis"><em>Session reference, optional</em></span></span></dt><dd><p>
      Session storage implementation used by this route, such as a
      <span class="olink">JwtSession</span>.
     </p><p>
      Provide either the name of a session storage object defined in the heap,
      or an inline session storage configuration object.
     </p><p>
      Default: do not change the session storage implementation
      for <code class="literal">exchange.session</code>.
     </p></dd></dl></div></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Router"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Router &#8212; Route processing to distinct configurations</p></div><div class="refsect1"><a name="d132e1226"></a><h2>Description</h2><a class="indexterm" name="d132e1229"></a><p>
   A Router is a handler that routes Exchange processing
   to separate configuration files.
   Each separate configuration file then defines a
   <a href="../reference/index.html#Route" class="link">Route</a>.
   See the
   <a href="../reference/index.html#Route-description" class="link"><em class="citetitle">Description</em></a> section
   of the Route reference for details.
  </p><p>
   The Router reloads configuration files for Routes
   from the specified directory at the specified scan interval.
  </p></div><div class="refsect1"><a name="d132e1245"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": "Router",
    "type": "Router",
    "config": {
        "defaultHandler": Handler reference,
        "directory": expression,
        "scanInterval": integer
    }
}
  </pre><p>
   An alternative value for "type" is "RouterHandler".
  </p></div><div class="refsect1"><a name="d132e1252"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"defaultHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, optional</em></span></span></dt><dd><p>
      Default handler for this Router.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      The router routes the exchange to the first route
      whose "condition" expression is satisfied.
      If no route "condition" matches,
      then the exchange is routed to the default handler if one is configured.
     </p><p>
      Default: if no default route is set either here
      or in the route configurations,
      then OpenIG aborts the exchange with an internal error.
     </p></dd><dt><span class="term"><code class="code">"directory"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      Base directory from which to load configuration files for routes.
     </p><p>
      Default: default base directory for route configuration files.
      For details see the section,
      <a href="../gateway-guide/index.html#install" class="link"><em class="citetitle">Installing OpenIG</em></a>.
     </p></dd><dt><span class="term"><code class="code">"scanInterval"</code>: <span class="emphasis"><em>integer, optional</em></span></span></dt><dd><p>
      Interval in seconds after which OpenIG scans
      the specified directory for changes to configuration files.
     </p><p>
      Default: 10 (seconds)
     </p><p>
      To prevent OpenIG from reloading Route configurations
      after you except at startup,
      set the scan interval to -1.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e1306"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/router/RouterHandler.html" target="_blank">org.forgerock.openig.handler.router.RouterHandler</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SamlFederationHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SamlFederationHandler &#8212; play the role of SAML 2.0 Service Provider</p></div><div class="refsect1"><a name="d132e1325"></a><h2>Description</h2><a class="indexterm" name="d132e1328"></a><p>
   A handler to play the role of SAML 2.0 Service Provider (SP).
  </p></div><div class="refsect1"><a name="d132e1335"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "SamlFederationHandler",
    "config": {
        "assertionMapping": object,
        "redirectURI": string,
        "assertionConsumerEndpoint": string,
        "authnContext": string,
        "authnContextDelimiter": string,
        "logoutURI": string,
        "sessionIndexMapping": string,
        "singleLogoutEndpoint": string,
        "singleLogoutEndpointSoap": string,
        "SPinitiatedSLOEndpoint": string,
        "SPinitiatedSSOEndpoint": string,
        "subjectMapping": string
    }
}
  </pre></div><div class="refsect1"><a name="d132e1340"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"assertionMapping"</code>: <span class="emphasis"><em>object, required</em></span></span></dt><dd><p>
      The "assertionMapping" defines how to transform attributes
      from the incoming assertion to attribute value pairs in OpenIG.
     </p><p>
      Each entry in the <code class="literal">assertionMapping</code> object has the form
      <code class="literal"><em class="replaceable"><code>localName</code></em>:
       <em class="replaceable"><code>incomingName</code></em></code>,
      where <em class="replaceable"><code>incomingName</code></em>
      is used to fetch the value from the incoming assertion,
      and <em class="replaceable"><code>localName</code></em>
      is the name of the attribute set in the session.
      Avoid using dot characters (<code class="literal">.</code>) in the
      <em class="replaceable"><code>localName</code></em>,
      as the <code class="literal">.</code> character also serves as a query separator in expressions.
     </p><p>
      The following shows an example of an "assertionMapping" object.
     </p><pre class="brush: javascript;">
{
    "username": "mail",
    "password": "mailPassword"
}
     </pre><p>
      If the incoming assertion contains the statement:
     </p><pre class="literallayout">mail = george@example.com</pre><pre class="literallayout">mailPassword = costanza</pre><p>
      Then the following values are set in the session:
     </p><pre class="literallayout">username = george@example.com</pre><pre class="literallayout">password = costanza</pre><p>
      For this to work,
      you must edit the &lt;Attribute name="attributeMap"&gt; element
      in the SP extended metadata file,
      <code class="filename">$HOME/.openig/SAML/sp-extended.xml</code>,
      so that it matches the assertion mapping
      configured in the SAML 2.0 Identity Provider (IDP) metadata.
     </p><p>
      When protecting multiple service providers,
      use unique <em class="replaceable"><code>localName</code></em> settings.
      Otherwise different handlers can overwrite each others' data.
     </p></dd><dt><span class="term"><code class="code">"redirectURI"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      Set this to the page that the filter used to HTTP POST a login form
      recognizes as the login page for the protected application.
     </p><p>
      This is how OpenIG and the Federation component work together
      to provide single sign-on.
      When OpenIG detects the login page of the protected application,
      it redirects to the Federation component.
      Once the Federation handler validates the SAML exchanges with the IDP,
      and sets the required session attributes,
      it redirects back to the login page of the protected application.
      This allows the filter used to HTTP POST a login form to finish the job
      by creating a login form to post to the application
      based on the credentials retrieved from the session attributes.
     </p></dd><dt><span class="term"><code class="code">"assertionConsumerEndpoint"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Default: "fedletapplication" (same as the Fedlet)
     </p><p>
      If you modify this attribute you must change the metadata to match.
     </p></dd><dt><span class="term"><code class="code">"authnContext"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Name of the session field to hold the value of the authentication context.
      Avoid using dot characters (<code class="literal">.</code>) in the field name,
      as the <code class="literal">.</code> character also serves as a query separator in expressions.
     </p><p>
      Use this setting when protecting multiple service providers,
      as the different configurations must not map their data
      into the same fields of <code class="literal">exchange.session</code>.
      Otherwise different handlers can overwrite each others' data.
     </p><p>
      As an example, if you set <code class="literal">"authnContext": "myAuthnContext"</code>,
      then OpenIG sets <code class="literal">exchange.session.myAuthnContext</code>
      to the authentication context specified in the assertion.
      When the authentication context is password over protected transport,
      then this results in the session containing
      <code class="literal">"myAuthnContext": "urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport"</code>.
     </p><p>
      Default: map to <code class="literal">session.authnContext</code>
     </p></dd><dt><span class="term"><code class="code">"authnContextDelimiter"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      The authentication context delimiter used
      when there are multiple authentication contexts in the assertion.
     </p><p>
      Default: <code class="literal">|</code>
     </p></dd><dt><span class="term"><code class="code">"logoutURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Set this to the URI to visit after the user is logged out
      of the protected application.
     </p><p>
      You only need to set this if the application
      uses the single logout feature of the Identity Provider.
     </p></dd><dt><span class="term"><code class="code">"sessionIndexMapping"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Name of the session field to hold the value of the session index.
      Avoid using dot characters (<code class="literal">.</code>) in the field name,
      as the <code class="literal">.</code> character also serves as a query separator in expressions.
     </p><p>
      Use this setting when protecting multiple service providers,
      as the different configurations must not map their data
      into the same fields of <code class="literal">exchange.session</code>.
      Otherwise different handlers can overwrite each others' data.
     </p><p>
      As an example, if you set <code class="literal">"sessionIndexMapping": "mySessionIndex"</code>,
      then OpenIG sets <code class="literal">exchange.session.mySessionIndex</code>
      to the session index specified in the assertion.
      This results in the session containing something like
      <code class="literal">"mySessionIndex": "s24ccbbffe2bfd761c32d42e1b7a9f60ea618f9801"</code>.
     </p><p>
      Default: map to <code class="literal">session.sessionIndex</code>
     </p></dd><dt><span class="term"><code class="code">"singleLogoutEndpoint"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Default: "fedletSLORedirect" (same as the Fedlet)
     </p><p>
      If you modify this attribute you must change the metadata to match.
     </p></dd><dt><span class="term"><code class="code">"singleLogoutEndpointSoap"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Default: "fedletSloSoap" (same as the Fedlet)
     </p><p>
      If you modify this attribute you must change the metadata to match.
     </p></dd><dt><span class="term"><code class="code">"SPinitiatedSLOEndpoint"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Default: "SPInitiatedSLO"
     </p><p>
      If you modify this attribute you must change the metadata to match.
     </p></dd><dt><span class="term"><code class="code">"SPinitiatedSSOEndpoint"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Default: "SPInitiatedSSO"
     </p><p>
      If you modify this attribute you must change the metadata to match.
     </p></dd><dt><span class="term"><code class="code">"subjectMapping"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Name of the session field to hold the value of the subject name.
      Avoid using dot characters (<code class="literal">.</code>) in the field name,
      as the <code class="literal">.</code> character also serves as a query separator in expressions.
     </p><p>
      Use this setting when protecting multiple service providers,
      as the different configurations must not map their data
      into the same fields of <code class="literal">exchange.session</code>.
      Otherwise different handlers can overwrite each others' data.
     </p><p>
      As an example, if you set <code class="literal">"subjectMapping": "mySubjectName"</code>,
      then OpenIG sets <code class="literal">exchange.session.mySubjectName</code>
      to the subject name specified in the assertion.
      If the subject name is an opaque identifier,
      then this results in the session containing something like
      <code class="literal">"mySubjectName": "vtOk+APj1s9Rr4yCka6V9pGUuzuL"</code>.
     </p><p>
      Default: map to <code class="literal">session.subjectName</code>
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e1617"></a><h2>Example</h2><p>
   The following sample configuration is corresponds to a scenario
   where OpenIG receives a SAML 2.0 assertion from the IDP,
   and then logs the user in to the protected application
   using the username and password from the assertion.
  </p><pre class="brush: javascript;">
{
    "name": "SamlFederationHandler",
    "type": "SamlFederationHandler",
    "config": {
        "assertionMapping": {
            "username": "mail",
            "password": "mailPassword"
        },
        "redirectURI": "/login",
        "logoutURI": "/logout"
    }
}
  </pre></div><div class="refsect1"><a name="d132e1624"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/saml/SamlFederationHandler.html" target="_blank">org.forgerock.openig.handler.saml.SamlFederationHandler</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ScriptableHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ScriptableHandler &#8212; handle a request by using a script</p></div><div class="refsect1"><a name="d132e1644"></a><h2>Description</h2><a class="indexterm" name="d132e1647"></a><p>
   Handles a request by using a script.
  </p><div class="variablelist"><p>
    The script has access to the following global objects.
   </p><dl class="variablelist"><dt><span class="term">Any parameters passed as "args"</span></dt><dd><p>
      You can use the configuration to pass parameters to the script
      by specifying an "args" object.
     </p><p>
      Take care when naming keys in the "args" object.
      If you reuse the name of another global object,
      then you overwrite the global object value
      with the specified "args" value.
     </p></dd><dt><span class="term"><code class="literal">exchange</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/Exchange.html" target="_blank">exchange</a> provides access to the HTTP request and response.
     </p><p>
      The request is created and populated before calling the handler.
      The handler is responsible for creating
      and for populating the response in the exchange.
     </p></dd><dt><span class="term"><code class="literal">globals</code></span></dt><dd><p>
      This object is a
      <a class="link" href="http://groovy.codehaus.org/groovy-jdk/index.html?java/util/Map.html" target="_blank">Map</a> that holds variables that persist across successive invocations.
     </p></dd><dt><span class="term"><code class="literal">http</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/HttpClient.html" target="_blank">http</a> object provides an embedded HTTP client.
     </p><p>
      Use this client to perform outbound HTTP requests.
     </p></dd><dt><span class="term"><code class="literal">ldap</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/ldap/LdapClient.html" target="_blank">ldap</a> object provides an embedded LDAP client.
     </p><p>
      Use this client to perform outbound LDAP requests,
      such as LDAP authentication.
     </p></dd><dt><span class="term"><code class="literal">logger</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/log/Logger.html" target="_blank">logger</a> object provides access to the server log sink.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e1721"></a><h2>Usage</h2><pre class="brush: javascript;">{
    "name": string,
    "type": "ScriptableHandler",
    "config": {
        "type": string,
        "file": string,    // Use either "file"
        "source": string,  // or "source", but not both.
        "args": object
    }
}
  </pre></div><div class="refsect1"><a name="d132e1726"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"type"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      The Internet media type (formerly MIME type) of the script, either
      <code class="literal">"application/x-groovy"</code> for Groovy
      or <code class="literal">"text/javascript"</code> for JavaScript
     </p></dd><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      Path to the file containing the script;
      mutually exclusive with <code class="code">"source"</code>
     </p><p>
      Relative paths in the "file" field are relative
      to the base location for scripts.
      The base location depends on the configuration.
      For details see the section,
      <a href="../gateway-guide/index.html#install" class="link"><em class="citetitle">Installing OpenIG</em></a>.
     </p><p>
      The base location for Groovy scripts
      is on the classpath when the scripts are executed.
      If therefore some Groovy scripts are not in the default package,
      but instead have their own package names,
      they belong in the directory corresponding to their package name.
      For example, a script in package <code class="literal">com.example.groovy</code>
      belongs under
      <code class="filename"><em class="replaceable"><code>openig-base</code></em>/scripts/groovy/com/example/groovy/</code>.
     </p></dd><dt><span class="term"><code class="code">"source"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The script as a string;
      mutually exclusive with <code class="code">"file"</code>
     </p></dd><dt><span class="term"><code class="code">"args"</code>: <span class="emphasis"><em>map, optional</em></span></span></dt><dd><p>
      Parameters passed from the configuration to the script.
     </p><p>
      The configuration object is a map
      whose values can be scalars, arrays, objects and so forth,
      as in the following example.
     </p><pre class="brush: javascript;">
{
    "args": {
        "title": "Coffee time",
        "status": 418,
        "reason": [
            "Not Acceptable",
            "I'm a teapot",
            "Acceptable"
        ],
        "names": {
            "1": "koffie",
            "2": "kafe",
            "3": "cafe",
            "4": "kafo"
        }
    }
}
     </pre><p>
      The script can then access the "args" parameters
      in the same way as other global objects.
      The following example sets the response reason to "I'm a teapot".
     </p><pre class="brush: java;">
exchange.response.reason = reason[1]
     </pre></dd></dl></div></div><div class="refsect1"><a name="d132e1806"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/ScriptableHandler.html" target="_blank">org.forgerock.openig.handler.ScriptableHandler</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SequenceHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SequenceHandler &#8212; process exchange through sequence of handlers</p></div><div class="refsect1"><a name="d132e1826"></a><h2>Description</h2><a class="indexterm" name="d132e1829"></a><p>
   Processes an exchange through a sequence of handlers.
   This allows multi-request processing such as retrieving a form,
   extracting form content (for example, nonce)
   and submitting in a subsequent request.
   Each <code class="literal">handler</code> in the <code class="literal">bindings</code>
   is dispatched to in order;
   the binding <code class="literal">postcondition</code> determines
   if the sequence should continue.
  </p></div><div class="refsect1"><a name="d132e1845"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "SequenceHandler",
    "config": {
        "bindings": [
            {
                "handler": Handler reference,
                "postcondition": expression
            }
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e1850"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"bindings"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>A list of bindings of handler and postcondition to determine that
     sequence continues.</p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch to this handler.
     </p><p>
      Either the name of the handler heap object to dispatch to,
      or an inline Handler configuration object.
     </p></dd><dt><span class="term"><code class="code">"postcondition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Evaluated to determine if the sequence continues. Default:
     unconditional.</p></dd></dl></div></div><div class="refsect1"><a name="d132e1890"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/SequenceHandler.html" target="_blank">org.forgerock.openig.handler.SequenceHandler</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="StaticResponseHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>StaticResponseHandler &#8212; create static response in HTTP exchange</p></div><div class="refsect1"><a name="d132e1910"></a><h2>Description</h2><a class="indexterm" name="d132e1913"></a><p>Creates a static response in an HTTP exchange.</p></div><div class="refsect1"><a name="d132e1920"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "StaticResponseHandler",
     "config": {
         "status": number,
         "reason": string,
         "version": string,
         "headers": {
             name: [ expression, ... ], ...
         },
         "entity": expression
     }
}</pre></div><div class="refsect1"><a name="d132e1925"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"status"</code>: <span class="emphasis"><em>number, required</em></span></span></dt><dd><p>The response status code (for example, 200).</p></dd><dt><span class="term"><code class="code">"reason"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The response status reason (for example,
     <code class="literal">"OK"</code>).</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Protocol version. Default: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>array of objects, optional</em></span></span></dt><dd><p>Header fields to set in the response. The <code class="literal">name</code>
     specifies the header name, with an associated array of expressions to
     evaluate as values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>, optional</em></span></span></dt><dd><p>
      The message entity expression to be evaluated and included in the response.
     </p><p>
      Conforms to the <code class="literal">Content-Type</code> header
      and sets <code class="literal">Content-Length</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e1998"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "ErrorHandler",
     "type":"StaticResponseHandler",
     "config": {
        "status": 500,
        "reason": "Error",
        "entity": "&lt;html&gt;
                   &lt;h2&gt;Epic #FAIL&lt;/h2&gt;
                   &lt;/html&gt;"
     }
}</pre></div><div class="refsect1"><a name="d132e2003"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/handler/StaticResponseHandler.html" target="_blank">org.forgerock.openig.handler.StaticResponseHandler</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="filters-conf"></a>Filters</h1></div></div><hr></div><div class="partintro"><div></div><p>
    Filter objects perform filtering
    of the request and response of an HTTP exchange.
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#AssignmentFilter">AssignmentFilter</a></span><span class="refpurpose"> &#8212; conditionally assign values to expressions</span></dt><dt><span class="refentrytitle"><a href="#CaptureFilter">CaptureFilter</a></span><span class="refpurpose"> &#8212; capture request and response messages</span></dt><dt><span class="refentrytitle"><a href="#CookieFilter">CookieFilter</a></span><span class="refpurpose"> &#8212; manage, suppress, relay cookies</span></dt><dt><span class="refentrytitle"><a href="#CryptoHeaderFilter">CryptoHeaderFilter</a></span><span class="refpurpose"> &#8212; encrypt, decrypt headers</span></dt><dt><span class="refentrytitle"><a href="#EntityExtractFilter">EntityExtractFilter</a></span><span class="refpurpose"> &#8212; extract pattern from message entity</span></dt><dt><span class="refentrytitle"><a href="#ExceptionFilter">ExceptionFilter</a></span><span class="refpurpose"> &#8212; catch exceptions when handling request</span></dt><dt><span class="refentrytitle"><a href="#FileAttributesFilter">FileAttributesFilter</a></span><span class="refpurpose"> &#8212; retrieve record from a file</span></dt><dt><span class="refentrytitle"><a href="#HeaderFilter">HeaderFilter</a></span><span class="refpurpose"> &#8212; remove and add headers</span></dt><dt><span class="refentrytitle"><a href="#HttpBasicAuthFilter">HttpBasicAuthFilter</a></span><span class="refpurpose"> &#8212; perform HTTP Basic authentication</span></dt><dt><span class="refentrytitle"><a href="#LocationHeaderFilter">LocationHeaderFilter</a></span><span class="refpurpose"> &#8212; rewrites Location headers</span></dt><dt><span class="refentrytitle"><a href="#OAuth2ClientFilter">OAuth2ClientFilter</a></span><span class="refpurpose"> &#8212; Authenticate an end user with OAuth 2.0 delegated authorization</span></dt><dt><span class="refentrytitle"><a href="#OAuth2ResourceServerFilter">OAuth2ResourceServerFilter</a></span><span class="refpurpose"> &#8212; Validate an Exchange containing an OAuth 2.0 access token</span></dt><dt><span class="refentrytitle"><a href="#ScriptableFilter">ScriptableFilter</a></span><span class="refpurpose"> &#8212; process exchange by using a script</span></dt><dt><span class="refentrytitle"><a href="#SqlAttributesFilter">SqlAttributesFilter</a></span><span class="refpurpose"> &#8212; execute SQL query</span></dt><dt><span class="refentrytitle"><a href="#StaticRequestFilter">StaticRequestFilter</a></span><span class="refpurpose"> &#8212; create new request within exchange object</span></dt><dt><span class="refentrytitle"><a href="#SwitchFilter">SwitchFilter</a></span><span class="refpurpose"> &#8212; divert exchange to other handler</span></dt></dl></div></div><div lang="en" class="refentry"><a name="AssignmentFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AssignmentFilter &#8212; conditionally assign values to expressions</p></div><div class="refsect1"><a name="d132e2027"></a><h2>Description</h2><a class="indexterm" name="d132e2030"></a><p>
   Conditionally assigns values to expressions
   before and after the exchange is handled.
  </p></div><div class="refsect1"><a name="d132e2037"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "AssignmentFilter",
    "config": {
        "onRequest": [
            {
                "condition": expression,
                "target": lvalue-expression,
                "value": expression
            }, ...
        ],
        "onResponse": [
            {
                "condition": expression,
                "target": lvalue-expression,
                "value": expression
            }, ...
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2042"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"onRequest"</code>: <span class="emphasis"><em>array of objects, optional</em></span></span></dt><dd><p>
      Defines a list of assignment bindings to evaluate
      before the exchange is handled.
     </p></dd><dt><span class="term"><code class="code">"onResponse"</code>: <span class="emphasis"><em>array of objects, optional</em></span></span></dt><dd><p>
      Defines a list of assignment bindings to evaluate
      after the exchange is handled.
     </p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>
      Expression to evaluate to determine if an assignment should occur.
      Omitting the condition makes the assignment unconditional.
     </p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>
      Expression that yields the target object whose value is to be set.
     </p></dd><dt><span class="term"><code class="code">"value"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>
      Expression that yields the value to be set in the target.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e2102"></a><h2>Example</h2><p>
   This is an example of how you would capture credentials
   and store them in the OpenIG session during a login request.
   Notice the credentials are captured on the request,
   but not marked as valid until the response returns a positive 302.
   The credentials would then be used to login a user to a different application.
  </p><pre class="brush: javascript;">
{
    "name": "PortalLoginCaptureFilter",
    "type": "AssignmentFilter",
    "config": {
        "onRequest": [
            {
                "target": "${exchange.session.authUsername}",
                "value": "${exchange.request.form['username'][0]}",
            },
            {
                "target": "${exchange.session.authPassword}",
                "value": "${exchange.request.form['password'][0]}",
            },
            {
                "comment": "Authentication has not yet been confirmed.",
                "target": "${exchange.session.authConfirmed}",
                "value": "${false}",
            }
        ],
        "onResponse": [
            {
                "condition": "${exchange.response.status == 302}",
                "target": "${exchange.session.authConfirmed}",
                "value": "${true}",
            }
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2109"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/AssignmentFilter.html" target="_blank">org.forgerock.openig.filter.AssignmentFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CaptureFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CaptureFilter &#8212; capture request and response messages</p></div><div class="refsect1"><a name="d132e2129"></a><h2>Description</h2><a class="indexterm" name="d132e2132"></a><p>Captures request and response messages for further analysis.</p><p>
   Interface Stability:
   <a href="../reference/index.html#interface-stability" class="link">Deprecated</a>.
   Use a
   <a href="../reference/index.html#CaptureDecorator" class="link">CaptureDecorator</a> instead.
  </p></div><div class="refsect1"><a name="d132e2147"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "CaptureFilter",
     "config": {
         "file": expression,
         "charset": string,
         "condition": expression,
         "captureEntity": boolean
     }
}</pre></div><div class="refsect1"><a name="d132e2152"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>The path of the file where captured output should be written.</p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The character set to encode captured output with. Default:
     <code class="literal">"UTF-8"</code>.</p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>The condition to evaluate to determine whether to capture an
     exchange. Default: unconditional.</p></dd><dt><span class="term"><code class="code">"captureEntity"</code>: <span class="emphasis"><em>boolean,
    optional</em></span></span></dt><dd><p>
      Whether the message entity should be captured.
     </p><p>
      The filter omits binary entities,
      instead writing a <code class="literal">[binary entity]</code> marker to the file.
     </p><p>
      Default: true
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e2210"></a><h2>Examples</h2><p>Log the entire request and response:</p><pre class="brush: javascript;">
{
    "name": "LogToTemporaryFile",
    "type": "CaptureFilter",
    "config": {
        "file": "/tmp/gateway.log"
    }
}
  </pre><p>Log the request and response. Do not log the entity:</p><pre class="brush: javascript;">
{
    "name": "LogToTemporaryFile",
    "type": "CaptureFilter",
    "config": {
        "file": "/tmp/gateway.log",
        "captureEntity": false
    }
}
  </pre><p>
   You can use the CaptureFilter to capture the exchange
   before sending the request and when receiving the response
   as in the following example.
  </p><pre class="brush: javascript;">
{
    "name": "OutgoingChain",
    "type": "Chain",
    "config": {
        "filters": [ "LogToTemporaryFile" ],
        "handler": "ClientHandler"
    }
},
{
    "name": "LogToTemporaryFile",
    "type": "CaptureFilter",
    "config": {
        "captureEntity": false,
        "file": "/tmp/gateway.log"
    }
}
  </pre></div><div class="refsect1"><a name="d132e2225"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/CaptureFilter.html" target="_blank">org.forgerock.openig.filter.CaptureFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CookieFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CookieFilter &#8212; manage, suppress, relay cookies</p></div><div class="refsect1"><a name="d132e2243"></a><h2>Description</h2><a class="indexterm" name="d132e2246"></a><p>Manages, suppresses and relays cookies. Managed cookies are intercepted
  by the cookie filter itself and stored in the gateway session; managed cookies
  are not transmitted to the user agent. Suppressed cookies are removed from
  both request and response. Relayed cookies are transmitted freely between user
  agent and remote server and vice-versa.</p><p>If a cookie does not appear in one of the three action parameters, then
  the default action is performed, controlled by setting the
  <code class="literal">defaultAction</code> parameter. If unspecified, the default
  action is to manage all cookies. In the event a cookie appears in more than
  one configuration parameter, then it will be selected in the order of
  precedence: managed, suppressed, relayed.</p></div><div class="refsect1"><a name="d132e2258"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "CookieFilter",
     "config": {
         "managed": [ string, ... ],
         "suppressed": [ string, ... ],
         "relayed": [ string, ... ],
         "defaultAction": string
     }
}</pre></div><div class="refsect1"><a name="d132e2263"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"managed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be managed.</p></dd><dt><span class="term"><code class="code">"suppressed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be suppressed.</p></dd><dt><span class="term"><code class="code">"relayed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be relayed.</p></dd><dt><span class="term"><code class="code">"defaultAction"</code>: <span class="emphasis"><em>string,
    optional</em></span></span></dt><dd><p>Action to perform for cookies that do not match an action set. Must
     be one of: <code class="literal">"MANAGE"</code>, <code class="literal">"RELAY"</code>,
     <code class="literal">"SUPPRESS"</code>. Default: <code class="literal">"MANAGE"</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d132e2319"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/CookieFilter.html" target="_blank">org.forgerock.openig.filter.CookieFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CryptoHeaderFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CryptoHeaderFilter &#8212; encrypt, decrypt headers</p></div><div class="refsect1"><a name="d132e2337"></a><h2>Description</h2><a class="indexterm" name="d132e2340"></a><p>
   Encrypts or decrypts headers in a request or response.
  </p></div><div class="refsect1"><a name="d132e2347"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "CryptoHeaderFilter",
    "config": {
        "messageType": string,
        "operation": string,
        "key": expression,
        "algorithm": string,
        "keyType": string,
        "headers": [ string, ... ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2352"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      Indicates the type of message in the exchange
      whose headers to encrypt or decrypt.
     </p><p>
      Must be one of: <code class="literal">"REQUEST"</code>, <code class="literal">"RESPONSE"</code>.
     </p></dd><dt><span class="term"><code class="code">"operation"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      Indicates whether to encrypt or decrypt.
     </p><p>
      Must be one of: <code class="literal">"ENCRYPT"</code>, <code class="literal">"DECRYPT"</code>.
     </p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>, required</em></span></span></dt><dd><p>
      Base64 encoded key value.
     </p></dd><dt><span class="term"><code class="code">"algorithm"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Algorithm used for encryption and decryption.
     </p><p>
      Default: "AES/ECB/PKCS5Padding"
     </p></dd><dt><span class="term"><code class="code">"keyType"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Algorithm name for the secret key.
     </p><p>
      Default: "AES"
     </p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>array of strings, optional</em></span></span></dt><dd><p>
      The names of header fields to encrypt or decrypt.
     </p><p>
      Default: Do not encrypt or decrypt any headers
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e2440"></a><h2>Example</h2><pre class="brush: javascript;">
{
    "name": "DecryptReplayPasswordFilter",
    "type": "CryptoHeaderFilter",
    "config": {
        "messageType": "REQUEST",
        "operation": "DECRYPT",
        "algorithm": "DES/ECB/NoPadding",
        "keyType": "DES",
        "key": "oqdP3DJdE1Q=",
        "headers": [
            "replaypassword"
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2445"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/CryptoHeaderFilter.html" target="_blank">org.forgerock.openig.filter.CryptoHeaderFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="EntityExtractFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>EntityExtractFilter &#8212; extract pattern from message entity</p></div><div class="refsect1"><a name="d132e2465"></a><h2>Description</h2><a class="indexterm" name="d132e2468"></a><p>
   Extracts regular expression patterns from a message entity.
   The extraction results are stored in a "target" object.
   For a given matched
   <a href="../reference/index.html#Patterns" class="link">pattern</a>,
   the value stored in the object is
   either the result of applying its associated pattern template (if specified)
   or the match result itself otherwise.
  </p></div><div class="refsect1"><a name="d132e2478"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "EntityExtractFilter",
    "config": {
        "messageType": string,
        "charset": string,
        "target": lvalue-expression,
        "bindings": [
            {
                "key": string,
                "pattern": pattern,
                "template": pattern-template
            }, ...
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2483"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      The message type in the exchange to extract patterns from.
     </p><p>
      Must be one of: "REQUEST", "RESPONSE".
     </p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      Overrides the character set encoding specified in message.
     </p><p>
      Default: the message encoding is used.
     </p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
     required</em></span></span></dt><dd><p>
      Expression that yields the target object
      that contains the extraction results.
     </p><p>
      The "bindings" determine what type of object is stored
      in the target location.
     </p><p>
      The object stored in the target location is a Map&lt;String, String&gt;.
      You can then access its content with
      <code class="literal">${<em class="replaceable"><code>target</code></em>.key}</code>
      or <code class="literal">${<em class="replaceable"><code>target</code></em>['key']}</code>.
     </p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      Name of element in target object to contain an extraction result.
     </p></dd><dt><span class="term"><code class="code">"pattern"</code>: <span class="emphasis"><em><a href="../reference/index.html#Patterns" class="link">pattern</a>,
     required</em></span></span></dt><dd><p>
      The regular expression pattern to find in the entity.
     </p></dd><dt><span class="term"><code class="code">"template"</code>: <span class="emphasis"><em><a href="../reference/index.html#Patterns" class="link">pattern-template</a>,
     optional</em></span></span></dt><dd><p>
      The template to apply to the pattern
      and store in the named target element.
     </p><p>
      Default: store the match result itself.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e2575"></a><h2>Examples</h2><p>
   Extracts a nonce from the response, which is typically a login page,
   and sets its value in the exchange
   to be used by the downstream filter posting the login form.
   The nonce value would be accessed using the following expression:
   <code class="literal">${exchange.wikiNonce.wpLoginToken}</code>.
  </p><p>
   The pattern finds all matches in the HTTP body of the form
   <code class="literal">wpLogintoken value="abc"</code>.
   Setting the template to <code class="literal">$1</code>
   assigns the value <code class="literal">abc</code> to
   <code class="literal">exchange.wikiNonce.wpLoginToken</code>.
  </p><pre class="brush: javascript;">
{
    "name": "WikiNoncePageExtract",
    "type": "EntityExtractFilter",
    "config": {
        "messageType": "response",
        "target": "${exchange.wikiNonce}",
        "bindings": [
            {
                "key": "wpLoginToken",
                "pattern": "wpLoginToken\"\s.*value=\"(.*)\"",
                "template": "$1"
            }
        ]
    }
}
  </pre><p>
   The following example reads the response looking for the OpenAM login page.
   When found, it sets <code class="literal">loginPage.found = true</code>
   to be used in a SwitchFilter to post the login credentials.
  </p><pre class="brush: javascript;">
{
    "name": "FindLoginPage",
    "type": "EntityExtractFilter",
    "config": {
        "messageType": "response",
        "target": "${exchange.isLoginPage}",
        "bindings": [
            {
                "key": "found",
                "pattern": "OpenAM\s\(Login\)",
                "template": "true"
            }
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e2606"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/EntityExtractFilter.html" target="_blank">org.forgerock.openig.filter.EntityExtractFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ExceptionFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ExceptionFilter &#8212; catch exceptions when handling request</p></div><div class="refsect1"><a name="d132e2626"></a><h2>Description</h2><a class="indexterm" name="d132e2629"></a><p>
   Catches any exceptions thrown during handling of a request.
   This allows friendlier error pages to be displayed
   than would otherwise be displayed by the container.
   Caught exceptions are logged with a log level of <code class="literal">WARNING</code>
   and the exchange is diverted to the specified exception handler.
  </p></div><div class="refsect1"><a name="d132e2639"></a><h2>Usage</h2><pre class="brush: javascript;">
{
     "name": string,
     "type": "ExceptionFilter",
     "config": {
         "handler": Handler reference
     }
}
  </pre></div><div class="refsect1"><a name="d132e2644"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch to this handler in the event of caught exceptions.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e2662"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/ExceptionFilter.html" target="_blank">org.forgerock.openig.filter.ExceptionFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="FileAttributesFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>FileAttributesFilter &#8212; retrieve record from a file</p></div><div class="refsect1"><a name="d132e2682"></a><h2>Description</h2><a class="indexterm" name="d132e2685"></a><p>Retrieves and exposes a record from a delimiter-separated file. Lookup
  of the record is performed using a specified <code class="literal">key</code>, whose
  <code class="literal">value</code> is derived from an exchange-scoped expression. The
  resulting record is exposed in an object whose location is specified by the
  <code class="literal">target</code> expression. If a matching record cannot be found,
  then the resulting object is empty.</p><p>The retrieval of the record is performed lazily; it does not occur
  until the first attempt to access a value in the <code class="literal">target</code>.
  This defers the overhead of file operations and text processing until a value
  is first required. This also means that the value expression is not evaluated
  until the object is first accessed.</p></div><div class="refsect1"><a name="d132e2706"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "FileAttributesFilter",
     "config": {
         "file": expression,
         "charset": string,
         "separator": string,
         "header": boolean,
         "fields": [ string, ... ],
         "target": lvalue-expression,
         "key": string,
         "value": expression
     }
}</pre><p>
   For an example see the section,
   <a href="../gateway-guide/index.html#tutorial-credentials-from-file" class="link"><em class="citetitle">Login With Credentials From a File</em></a>.
  </p></div><div class="refsect1"><a name="d132e2717"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>The file containing the record to be read.</p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The character set the file is encoded in. Default:
     <code class="literal">"UTF-8"</code>.</p></dd><dt><span class="term"><code class="code">"header"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>Indicates the first line of the file contains the set of defined
     field keys. Default: <code class="literal">true</code>.</p></dd><dt><span class="term"><code class="code">"fields"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>Explicit field keys in the order they appear in a record, overriding
     any existing field header. Default: use field header.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>
      Expression that yields the target object to contain the record.
     </p><p>
      The target object is a Map&lt;String, String&gt;,
      where the "fields" are the keys.
      For example, if the target is ${exchange.credentials} and the record has
      a "username" field and a "password" field mentioned in the "fields" list,
      Then you can access
      the user name as <code class="literal">${exchange.credentials.username}</code>
      and the password as <code class="literal">${exchange.credentials.password}</code>.
     </p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the field in the file to perform the lookup on.</p></dd><dt><span class="term"><code class="code">"value"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the value to be looked-up within the file.</p></dd></dl></div></div><div class="refsect1"><a name="d132e2811"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/FileAttributesFilter.html" target="_blank">org.forgerock.openig.filter.FileAttributesFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HeaderFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HeaderFilter &#8212; remove and add headers</p></div><div class="refsect1"><a name="d132e2829"></a><h2>Description</h2><a class="indexterm" name="d132e2832"></a><p>Removes headers from and adds headers to a message. Headers are added
  to any existing headers in the message. To replace, remove the header and
  add it.</p></div><div class="refsect1"><a name="d132e2839"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "HeaderFilter",
     "config": {
         "messageType": string,
         "remove": [ string, ... ],
         "add": {
            name: [ string, ... ], ...
         }
     }
}</pre></div><div class="refsect1"><a name="d132e2844"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>Indicates the type of message in the exchange to filter headers for.
     Must be one of: <code class="literal">"REQUEST"</code>,
     <code class="literal">"RESPONSE"</code>.</p></dd><dt><span class="term"><code class="code">"remove"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>The names of header fields to remove from the message.</p></dd><dt><span class="term"><code class="code">"add"</code>: <span class="emphasis"><em>object, optional</em></span></span></dt><dd><p>Header fields to add to the message. The <code class="literal">name</code>
     specifies the header name, with an associated array of string
     values.</p></dd></dl></div></div><div class="refsect1"><a name="d132e2887"></a><h2>Examples</h2><p>Replace the host header on the incoming request with
  <code class="literal">myhost.com</code>:</p><pre class="brush: javascript;">{
     "name": "ReplaceHostFilter",
     "type": "HeaderFilter",
     "config": {
         "messageType": "REQUEST",
         "remove": [ "host" ],
         "add": {
             "host": [ "myhost.com" ]
         }
     }
}</pre><p>Add a Set-Cookie header in the response:</p><pre class="brush: javascript;">{
     "name": "SetCookieFilter",
     "type": "HeaderFilter",
     "config": {
         "messageType": "RESPONSE",
         "add": {
             "Set-Cookie": [ "mysession=12345" ]
         }
     }
}</pre><p>Add headers <code class="literal">custom1</code> and <code class="literal">custom2</code>
  to the request:</p><pre class="brush: javascript;">{
     "name": "SetCustomHeaders",
     "type": "HeaderFilter",
     "config": {
         "messageType": "REQUEST",
         "add": {
             "custom1": [ "12345", "6789" ],
             "custom2": [ "abcd" ]
         }
     }
}</pre></div><div class="refsect1"><a name="d132e2911"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/HeaderFilter.html" target="_blank">org.forgerock.openig.filter.HeaderFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HttpBasicAuthFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HttpBasicAuthFilter &#8212; perform HTTP Basic authentication</p></div><div class="refsect1"><a name="d132e2929"></a><h2>Description</h2><a class="indexterm" name="d132e2932"></a><p>
   Performs authentication through the HTTP Basic authentication scheme.
   For more information, see
   <a class="link" href="http://www.ietf.org/rfc/rfc2617.txt" target="_blank">RFC 2617</a>.
  </p><p>
   If challenged for authentication
   via a <code class="literal">401 Unauthorized</code> status code by the server,
   this filter retries the request with credentials attached.
   Once an HTTP authentication challenge is issued from the remote server,
   all subsequent requests to that remote server that pass through the filter
   include the user credentials.
  </p><p>
   If authentication fails
   (including the case of no credentials yielded from expressions),
   then the exchange is diverted to the specified authentication failure handler.
  </p></div><div class="refsect1"><a name="d132e2949"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "HttpBasicAuthFilter",
    "config": {
        "username": expression,
        "password": expression,
        "failureHandler": Handler reference,
        "cacheHeader": boolean
    }
}
  </pre></div><div class="refsect1"><a name="d132e2954"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"username"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      Expression that yields the username to supply during authentication.
     </p></dd><dt><span class="term"><code class="code">"password"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      Expression that yields the password to supply during authentication.
     </p></dd><dt><span class="term"><code class="code">"failureHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch to this Handler if authentication fails.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd><dt><span class="term"><code class="code">"cacheHeader"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to cache credentials in the session
      after the first successful authentication,
      and then replay those credentials for subsequent authentications
      in the same session.
     </p><p>
      With <code class="literal">"cacheHeader": false</code>,
      the filter generates the header for each request.
      This is useful for example when users change their passwords
      during a browser session.
     </p><p>
      Default: <code class="literal">true</code>
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e3016"></a><h2>Example</h2><pre class="brush: javascript;">
{
    "name": "TomcatAuthenticator",
    "type": "HttpBasicAuthFilter",
    "config": {
        "username": "tomcat",
        "password": "tomcat",
        "failureHandler": "TomcatAuthFailureHandler",
        "cacheHeader": false
    }
}
  </pre></div><div class="refsect1"><a name="d132e3021"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocsindex.html?org/forgerock/openig/filter/HttpBasicAuthFilter.html" target="_blank">org.forgerock.openig.filter.HttpBasicAuthFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="LocationHeaderFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>LocationHeaderFilter &#8212; rewrites Location headers</p></div><div class="refsect1"><a name="d132e3041"></a><h2>Description</h2><a class="indexterm" name="d132e3044"></a><p>Rewrites Location headers on responses that generate a redirect that
  would take the user directly to the application being proxied rather than
  taking the user through OpenIG.</p><p>For example, if OpenIG listens on
  <code class="literal">https://proxy.example.com:443/</code> and the application it
  protects listens on <code class="literal">http://www.example.com:8080/</code>, then
  you can configure this filter to rewrite redirects that would take the user
  to locations under <code class="literal">http://www.example.com:8080/</code> to go
  instead to locations under
  <code class="literal">https://proxy.example.com:443/</code>.</p></div><div class="refsect1"><a name="d132e3065"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "LocationHeaderFilter",
    "config": {
        "baseURI": expression
    }
}
  </pre><p>
   An alternative value for "type" is "RedirectFilter".
  </p></div><div class="refsect1"><a name="d132e3072"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      The base URI of the OpenIG instance.
      This is used to rewrite the Location header on the response.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e3088"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LocationRewriter",
     "type": "LocationHeaderFilter",
     "config": {
         "baseURI": "https://proxy.example.com:443/"
      }
}</pre></div><div class="refsect1"><a name="d132e3093"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/LocationHeaderFilter.html" target="_blank">org.forgerock.openig.filter.LocationHeaderFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="OAuth2ClientFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>OAuth2ClientFilter &#8212; Authenticate an end user with OAuth 2.0 delegated authorization</p></div><div class="refsect1"><a name="OAuth2ClientFilter-description"></a><h2>Description</h2><a class="indexterm" name="d132e3114"></a><p>
   An OAuth2ClientFilter is a filter
   that authenticates an end user using OAuth 2.0 delegated authorization.
   The filter can act as an OpenID Connect relying party
   as well as an OAuth 2.0 client.
  </p><p>
   The filter configuration includes the client credentials
   that are used to authenticate to identity providers.
   The client credentials can be included directly in the configuration,
   or retrieved in some other way using an
   <a href="../reference/index.html#Expressions" class="link">expression</a>.
  </p><p>
   In the case where all users share the same identity provider,
   you can configure the filter as a client of a single provider.
   You can also configure the filter to work with multiple providers,
   taking the user to a login handler page&#8212;often full of provider logos,
   and known as a <em class="firstterm">Nascar page</em>.
   The name comes from Nascar race cars,
   some of which are covered with sponsors' logos.&#8212;to choose a provider.
  </p><div class="variablelist"><p>
    What an OAuth2ClientFilter does depends on the incoming request URI.
    In the following list <em class="replaceable"><code>clientEndpoint</code></em>
    represents the value of the "clientEndpoint" in the filter configuration.
   </p><dl class="variablelist"><dt><span class="term"><code class="literal"><em class="replaceable"><code>clientEndpoint</code></em>/login/<em class="replaceable"><code>provider</code></em>?goto=<em class="replaceable"><code>url</code></em></code></span></dt><dd><p>
      Redirect the end user for authorization with the specified provider.
     </p><p>
      The provider then authenticates the end user
      and obtains authorization consent from the end user
      before redirecting the user-agent back to the callback client endpoint.
     </p><p>
      Ultimately if the entire process is successful,
      the filter saves the authorization state in the exchange
      and redirects the user-agent to the specified URL.
     </p></dd><dt><span class="term"><code class="literal"><em class="replaceable"><code>clientEndpoint</code></em>/logout?goto=<em class="replaceable"><code>url</code></em></code></span></dt><dd><p>
      Remove the authorization state for the end user
      and redirect to the specified URL.
     </p></dd><dt><span class="term"><code class="literal"><em class="replaceable"><code>clientEndpoint</code></em>/callback</code></span></dt><dd><p>
      Handle the callback from the OAuth 2.0 authorization server
      that occurs as part of the authorization process.
     </p><p>
      If the callback is handled successfully,
      the filter saves the authorization state
      in the exchange at the specified "target" location
      and redirects to the URL during login.
     </p></dd><dt><span class="term">Other request URIs</span></dt><dd><p>
      Restore authorization state in the specified "target" location
      and call the next filter or handler in the chain.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e3183"></a><h2>Usage</h2><pre class="brush: javascript;">
{
  "name": string,
  "type": "OAuth2ClientFilter",
  "config": {
    "clientEndpoint": expression,
    "failureHandler": Handler reference,
    "loginHandler": Handler reference,
    "cacheExpiration": duration string,
    "providerHandler": Handler reference,
    "providers": [ provider configuration object, ... ],
    "target": expression,
    "defaultLoginGoto": expression,
    "defaultLogoutGoto": expression,
    "requireHttps": boolean,
    "requireLogin": boolean,
    "scopes": [ expression, ...]
  }
}
  </pre></div><div class="refsect1"><a name="d132e3188"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"clientEndpoint"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      Base URI for the filter.
     </p><p>
      For example, if you set <code class="literal">"clientEndpoint": "/openid"</code>,
      then the service URIs for this filter on your OpenIG server
      are <code class="literal">/openid/login</code>, <code class="literal">/openid/logout</code>,
      and <code class="literal">/openid/callback</code>.
     </p></dd><dt><span class="term"><code class="code">"failureHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Invoke this Handler if authentication fails.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      If this handler is invoked, then the "target" in the exchange
      is populated with information about the provider, and the error
     </p><p>
      The failure object in the "target" is a simple map.
      It has the following layout.
     </p><pre class="brush: javascript;">
{
    "provider": "provider name string",
    "error": {
        "realm": "optional string",
        "scope": [ "optional required scope string", ... ],
        "error": "optional string",
        "error_description": "optional string",
        "error_uri": "optional string"
    },
    "access_token": "string",
    "id_token": "string",
    "token_type": "Bearer",
    "expires_in": "number",
    "scope": [ "optional scope string", ... ],
    "client_endpoint": "URL string"
}
     </pre><div class="itemizedlist"><p>
       In the failure object, the following fields are not always present.
       Their presence depends on when the failure occurs.
      </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>"access_token"</p></li><li class="listitem"><p>"id_token"</p></li><li class="listitem"><p>"token_type"</p></li><li class="listitem"><p>"expires_in"</p></li><li class="listitem"><p>"scope"</p></li><li class="listitem"><p>"client_endpoint"</p></li></ul></div></dd><dt><span class="term"><code class="code">"loginHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference,
     required when multiple providers are configured</em></span></span></dt><dd><p>
      Invoke this Handler the user must choose a provider.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      This handler allows the user to choose a provider,
      as in the following example that allows the user to choose between
      "openam" and "google".
     </p><pre class="brush: javascript;">
 {
    "name": "NascarPage",
    "type": "StaticResponseHandler",
    "config": {
        "status": 200,
        "entity": "&lt;html&gt;&lt;p&gt;&lt;a
                   href='/openid/login?provider=openam&amp;goto=${urlEncode(exchange.originalUri)}'
                   &gt;OpenAM Login&lt;/a&gt;&lt;/p&gt;
                   &lt;p&gt;&lt;a
                   href='/openid/login?provider=google&amp;goto=${urlEncode(exchange.originalUri)}'
                   &gt;Google Login&lt;/a&gt;&lt;/p&gt;
                   &lt;/html&gt;"
    }
}
     </pre></dd><dt><span class="term"><code class="code">"cacheExpiration"</code>: <span class="emphasis"><em>duration string, optional</em></span></span></dt><dd><p>
          Duration for which to cache user-info resources.
        </p><p>
         OpenIG lazily fetches user info from the OpenID provider.
         In other words, OpenIG only fetches the information
         when a downstream Filter or Handler uses the user info.
         Caching allows OpenIG to avoid repeated calls to OpenID providers
         when reusing the information over a short period.
        </p><div lang="en" class="itemizedlist"><p>
  A
  <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/Duration.html" target="_blank">duration</a> is a lapse of time expressed in English,
  such as "23 hours 59 minutes and 59 seconds".
 </p><p>
    Durations are not case sensitive.
  </p><p>
    Negative durations are not supported.
  </p><p>
  The following units can be used in durations.
 </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      "indefinite", "infinity", "undefined", "unlimited": unlimited duration
    </p></li><li class="listitem"><p>
      "zero", "disabled": zero-length duration
    </p></li><li class="listitem"><p>
   "days", "day", "d": days
  </p></li><li class="listitem"><p>
   "hours", "hour", "h": hours
  </p></li><li class="listitem"><p>
   "minutes", "minute", "min", "m": minutes
  </p></li><li class="listitem"><p>
   "seconds", "second", "sec", "s": seconds
  </p></li><li class="listitem"><p>
   "milliseconds", "millisecond", "millisec", "millis", "milli", "ms": milliseconds
  </p></li><li class="listitem"><p>
   "microseconds", "microsecond", "microsec", "micros", "micro", "us": microseconds
  </p></li><li class="listitem"><p>
   "nanoseconds", "nanosecond", "nanosec", "nanos", "nano", "ns": nanoseconds
  </p></li></ul></div><p>
          Default: 20 seconds
        </p><p>
         Set this to "disabled" or "zero" to disable caching.
         When caching is disabled, user info is still lazily fetched.
        </p></dd><dt><span class="term"><code class="code">"providerHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Invoke this HTTP client handler to communicate with the provider.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      Usually set this to the name of a
      <a href="../reference/index.html#ClientHandler" class="link">ClientHandler</a> configured in the heap,
      or a chain that ends in a ClientHandler.
     </p></dd><dt><span class="term"><code class="code">"providers"</code>:
     <span class="emphasis"><em>array of provider configuration objects, required</em></span></span></dt><dd><p>
      One or more provider configuration objects
      that indicate how the client communicates with authorization providers.
     </p><p>
      If the provider has a well-known configuration URL
      as defined for OpenID Connect 1.0 Discovery
      that returns JSON with at least authorization and token endpoint URLs,
      then you can specify that URL in the provider configuration.
      Otherwise, you must specify
      at least the provider authorization and token endpoint URLs,
      and optionally the user info endpoint URL.
     </p><p>
      Provider configuration objects have the following layout:
     </p><pre class="brush: javascript;">
{
    "name": string,
    "clientId": expression,
    "clientSecret": expression,
    "wellKnownConfiguration": URL string,
    "authorizeEndpoint": URI expression,
    "tokenEndpoint": URI expression,
    "userInfoEndpoint": URI expression,
    "scopes": [ "expression", ... ]
}
     </pre><div class="variablelist"><p>
       The provider configuration object properties are as follows.
      </p><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
         A name for the provider configuration.
        </p></dd><dt><span class="term"><code class="code">"clientID"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
        required</em></span></span></dt><dd><p>
         The <code class="literal">client_id</code> obtained
         when registering with the provider.
        </p></dd><dt><span class="term"><code class="code">"clientSecret"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
        required</em></span></span></dt><dd><p>
         The <code class="literal">client_secret</code> obtained
         when registering with the provider.
        </p></dd><dt><span class="term"><code class="code">"wellKnownConfiguration"</code>: <span class="emphasis"><em>URL string,
        required unless "authorizeEndpoint" and "tokenEndpoint" are specified</em></span></span></dt><dd><p>
         The URL to the well-known configuration resource
         as described in OpenID Connect 1.0 Discovery.
        </p></dd><dt><span class="term"><code class="code">"authorizeEndpoint"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
        required unless obtained through "wellKnownConfiguration"</em></span></span></dt><dd><p>
         The URL to the provider's OAuth 2.0 authorization endpoint.
        </p></dd><dt><span class="term"><code class="code">"tokenEndpoint"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
        required unless obtained through "wellKnownConfiguration"</em></span></span></dt><dd><p>
         The URL to the provider's OAuth 2.0 token endpoint.
        </p></dd><dt><span class="term"><code class="code">"userInfoEndpoint"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
        optional</em></span></span></dt><dd><p>
         The URL to the provider's OpenID Connect UserInfo endpoint.
        </p><p>
         Default: no UserInfo is obtained from the provider.
        </p></dd><dt><span class="term"><code class="code">"scopes"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#Expressions" class="link">expression</a>s,
        optional</em></span></span></dt><dd><p>
         Overrides the list of scopes specified globally for the filter.
        </p><p>
         Default: use the list of scopes specified globally for the filter.
        </p></dd></dl></div></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      Expression that yields the target object whose value is to be set,
      such as <code class="literal">${exchange.openid}</code>.
     </p><p>
      Default: <code class="literal">${exchange.openid}</code>
     </p></dd><dt><span class="term"><code class="code">"defaultLoginGoto"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      The URI to redirect to after successful authentication and authorization.
     </p><p>
      Default: return an empty page.
     </p></dd><dt><span class="term"><code class="code">"defaultLogoutGoto"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      The URI to redirect to after successful logout.
     </p><p>
      Default: return an empty page.
     </p></dd><dt><span class="term"><code class="code">"requireHttps"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to require that requests use the HTTPS scheme.
     </p><p>
      Default: true.
     </p></dd><dt><span class="term"><code class="code">"requireLogin"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to require authentication for all incoming requests.
     </p><p>
      Default: true.
     </p></dd><dt><span class="term"><code class="code">"scopes"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#Expressions" class="link">expression</a>s,
     optional</em></span></span></dt><dd><p>
      Expression that yields the scope strings to request
      of any providers contacted by this filter.
     </p><p>
      Instead of or in addition to specifying scopes globally here,
      you can also specify a list of scopes per provider
      in each provider's configuration.
      Per-provider scope lists then override this list.
     </p><p>
      Default: do not specify scopes.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e3563"></a><h2>Example</h2><p>
   The following example configures an OAuth 2.0 client filter.
   The base client endpoint is <code class="literal">/openid</code>.
   The filter uses well-known configuration endpoints
   to obtain configuration information for OpenAM and for Google as providers.
   The client credentials are not shown.
  </p><p>
   When a incoming request is made to <code class="literal">/openid/login</code>,
   this filter takes the user to a "NascarPage" to choose an identity provider.
   It then handles negotiation for authorization with the provider,
   requesting the scopes defined in "scopes".
  </p><p>
   If the authorization process completes successfully,
   then the filter injects the authorization state data
   into <code class="literal">exchange.openid</code>.
  </p><p>
   At the end of the exchange, the aim of this configuration
   is simply to dump the data obtained back in the response.
  </p><pre class="brush: javascript;">
{
    "name": "OpenIDConnectClient",
    "type": "OAuth2ClientFilter",
    "config": {
        "target"                : "${exchange.openid}",
        "scopes"                : ["openid","profile","email"],
        "clientEndpoint"        : "/openid",
        "loginHandler"          : "NascarPage",
        "failureHandler"        : "Dump",
        "providerHandler"       : "ClientHandler",
        "defaultLoginGoto"      : "/dump",
        "defaultLogoutGoto"     : "/unprotected",
        "requireHttps"          : false,
        "requireLogin"          : true,
        "providers"             : [
            {
                "name"          : "openam",
                "wellKnownConfiguration"
                                :
                  "http://openam.example.com:8080/openam/.well-known/openid-configuration",
                "clientId"      : "********",
                "clientSecret"  : "********"
            },
            {
                "name"          : "google",
                "wellKnownConfiguration"
                                :
                  "https://accounts.google.com/.well-known/openid-configuration",
                "clientId"      : "**************.apps.googleusercontent.com",
                "clientSecret"  : "**************"
            }
        ]
    }
}
  </pre><p>
   Notice that this configuration is for development and testing purposes only,
   and is not secure ("requireHttps": false).
   Make sure you do require HTTPS in production environments.
  </p></div><div class="refsect1"><a name="d132e3587"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/oauth2/client/OAuth2ClientFilter.html" target="_blank">org.forgerock.openig.filter.oauth2.client.OAuth2ClientFilter</a></p></div><div class="refsect1"><a name="d132e3594"></a><h2>See Also</h2><p>
   <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank">The OAuth 2.0 Authorization Framework</a>
  </p><p>
   <a class="link" href="http://tools.ietf.org/html/rfc6750" target="_blank">OAuth 2.0 Bearer Token Usage</a>
  </p><p>
   <a class="link" href="http://openid.net/connect/" target="_blank">OpenID Connect</a> site,
   in particular the list of standard OpenID Connect 1.0
   <a class="link" href="http://openid.net/specs/openid-connect-basic-1_0.html#Scopes" target="_blank">scope values</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="OAuth2ResourceServerFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>OAuth2ResourceServerFilter &#8212; Validate an Exchange containing an OAuth 2.0 access token</p></div><div class="refsect1"><a name="OAuth2ResourceServerFilter-description"></a><h2>Description</h2><a class="indexterm" name="d132e3630"></a><p>
   An OAuth2ResourceServerFilter is a filter
   that validates an exchange containing an OAuth 2.0 access token.
   The filter expects an OAuth 2.0 token
   from the HTTP Authorization header of the request,
   such as the following example header,
   where the OAuth 2.0 access token is
   <code class="literal">1fc0e143-f248-4e50-9c13-1d710360cec9</code>.
  </p><pre class="brush: http;">
Authorization: Bearer 1fc0e143-f248-4e50-9c13-1d710360cec9
  </pre><p>
   The filter extracts the access token,
   and then validates it against the configured "tokenInfoEndpoint" URL.
  </p><p>
   On successful validation,
   the filter includes the token info from the authorization server response
   as JSON in the exchange at the location specified by the "target" setting.
   Subsequent filters and handlers can access the token info through the exchange.
  </p><p>
   Regarding errors, if the filter configuration and access token
   together result in an invalid request to the authorization server,
   the filter returns an HTTP 400 Bad Request response to the user-agent.
  </p><p>
   If the access token is missing from the request,
   the filter returns an HTTP 401 Unauthorized response to the user-agent.
  </p><pre class="brush: http;">
HTTP/1.1 401 Unauthorized
WWW-Authenticate: Bearer realm="OpenIG"
  </pre><p>
   If the access token is not valid, for example because it has expired,
   the filter also returns an HTTP 401 Unauthorized response to the user-agent.
  </p><p>
   If the scopes for the access token do not match the specified required scopes,
   the filter returns an HTTP 403 Forbidden response to the user-agent.
  </p></div><div class="refsect1"><a name="d132e3656"></a><h2>Usage</h2><pre class="brush: javascript;">
{
  "name": string,
  "type": "OAuth2ResourceServerFilter",
  "config": {
    "providerHandler": Handler reference,
    "scopes": [ expression, ... ],
    "tokenInfoEndpoint": URL string,
    "cacheExpiration": duration string,
    "requireHttps": boolean,
    "realm": string,
    "target": expression
  }
}
  </pre><p>
   An alternative value for "type" is "OAuth2RSFilter".
  </p></div><div class="refsect1"><a name="d132e3663"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"providerHandler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Invoke this HTTP client handler to send token info requests.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p><p>
      Usually set this to the name of a
      <a href="../reference/index.html#ClientHandler" class="link">ClientHandler</a> configured in the heap.
     </p></dd><dt><span class="term"><code class="code">"scopes"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#Expressions" class="link">expressions</a>, required</em></span></span></dt><dd><p>
      The list of required OAuth 2.0 scopes for this protected resource.
     </p></dd><dt><span class="term"><code class="code">"tokenInfoEndpoint"</code>: <span class="emphasis"><em>URL string, required</em></span></span></dt><dd><p>
      The URL to the token info endpoint of the OAuth 2.0 authorization server.
     </p></dd><dt><span class="term"><code class="code">"cacheExpiration"</code>: <span class="emphasis"><em>duration string, optional</em></span></span></dt><dd><p>
      Duration for which to cache OAuth 2.0 access tokens.
     </p><p>
      Caching allows OpenIG to avoid repeated requests for token info
      when reusing the information over a short period.
     </p><div lang="en" class="itemizedlist"><p>
  A
  <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/Duration.html" target="_blank">duration</a> is a lapse of time expressed in English,
  such as "23 hours 59 minutes and 59 seconds".
 </p><p>
    Durations are not case sensitive.
  </p><p>
    Negative durations are not supported.
  </p><p>
  The following units can be used in durations.
 </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      "indefinite", "infinity", "undefined", "unlimited": unlimited duration
    </p></li><li class="listitem"><p>
      "zero", "disabled": zero-length duration
    </p></li><li class="listitem"><p>
   "days", "day", "d": days
  </p></li><li class="listitem"><p>
   "hours", "hour", "h": hours
  </p></li><li class="listitem"><p>
   "minutes", "minute", "min", "m": minutes
  </p></li><li class="listitem"><p>
   "seconds", "second", "sec", "s": seconds
  </p></li><li class="listitem"><p>
   "milliseconds", "millisecond", "millisec", "millis", "milli", "ms": milliseconds
  </p></li><li class="listitem"><p>
   "microseconds", "microsecond", "microsec", "micros", "micro", "us": microseconds
  </p></li><li class="listitem"><p>
   "nanoseconds", "nanosecond", "nanosec", "nanos", "nano", "ns": nanoseconds
  </p></li></ul></div><p>
      Default: 1 minute
     </p><p>
      Set this to "disabled" or "zero" to disable caching.
      When caching is disabled,
      each request triggers a new request to the authorization server
      to verify the access token.
     </p></dd><dt><span class="term"><code class="code">"requireHttps"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to require that requests use the HTTPS scheme.
     </p><p>
      Default: true
     </p></dd><dt><span class="term"><code class="code">"realm"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      HTTP authentication realm to include
      in the WWW-Authenticate response header field
      when returning an HTTP 401 Unauthorized status
      to a user-agent that need to authenticate.
     </p><p>
      Default: OpenIG
     </p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      Where to store the OAuth 2.0 access token in the exchange,
      such as <code class="literal">${exchange.token}</code>.
     </p><p>
      Default: <code class="literal">${exchange.oauth2AccessToken}</code>
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e3809"></a><h2>Example</h2><p>
   The following example configures an OAuth 2.0 protected resource filter
   that expects scopes "email" and "profile"
   (and returns an HTTP 403 Forbidden status if the scopes are not present),
   and validates access tokens against the OpenAM token info endpoint.
   It caches access tokens for up to 2 minutes.
  </p><pre class="brush: javascript;">
{
    "name": "ProtectedResourceFilter",
    "type": "OAuth2ResourceServerFilter",
    "config": {
        "providerHandler": "ClientHandler",
        "scopes": [
            "email",
            "profile"
        ],
        "tokenInfoEndpoint": "https://openam.example.com:8443/openam/oauth2/tokeninfo",
        "cacheExpiration": "2 minutes"
    }
}
  </pre></div><div class="refsect1"><a name="d132e3816"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/oauth2/OAuth2ResourceServerFilter.html" target="_blank">org.forgerock.openig.filter.oauth2.OAuth2ResourceServerFilter</a></p></div><div class="refsect1"><a name="d132e3823"></a><h2>See Also</h2><p>
   <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank">The OAuth 2.0 Authorization Framework</a>
  </p><p>
   <a class="link" href="http://tools.ietf.org/html/rfc6750" target="_blank">OAuth 2.0 Bearer Token Usage</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ScriptableFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ScriptableFilter &#8212; process exchange by using a script</p></div><div class="refsect1"><a name="d132e3848"></a><h2>Description</h2><a class="indexterm" name="d132e3851"></a><p>
   Processes an exchange by using a script.
  </p><div class="variablelist"><p>
    The script has access to the following global objects.
   </p><dl class="variablelist"><dt><span class="term">Any parameters passed as "args"</span></dt><dd><p>
      You can use the configuration to pass parameters to the script
      by specifying an "args" object.
     </p><p>
      Take care when naming keys in the "args" object.
      If you reuse the name of another global object,
      then you overwrite the global object value
      with the specified "args" value.
     </p></dd><dt><span class="term"><code class="literal">exchange</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/Exchange.html" target="_blank">exchange</a> provides access to the HTTP request and response.
     </p></dd><dt><span class="term"><code class="literal">globals</code></span></dt><dd><p>
      This object is a
      <a class="link" href="http://groovy.codehaus.org/groovy-jdk/index.html?java/util/Map.html" target="_blank">Map</a> that holds variables that persist across successive invocations.
     </p></dd><dt><span class="term"><code class="literal">http</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/HttpClient.html" target="_blank">http</a> object provides an embedded HTTP client.
     </p><p>
      Use this client to perform outbound HTTP requests.
     </p></dd><dt><span class="term"><code class="literal">ldap</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/ldap/LdapClient.html" target="_blank">ldap</a> object provides an embedded LDAP client.
     </p><p>
      Use this client to perform outbound LDAP requests,
      such as LDAP authentication.
     </p></dd><dt><span class="term"><code class="literal">logger</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/log/Logger.html" target="_blank">logger</a> object provides access to the server log sink.
     </p></dd><dt><span class="term"><code class="literal">next</code></span></dt><dd><p>
      The
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/handler/Handler.html" target="_blank">next</a> object refers to the next handler in the filter chain.
     </p></dd></dl></div><p>
   When finished processing the request,
   call the <code class="literal">next.handle(exchange)</code> method
   to call the next filter in the current chain.
   Everything in the script subsequent to this method call
   deals with the exchange response.
  </p></div><div class="refsect1"><a name="d132e3938"></a><h2>Usage</h2><pre class="brush: javascript;">{
    "name": string,
    "type": "ScriptableFilter",
    "config": {
        "type": string,
        "file": string,    // Use either "file"
        "source": string,  // or "source", but not both.
        "args": object
    }
}
  </pre></div><div class="refsect1"><a name="d132e3943"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"type"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>
      The Internet media type (formerly MIME type) of the script, either
      <code class="literal">"application/x-groovy"</code> for Groovy
      or <code class="literal">"text/javascript"</code> for JavaScript
     </p></dd><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      Path to the file containing the script;
      mutually exclusive with <code class="code">"source"</code>
     </p><p>
      Relative paths in the "file" field are relative
      to the base location for scripts.
      The base location depends on the configuration.
      For details see the section,
      <a href="../gateway-guide/index.html#install" class="link"><em class="citetitle">Installing OpenIG</em></a>.
     </p><p>
      The base location for Groovy scripts
      is on the classpath when the scripts are executed.
      If therefore some Groovy scripts are not in the default package,
      but instead have their own package names,
      they belong in the directory corresponding to their package name.
      For example, a script in package <code class="literal">com.example.groovy</code>
      belongs under
      <code class="filename"><em class="replaceable"><code>openig-base</code></em>/scripts/groovy/com/example/groovy/</code>.
     </p></dd><dt><span class="term"><code class="code">"source"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The script as a string;
      mutually exclusive with <code class="code">"file"</code>
     </p></dd><dt><span class="term"><code class="code">"args"</code>: <span class="emphasis"><em>object, optional</em></span></span></dt><dd><p>
      Parameters passed from the configuration to the script.
     </p><p>
      The configuration object is a map
      whose values can be scalars, arrays, objects and so forth,
      as in the following example.
     </p><pre class="brush: javascript;">
{
    "args": {
        "title": "Coffee time",
        "status": 418,
        "reason": [
            "Not Acceptable",
            "I'm a teapot",
            "Acceptable"
        ],
        "names": {
            "1": "koffie",
            "2": "kafe",
            "3": "cafe",
            "4": "kafo"
        }
    }
}
     </pre><p>
      The script can then access the "args" parameters
      in the same way as other global objects.
      The following example sets the response reason to "I'm a teapot".
     </p><pre class="brush: java;">
exchange.response.reason = reason[1]
     </pre></dd></dl></div></div><div class="refsect1"><a name="d132e4023"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/ScriptableFilter.html" target="_blank">org.forgerock.openig.filter.ScriptableFilter</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SqlAttributesFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SqlAttributesFilter &#8212; execute SQL query</p></div><div class="refsect1"><a name="d132e4043"></a><h2>Description</h2><a class="indexterm" name="d132e4046"></a><p>Executes a SQL query through a prepared statement and exposes its
  first result. Parameters in the prepared statement are derived from
  exchange-scoped expressions. The query result is exposed in an object whose
  location is specified by the <code class="literal">target</code> expression. If the
  query yields no result, then the resulting object is empty.</p><p>The execution of the query is performed lazily; it does not occur
  until the first attempt to access a value in the target. This defers the
  overhead of connection pool, network and database query processing until a
  value is first required. This also means that the parameters expressions is
  not evaluated until the object is first accessed.</p></div><div class="refsect1"><a name="d132e4058"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "SqlAttributesFilter",
     "config": {
         "dataSource": string,
         "preparedStatement": string,
         "parameters": [ expression, ... ],
         "target": lvalue-expression
     }
}</pre></div><div class="refsect1"><a name="d132e4063"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"dataSource"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The JNDI name of the factory for connections to the physical data
     source.</p></dd><dt><span class="term"><code class="code">"preparedStatement"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The parameterized SQL query to execute, with <code class="literal">?</code>
     parameter placeholders.</p></dd><dt><span class="term"><code class="code">"parameters"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#Expressions" class="link">expressions</a>,
    optional</em></span></span></dt><dd><p>The parameters to evaluate and include in the execution of the
     prepared statement.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the target object that will contain the query
     results.</p></dd></dl></div></div><div class="refsect1"><a name="d132e4115"></a><h2>Example</h2><p>Using the users sessionid from a cookie, query the database to find the
  user logged in and set the profile attributes in the exchange:</p><pre class="brush: javascript;">{
        "name": "SqlAttributesFilter",
        "type": "SqlAttributesFilter",
        "config": {
              "target": "${exchange.sql}",
              "dataSource": "java:comp/env/jdbc/mysql",
              "preparedStatement": "SELECT f.value AS 'first', l.value AS
                'last', u.mail AS 'email', GROUP_CONCAT(CAST(r.rid AS CHAR)) AS
                'roles'
                FROM sessions s
                INNER JOIN users u
                ON ( u.uid = s.uid AND u.status = 1 )
                LEFT OUTER JOIN profile_values f
                ON ( f.uid = u.uid AND f.fid = 1 )
                LEFT OUTER JOIN profile_values l
                ON ( l.uid = u.uid AND l.fid = 2 )
                LEFT OUTER JOIN users_roles r
                ON ( r.uid = u.uid )
                WHERE (s.sid = ? AND s.uid &lt;&gt; 0) GROUP BY s.sid;",
              "parameters": [ "${exchange.request.cookies
                [keyMatch(exchange.request.cookies,'JSESSION1234')]
                [0].value}" ]
         }
 }</pre><p>Lines are folded for readability in this example. In your JSON, keep
  the values for <code class="literal">"preparedStatement"</code> and
  <code class="literal">"parameters"</code> on one line.</p></div><div class="refsect1"><a name="d132e4130"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/SqlAttributesFilter.html" target="_blank">org.forgerock.openig.filter.SqlAttributesFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="StaticRequestFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>StaticRequestFilter &#8212; create new request within exchange object</p></div><div class="refsect1"><a name="d132e4148"></a><h2>Description</h2><a class="indexterm" name="d132e4151"></a><p>Creates a new request within the exchange object. It replaces any
  request that may already be present in the exchange. The request can include
  a form, specified in the <code class="literal">form</code> parameter, which is included
  in an entity encoded in <code class="literal">application/x-www-form-urlencoded</code>
  format if request method is <code class="literal">POST</code>, or otherwise as
  (additional) query parameters in the URI.</p></div><div class="refsect1"><a name="d132e4167"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "StaticRequestFilter",
     "config": {
         "method": string,
         "uri": string,
         "version": string,
         "restore": boolean,
         "headers": {
             name: [ expression, ... ], ...
         },
         "form": {
             param: [ expression, ... ], ...
         }
     }
}</pre></div><div class="refsect1"><a name="d132e4172"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"method"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The HTTP method to be performed on the resource (for example,
     <code class="literal">"GET"</code>).</p></dd><dt><span class="term"><code class="code">"uri"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The fully-qualified URI of the resource to access (for example,
     <code class="literal">"http://www.example.com/resource.txt"</code>).</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Protocol version. Default: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"restore"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to restore the original request after the exchange is handled.
     </p><p>
      Default: false
     </p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>object, optional</em></span></span></dt><dd><p>
      Header fields to set in the request.
     </p><p>
      The <code class="literal">name</code> specifies the header name.
      Its value is an array of expressions to evaluate as header values.
     </p></dd><dt><span class="term"><code class="code">"form"</code>: <span class="emphasis"><em>object, optional</em></span></span></dt><dd><p>
      A form to include in the request.
     </p><p>
      The <code class="literal">param</code> specifies the form parameter name.
      Its value is an array of expressions to evaluate as form field values.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4257"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LoginRequestFilter",
     "type": "StaticRequestFilter",
     "config": {
         "method": "POST",
         "uri": "http://10.10.0.2:8080/wp-login.php",
         "form": {
             "log": [ "george" ],
             "pwd": [ "bosco" ],
             "rememberme": [ "forever" ],
             "redirect_to": [ "http://portal.example.com:8080/wp-admin/" ],
             "testcookie": [ "1" ]
         }
     }
}</pre></div><div class="refsect1"><a name="d132e4262"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/filter/StaticRequestFilter.html" target="_blank">org.forgerock.openig.filter.StaticRequestFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SwitchFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SwitchFilter &#8212; divert exchange to other handler</p></div><div class="refsect1"><a name="d132e4280"></a><h2>Description</h2><a class="indexterm" name="d132e4283"></a><p>
   Conditionally diverts the exchange to another handler.
   If a <code class="literal">condition</code> evaluates to <code class="literal">true</code>,
   then the exchange is dispatched to the associated <code class="literal">handler</code>
   with no further processing by the switch filter.
  </p></div><div class="refsect1"><a name="d132e4299"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "SwitchFilter",
    "config": {
        "onRequest": [
            {
                "condition": expression,
                "handler": Handler reference,
            },
            ...
        ],
        "onResponse": [
            {
                "condition": expression,
                "handler": Handler reference,
            },
            ...
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e4304"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"onRequest"</code>: <span class="emphasis"><em>array of objects, optional</em></span></span></dt><dd><p>
      Conditions to test (and handler to dispatch to, if <code class="literal">true</code>)
      before the exchange is handled.
     </p></dd><dt><span class="term"><code class="code">"onResponse"</code>: <span class="emphasis"><em>array of objects, optional</em></span></span></dt><dd><p>
      Conditions to test (and handler to dispatch to, if <code class="literal">true</code>)
      after the exchange is handled.
     </p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      Condition to evaluate to determine
      if exchange should be dispatched to handler.
     </p><p>
      Default: unconditional dispatch to handler.
     </p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em><a href="../reference/index.html#handlers-conf" class="link">Handler</a> reference, required</em></span></span></dt><dd><p>
      Dispatch to this handler if the condition yields <code class="literal">true</code>.
     </p><p>
      Provide either the name of a Handler object defined in the heap,
      or an inline Handler configuration object.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4365"></a><h2>Example</h2><p>
   This example intercepts the response if it is equal to 200
   and executes the LoginRequestHandler.
   This filter might be used in a login flow
   where the request for the login page must go through to the target,
   but the response should be intercepted
   in order to send the login form to the application.
   This is typical for scenarios
   where there is a hidden value or cookie returned in the login page,
   which must be sent in the login form.
  </p><pre class="brush: javascript;">
{
    "name": "SwitchFilter",
    "type": "SwitchFilter",
    "config": {
        "onResponse": [
            {
                "condition": "${exchange.response.status == 200}",
                "handler": "LoginRequestHandler"
            }
        ]
    }
}
  </pre></div><div class="refsect1"><a name="d132e4372"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/filter/SwitchFilter.html" target="_blank">org.forgerock.openig.filter.SwitchFilter</a>
  </p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="decorators-conf"></a>Decorators</h1></div></div><hr></div><div class="partintro"><div></div><p>
    Decorators are objects that decorate other heap objects,
    adding the new behavior that the decorator provides.
    For example, you can configure a decorator object
    for capturing requests and responses to a file
    and then decorate other objects in the heap
    to trigger the capture.
   </p><p>
    To decorate other objects individually, use a local decoration
    by adding the decorator's "name" value as a top-level field of the object.
    For example, suppose a capture decorator named "capture" is defined
    in the global configuration, <code class="filename">config.json</code>.
    The decorator is configured to capture the entity but not the exchange.
   </p><pre class="brush: javascript;">
{
    "name": "capture",
    "type": "CaptureDecorator",
    "config": {
        "captureEntity": true,
        "_captureExchange": true
    }
}
   </pre><p>
    The following "ClientHandler" configuration would then capture requests
    including the entity before they are forwarded to the server.
   </p><pre class="brush: javascript;">
{
    "name": "ClientHandler",
    "type": "ClientHandler",
    "capture": "request"
}
   </pre><p>
    To decorate the "handler" for a route,
    add the decorator as a top-level field of the route.
    The following route includes an audit decoration on the "handler".
    This configuration decorates the "ClientHandler" only for the current route.
    It does not decorate other uses of "ClientHandler" in other routes.
   </p><pre class="brush: javascript;">
{
    "handler": "ClientHandler",
    "audit": "Default route"
}
   </pre><p>
    The decoration as a top-level field also does not decorate "heap" objects.
    To decorate all applicable objects defined within a Route's heap,
    configure "globalDecorators" as a top-level field of the Route.
    The "globalDecorators" field takes a map of the decorations to apply.
    For example, the following route has "audit" and "capture" decorations
    that apply to the "Chain", "HeaderFilter", and "StaticResponseHandler".
    In other words, the decorations apply to all objects in this route's heap.
   </p><pre class="brush: javascript;">
{
    "globalDecorators": {
        "audit": "My static route",
        "capture": "all"
    },
    "handler": {
        "type": "Chain",
        "config": {
            "filters": [
                {
                    "type": "HeaderFilter",
                    "config": {
                        "messageType": "RESPONSE",
                        "add": [
                            {
                                "X-Powered-By": [
                                    "OpenIG"
                                ]
                            }
                        ]
                    }
                }
            ],
            "handler": {
                "type": "StaticResponseHandler",
                "config": {
                    "status": 200,
                    "entity": "Hello World"
                }
            }
        }
    },
    "condition": "${matches(exchange.request.uri.path, '^/static')}"
}
   </pre><div class="itemizedlist"><p>
     Decorations are inherited as follows.
    </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      Local decorations that are part of an object's declaration
      are inherited wherever the object is used.
     </p></li><li class="listitem"><p>
      The "globalDecorations" on a route are inherited on child routes.
     </p></li></ul></div><p>
    To prevent loops, decorators themselves cannot be decorated.
    Instead, decorators apply only to specific types of objects
    such as Filters and Handlers.
   </p><p>
    OpenIG defines some decorators,
    such as "audit", "capture", and "timer".
    You can use these without configuring them explicitly.
    For details see the reference section,
    <a href="../reference/index.html#gateway-servlet" class="link"><em class="citetitle">Gateway Servlet</em></a>.
   </p><p>
    Take care when defining decorator names not to use names
    that unintentionally clash with field names for the decorated objects.
    For all heap objects, avoid decorators named
    "config", "name", and "type".
    For Routes, avoid decorators named
    "baseURI", "condition", "globalDecorators",
    "heap", "handler", "name", and "session".
    In <code class="filename">config.json</code>,
    also avoid "logSink" and "temporaryStorage".
    In addition, avoid decorators named "comment" or "comments".
    The best way to avoid a clash with other field names
    is to avoid OpenIG reserved field names,
    which include all purely alphanumeric field names.
    Instead use dots or dashes in your decorator names, such as "my-decorator".
   </p><p>
    Decorations can apply more than once.
    For example, if you set a decoration
    both on a Route and also on an object defined within the route,
    then OpenIG can apply the decoration twice.
    The following Route results in the request being captured twice.
   </p><pre class="brush: javascript;">
{
  "handler": {
    "type": "ClientHandler",
    "capture": "request"
  },
  "capture": "all"
}
   </pre><div class="orderedlist"><p>
     OpenIG applies decorations in this order.
    </p><ol class="orderedlist" type="1"><li class="listitem"><p>
      Local decorations
     </p></li><li class="listitem"><p>
      "globalDecorations" (first those of the parent,
      then those declared in the current route)
     </p></li><li class="listitem"><p>
      Route decorations (those decorating a route's handler)
     </p></li></ol></div><p>
    Interface Stability:
    <a href="../reference/index.html#interface-stability" class="link">Evolving</a>
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#AuditDecorator">AuditDecorator</a></span><span class="refpurpose"> &#8212; trigger notification of audit events for Filters and Handlers</span></dt><dt><span class="refentrytitle"><a href="#CaptureDecorator">CaptureDecorator</a></span><span class="refpurpose"> &#8212; capture request and response messages</span></dt><dt><span class="refentrytitle"><a href="#TimerDecorator">TimerDecorator</a></span><span class="refpurpose"> &#8212; record times to process Filters and Handlers</span></dt></dl></div></div><div lang="en" class="refentry"><a name="AuditDecorator"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AuditDecorator &#8212; trigger notification of audit events for Filters and Handlers</p></div><div class="refsect1"><a name="d132e4460"></a><h2>Description</h2><a class="indexterm" name="d132e4463"></a><p>
   Triggers notification of audit events for applicable Filters and Handlers.
  </p><p>
   OpenIG first notifies an audit system sink.
   The audit system sink takes responsibility
   for forwarding notifications to registered audit event listeners.
   The listeners take responsibility for dealing with the audit events.
   What a listener does is implementation specific, but it could for example
   publish the event to an endpoint or to a central system,
   log the event in a file, or raise an alert.
  </p><div class="variablelist"><p>
    To help listeners determine what to do with audit events,
    each audit event holds the following information about what it represents.
   </p><dl class="variablelist"><dt><span class="term"><code class="literal">exchange</code></span></dt><dd><p>
      A reference to the
      <a href="../reference/index.html#Exchange" class="link">Exchange</a>
      involved in the event.
     </p><p>
      Note that does not represent a copy of the exchange at event creation.
      If notification receivers process the event asynchronously,
      the content of the exchange can change
      between the time the event is created
      and the time the receiver processes the audit event.
     </p></dd><dt><span class="term"><code class="literal">source</code></span></dt><dd><p>
      The source of the audit event, meaning the name of the object under audit.
     </p><p>
      For details, see
      <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/audit/AuditSource.html" target="_blank">org.forgerock.openig.audit.AuditSource</a>.
     </p></dd><dt><span class="term"><code class="literal">tags</code></span></dt><dd><p>
      Strings that qualify the event.
      Entities receiving notifications can use the tags
      to select audit events of interest.
     </p><p>
      Define your own audit tags in order to
      identify particular events or routes.
     </p><div class="itemizedlist"><p>
       OpenIG provides the following built-in tags in
       <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/audit/Tag.html" target="_blank">org.forgerock.openig.audit.Tag</a>.
      </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <code class="literal">request</code>:
        This event happens before OpenIG calls the decorated object.
       </p></li><li class="listitem"><p>
        <code class="literal">response</code>:
        This event happens after the call to the decorated object
        returns or throws an exception.
       </p><p>
        When decorating a Filter, realize that the filter returns
        after handling the response,
        even if it only filters the request
        and so does nothing to the response but pass it along.
       </p></li><li class="listitem"><p>
        <code class="literal">completed</code>:
        This event happens when the processing unit under audit
        has successfully handled the exchange.
        This tag always complements a <code class="literal">response</code> tag.
       </p><p>
        Note that <code class="literal">completed</code> says nothing
        about the client application's perception
        of whether the result of the exchange was successful.
        For example, a Handler could successfully pass back
        an HTTP 404 Not Found response.
       </p></li><li class="listitem"><p>
        <code class="literal">exception</code>:
        This event happens when the processing unit under audit
        handled the exchange with errors.
        This tag always complements a <code class="literal">response</code> tag.
       </p><p>
        Note that the source object might not have thrown an exception itself,
        so it is not necessarily the source of the error.
       </p><p>
        Also note that <code class="literal">exception</code> says nothing
        about the client application's perception
        of whether the result of the exchange was a failure.
        For example, another processing unit could still pass back
        a success response to the client application or proxy
        that engaged the exchange.
       </p></li></ul></div></dd><dt><span class="term"><code class="literal">timestamp</code></span></dt><dd><p>
      Timestamp indicating when the event happened, with millisecond precision.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4565"></a><h2>Decorated Object Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": string,
    "config": object,
    "audit": string or array of strings
}
  </pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: string, required except for inline objects</span></dt><dd><p>
      The unique name of the object, just like an object that is not decorated.
     </p></dd><dt><span class="term"><code class="code">"type"</code>: string, required</span></dt><dd><p>
      The class name of the decorated object, which must be either a
      <span class="olink">Filter</span> or a
      <a href="../reference/index.html#handlers-conf" class="link">Handler</a>.
     </p></dd><dt><span class="term"><code class="code">"config"</code>: object, required unless empty</span></dt><dd><p>
      The configuration of the object, just like an object that is not decorated.
     </p></dd><dt><span class="term"><code class="code">"audit"</code>: string or array of strings, required</span></dt><dd><p>
      Set the value to the tag(s) used to select audit events of interest.
     </p><p>
      To activate the audit decoration without setting any user-defined tags,
      set "audit" to any other value, such as <code class="literal">"audit": true</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4614"></a><h2>Examples</h2><p>
   The following example triggers an audit event on a default route.
  </p><pre class="brush: javascript;">
{
    "handler": "ClientHandler",
    "audit": "Default route"
}
  </pre><p>
   The following example triggers an audit event only on a particular object.
  </p><pre class="brush: javascript;">
{
    "name": "My Serious Error Handler",
    "type": "StaticResponseHandler",
    "config": {
        "status": 500,
        "reason": "Error",
        "entity": "&lt;html&gt;&lt;p&gt;Epic #FAIL&lt;/h2&gt;&lt;/html&gt;"
    },
    "audit": "Epic failure"
}
  </pre><p>
   To observe audit events, use a registered audit agent such as a
   <a href="../reference/index.html#MonitorEndpointHandler" class="link">MonitorEndpointHandler</a>.
  </p></div><div class="refsect1"><a name="d132e4630"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/audit/decoration/AuditDecorator.html" target="_blank">org.forgerock.openig.audit.decoration.AuditDecorator</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CaptureDecorator"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CaptureDecorator &#8212; capture request and response messages</p></div><div class="refsect1"><a name="d132e4650"></a><h2>Description</h2><a class="indexterm" name="d132e4653"></a><p>
   Captures request and response messages for further analysis.
  </p></div><div class="refsect1"><a name="d132e4660"></a><h2>Decorator Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "CaptureDecorator",
    "config": {
        "logSink": LogSink reference,
        "captureEntity": boolean,
        "captureExchange": boolean
    }
}
  </pre><div class="variablelist"><p>
    The decorator configuration has these properties.
   </p><dl class="variablelist"><dt><span class="term"><code class="code">"logSink"</code>: <span class="emphasis"><em>LogSink reference, optional</em></span></span></dt><dd><p>
      Capture requests and responses to this LogSink.
     </p><p>
      Provide either the name of a LogSink object defined in the heap,
      or an inline LogSink configuration object.
     </p><p>
      Default: use the "LogSink" configured for the decorated object.
      This makes it possible to keep all logs in a central location.
     </p></dd><dt><span class="term"><code class="code">"captureEntity"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether the message entity should be captured.
     </p><p>
      The filter omits binary entities,
      instead writing a <code class="literal">[binary entity]</code> marker to the file.
     </p><p>
      Default: false
     </p></dd><dt><span class="term"><code class="code">"captureExchange"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether the exchange, excluding the request and response,
      should be captured as JSON.
     </p><p>
      Default: false
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4711"></a><h2>Decorated Object Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": string,
    "config": object,
    decorator name: capture point(s)
}
  </pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: string, required except for inline objects</span></dt><dd><p>
      The unique name of the object, just like an object that is not decorated
     </p></dd><dt><span class="term"><code class="code">"type"</code>: string, required</span></dt><dd><p>
      The class name of the decorated object, which must be either a
      <span class="olink">Filter</span> or a
      <a href="../reference/index.html#handlers-conf" class="link">Handler</a>
     </p></dd><dt><span class="term"><code class="code">"config"</code>: object, required unless empty</span></dt><dd><p>
      The configuration of the object, just like an object that is not decorated
     </p></dd><dt><span class="term"><em class="replaceable"><code>decorator name</code></em>: capture point(s), optional</span></dt><dd><p>
   The <em class="replaceable"><code>decorator name</code></em> must match
   the "name" of the CaptureDecorator.
   For example, if the CaptureDecorator has "name": "capture",
   then <em class="replaceable"><code>decorator name</code></em> is "capture".
  </p><div class="variablelist"><p>
    The capture point(s) are either a single string, or an array of strings.
    The strings are documented here in lowercase, but are not case-sensitive.
   </p><dl class="variablelist"><dt><span class="term"><code class="code">"all"</code></span></dt><dd><p>
      Capture at all available capture points
     </p></dd><dt><span class="term"><code class="code">"request"</code></span></dt><dd><p>
      Capture the request as it enters the Filter or Handler
     </p></dd><dt><span class="term"><code class="code">"filtered_request"</code></span></dt><dd><p>
      Capture the request as it leaves the Filter
     </p><p>
      Only applies to Filters
     </p></dd><dt><span class="term"><code class="code">"response"</code></span></dt><dd><p>
      Capture the response as it enters the Filter or leaves the Handler
     </p></dd><dt><span class="term"><code class="code">"filtered_response"</code></span></dt><dd><p>
      Capture the response as it leaves the Filter
     </p><p>
      Only applies to Filters
     </p></dd></dl></div></dd></dl></div></div><div class="refsect1"><a name="d132e4804"></a><h2>Examples</h2><p>
   Decorator configured to log the entity:
  </p><pre class="brush: javascript;">
{
    "name": "capture",
    "type": "CaptureDecorator",
    "config": {
        "captureEntity": true
    }
}
  </pre><p>
   Decorator configured not to log the entity:
  </p><pre class="brush: javascript;">
{
    "name": "capture",
    "type": "CaptureDecorator"
}
  </pre><p>
   Decorator configured to log the exchange in JSON format,
   excluding the request and the response:
  </p><pre class="brush: javascript;">
{
    "name": "capture",
    "type": "CaptureDecorator",
    "config": {
        "captureExchange": true
    }
}
  </pre><p>
   To capture requests and responses with the entity
   before sending the request and before returning the response,
   do so as in the following example.
  </p><pre class="brush: javascript;">
{
    "heap": [
        {
            "name": "capture",
            "type": "CaptureDecorator",
            "config": {
                "captureEntity": true
            }
        },
        {
            "name": "ClientHandler",
            "type": "ClientHandler",
            "capture": [
                "request",
                "response"
            ]
        }
    ],
    "handler": "ClientHandler"
}
  </pre><p>
   To capture all transformed requests and responses as they leave filters,
   decorate the Route as in the following example.
   This Route uses the default CaptureDecorator.
  </p><pre class="brush: javascript;">
{
    "handler": {
        "type": "Chain",
        "config": {
            "filters": [
                {
                    "type": "HeaderFilter",
                    "config": {
                        "messageType": "REQUEST",
                        "add": {
                            "X-RequestHeader": [
                                "Capture at filtered_request point",
                                "And at filtered_response point"
                            ]
                        }
                    }
                },
                {
                    "type": "HeaderFilter",
                    "config": {
                        "messageType": "RESPONSE",
                        "add": {
                            "X-ResponseHeader": [
                                "Capture at filtered_response point"
                            ]
                        }
                    }
                }
            ],
            "handler": {
                "type": "StaticResponseHandler",
                "config": {
                    "status": 200,
                    "reason": "OK",
                    "entity": "&lt;html&gt;&lt;p&gt;Hello, World!&lt;/p&gt;&lt;/html&gt;"
                }
            }
        }
    },
    "capture": [
        "filtered_request",
        "filtered_response"
    ]
}
  
  </pre><p>
   To capture the exchange as JSON, excluding the request and response,
   before sending the request and before returning the response,
   do so as in the following example.
  </p><pre class="brush: javascript;">
{
    "heap": [
        {
            "name": "capture",
            "type": "CaptureDecorator",
            "config": {
                "captureExchange": true
            }
        },
        {
            "name": "ClientHandler",
            "type": "ClientHandler",
            "capture": [
                "request",
                "response"
            ]
        }
    ],
    "handler": "ClientHandler"
}
  </pre></div><div class="refsect1"><a name="d132e4831"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/decoration/capture/CaptureDecorator.html" target="_blank">org.forgerock.openig.decoration.capture.CaptureDecorator</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="TimerDecorator"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TimerDecorator &#8212; record times to process Filters and Handlers</p></div><div class="refsect1"><a name="d132e4851"></a><h2>Description</h2><a class="indexterm" name="d132e4854"></a><p>
   Records time in milliseconds to process applicable Filters and Handlers.
   OpenIG writes the records to the LogSink
   configured for the decorated heap object.
   If no LogSink is defined for the decorated heap object,
   then OpenIG writes to the LogSink configured for the heap.
   Records include the time elapsed while processing the exchange,
   and for Filters the elapsed time spent processing the exchanged
   within the Filter itself.
  </p><p>
   OpenIG records times at log level <code class="literal">STAT</code>.
  </p><p>
   The TimerDecorator is not applicable to the
   <a href="../reference/index.html#gateway-servlet" class="link"><em class="citetitle">Gateway Servlet</em></a>,
   as the Gateway Servlet is not declared in the heap.
   Instead, OpenIG always records Gateway Servlet times
   at log level <code class="literal">STAT</code>.
  </p></div><div class="refsect1"><a name="d132e4875"></a><h2>Decorator Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "TimerDecorator"
}
  </pre><p>
   A TimerDecorator does not have configurable properties.
  </p><p>
   The Gateway Servlet creates a default TimerDecorator named "timer"
   at startup time in the top-level heap,
   so you can use "timer" as the decorator name
   without adding the decorator declaration explicitly.
  </p></div><div class="refsect1"><a name="d132e4884"></a><h2>Decorated Object Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": string,
    "config": object,
    decorator name: boolean
}
  </pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: string, required except for inline objects</span></dt><dd><p>
      The unique name of the object, just like an object that is not decorated
     </p></dd><dt><span class="term"><code class="code">"type"</code>: string, required</span></dt><dd><p>
      The class name of the decorated object, which must be either a
      <span class="olink">Filter</span> or a
      <a href="../reference/index.html#handlers-conf" class="link">Handler</a>
     </p></dd><dt><span class="term"><code class="code">"config"</code>: object, required unless empty</span></dt><dd><p>
      The configuration of the object, just like an object that is not decorated
     </p></dd><dt><span class="term"><code class="code"><em class="replaceable"><code>decorator name</code></em></code>: boolean, required</span></dt><dd><p>
      OpenIG looks for the presence
      of the <em class="replaceable"><code>decorator name</code></em> field
      for the TimerDecorator.
     </p><p>
      To activate the timer,
      set the value of the <em class="replaceable"><code>decorator name</code></em> field
      to <code class="literal">true</code>.
     </p><p>
      To deactivate the TimerDecorator temporarily,
      set the value to <code class="literal">false</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e4945"></a><h2>Examples</h2><p>
   To record times spent within the client handler,
   and elapsed time for operations traversing the client handler,
   use a configuration such as the following.
  </p><pre class="brush: javascript;">
{
    "handler": {
        "type": "ClientHandler"
    },
    "timer": true
}
  </pre><p>
   This configuration could result in the following log messages.
  </p><pre class="brush: plain;">
TUE DEC 02 17:20:08 CET 2014 (STAT) @Timer[top-level-handler]
Started
------------------------------
TUE DEC 02 17:20:08 CET 2014 (STAT) @Timer[top-level-handler]
Elapsed time: 40 ms
  </pre><p>
   When you decorate a Filter with a TimerDecorator,
   OpenIG can record two timer messages in the LogSink:
   the elapsed time for operations traversing the Filter,
   and the elapsed time spent within the Filter.
  </p><p>
   To record times spent within all Filters and the "handler",
   decorate the Route as in the following example.
  </p><div class="informalexample"><pre class="brush: javascript;">
{
    "handler": {
        "type": "Chain",
        "config": {
            "filters": [
                {
                    "type": "OAuth2ResourceServerFilter",
                    "config": {
                        "providerHandler": "ClientHandler",
                        "scopes": [
                            "mail",
                            "employeenumber"
                        ],
                        "tokenInfoEndpoint":
                            "http://openam.example.com:8088/openam/oauth2/tokeninfo",
                        "requireHttps": false,
                        "target": "${exchange.token}"
                    },
                    "timer": true
                },
                {
                    "type": "ScriptableFilter",
                    "config": {
                        "type": "application/x-groovy",
                        "source":
                            "import org.forgerock.json.fluent.JsonValue;
                             logger.info(exchange.token.asJsonValue() as String);
                             exchange.username = exchange.token.info.mail;
                             exchange.password = exchange.token.info.employeenumber;
                             next.handle(exchange)"
                    },
                    "timer": true
                },
                {
                    "type": "StaticRequestFilter",
                    "config": {
                        "method": "POST",
                        "uri": "http://www.example.com:8081",
                        "form": {
                            "username": [
                                "${exchange.username}"
                            ],
                            "password": [
                                "${exchange.password}"
                            ]
                        }
                    },
                    "timer": true
                }
            ],
            "handler": "ClientHandler"
        }
    },
    "condition": "${matches(exchange.request.uri.path, '^/rs')}",
    "timer": true
}

   </pre></div><p>
   This configuration could result in the following log messages.
  </p><div class="informalexample"><pre class="brush: plain;">
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[top-level-handler]
Started
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{OAuth2ResourceServerFilter}/handler/config/filters/0]
Started
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{ScriptableFilter}/handler/config/filters/1]
Started
------------------------------
...
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{StaticRequestFilter}/handler/config/filters/2]
Started
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{StaticRequestFilter}/handler/config/filters/2]
Elapsed time: 5 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{StaticRequestFilter}/handler/config/filters/2]
Elapsed time (within the object): 0 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{ScriptableFilter}/handler/config/filters/1]
Elapsed time: 24 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{ScriptableFilter}/handler/config/filters/1]
Elapsed time (within the object): 18 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{OAuth2ResourceServerFilter}/handler/config/filters/0]
Elapsed time: 37 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[{OAuth2ResourceServerFilter}/handler/config/filters/0]
Elapsed time (within the object): 13 ms
------------------------------
TUE DEC 02 17:26:43 CET 2014 (STAT) @Timer[top-level-handler]
Elapsed time: 37 ms
   </pre></div><p>
   You can then deactivate the timer
   by setting the values to <code class="literal">false</code>.
  </p><pre class="brush: javascript;">
{
    "timer": false
}
  </pre></div><div class="refsect1"><a name="d132e4977"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/decoration/timer/TimerDecorator.html" target="_blank">org.forgerock.openig.decoration.timer.TimerDecorator</a>
  </p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="misc-conf"></a>Miscellaneous Heap Objects</h1></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#ConsoleLogSink">ConsoleLogSink</a></span><span class="refpurpose"> &#8212; log to standard error</span></dt><dt><span class="refentrytitle"><a href="#FileLogSink">FileLogSink</a></span><span class="refpurpose"> &#8212; log to a file</span></dt><dt><span class="refentrytitle"><a href="#HttpClient">HttpClient</a></span><span class="refpurpose"> &#8212; group settings and submit requests to remote servers</span></dt><dt><span class="refentrytitle"><a href="#JwtSession">JwtSession</a></span><span class="refpurpose"> &#8212; store sessions in encrypted JWT cookies</span></dt><dt><span class="refentrytitle"><a href="#KeyManager">KeyManager</a></span><span class="refpurpose"> &#8212; configure a Java Secure Socket Extension KeyManager</span></dt><dt><span class="refentrytitle"><a href="#KeyStore">KeyStore</a></span><span class="refpurpose"> &#8212; configure a Java KeyStore</span></dt><dt><span class="refentrytitle"><a href="#NullLogSink">NullLogSink</a></span><span class="refpurpose"> &#8212; discards log messages</span></dt><dt><span class="refentrytitle"><a href="#TemporaryStorage">TemporaryStorage</a></span><span class="refpurpose"> &#8212; cache streamed content</span></dt><dt><span class="refentrytitle"><a href="#TrustManager">TrustManager</a></span><span class="refpurpose"> &#8212; configure a Java Secure Socket Extension TrustManager</span></dt></dl></div><div lang="en" class="refentry"><a name="ConsoleLogSink"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ConsoleLogSink &#8212; log to standard error</p></div><div class="refsect1"><a name="d132e5000"></a><h2>Description</h2><a class="indexterm" name="d132e5003"></a><p>
   A log sink that writes log entries to the standard error stream.
  </p></div><div class="refsect1"><a name="d132e5010"></a><h2>Usage</h2><pre class="brush: javascript;">
{
     "name": string,
     "type": "ConsoleLogSink",
     "config": {
         "level": string,
         "stream": string
    }
}
  </pre></div><div class="refsect1"><a name="d132e5015"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"level"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
   The level of log entries to display in the console.
  </p><p>
   Must be one of the following settings.
   These are ordered from most verbose to least verbose.
   <code class="literal">ALL</code> (log all messages),
   <code class="literal">TRACE</code> (log low-level tracing information),
   <code class="literal">DEBUG</code> (log debugging information),
   <code class="literal">STAT</code> (log performance measurement statistics),
   <code class="literal">CONFIG</code> (log configuration information),
   <code class="literal">INFO</code> (log general information),
   <code class="literal">WARNING</code> (log potential problems),
   <code class="literal">ERROR</code> (log serious failures),
   <code class="literal">OFF</code> (log no messages).
  </p><p>
   Default: <code class="literal">INFO</code>.
  </p></dd><dt><span class="term"><code class="code">"stream"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
         The standard output to use to display logs in the console.
       </p><p>
         Must be one of the following settings.
         <code class="literal">ERR</code> (use standard error: System.err),
         <code class="literal">OUT</code> (use standard output: System.out),
         <code class="literal">AUTO</code> (select standard error or output depending on
         the message log level: TRACE, DEBUG, STAT, CONFIG, INFO print to
         System.out, WARNING and ERROR print to System.err).
       </p><p>
         Default: <code class="literal">ERR</code>.
       </p></dd></dl></div></div><div class="refsect1"><a name="d132e5091"></a><h2>Example</h2><pre class="brush: javascript;">
{
     "name": "LogSink",
     "comment": "Default sink for logging information.",
     "type": "ConsoleLogSink",
     "config": {
         "level": "DEBUG",
         "stream": "AUTO"
     }
}
  </pre></div><div class="refsect1"><a name="d132e5096"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/log/ConsoleLogSink.html" target="_blank">org.forgerock.openig.log.ConsoleLogSink</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="FileLogSink"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>FileLogSink &#8212; log to a file</p></div><div class="refsect1"><a name="d132e5116"></a><h2>Description</h2><a class="indexterm" name="d132e5119"></a><p>
   A log sink that writes log entries to a file using the UTF-8 character set.
  </p></div><div class="refsect1"><a name="d132e5126"></a><h2>Usage</h2><pre class="brush: javascript;">
{
     "name": string,
     "type": "FileLogSink",
     "config": {
         "file": configuration expression,
         "level": string
     }
}
  </pre></div><div class="refsect1"><a name="d132e5131"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em>configuration <a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      The path to the log file.
     </p><p lang="en">
      A configuration expression is independent of the
      <a href="../reference/index.html#Exchange" class="link">exchange</a>,
      so do not use expressions that reference exchange properties.
      You can, however, use
      <code class="literal">${env['<em class="replaceable"><code>variable</code></em>']}</code>,
      <code class="literal">${system['<em class="replaceable"><code>property</code></em>']}</code>,
      and all the built-in
      <a href="../reference/index.html#Functions" class="link">functions</a>.
</p></dd><dt><span class="term"><code class="code">"level"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
   The level of log entries to display in the console.
  </p><p>
   Must be one of the following settings.
   These are ordered from most verbose to least verbose.
   <code class="literal">ALL</code> (log all messages),
   <code class="literal">TRACE</code> (log low-level tracing information),
   <code class="literal">DEBUG</code> (log debugging information),
   <code class="literal">STAT</code> (log performance measurement statistics),
   <code class="literal">CONFIG</code> (log configuration information),
   <code class="literal">INFO</code> (log general information),
   <code class="literal">WARNING</code> (log potential problems),
   <code class="literal">ERROR</code> (log serious failures),
   <code class="literal">OFF</code> (log no messages).
  </p><p>
   Default: <code class="literal">INFO</code>.
  </p></dd></dl></div></div><div class="refsect1"><a name="d132e5214"></a><h2>Example</h2><pre class="brush: javascript;">
{
     "name": "LogSink",
     "type": "FileLogSink",
     "config": {
         "file": "${system['log'] ? system['log'] : '/tmp/proxy.log'}",
         "level": "DEBUG"
     }
}
  </pre></div><div class="refsect1"><a name="d132e5219"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/log/FileLogSink.html" target="_blank">org.forgerock.openig.log.FileLogSink</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HttpClient"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HttpClient &#8212; group settings and submit requests to remote servers</p></div><div class="refsect1"><a name="HttpClient-description"></a><h2>Description</h2><a class="indexterm" name="d132e5242"></a><p>
   Groups settings and submits requests to remote servers.
  </p><p>
   You configure <code class="literal">HttpClient</code> objects in order to
   specify HTTP client settings for
   <a href="../reference/index.html#ClientHandler" class="link">ClientHandler</a> objects.
  </p></div><div class="refsect1"><a name="d132e5257"></a><h2>Usage</h2><pre class="brush: javascript;">
{
  "name": string,
  "type": "HttpClient",
  "config": {
    "connections": number,
    "disableReuseConnection": boolean,
    "disableRetries": boolean,
    "hostnameVerifier": string,
    "soTimeout": duration string,
    "connectionTimeout": duration string,
    "keyManager": KeyManager reference(s),
    "trustManager": TrustManager reference(s),
  }
}
  </pre></div><div class="refsect1"><a name="d132e5262"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"connections"</code>: <span class="emphasis"><em>number, optional</em></span></span></dt><dd><p>
      The maximum number of connections to open, from 1-64 inclusive.
     </p><p>
      Default: 64
     </p></dd><dt><span class="term"><code class="code">"connectionTimeout"</code>: <span class="emphasis"><em>duration string, optional</em></span></span></dt><dd><p>
      Amount of time to wait to establish a connection, expressed as a duration
     </p><div lang="en" class="itemizedlist"><p>
  A
  <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/Duration.html" target="_blank">duration</a> is a lapse of time expressed in English,
  such as "23 hours 59 minutes and 59 seconds".
 </p><p>
    Durations are not case sensitive.
  </p><p>
    Negative durations are not supported.
  </p><p>
  The following units can be used in durations.
 </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      "indefinite", "infinity", "undefined", "unlimited": unlimited duration
    </p></li><li class="listitem"><p>
      "zero", "disabled": zero-length duration
    </p></li><li class="listitem"><p>
   "days", "day", "d": days
  </p></li><li class="listitem"><p>
   "hours", "hour", "h": hours
  </p></li><li class="listitem"><p>
   "minutes", "minute", "min", "m": minutes
  </p></li><li class="listitem"><p>
   "seconds", "second", "sec", "s": seconds
  </p></li><li class="listitem"><p>
   "milliseconds", "millisecond", "millisec", "millis", "milli", "ms": milliseconds
  </p></li><li class="listitem"><p>
   "microseconds", "microsecond", "microsec", "micros", "micro", "us": microseconds
  </p></li><li class="listitem"><p>
   "nanoseconds", "nanosecond", "nanosec", "nanos", "nano", "ns": nanoseconds
  </p></li></ul></div><p>
      Default: 10 seconds
     </p></dd><dt><span class="term"><code class="code">"disableRetries"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to disable automatic retries for failed requests.
     </p><p>
      Default: <code class="literal">true</code>
     </p></dd><dt><span class="term"><code class="code">"disableReuseConnection"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>
      Whether to disable connection reuse.
     </p><p>
      Default: <code class="literal">true</code>
     </p></dd><dt><span class="term"><code class="code">"hostnameVerifier"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      How to handle hostname verification for outgoing SSL connections.
     </p><div class="itemizedlist"><p>
       Set this to one of the following values.
      </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <code class="literal">ALLOW_ALL</code>: turn off verification.
       </p></li><li class="listitem"><p>
        <code class="literal">BROWSER_COMPATIBLE</code>:
        match the hostname either as the value of the the first CN,
        or any of the subject-alt names.
       </p><p>
        A wildcard can occur in the CN, and in any of the subject-alt names.
        Wildcards match all subdomains, so <code class="literal">*.example.com</code>
        matches <code class="literal">www.example.com</code>
        and <code class="literal">some.host.example.com</code>.
       </p></li><li class="listitem"><p>
        <code class="literal">STRICT</code>:
        match the hostname either as the value of the the first CN,
        or any of the subject-alt names.
       </p><p>
        A wildcard can occur in the CN, and in any of the subject-alt names.
        Wildcards match one domain level,
        so <code class="literal">*.example.com</code>
        matches <code class="literal">www.example.com</code>
        but not <code class="literal">some.host.example.com</code>.
       </p></li></ul></div><p>
      Default: <code class="literal">ALLOW_ALL</code>
     </p></dd><dt><span class="term"><code class="code">"keyManager"</code>: <span class="emphasis"><em><a href="../reference/index.html#KeyManager" class="link">KeyManager</a> reference(s), optional</em></span></span></dt><dd><p>
      The key manager(s) that handle(s) this client's keys and certificates.
     </p><p>
      The value of this field can be a single reference,
      or an array of references.
     </p><p>
      Provide either the name(s) of KeyManager object(s) defined in the heap,
      or specify the configuration object(s) inline.
     </p><p>
      You can specify either a single KeyManager,
      as in <code class="literal">"keyManager": "MyKeyManager"</code>,
      or an array of KeyManagers, as in
      <code class="literal">"keyManager": [ "FirstKeyManager", "SecondKeyManager" ]</code>.
     </p><p>
      If you do not configure a key manager,
      then the client cannot present a certificate,
      and so cannot play the client role in mutual authentication.
     </p></dd><dt><span class="term"><code class="code">"soTimeout"</code>: <span class="emphasis"><em>duration string, optional</em></span></span></dt><dd><p>
      Socket timeout, after which stalled connections are destroyed,
      expressed as a duration
     </p><div lang="en" class="itemizedlist"><p>
  A
  <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/Duration.html" target="_blank">duration</a> is a lapse of time expressed in English,
  such as "23 hours 59 minutes and 59 seconds".
 </p><p>
    Durations are not case sensitive.
  </p><p>
    Negative durations are not supported.
  </p><p>
  The following units can be used in durations.
 </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      "indefinite", "infinity", "undefined", "unlimited": unlimited duration
    </p></li><li class="listitem"><p>
      "zero", "disabled": zero-length duration
    </p></li><li class="listitem"><p>
   "days", "day", "d": days
  </p></li><li class="listitem"><p>
   "hours", "hour", "h": hours
  </p></li><li class="listitem"><p>
   "minutes", "minute", "min", "m": minutes
  </p></li><li class="listitem"><p>
   "seconds", "second", "sec", "s": seconds
  </p></li><li class="listitem"><p>
   "milliseconds", "millisecond", "millisec", "millis", "milli", "ms": milliseconds
  </p></li><li class="listitem"><p>
   "microseconds", "microsecond", "microsec", "micros", "micro", "us": microseconds
  </p></li><li class="listitem"><p>
   "nanoseconds", "nanosecond", "nanosec", "nanos", "nano", "ns": nanoseconds
  </p></li></ul></div><p>
      Default: 10 seconds
     </p></dd><dt><span class="term"><code class="code">"trustManager"</code>: <span class="emphasis"><em><a href="../reference/index.html#TrustManager" class="link">TrustManager</a> reference(s), optional</em></span></span></dt><dd><p>
      The trust managers that handle(s) peers' public key certificates.
     </p><p>
      The value of this field can be a single reference,
      or an array of references.
     </p><p>
      Provide either the name(s) of TrustManager object(s) defined in the heap,
      or specify the configuration object(s) inline.
     </p><p>
      You can specify either a single
      <a href="../reference/index.html#TrustManager" class="link">TrustManager</a>, as in
      <code class="literal">"trustManager": "MyTrustManager"</code>,
      or an array of KeyManagers, as in
      <code class="literal">"trustManager": [ "FirstTrustManager", "SecondTrustManager" ]</code>.
     </p><p>
      If you do not configure a trust manager,
      then the client uses only the default Java trust store.
      The default Java trust store depends on the Java environment.
      For example, <code class="filename">$JAVA_HOME/lib/security/cacerts</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e5528"></a><h2>Example</h2><pre class="brush: javascript;">
{
    "name": "HttpClient",
    "type": "HttpClient",
    "config": {
        "connections": 64,
        "disableReuseConnection": true,
        "disableRetries": true,
        "hostnameVerifier": "BROWSER_COMPATIBLE",
        "soTimeout": "10 seconds",
        "connectionTimeout": "10 seconds",
        "keyManager": {
            "type": "KeyManager",
            "config": {
                "keystore": {
                    "type": "KeyStore",
                    "config": {
                        "url": "file://${env['HOME']}/keystore.jks",
                        "password": "${system['keypass']}"
                    }
                },
                "password": "${system['keypass']}"
            }
        },
        "trustManager": {
            "type": "TrustManager",
            "config": {
                "keystore": {
                    "type": "KeyStore",
                    "config": {
                        "url": "file://${env['HOME']}/truststore.jks",
                        "password": "${system['trustpass']}"
                    }
                }
            }
        }
    }
}
  </pre></div><div class="refsect1"><a name="d132e5533"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/HttpClient.html" target="_blank">org.forgerock.openig.http.HttpClient</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="JwtSession"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>JwtSession &#8212; store sessions in encrypted JWT cookies</p></div><div class="refsect1"><a name="d132e5553"></a><h2>Description</h2><a class="indexterm" name="d132e5556"></a><p>
   A JwtSession object holds settings for storing session information
   in encrypted JSON Web Token (JWT) cookies.
  </p><p>
   In this context "encrypted JWT cookie" means an HTTP cookie
   whose value is an encrypted JWT.
   The payload of the encrypted JWT is
   a JSON representation of the session information.
  </p><p>
   The JWT cookie lifetime is "Session" (not persistent),
   meaning the user-agent deletes the JWT cookie when it shuts down.
  </p><p>
   When using this storage implementation,
   you must use data types for session information that can be mapped to
   <a class="link" href="http://json.org" target="_blank">JavaScript Object Notation</a> (JSON).
   JSON allows strings, numbers,
   <code class="literal">true</code>, <code class="literal">false</code>, <code class="literal">null</code>,
   as well as arrays and JSON objects composed of the same primitives.
   Java and Groovy types that can be mapped include
   Java primitive types and <code class="literal">null</code>,
   String and CharSequence objects,
   as well as List and Map objects.
  </p><p>
   As browser cookie storage capacity is limited to 4 KB,
   and encryption adds overhead,
   take care to limit the size of any JSON that you store.
   Rather than store larger data in the session information,
   consider storing a reference instead.
  </p><p>
   When an exchange enters a route that uses a new session type,
   the scope of the session information becomes limited to the route.
   OpenIG builds a new session object
   and does not propagate any existing session information to the new object.
   <code class="literal">exchange.session</code> references the new session object.
   When the exchange then exits the route,
   the session object is closed, and serialized to a JWT cookie in this case,
   and <code class="literal">exchange.session</code> references the previous session object.
   Session information set inside the route is no longer available.
  </p><p>
   An HTTP client that performs multiple requests in a session
   that modify the content of its session
   can encounter inconsistencies in the session information.
   This is because OpenIG does not share JwtSessions across threads.
   Instead, each thread has its own JwtSession objects
   that it modifies as necessary,
   writing its own session to the JWT cookie
   regardless of what other threads do.
  </p></div><div class="refsect1"><a name="d132e5596"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "JwtSession",
    "config": {
        "keystore": KeyStore reference,
        "alias": string,
        "password": configuration expression,
        "cookieName": string
    }
}
  </pre><p>
   An alternative value for "type" is "JwtSessionFactory".
  </p></div><div class="refsect1"><a name="d132e5603"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"keystore"</code>: <span class="emphasis"><em><a href="../reference/index.html#KeyStore" class="link">KeyStore</a> reference, optional</em></span></span></dt><dd><p>
      The key store holding the key pair
      with the private key used to encrypt the JWT.
     </p><p>
      Provide either the name of the KeyStore object defined in the heap,
      or the inline KeyStore configuration object inline.
     </p><p>
      Default: When no "keystore" is specified,
      OpenIG generates a unique key pair,
      and stores the key pair in memory.
      With JWTs encrypted using a unique key pair generated at runtime,
      OpenIG cannot decrypt the JWTs after a restart,
      nor can it decrypt such JWTs encrypted by another OpenIG server.
     </p></dd><dt><span class="term"><code class="code">"alias"</code>: <span class="emphasis"><em>string,
     required when "keystore" is used</em></span></span></dt><dd><p>
      Alias for the private key.
     </p></dd><dt><span class="term"><code class="code">"password"</code>: <span class="emphasis"><em>configuration <a href="../reference/index.html#Expressions" class="link">expression</a>,
     required when "keystore" is used</em></span></span></dt><dd><p>
      The password to read the private key from the key store.
     </p><p lang="en">
      A configuration expression is independent of the
      <a href="../reference/index.html#Exchange" class="link">exchange</a>,
      so do not use expressions that reference exchange properties.
      You can, however, use
      <code class="literal">${env['<em class="replaceable"><code>variable</code></em>']}</code>,
      <code class="literal">${system['<em class="replaceable"><code>property</code></em>']}</code>,
      and all the built-in
      <a href="../reference/index.html#Functions" class="link">functions</a>.
</p></dd><dt><span class="term"><code class="code">"cookieName"</code> <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      The name of the JWT cookie stored on the user-agent.
     </p><p>
      Default: <code class="literal">openig-jwt-session</code>
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e5682"></a><h2>Example</h2><p>
   The following example defines a JwtSession
   for storing session information
   in a JWT token cookie named <code class="literal">OpenIG</code>.
   The JWT is encrypted with a private key
   that is recovered using the alias <code class="literal">private-key</code>,
   and stored in the key store.
   The password is both the password for the key store and also the private key.
  </p><pre class="brush: javascript;">
{
    "name": "JwtSession",
    "type": "JwtSession",
    "config": {
        "keystore": {
            "type": "KeyStore",
            "config": {
                "url": "file://${env['HOME']}/keystore.jks",
                "password": "${system['keypass']}"
            }
        },
        "alias": "private-key",
        "password": "${system['keypass']}",
        "cookieName": "OpenIG"
    }
}
  </pre></div><div class="refsect1"><a name="d132e5695"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/jwt/JwtSessionFactory.html" target="_blank">org.forgerock.openig.jwt.JwtSessionFactory</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="KeyManager"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>KeyManager &#8212; configure a Java Secure Socket Extension KeyManager</p></div><div class="refsect1"><a name="d132e5715"></a><h2>Description</h2><a class="indexterm" name="d132e5718"></a><p>
   This represents the configuration for a Java Secure Socket Extension
   <a class="link" href="http://docs.oracle.com/javase/7/docs/api/index.html?javax/net/ssl/KeyManager.html" target="_blank">KeyManager</a>,
   which manages the keys used to authenticate an SSLSocket to a peer.
   The configuration references the "keystore" that actually holds the keys.
  </p></div><div class="refsect1"><a name="d132e5728"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "KeyManager",
    "config": {
        "keystore": KeyStore reference,
        "password": expression,
        "alg": string
    }
}
  </pre></div><div class="refsect1"><a name="d132e5733"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"keystore"</code>: <span class="emphasis"><em><a href="../reference/index.html#KeyStore" class="link">KeyStore</a> reference, optional</em></span></span></dt><dd><p>
      The key store that references the store for the actual keys.
     </p><p>
      Provide either the name of the KeyStore object defined in the heap,
      or the inline KeyStore configuration object inline.
     </p></dd><dt><span class="term"><code class="code">"password"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      The password to read private keys from the key store.
     </p></dd><dt><span class="term"><code class="code">"alg"</code> <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      The certificate algorithm to use.
     </p><p>
      Default: the default for the platform, such as "SunX509"
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e5775"></a><h2>Example</h2><p>
   The following example configures a key manager
   that depends on a "KeyStore" configuration.
   The key store takes a password supplied as a Java system property
   when starting the container where OpenIG runs,
   as in <code class="option">-Dkeypass=<em class="replaceable"><code>password</code></em></code>.
   This configuration uses the default certificate algorithm.
  </p><pre class="brush: javascript;">
{
    "name": "MyKeyManager",
    "type": "KeyManager",
    "config": {
        "keystore": {
            "type": "KeyStore",
            "config": {
                "url": "file://${env['HOME']}/keystore.jks",
                "password": "${system['keypass']}"
            }
        },
        "password": "${system['keypass']}"
    }
}
  </pre></div><div class="refsect1"><a name="d132e5787"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/security/KeyManagerHeaplet.html" target="_blank">org.forgerock.openig.security.KeyManagerHeaplet</a>
  </p></div><div class="refsect1"><a name="d132e5795"></a><h2>See Also</h2><p>
   <a class="link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html" target="_blank"><em class="citetitle">JSSE Reference Guide</em></a>,
   <a href="../reference/index.html#KeyStore" class="link">KeyStore</a>,
   <a href="../reference/index.html#TrustManager" class="link">TrustManager</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="KeyStore"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>KeyStore &#8212; configure a Java KeyStore</p></div><div class="refsect1"><a name="d132e5822"></a><h2>Description</h2><a class="indexterm" name="d132e5825"></a><p>
   This represents the configuration for a Java
   <a class="link" href="http://docs.oracle.com/javase/7/docs/api/index.html?java/security/KeyStore.html" target="_blank">KeyStore</a>,
   which stores cryptographic private keys and public key certificates.
  </p></div><div class="refsect1"><a name="d132e5835"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": name,
    "type": "KeyStore",
    "config": {
        "url": expression,
        "password": expression,
        "type": string
    }
}
  </pre></div><div class="refsect1"><a name="d132e5840"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"url"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     required</em></span></span></dt><dd><p>
      URL to the key store file.
     </p></dd><dt><span class="term"><code class="code">"password"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
     optional</em></span></span></dt><dd><p>
      The password to read private keys from the key store.
     </p><p>
      If the key store is used as a trust store
      to store only public key certificates of peers
      and no password is required to do so,
      then you do not have to specify this field.
     </p><p>
      Default: No password is set.
     </p></dd><dt><span class="term"><code class="code">"type"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      The key store format.
     </p><p>
      Default: the default for the platform, such as "JKS"
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e5884"></a><h2>Example</h2><p>
   The following example configures a key store
   that references a Java Key Store file,
   <code class="filename">$HOME/keystore.jks</code>.
   The key store takes a password supplied as a Java system property
   when starting the container where OpenIG runs,
   as in <code class="option">-Dkeypass=<em class="replaceable"><code>password</code></em></code>.
   As the key store file uses the default format, no "type" is specified.
  </p><pre class="brush: javascript;">
{
    "name": "MyKeyStore",
    "type": "KeyStore",
    "config": {
        "url": "file://${env['HOME']}/keystore.jks",
        "password": "${system['keypass']}"
    }
}
  </pre></div><div class="refsect1"><a name="d132e5899"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/security/KeyStoreHeaplet.html" target="_blank">org.forgerock.openig.security.KeyStoreHeaplet</a>
  </p></div><div class="refsect1"><a name="d132e5907"></a><h2>See Also</h2><p>
   <a class="link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html" target="_blank"><em class="citetitle">JSSE Reference Guide</em></a>,
   <a href="../reference/index.html#KeyManager" class="link">KeyManager</a>,
   <a href="../reference/index.html#TrustManager" class="link">TrustManager</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="NullLogSink"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>NullLogSink &#8212; discards log messages</p></div><div class="refsect1"><a name="d132e5934"></a><h2>Description</h2><a class="indexterm" name="d132e5937"></a><p>
   A log sink that discards all log messages.
  </p></div><div class="refsect1"><a name="d132e5944"></a><h2>Usage</h2><pre class="brush: javascript;">
{
     "name": string,
     "type": "NullLogSink"
}
  </pre></div><div class="refsect1"><a name="d132e5949"></a><h2>Example</h2><pre class="brush: javascript;">
{
     "name": "LogSink",
     "type": "NullLogSink"
}
  </pre></div><div class="refsect1"><a name="d132e5954"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/log/NullLogSink.html" target="_blank">org.forgerock.openig.log.NullLogSink</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="TemporaryStorage"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TemporaryStorage &#8212; cache streamed content</p></div><div class="refsect1"><a name="d132e5974"></a><h2>Description</h2><a class="indexterm" name="d132e5977"></a><p>Allocates temporary buffers for caching streamed content during request
  processing. Initially uses memory; when the memory limit is exceeded, switches
  to a temporary file.</p></div><div class="refsect1"><a name="d132e5984"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "TemporaryStorage",
     "config": {
         "initialLength": number,
         "memoryLimit": number,
         "fileLimit": number,
         "directory": string
     }
}</pre></div><div class="refsect1"><a name="d132e5989"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"initialLength"</code>: <span class="emphasis"><em>number,
    optional</em></span></span></dt><dd><p>The initial length of memory buffer byte array. Default: 8192
     (8 KiB).</p></dd><dt><span class="term"><code class="code">"memoryLimit"</code>: <span class="emphasis"><em>number,
    optional</em></span></span></dt><dd><p>The length limit of the memory buffer. Exceeding this limit results
     in promotion from memory to file. Default: 65536 (64 KiB).</p></dd><dt><span class="term"><code class="code">"fileLimit"</code>: <span class="emphasis"><em>number, optional</em></span></span></dt><dd><p>The length limit of the file buffer. Exceeding this limit results in
     a thrown exception. Default: 1048576 (1 MiB).</p></dd><dt><span class="term"><code class="code">"directory"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The directory where temporary files are created. If omitted, then
     the system-dependent default temporary directory is used (typically
     <code class="literal">"/tmp"</code> on Unix systems). Default: use system-dependent
     default.</p></dd></dl></div></div><div class="refsect1"><a name="d132e6036"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/io/TemporaryStorage.html" target="_blank">org.forgerock.openig.io.TemporaryStorage</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="TrustManager"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TrustManager &#8212; configure a Java Secure Socket Extension TrustManager</p></div><div class="refsect1"><a name="d132e6054"></a><h2>Description</h2><a class="indexterm" name="d132e6057"></a><p>
   This represents the configuration for a Java Secure Socket Extension
   <a class="link" href="http://docs.oracle.com/javase/7/docs/api/index.html?javax/net/ssl/TrustManager.html" target="_blank">TrustManager</a>,
   which manages the trust material (typically X.509 public key certificates)
   used to decide whether to accept the credentials presented by a peer.
   The configuration references the "keystore"
   that actually holds the trust material.
  </p></div><div class="refsect1"><a name="d132e6067"></a><h2>Usage</h2><pre class="brush: javascript;">
{
    "name": string,
    "type": "TrustManager",
    "config": {
        "keystore": KeyStore reference,
        "alg": string
    }
}
  </pre></div><div class="refsect1"><a name="d132e6072"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"keystore"</code>: <span class="emphasis"><em><a href="../reference/index.html#KeyStore" class="link">KeyStore</a> reference, optional</em></span></span></dt><dd><p>
      The KeyStore that references the store for public key certificates.
     </p><p>
      Provide either the name of the KeyStore object defined in the heap,
      or the inline KeyStore configuration object inline.
     </p></dd><dt><span class="term"><code class="code">"alg"</code> <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>
      The certificate algorithm to use.
     </p><p>
      Default: the default for the platform, such as "SunX509"
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e6102"></a><h2>Example</h2><p>
   The following example configures a trust manager
   that depends on a "KeyStore" configuration.
   This configuration uses the default certificate algorithm.
  </p><pre class="brush: javascript;">
{
    "name": "MyTrustManager",
    "type": "TrustManager",
    "config": {
        "keystore": {
            "type": "KeyStore",
            "config": {
                "url": "file://${env['HOME']}/keystore.jks",
                "password": "${system['keypass']}"
            }
        }
    }
}
  </pre></div><div class="refsect1"><a name="d132e6109"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/security/TrustManagerHeaplet.html" target="_blank">org.forgerock.openig.security.TrustManagerHeaplet</a>
  </p></div><div class="refsect1"><a name="d132e6117"></a><h2>See Also</h2><p>
   <a class="link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html" target="_blank"><em class="citetitle">JSSE Reference Guide</em></a>,
   <a href="../reference/index.html#KeyManager" class="link">KeyManager</a>,
   <a href="../reference/index.html#KeyStore" class="link">KeyStore</a>
  </p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="expressions-conf"></a>Expressions</h1></div></div><hr></div><div class="partintro"><div></div><p>
    Many configuration parameters support dynamic expressions.
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#Expressions">Expressions</a></span><span class="refpurpose"> &#8212; expression configuration parameter values</span></dt><dt><span class="refentrytitle"><a href="#Functions">Functions</a></span><span class="refpurpose"> &#8212; built-in functions to call within expressions</span></dt><dt><span class="refentrytitle"><a href="#Patterns">Patterns</a></span><span class="refpurpose"> &#8212; regular expression patterns</span></dt></dl></div></div><div lang="en" class="refentry"><a name="Expressions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Expressions &#8212; expression configuration parameter values</p></div><div class="refsect1"><a name="expressions-description"></a><h2>Description</h2><a class="indexterm" name="d132e6153"></a><p>
   Expressions are specified as configuration parameter values
   for a number of built-in objects.
   Such expressions conform to the Universal Expression Language as specified in
   <a class="link" href="http://www.jcp.org/en/jsr/detail?id=245" target="_blank">JSR-245</a>.
  </p></div><div class="refsect1"><a name="d132e6163"></a><h2>General Syntax</h2><p>
   All expressions follow standard Universal Expression Language syntax:
   <code class="literal">${expression}</code>.
   The expression can be a simple reference to a value, a function call,
   or arbitrarily complex arithmetic, logical, relational and conditional operations.
   When supplied within a configuration parameter,
   an expression is always a string enclosed in quotation marks,
   for example: <code class="literal">"${exchange.request.method}"</code>.
  </p></div><div class="refsect1"><a name="d132e6174"></a><h2>Value Expressions</h2><p>
   A value expression references a value relative to the scope
   supplied to the expression.
   In the current version of OpenIG,
   the supplied scope is always the HTTP
   <a href="../reference/index.html#Exchange" class="link">exchange object</a>.
   For example <code class="literal">"${exchange.request.method}"</code>
   references the method of an incoming HTTP request in the exchange scope.
  </p><p>
   An <em class="firstterm">lvalue-expression</em>
   is a specific type of value expression that references a value to be written.
   For example, <code class="literal">"${exchange.session.gotoURL}"</code>
   specifies a session attribute named <code class="literal">gotoURL</code> to write a value to.
   Attempts to write values to read-only values are ignored.
  </p></div><div class="refsect1"><a name="d132e6196"></a><h2>Indexed Properties</h2><p>
   Properties of values are accessed
   using the <code class="literal">.</code> and <code class="literal">[]</code> operators,
   and can be nested arbitrarily.
  </p><p>
   The value expressions <code class="literal">"${exchange.request}"</code>
   and <code class="literal">"${exchange['request']}"</code> are equivalent.
  </p><p>
   In the case of arrays, the index of an element in the array
   is expressed as a number in brackets.
   For example,
   <code class="literal">"${exchange.request.headers['Content-Type'][0]}"</code>
   references the first <code class="literal">Content-Type</code> header value in a request.
   If a property does not exist, then the index reference
   yields a <code class="literal">null</code> (empty) value.
  </p></div><div class="refsect1"><a name="d132e6226"></a><h2>Operations</h2><p>
   Universal Expression Language supports arbitrarily complex arithmetic,
   logical, relational and conditional operations.
   They are, in order of precedence:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
     Index property value: <code class="literal">[]</code>, <code class="literal">.</code>
    </p></li><li class="listitem"><p>
     Change precedence of operation: <code class="literal">()</code>
    </p></li><li class="listitem"><p>
     Unary negative: <code class="literal">-</code>
    </p></li><li class="listitem"><p>
     Logical operations:
     <code class="literal">not</code>, <code class="literal">!</code>,
     <code class="literal">empty</code>
    </p></li><li class="listitem"><p>
     Arithmetic operations:
     <code class="literal">*</code>, <code class="literal">/</code>,
     <code class="literal">div</code>,
     <code class="literal">%</code>, <code class="literal">mod</code>
    </p></li><li class="listitem"><p>
     Binary arithmetic operations: <code class="literal">+</code>, <code class="literal">-</code>
    </p></li><li class="listitem"><p>
     Relational operations:
     <code class="literal">&lt;</code>, <code class="literal">&gt;</code>,
     <code class="literal">&lt;=</code>, <code class="literal">&gt;=</code>,
     <code class="literal">lt</code>, <code class="literal">gt</code>,
     <code class="literal">le</code>, <code class="literal">ge</code>,
     <code class="literal">==</code>, <code class="literal">!=</code>,
     <code class="literal">eq</code>, <code class="literal">ne</code>
    </p></li><li class="listitem"><p>
     Logical operations: <code class="literal">&amp;&amp;</code>, <code class="literal">and</code>,
     <code class="literal">||</code>, <code class="literal">or</code>
    </p></li><li class="listitem"><p>
     Conditional operations: <code class="literal">?</code>, <code class="literal">:</code>
    </p></li></ul></div></div><div class="refsect1"><a name="d132e6355"></a><h2>System Properties &amp; Environment Variables</h2><p>
   You can use expressions to retrieve Java system properties,
   and to retrieve environment variables.
  </p><p>
   For system properties,
   <code class="literal">${system['<em class="replaceable"><code>property</code></em>']}</code>
   yields the value of <em class="replaceable"><code>property</code></em>,
   or <code class="literal">null</code> if there is no value for <em class="replaceable"><code>property</code></em>.
   For example, <code class="literal">${system['user.home']}</code>
   yields the home directory of the user
   running the application server for OpenIG.
  </p><p>
   For environment variables,
   <code class="literal">${env['<em class="replaceable"><code>variable</code></em>']}</code>
   yields the value of <em class="replaceable"><code>variable</code></em>,
   or <code class="literal">null</code> if there is no value for <em class="replaceable"><code>variable</code></em>.
   For example, <code class="literal">${env['HOME']}</code>
   yields the home directory of the user
   running the application server for OpenIG.
  </p></div><div class="refsect1"><a name="d132e6400"></a><h2>Functions</h2><p>
   A number of
   <a href="../reference/index.html#Functions" class="link">built-in functions</a> can be called within an expression.
  </p><p>
   Syntax is <code class="literal">${function(parameter, ...)}</code>,
   where zero or more parameters are supplied to the function.
   For example, <code class="literal">"${toLowerCase(exchange.request.method)}"</code>
   yields the method of the request, converted to lower case.
   Functions can be operands for operations,
   and can yield parameters for other function calls.
  </p></div><div class="refsect1"><a name="d132e6417"></a><h2>Examples</h2><div class="informalexample"><pre class="brush: javascript;">
"${exchange.request.uri.path == '/wordpress/wp-login.php'
   and exchange.request.form['action'][0] != 'logout'}"

"${exchange.request.uri.host == 'wiki.example.com'}"

"${exchange.request.cookies[keyMatch(exchange.request.cookies,'^SESS.*')][0].value}"

"${toString(exchange.request.uri)}"

"${exchange.request.method == 'POST' and exchange.request.uri.path == '/wordpress/wp-login.php'}"

"${exchange.request.method != 'GET'}"

"${exchange.request.headers['cookie'][0]}"

"${exchange.request.uri.scheme == 'http'}"

"${not (exchange.response.status == 302 and not empty exchange.session.gotoURL)}"

"${exchange.response.headers['Set-Cookie'][0]}"

"${exchange.request.headers['host'][0]}"
   </pre></div></div><div class="refsect1"><a name="d132e6424"></a><h2>See Also</h2><p>
   <a href="../reference/index.html#Exchange" class="link">Exchange</a>
  </p><p>
   <a href="../reference/index.html#Functions" class="link">Functions</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Functions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Functions &#8212; built-in functions to call within expressions</p></div><div class="refsect1"><a name="functions-description"></a><h2>Description</h2><a class="indexterm" name="d132e6452"></a><p>A set of built-in functions that can be called from within
  <a href="../reference/index.html#Expressions" class="link">expressions</a>.</p></div><div class="refsect1"><a name="functions-contains"></a><h2>contains</h2><pre class="literallayout">contains(object, value)</pre><p>Returns <code class="literal">true</code> if the object contains the specified
  value. If the object is a string, a substring is searched for the value. If
  the object is a collection or array, its elements are searched for the
  value.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object to be searched for the presence of.</p></dd><dt><span class="term">value</span></dt><dd><p>the value to be searched for.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">true</span></dt><dd><p>if the object contains the specified value.</p></dd></dl></div></div><div class="refsect1"><a name="functions-decodeBase64"></a><h2>decodeBase64</h2><pre class="literallayout">decodeBase64(string)</pre><p>
   Returns the base64-decoded string,
   or <code class="literal">null</code> if the string is not valid Base64.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The base64-encoded string to decode.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The base64-decoded string.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-encodeBase64"></a><h2>encodeBase64</h2><pre class="literallayout">encodeBase64(string)</pre><p>
   Returns the base64-encoded string,
   or <code class="literal">null</code> if the string is <code class="literal">null</code>.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The string to encode into Base64.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The base64-encoded string.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-indexOf"></a><h2>indexOf</h2><pre class="literallayout">indexOf(string, substring)</pre><p>Returns the index within a string of the first occurrence of a specified
  substring.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be searched.</p></dd><dt><span class="term">substring</span></dt><dd><p>the value to search for within the string.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the index of the first instance of substring, or -1 if not
     found.</p></dd></dl></div></div><div class="refsect1"><a name="functions-join"></a><h2>join</h2><pre class="literallayout">join(strings, separator)</pre><p>Joins an array of strings into a single string value, with a specified
  separator.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">separator</span></dt><dd><p>the separator to place between joined elements.</p></dd><dt><span class="term">strings</span></dt><dd><p>the array of strings to be joined.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string containing the joined strings.</p></dd></dl></div></div><div class="refsect1"><a name="functions-keyMatch"></a><h2>keyMatch</h2><pre class="literallayout">keyMatch(map, pattern)</pre><p>Returns the first key found in a map that matches the specified <a href="../reference/index.html#Expressions" class="link">regular expression pattern</a>, or <code class="literal">null</code> if no such
  match is found.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">map</span></dt><dd><p>the map whose keys are to be searched.</p></dd><dt><span class="term">pattern</span></dt><dd><p>a string containing the regular expression pattern to match.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the first matching key, or <code class="literal">null</code> if no match
     found.</p></dd></dl></div></div><div class="refsect1"><a name="functions-length"></a><h2>length</h2><pre class="literallayout">length(object)</pre><p>Returns the number of items in a collection, or the number of
  characters in a string.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object whose length is to be determined.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the length of the object, or 0 if length could not be
     determined.</p></dd></dl></div></div><div class="refsect1"><a name="functions-matchingGroups"></a><h2>matchingGroups</h2><pre class="literallayout">matchingGroups(string, pattern)</pre><p>Returns an array of matching groups for a <a href="../reference/index.html#Expressions" class="link">regular expression pattern</a> against a string, or
  <code class="literal">null</code> if no such match is found. The first element of the
  array is the entire match, and each subsequent element correlates to any
  capture group specified within the regular expression.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be searched.</p></dd><dt><span class="term">pattern</span></dt><dd><p>a string containing the regular expression pattern to match.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>an array of matching groups, or <code class="literal">null</code> if no such
     match is found.</p></dd></dl></div></div><div class="refsect1"><a name="functions-matches"></a><h2>matches</h2><pre class="literallayout">matches(string, pattern)</pre><p>Returns <code class="literal">true</code> if the string contains the specified
  <a href="../reference/index.html#Expressions" class="link">regular expression pattern</a>.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be searched.</p></dd><dt><span class="term">pattern</span></dt><dd><p>a string containing the regular expression pattern to find.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">true</span></dt><dd><p>if the string contains the specified regular expression pattern.</p></dd></dl></div></div><div class="refsect1"><a name="functions-read"></a><h2>read</h2><pre class="literallayout">read(string)</pre><p>
   Takes a file name as a <code class="literal">string</code>,
   and returns the content of the file as a plain string,
   or <code class="literal">null</code> on error
   (due to the file not being found, for example).
  </p><p>
   Either provide the absolute path to the file,
   or a path relative to the location of
   the Java system property <code class="literal">user.dir</code>.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The name of the file to read.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The content of the file or <code class="literal">null</code> on error.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-readProperties"></a><h2>readProperties</h2><pre class="literallayout">readProperties(string)</pre><p>
   Takes a Java Properties file name as a <code class="literal">string</code>,
   and returns the content of the file as a key/value map of properties,
   or <code class="literal">null</code> on error
   (due to the file not being found, for example).
  </p><p>
   Either provide the absolute path to the file,
   or a path relative to the location of
   the Java system property <code class="literal">user.dir</code>.
  </p><p>
   For example, to get the value of the <code class="literal">key</code> property
   in the properties file <code class="filename">/path/to/my.properties</code>,
   use <code class="literal">${readProperties('/path/to/my.properties')['key']}</code>.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The name of the Java Properties file to read.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>
      The key/value map of properties or <code class="literal">null</code> on error.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-split"></a><h2>split</h2><pre class="literallayout">split(string, pattern)</pre><p>Splits a string into an array of substrings around matches of the given
  <a href="../reference/index.html#Expressions" class="link">regular expression
  pattern</a>.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be split.</p></dd><dt><span class="term">pattern</span></dt><dd><p>the regular expression to split substrings around.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the resulting array of split substrings.</p></dd></dl></div></div><div class="refsect1"><a name="functions-toLowerCase"></a><h2>toLowerCase</h2><pre class="literallayout">toLowerCase(string)</pre><p>Converts all of the characters in a string to lower case.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose characters are to be converted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with characters converted to lower case.</p></dd></dl></div></div><div class="refsect1"><a name="functions-toString"></a><h2>toString</h2><pre class="literallayout">toString(object)</pre><p>Returns the string value of an arbitrary object.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object whose string value is to be returned.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string value of the object.</p></dd></dl></div></div><div class="refsect1"><a name="functions-toUpperCase"></a><h2>toUpperCase</h2><pre class="literallayout">toUpperCase(string)</pre><p>Converts all of the characters in a string to upper case.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose characters are to be converted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with characters converted to upper case.</p></dd></dl></div></div><div class="refsect1"><a name="functions-trim"></a><h2>trim</h2><pre class="literallayout">trim(string)</pre><p>Returns a copy of a string with leading and trailing whitespace
  omitted.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose white space is to be omitted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with leading and trailing white space omitted.</p></dd></dl></div></div><div class="refsect1"><a name="functions-urlDecode"></a><h2>trim</h2><pre class="literallayout">urlDecode(string)</pre><p>
   Returns the URL decoding of the provided string.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The string to be URL decoded, which may be <code class="literal">null</code>.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>
      The URL decoding of the provided string,
      or <code class="literal">null</code> if string was <code class="literal">null</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-urlEncode"></a><h2>trim</h2><pre class="literallayout">urlEncode(string)</pre><p>
   Returns the URL encoding of the provided string.
  </p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>
      The string to be URL encoded, which may be <code class="literal">null</code>.
     </p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>
      The URL encoding of the provided string,
      or <code class="literal">null</code> if string was <code class="literal">null</code>.
     </p></dd></dl></div></div><div class="refsect1"><a name="functions-javadoc"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/el/Functions.html" target="_blank">org.forgerock.openig.el.Functions</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Patterns"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Patterns &#8212; regular expression patterns</p></div><div class="refsect1"><a name="d132e7068"></a><h2>Description</h2><a class="indexterm" name="d132e7071"></a><p>Patterns in configuration parameters and expressions use the standard
  Java regular expression <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" target="_blank">Pattern</a> class. For more information on regular expressions, see
  Oracle's <a class="link" href="http://download.oracle.com/javase/tutorial/essential/regex/index.html" target="_blank">tutorial on Regular Expressions</a>.</p></div><div class="refsect1"><a name="d132e7084"></a><h2>Pattern Templates</h2><p>A regular expression pattern template expresses a transformation to be
  applied for a matching regular expression pattern. It may contain references
  to <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg" target="_blank">capturing groups</a> within the match result. Each occurrence of
  <code class="literal">$g</code> (where <em class="replaceable"><code>g</code></em> is an integer value)
  is substituted by the indexed capturing group in a match result. Capturing
  group zero <code class="literal">"$0"</code> denotes the entire pattern match. A dollar
  sign or numeral literal immediately following a capture group reference can
  be included as a literal in the template by preceding it with a backslash (
  <code class="literal">\</code> ). Backslash itself must be also escaped in this
  manner.</p></div><div class="refsect1"><a name="d132e7104"></a><h2>See Also</h2><p>Java <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" target="_blank">Pattern</a> class</p><p><a class="link" href="http://download.oracle.com/javase/tutorial/essential/regex/index.html" target="_blank">Regular Expressions tutorial</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="exchange-object-model-conf"></a>Exchange Object Model</h1></div></div><hr></div><div class="partintro"><div></div><p>
    Expressions are evaluated within an exchange object model scope.
   </p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#ClientInfo">ClientInfo</a></span><span class="refpurpose"> &#8212; HTTP Exchange client information</span></dt><dt><span class="refentrytitle"><a href="#Exchange">Exchange</a></span><span class="refpurpose"> &#8212; HTTP exchange of request and response</span></dt><dt><span class="refentrytitle"><a href="#Request">Request</a></span><span class="refpurpose"> &#8212; HTTP exchange request</span></dt><dt><span class="refentrytitle"><a href="#Principal">Principal</a></span><span class="refpurpose"> &#8212; user principal in HTTP exchange</span></dt><dt><span class="refentrytitle"><a href="#Response">Response</a></span><span class="refpurpose"> &#8212; HTTP exchange response</span></dt><dt><span class="refentrytitle"><a href="#URI">URI</a></span><span class="refpurpose"> &#8212; Uniform Resource Identifier in HTTP exchange</span></dt></dl></div></div><div lang="en" class="refentry"><a name="ClientInfo"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ClientInfo &#8212; HTTP Exchange client information</p></div><div class="refsect1"><a name="d132e7133"></a><h2>Description</h2><a class="indexterm" name="d132e7136"></a><p>
   Information about the client sending the request
   in the exchange object model
  </p></div><div class="refsect1"><a name="d132e7143"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"certificates"</code>: array</span></dt><dd><p>
      List of X.509 certificates presented by the client
     </p><p>
      If the client does not present any certificates,
      OpenIG returns an empty list.
     </p><p>
      This is never <code class="literal">null</code>.
     </p></dd><dt><span class="term"><code class="code">"remoteAddress"</code>: string</span></dt><dd><p>
      The IP address of the client (or the last proxy) that sent the request
     </p></dd><dt><span class="term"><code class="code">"remoteHost"</code>: string</span></dt><dd><p>
      The fully qualified host name of the client (or the last proxy)
      that sent the request
     </p></dd><dt><span class="term"><code class="code">"remotePort"</code>: number</span></dt><dd><p>
      The source port of the client (or the last proxy) that sent the request
     </p></dd><dt><span class="term"><code class="code">"remoteUser"</code>: string</span></dt><dd><p>
      The login of the user making the request,
      or <code class="literal">null</code> if unknown
     </p><p>
      This is likely to be <code class="literal">null</code>
      unless you have deployed OpenIG
      with a non-default deployment descriptor
      that secures the OpenIG web application.
     </p></dd><dt><span class="term"><code class="code">"userAgent"</code>: string</span></dt><dd><p>
      The value of the User-Agent HTTP header in the request if any,
      otherwise <code class="literal">null</code>
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e7213"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/ClientInfo.html" target="_blank">org.forgerock.openig.http.ClientInfo</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Exchange"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Exchange &#8212; HTTP exchange of request and response</p></div><div class="refsect1"><a name="d132e7233"></a><h2>Description</h2><a class="indexterm" name="d132e7236"></a><p>
   The root object for the exchange object model:
   an HTTP exchange of request and response.
   The exchange object model parallels the document object model,
   exposing elements of the exchange.
   It supports this by exposing a set of fixed properties
   and allowing arbitrary properties to be added.
  </p></div><div class="refsect1"><a name="d132e7243"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code"><a href="../reference/index.html#ClientInfo" class="link">"clientInfo"</a></code>: object</span></dt><dd><p>
      Information about the client making the request in this HTTP exchange.
     </p></dd><dt><span class="term"><code class="code">"exchange"</code>: object</span></dt><dd><p>
      Self-referential property to make this the root object
      in the exchange object model.
     </p></dd><dt><span class="term"><code class="code">"originalUri"</code>: URI</span></dt><dd><p>
      The original target
      <a class="link" href="https://docs.oracle.com/javase/6/docs/api/index.html?java/net/URI.html" target="_blank">URI</a> for the request, as received by the web container.
     </p><p>
      The value of this field is read-only.
     </p></dd><dt><span class="term"><code class="code"><a href="../reference/index.html#Request" class="link">"request"</a></code>: object</span></dt><dd><p>
      The request portion of the HTTP exchange.
     </p></dd><dt><span class="term"><code class="code"><a href="../reference/index.html#Response" class="link">"response"</a></code>: object</span></dt><dd><p>
      The response portion of the HTTP exchange.
     </p></dd><dt><span class="term"><code class="code"><a href="../reference/index.html#Principal" class="link">"principal"</a></code>: object</span></dt><dd><p>
      The principal associated with the request,
      or <code class="literal">null</code> if unknown.
     </p></dd><dt><span class="term"><code class="code">"session"</code>: object</span></dt><dd><p>
      Session context associated with the remote client.
      Exposes session attributes as name-value pairs,
      where both name and value are strings.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e7315"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/http/Exchange.html" target="_blank">org.forgerock.openig.http.Exchange</a>
  </p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Request"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Request &#8212; HTTP exchange request</p></div><div class="refsect1"><a name="d132e7335"></a><h2>Description</h2><a class="indexterm" name="d132e7338"></a><p>An HTTP request message in an exchange object model.</p></div><div class="refsect1"><a name="d132e7345"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"method"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The method to be performed on the resource. Example:
     <code class="literal">"GET"</code>.</p></dd><dt><span class="term"><a href="../reference/index.html#URI" class="link"><code class="code">"uri"</code></a>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The fully-qualified URI of the resource being accessed. Example:
     <code class="literal">"http://www.example.com/resource.txt"</code>.</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Protocol version. Example: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes message header fields as name-value pairs, where name is
     header name and value is an array of header values.</p></dd><dt><span class="term"><code class="code">"cookies"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes incoming request cookies as name-value pairs, where name is
     cookie name and value is an array of string cookie values.</p></dd><dt><span class="term"><code class="code">"form"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes query parameters and/or
     <code class="literal">application/x-www-form-urlencoded</code> entity as name-value
     pairs, where name is the field name and value is an array of string
     values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The message entity body (no accessible properties).</p></dd></dl></div></div><div class="refsect1"><a name="d132e7432"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/http/Request.html" target="_blank">org.forgerock.openig.http.Request</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Principal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Principal &#8212; user principal in HTTP exchange</p></div><div class="refsect1"><a name="d132e7450"></a><h2>Description</h2><a class="indexterm" name="d132e7453"></a><p>Represents a user principal in an exchange object model, containing the
  name of the current authenticated user.</p></div><div class="refsect1"><a name="d132e7460"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The name of the principal, or <code class="literal">null</code> if principal
     is undefined (user has not been authenticated).</p></dd></dl></div></div><div class="refsect1"><a name="d132e7477"></a><h2>Javadoc</h2><p><a class="link" href="http://download.oracle.com/javase/6/docs/api/java/security/Principal.html" target="_blank">java.security.Principal</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Response"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Response &#8212; HTTP exchange response</p></div><div class="refsect1"><a name="d132e7495"></a><h2>Description</h2><a class="indexterm" name="d132e7498"></a><p>An HTTP response message in an exchange object model.</p></div><div class="refsect1"><a name="d132e7505"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"status"</code>: <span class="emphasis"><em>number</em></span></span></dt><dd><p>The response status code. Example: 200.</p></dd><dt><span class="term"><code class="code">"reason"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The response status reason. Example: <code class="literal">"OK"</code>.</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Protocol version. Example: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes message header fields as name-value pairs, where name is
     header name and value is an array of header values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The message entity body (no accessible properties).</p></dd></dl></div></div><div class="refsect1"><a name="d132e7565"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/org/forgerock/openig/http/Response.html" target="_blank">org.forgerock.openig.http.Response</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="URI"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>URI &#8212; Uniform Resource Identifier in HTTP exchange</p></div><div class="refsect1"><a name="d132e7583"></a><h2>Description</h2><a class="indexterm" name="d132e7586"></a><p>
   Represents a Uniform Resource Identifier (URI) reference
   in an exchange object model.
  </p></div><div class="refsect1"><a name="d132e7593"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"scheme"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The scheme component of the URI,
      or <code class="literal">null</code> if the scheme is undefined.
     </p></dd><dt><span class="term"><code class="code">"authority"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The decoded authority component of the URI,
      or <code class="literal">null</code> if the authority is undefined.
     </p><p>
      Use "rawAuthority" to access the raw (encoded) component.
     </p></dd><dt><span class="term"><code class="code">"userInfo"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The decoded user-information component of the URI,
      or <code class="literal">null</code> if the user information is undefined.
     </p><p>
      Use "rawUserInfo" to access the raw (encoded) component.
     </p></dd><dt><span class="term"><code class="code">"host"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The host component of the URI,
      or <code class="literal">null</code> if the host is undefined.
     </p></dd><dt><span class="term"><code class="code">"port"</code>: <span class="emphasis"><em>number</em></span></span></dt><dd><p>
      The port component of the URI,
      or <code class="literal">null</code> if the port is undefined.
     </p></dd><dt><span class="term"><code class="code">"path"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The decoded path component of the URI,
      or <code class="literal">null</code> if the path is undefined.
     </p><p>
      Use "rawPath" to access the raw (encoded) component.
     </p></dd><dt><span class="term"><code class="code">"query"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The decoded query component of the URI,
      or <code class="literal">null</code> if the query is undefined.
     </p><p>
      Use "rawQuery" to access the raw (encoded) component.
     </p></dd><dt><span class="term"><code class="code">"fragment"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>
      The decoded fragment component of the URI,
      or <code class="literal">null</code> if the fragment is undefined.
     </p><p>
      Use "rawFragment" to access the raw (encoded) component.
     </p></dd></dl></div></div><div class="refsect1"><a name="d132e7711"></a><h2>Javadoc</h2><p>
   <a class="link" href="http://docs.forgerock.org/en/openig/3.1.0/apidocs/index.html?org/forgerock/openig/util/MutableUri.html" target="_blank">org.forgerock.openig.util.MutableUri</a>
  </p></div></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="appendix-interface-stability"></a>Appendix&nbsp;A.&nbsp;Release Levels &amp; Interface Stability</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="#release-levels">A.1. ForgeRock Product Release Levels</a></span></dt><dt><span class="section"><a href="#interface-stability">A.2. ForgeRock Product Interface Stability</a></span></dt></dl></div><p>
   This appendix includes ForgeRock definitions
   for product release levels and interface stability.
  </p><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="release-levels"></a>A.1.&nbsp;ForgeRock Product Release Levels</h2></div></div></div><p>
  ForgeRock defines Major, Minor, and Maintenance product release levels.

  The release level is reflected in the version number.

  The release level tells you what sort of compatibility changes to expect.
 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Major (version: x.0.0)</span></dt><dd><p>
     Major releases bring big new features.

     Major releases can include changes even to Stable interfaces.

     Major releases can remove previously Deprecated functionality,
     and in rare cases remove Evolving functionality
     that has not been explicitly Deprecated.

     Major releases also include the changes present
     in previous Minor and Maintenance releases.
    </p></dd><dt><span class="term">Minor (version: x.y.0)</span></dt><dd><p>
     Minor releases might include new features,
     backwards-compatible changes to Stable interfaces in the same Major release,
     and incompatible changes to Evolving interfaces.

     Minor releases can remove previously Deprecated functionality.

     Minor releases also include the changes present in Maintenance releases.
    </p></dd><dt><span class="term">Maintenance (version: x.y.z)</span></dt><dd><p>
     Maintenance releases can include bug fixes.

     Maintenance releases are intended
     to be fully compatible with previous versions from the same Minor release.
    </p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="interface-stability"></a>A.2.&nbsp;ForgeRock Product Interface Stability</h2></div></div></div><p>
  ForgeRock products support many protocols, APIs, GUIs,
  and command-line interfaces.

  Some of these interfaces are standard and very stable.

  Others offer new functionality that is continuing to evolve.
 </p><p>
  We realize that you invest in these interfaces,
  and therefore must know when and how ForgeRock expects them to change.

  For that reason, ForgeRock defines interface stability labels
  and uses these definitions in ForgeRock products.
 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Stable</span></dt><dd><p>
     This documented interface is expected to undergo only
     backwards-compatible changes between major releases.

     Changes are announced at least one minor release before they take effect.
    </p></dd><dt><span class="term">Evolving</span></dt><dd><p>
     This documented interface is continuing to evolve
     and so is expected to change,
     potentially in backwards-incompatible ways even in a minor release.

     Changes are documented at the time of product release.
    </p><p>
     While new protocols and APIs are still in the process of standardization,
     they are Evolving.

     This applies for example to recent Internet-Draft implementations,
     and also to newly developed functionality.
    </p></dd><dt><span class="term">Deprecated</span></dt><dd><p>
     This interface is deprecated
     and likely to be removed in a future release.

     For previously stable interfaces,
     the change was likely announced in a previous release.

     Deprecated interfaces will be removed from ForgeRock products.
    </p></dd><dt><span class="term">Removed</span></dt><dd><p>
     This interface was deprecated in a previous release
     and has now been removed from the product.
    </p></dd><dt><span class="term">Internal/Undocumented</span></dt><dd><p>
     Internal and undocumented interfaces can change without notice.

     If you depend on one of these interfaces,
     contact ForgeRock support
     or email <a class="link" href="mailto:info@forgerock.com" target="_top">info@forgerock.com</a>
     to discuss your needs.
    </p></dd></dl></div></div></div><div class="index"><div class="titlepage"><div><div><h1 class="title"><a name="d132e7793"></a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>D</h3><dl><dt>Decorators</dt><dd><dl><dt>AuditDecorator, <a class="indexterm" href="#d132e4460">Description</a></dt><dt>CaptureDecorator, <a class="indexterm" href="#d132e4650">Description</a></dt><dt>TimerDecorator, <a class="indexterm" href="#d132e4851">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>Exchange Object Model</dt><dd><dl><dt>ClientInfo, <a class="indexterm" href="#d132e7133">Description</a></dt><dt>Exchange, <a class="indexterm" href="#d132e7233">Description</a></dt><dt>Principal, <a class="indexterm" href="#d132e7450">Description</a></dt><dt>Request, <a class="indexterm" href="#d132e7335">Description</a></dt><dt>Response, <a class="indexterm" href="#d132e7495">Description</a></dt><dt>URI, <a class="indexterm" href="#d132e7583">Description</a></dt></dl></dd><dt>Expressions</dt><dd><dl><dt>Expressions, <a class="indexterm" href="#expressions-description">Description</a></dt><dt>Functions, <a class="indexterm" href="#functions-description">Description</a></dt><dt>Patterns, <a class="indexterm" href="#d132e7068">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Field value conventions, <a class="indexterm" href="#field-value-conventions">Field Value Conventions</a></dt><dt>Filters</dt><dd><dl><dt>AssignmentFilter, <a class="indexterm" href="#d132e2027">Description</a></dt><dt>CaptureFilter, <a class="indexterm" href="#d132e2129">Description</a></dt><dt>CookieFilter, <a class="indexterm" href="#d132e2243">Description</a></dt><dt>CryptoHeaderFilter, <a class="indexterm" href="#d132e2337">Description</a></dt><dt>EntityExtractFilter, <a class="indexterm" href="#d132e2465">Description</a></dt><dt>ExceptionFilter, <a class="indexterm" href="#d132e2626">Description</a></dt><dt>FileAttributesFilter, <a class="indexterm" href="#d132e2682">Description</a></dt><dt>HeaderFilter, <a class="indexterm" href="#d132e2829">Description</a></dt><dt>HttpBasicAuthFilter, <a class="indexterm" href="#d132e2929">Description</a></dt><dt>LocationHeaderFilter, <a class="indexterm" href="#d132e3041">Description</a></dt><dt>OAuth2ClientFilter, <a class="indexterm" href="#OAuth2ClientFilter-description">Description</a></dt><dt>OAuth2ResourceServerFilter, <a class="indexterm" href="#OAuth2ResourceServerFilter-description">Description</a></dt><dt>ScriptableFilter, <a class="indexterm" href="#d132e3848">Description</a></dt><dt>SqlAttributesFilter, <a class="indexterm" href="#d132e4043">Description</a></dt><dt>StaticRequestFilter, <a class="indexterm" href="#d132e4148">Description</a></dt><dt>SwitchFilter, <a class="indexterm" href="#d132e4280">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>Handlers</dt><dd><dl><dt>Chain, <a class="indexterm" href="#d132e783">Description</a></dt><dt>ClientHandler, <a class="indexterm" href="#d132e856">Description</a></dt><dt>DispatchHandler, <a class="indexterm" href="#d132e927">Description</a></dt><dt>MonitorEndpointHandler, <a class="indexterm" href="#d132e1033">Description</a></dt><dt>Route, <a class="indexterm" href="#Route-description">Description</a></dt><dt>Router, <a class="indexterm" href="#d132e1226">Description</a></dt><dt>SamlFederationHandler, <a class="indexterm" href="#d132e1325">Description</a></dt><dt>ScriptableHandler, <a class="indexterm" href="#d132e1644">Description</a></dt><dt>SequenceHandler, <a class="indexterm" href="#d132e1826">Description</a></dt><dt>StaticResponseHandler, <a class="indexterm" href="#d132e1910">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Miscellaneous Heap Objects</dt><dd><dl><dt>ConsoleLogSink, <a class="indexterm" href="#d132e5000">Description</a></dt><dt>FileLogSink, <a class="indexterm" href="#d132e5116">Description</a></dt><dt>HttpClient, <a class="indexterm" href="#HttpClient-description">Description</a></dt><dt>JwtSession, <a class="indexterm" href="#d132e5553">Description</a></dt><dt>KeyManager, <a class="indexterm" href="#d132e5715">Description</a></dt><dt>KeyStore, <a class="indexterm" href="#d132e5822">Description</a></dt><dt>NullLogSink, <a class="indexterm" href="#d132e5934">Description</a></dt><dt>TemporaryStorage, <a class="indexterm" href="#d132e5974">Description</a></dt><dt>TrustManager, <a class="indexterm" href="#d132e6054">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Required configuration</dt><dd><dl><dt>Gateway servlet, <a class="indexterm" href="#d132e499">Description</a></dt><dt>Heap objects, <a class="indexterm" href="#d132e648">Description</a></dt></dl></dd></dl></div></div></div></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10060&components=10220&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>