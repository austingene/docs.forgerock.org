<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;3.&nbsp;Getting Started</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Guide to OpenIG"><link rel="up" href="index.html" title="Guide to OpenIG"><link rel="prev" href="chap-howitworks.html" title="Chapter&nbsp;2.&nbsp;How OpenIG Works"><link rel="next" href="chap-install.html" title="Chapter&nbsp;4.&nbsp;Installing OpenIG"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Getting Started</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap-howitworks.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-install.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chap-quickstart"></a>Chapter&nbsp;3.&nbsp;Getting Started</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="chap-quickstart.html#d0e475">3.1. Before You Begin</a></span></dt><dt><span class="section"><a href="chap-quickstart.html#d0e488">3.2. Installation Steps</a></span></dt><dt><span class="section"><a href="chap-quickstart.html#d0e573">3.3. Configuration Steps</a></span></dt><dt><span class="section"><a href="chap-quickstart.html#d0e608">3.4. Try It Out</a></span></dt></dl></div><p>This chapter provides instructions to get OpenIG up and running on
 Jetty, configured to execute the WordPress samples at our hosted WordPress
 deployment. This allows you to quickly see how OpenIG works and provides hands
 on experience with a few key features. If you are looking for more general
 installation and configuration instructions for your deployment or would
 like to use a container other than Jetty, start with the chapter on <a href="../../gateway-guide/index/chap-install.html" class="link"><em class="citetitle">Installing
 OpenIG</em></a>.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e475"></a>3.1.&nbsp;Before You Begin</h2></div></div></div><p>For the remainder of this chapter, <code class="literal">$HOME</code> is the
  location of the home directory of the user running the web application
  container, where Jetty, OpenIG and the Samples are unpacked.</p><p>Make sure you have the correct Java environment installed. If necessary,
  download and install <a class="link" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk6-jsp-136632.html" target="_blank">Sun Java SE JDK 6 Update 21</a> or later. At this time these are the only
  versions of any JDK supported with OpenIG.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e488"></a>3.2.&nbsp;Installation Steps</h2></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p><a class="link" href="http://www.forgerock.org/openig.html" target="_blank">Download</a> and if necessary unpack the gateway
    .war file.</p></li><li class="step"><p>Download and unzip the <a class="link" href="https://svn.forgerock.org/openig/tags/2.1.0-docs/src/site/resources/forgerock-sample-configs.zip" target="_blank">OpenIG
    sample configuration files</a>.</p></li><li class="step"><p>Download and unzip <a class="link" href="http://dist.codehaus.org/jetty/jetty-hightide-7.1.6/jetty-hightide-7.1.6.v20100715.zip" target="_blank">Jetty 7.1.6 Hightide</a>.</p></li><li class="step"><p>Copy the OpenIG .war file as <code class="filename">root.war</code> to the
    <code class="filename">webapps/</code> directory in Jetty.</p><p>When copied to this location along with the
    <code class="filename">root.xml</code> file below, Jetty automatically deploys OpenIG
    on startup.</p><div class="screen"><pre>$ cp $HOME/gateway-*.war $HOME/jetty-hightide-7.1.6/webapps/root.war</pre></div></li><li class="step"><p>Copy the <code class="filename">WordPressLogin.json</code> gateway
    configuration file to
    <code class="filename">$HOME/.ForgeRock/OpenIG/config.json</code>. By default,
    OpenIG looks for <code class="filename">config.json</code> in the
    <code class="filename">$HOME/.ForgeRock/OpenIG/</code> directory.</p><div class="screen"><pre>$ cp $HOME/forgerock-sample-configs/WordPressLogin.json
 $HOME/.ForgeRock/OpenIG/config.json</pre></div></li><li class="step"><p>Create
    <code class="filename">$HOME/jetty-hightide-7.1.6/contexts/root.xml</code> with the
    following content. This tells Jetty to deploy OpenIG in the root
    context:</p><pre class="brush: xml;">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN"
  "http://www.eclipse.org/jetty/configure.dtd"&gt;
&lt;Configure class="org.eclipse.jetty.webapp.WebAppContext"&gt;
    &lt;Set name="contextPath"&gt;/&lt;/Set&gt;
    &lt;Set name="war"&gt;&lt;SystemProperty name="jetty.home"
      default="."/&gt;/webapps/root.war&lt;/Set&gt;
    &lt;Set name="extractWAR"&gt;true&lt;/Set&gt;
    &lt;Set name="copyWebDir"&gt;false&lt;/Set&gt;
    &lt;Set name="defaultsDescriptor"&gt;&lt;SystemProperty name="jetty.home"
      default="."/&gt;/etc/webdefault.xml&lt;/Set&gt;
&lt;/Configure&gt;</pre></li><li class="step"><p>If you are managing multiple
    applications in one domain you must turn on domain cookies in Jetty. This
    can be done by adding the following property to
    <code class="filename">$JETTY_HOME/contexts/root.xml</code> or to
    <code class="filename">$JETTY_HOME/etc/jetty.xml</code>. Note that any changes to
    <code class="filename">jetty.xml</code> impact all web applications running in the
    container.</p><pre class="brush: xml;">&lt;Get name="sessionHandler"&gt;
    &lt;Get name="sessionManager"&gt;
        &lt;Set name="sessionDomain"&gt;.forgerock.com&lt;Set&gt;
    &lt;Get&gt;
&lt;Get&gt;</pre></li><li class="step"><p>Start Jetty in the background:</p><div class="screen"><pre>$ $HOME/jetty-hightide-7.1.6/bin/jetty.sh start</pre></div><p>Or start Jetty in the foreground:</p><div class="screen"><pre>$ java -jar $HOME/jetty-hightide-7.1.6/start.jar</pre></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e573"></a>3.3.&nbsp;Configuration Steps</h2></div></div></div><p>So far you have deployed the gateway web application in the root
  context of Jetty on port 8080. Since the gateway is a reverse proxy you must
  make sure all traffic from your browser to
  <code class="literal">http://demo.forgerock.com:8080/wordpress/</code> goes through the
  gateway. The quickest way to do this is to add an entry to your
  <code class="filename">/etc/hosts</code> file on UNIX systems or
  <code class="filename">%SystemRoot%\system32\drivers\etc\hosts</code> on Windows. See
  <a class="link" href="http://en.wikipedia.org/wiki/Hosts_(file)" target="_blank">Wikipedia</a> for more information on host files. If you are running
  OpenIG and the browser on the same host, add this entry to the hosts file on
  the OpenIG host.</p><pre class="brush: plain;">127.0.0.1 demo.forgerock.com</pre><p>If you are running the browser and OpenIG on separate hosts, you must
  add the IP address of the host running OpenIG. For example, if OpenIG is
  running on a host with IP Address of 10.0.1.5:</p><pre class="brush: plain;">10.0.1.5 demo.forgerock.com</pre><div class="tip"><h3 class="title">Tip</h3><p>Some browsers cache IP address resolutions, even after clearing all
   browsing data. It might be necessary to restart the browser if you are
   changing IP addresses of named hosts. The simplest way to make sure you have
   configured your DNS or host settings properly is to stop OpenIG and
   make sure you cannot reach the target application. If you can still reach
   it, you should double check your host settings. You should also make sure
   your name resolution is configured to check your host files before DNS.
   This configuration can be found in <code class="filename">/etc/nsswitch.conf</code>
   for most UNIX systems. Make sure <code class="literal">files</code> is listed before
   <code class="literal">dns</code>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e608"></a>3.4.&nbsp;Try It Out</h2></div></div></div><p><a class="link" href="http://demo.forgerock.com:8080/wordpress/" target="_top">http://demo.forgerock.com:8080/wordpress</a> should take you to the
  WordPress portal hosted at ForgeRock. When you click the login link, you are
  automatically logged in by OpenIG with the user name
  <code class="literal">george</code>.</p><p>What's happening behind the scenes?</p><p>When your browser goes to
  <code class="literal">http://demo.forgerock.com:8080/wordpress/</code>, it is actually
  connecting to OpenIG deployed on Jetty. OpenIG is configured to proxy all
  traffic it receives to the target application at
  <code class="literal">http://demo.forgerock.com:8080/wordpress/</code>. For this
  example, OpenIG is watching for the login page from WordPress. When it sees
  the login page, it creates and POSTs the login form for WordPress on behalf
  of the user. Since this is just a sample, the credentials for the user are
  hard coded in the gateway configuration file. In a real deployment, the
  credentials may come from a database, directory, flat file, HTTP headers,
  SAML assertion,or an OpenAM policy agent.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap-howitworks.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-install.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;How OpenIG Works&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Installing OpenIG</td></tr></table></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10060&components=10220&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>