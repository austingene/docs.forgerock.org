<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>OpenIG Reference</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="description" content="Reference documentation for OpenIG. OpenIG provides a high-performance reverse proxy server with specialized session management and credential replay functionality."><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="reference"></a>OpenIG Reference</h1></div><div><h2 class="subtitle">Version 2.1.0</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Paul</span> <span class="surname">Bryan</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Mark</span> <span class="surname">Craig</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Jamie</span> <span class="surname">Nelson</span></h3><div lang="en" class="affiliation"><span class="orgname">ForgeRock AS<br></span><div class="address"><p><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="street">33&nbsp;New&nbsp;Montgomery&nbsp;St.</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="otheraddr">Suite&nbsp;1500</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="city">San&nbsp;Francisco</span>,&nbsp;<span class="state">CA</span>&nbsp;<span class="postcode">94105</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="country">USA</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="phone">+1&nbsp;415-523-0772</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<code class="uri">www.forgerock.com</code><br>
&nbsp;&nbsp;&nbsp;</p></div></div></div></div></div><div><p class="releaseinfo">Software release date: May 15, 2012</p></div><div><p class="copyright">Copyright &copy; 2011-2014 ForgeRock AS</p></div><div><a href="legalnotice.html">Legal Notice</a></div><div><p class="pubdate">Publication date: June 20, 2014</p></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>Reference documentation for OpenIG. OpenIG provides a high-performance
   reverse proxy server with specialized session management and credential
   replay functionality.</p></div></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="preface"><a href="#preface">Preface</a></span></dt><dt><span class="reference"><a href="#required-conf">I. Required Configuration</a></span></dt><dt><span class="reference"><a href="#servlets-conf">II. Servlets</a></span></dt><dt><span class="reference"><a href="#handlers-conf">III. Handlers</a></span></dt><dt><span class="reference"><a href="#filters-conf">IV. Filters</a></span></dt><dt><span class="reference"><a href="#misc-conf">V. Miscellaneous Heap Objects</a></span></dt><dt><span class="reference"><a href="#expressions-conf">VI. Expressions</a></span></dt><dt><span class="reference"><a href="#exchange-object-model-conf">VII. Exchange Object Model</a></span></dt><dt><span class="index"><a href="#d99e3689">Index</a></span></dt></dl></div><div lang="en" class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="preface"></a>Preface</h1></div></div></div><p>This reference covers OpenIG configuration.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d99e149"></a>1.&nbsp;Who Should Use this Reference</h2></div></div></div><p>This references is written for access management designers, developers,
  and administrators using OpenIG. For API specifications, see the appropriate
  Javadoc.</p></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="formatting-conventions"></a>2.&nbsp;Formatting Conventions</h2></div></div></div><p>
  Most examples in the documentation are created on GNU/Linux or Mac OS X.

  Where it is helpful to make a distinction between operating environments,
  examples for UNIX, GNU/Linux, Mac OS X, and so forth are labeled (UNIX).
  Mac OS X specific examples can be labeled (Mac OS X).
  Examples for Microsoft Windows can be labeled (Windows).

  To avoid repetition, however, file system directory names are
  often given only in UNIX format as in <code class="filename">/path/to/server</code>,
  even if the text applies to <code class="filename">C:\path\to\server</code> as well.
 </p><p>
  Absolute path names usually begin with the placeholder
  <code class="filename">/path/to/</code>.

  This path might translate to <code class="filename">/opt/</code>,
  <code class="filename">C:\Program Files\</code>, or somewhere else on your system.
 </p><p>
  Command line, terminal sessions are formatted as follows.
 </p><div class="screen"><pre>$ <strong>echo $JAVA_HOME</strong>
<em>/path/to/jdk</em></pre></div><p>
  Command output is sometimes formatted for narrower, more readable output
  even though formatting parameters are not shown in the command.
  In the following example, the query string parameter
  <code class="literal">_prettyPrint=true</code> is omitted.
 </p><div class="screen"><pre>
$ <strong>curl https://bjensen:hifalutin@opendj.example.com:8443/users/newuser</strong>
<em>{
  "_rev" : "000000005b337348",
  "schemas" : [ "urn:scim:schemas:core:1.0" ],
  "contactInformation" : {
    "telephoneNumber" : "+1 408 555 1212",
    "emailAddress" : "newuser@example.com"
  },
  "_id" : "newuser",
  "name" : {
    "familyName" : "New",
    "givenName" : "User"
  },
  "userName" : "newuser@example.com",
  "displayName" : "New User",
  "meta" : {
    "created" : "2014-06-03T09:58:27Z"
  },
  "manager" : [ {
    "_id" : "kvaughan",
    "displayName" : "Kirsten Vaughan"
  } ]
}</em>
 </pre></div><p>
  Program listings are formatted as follows.
 </p><pre class="brush: java;">class Test {
    public static void main(String [] args)  {
        System.out.println("This is a program listing.");
    }
}</pre></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="accessing-doc-online"></a>3.&nbsp;Accessing Documentation Online</h2></div></div></div><p>
  ForgeRock core documentation, such as what you are now reading, aims to be
  technically accurate and complete with respect to the software documented.
 </p><div class="itemizedlist"><p>
   Core documentation therefore follows a three-phase review process
   designed to eliminate errors.
  </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
    Product managers and software architects review project documentation design
    with respect to the users' software lifecycle needs.
   </p></li><li class="listitem"><p>
    Subject matter experts review proposed documentation changes for
    technical accuracy and completeness
    with respect to the corresponding software.
   </p></li><li class="listitem"><p>
    Quality experts validate implemented documentation changes for
    technical validity with respect to the software,
    technical completeness with respect to the scope of the document,
    and usability for the expected audience.
   </p></li></ul></div><p>
  The review process helps to ensure that documentation published for
  a ForgeRock release is technically accurate and complete.
 </p><p>
  Fully reviewed, published core documentation is available at
  <a class="link" href="http://docs.forgerock.org/" target="_blank">http://docs.forgerock.org/</a>.

  Use this documentation when working with a ForgeRock Enterprise release.
 </p><p>
  In-progress documentation can be found at each project site under the
  <a class="link" href="http://forgerock.org" target="_blank">Developer Community</a> projects page.

  Use this documentation when trying a nightly build.
 </p><p>
  The ForgeRock <a class="link" href="https://wikis.forgerock.org/" target="_blank">Community Wikis</a> and provide additional, user-created information.

  We encourage you to
  <a class="link" href="https://sso.forgerock.com/openam/UI/Login" target="_blank">join the community</a>, so that you can update the Wikis, too.
 </p></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="joining-the-community"></a>4.&nbsp;Joining the ForgeRock Community</h2></div></div></div><p>
  After you
  <a class="link" href="https://backstage.forgerock.com/#/account/register" target="_blank">sign up</a> to join the ForgeRock community,
  you can edit the
  <a class="link" href="https://wikis.forgerock.org/" target="_blank">Community Wikis</a>,
  and also log bugs and feature requests in the
  <a class="link" href="https://bugster.forgerock.org/" target="_blank">issue tracker</a>.
 </p><p>
  If you have a question regarding a project but cannot find an answer
  in the project documentation or Wiki, browse to the
  <a class="link" href="http://forgerock.org" target="_blank">Developer Community</a> page for the project,
  where you can find details on joining the project mailing lists,
  and find links to mailing list archives.

  You can also suggest updates to documentation through the
  <a class="link" href="https://lists.forgerock.org/mailman/listinfo/docs" target="_blank">ForgeRock docs mailing list</a>.
 </p><p>
  The Community Wikis describe how to check out and build source code.

  Should you want to contribute a patch, test, or feature,
  or want to author part of the core documentation,
  first have a look on the ForgeRock site at
  <a class="link" href="http://forgerock.org/get_involved.html" target="_blank">how to get involved</a>.
 </p></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="required-conf"></a>Required Configuration</h1></div></div><hr></div><div class="partintro"><div></div><p>You must specify at least the entry point for incoming requests,
   the OpenIG Servlet, and the heap objects that configure and initialize
   objects, with dependency injection.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#gateway-servlet">Gateway Servlet</a></span><span class="refpurpose"> &#8212; entry point for all incoming requests</span></dt><dt><span class="refentrytitle"><a href="#heap-objects">Heap Objects</a></span><span class="refpurpose"> &#8212; configure and initialize objects, with dependency injection</span></dt></dl></div></div><div lang="en" class="refentry"><a name="gateway-servlet"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Gateway Servlet &#8212; entry point for all incoming requests</p></div><div class="refsect1"><a name="d99e287"></a><h2>Description</h2><a class="indexterm" name="d99e290"></a><p>The gateway servlet is the entry point for all incoming requests. It
  is responsible for initializing a <a href="../reference/index.html#heap-objects" class="link">heap of objects</a>, and
  dispatching all requests to a configured servlet (which is itself a heap
  object). The configuration of the gateway servlet is loaded from a
  JSON-encoded configuration file, typically located at
  <code class="filename">~/.ForgeRock/OpenIG/config.json</code>.</p></div><div class="refsect1"><a name="d99e303"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "heap": { heap-configuration object },
     "servletObject": string
}</pre></div><div class="refsect1"><a name="d99e311"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"heap"</code>: <span class="emphasis"><em>object, required</em></span></span></dt><dd><p>The <a href="../reference/index.html#heap-objects" class="link">heap object</a>
     configuration.</p></dd><dt><span class="term"><code class="code">"servletObject"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the servlet heap object to dispatch all requests to.</p></dd></dl></div></div><div class="refsect1"><a name="d99e338"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/gateway/GatewayServlet.html" target="_blank">org.forgerock.openig.gateway.GatewayServlet</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="heap-objects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Heap Objects &#8212; configure and initialize objects, with dependency injection</p></div><div class="refsect1"><a name="d99e356"></a><h2>Description</h2><a class="indexterm" name="d99e359"></a><p>A heap is a collection of associated objects, initialized from
  declarative configuration artifacts. All configurable objects in the gateway
  are heap objects. Heap objects are created and initialized by associated
  "heaplets", which retrieve any objects an object depends on from the heap.
  The heap configuration is included as an object in the <a href="../reference/index.html#gateway-servlet" class="link">gateway servlet</a>
  configuration, and has the following format.</p></div><div class="refsect1"><a name="d99e369"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "objects": [
         {
             "name": string,
             "type": string,
             "config": { object-specific configuration }
         }, ...
     ]  
}</pre></div><div class="refsect1"><a name="d99e377"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The unique name to give the heap object in the heap. This name is
     used to resolve the heap object, for example when another heap object
     names a heap object dependency.</p></dd><dt><span class="term"><code class="code">"type"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The class name of the object to be created. Example:
     <code class="literal">"HandlerServlet"</code>. To determine the type name, see
     the specific object documentation in this reference.</p></dd><dt><span class="term"><code class="code">"config"</code>: <span class="emphasis"><em>object, required</em></span></span></dt><dd><p>The configuration that is specific to the heap object being created.
     For an example, see the <a href="../reference/index.html#HandlerServlet" class="link">HandlerServlet</a>
     reference.</p></dd></dl></div></div><div class="refsect1"><a name="d99e417"></a><h2>Automatically Created Objects</h2><div class="variablelist"><p>When a heap is first created, it is automatically populated with some
   objects, without required configuration. An automatically created object can
   be overridden by creating a heap object with the same name.</p><dl class="variablelist"><dt><span class="term"><code class="code">"LogSink"</code></span></dt><dd><p>The default object to use for writing all audit and performance
     logging. Default: a <a href="../reference/index.html#ConsoleLogSink" class="link">ConsoleLogSink</a>
     object with default values.</p></dd><dt><span class="term"><code class="code">"TemporaryStorage"</code></span></dt><dd><p>The default object to use for managing temporary buffers. Default: a
     <a href="../reference/index.html#TemporaryStorage" class="link">TemporaryStorage</a>
     object with default values.</p></dd></dl></div></div><div class="refsect1"><a name="d99e443"></a><h2>Implicit Properties</h2><div class="variablelist"><p>Every heap object has a set of implicit properties, which can be
   overridden on an object-by-object basis:</p><dl class="variablelist"><dt><span class="term"><code class="code">"logSink"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Specifies the heap object that should be used for audit and
     performance logging. Default: <code class="literal">"LogSink"</code>.</p></dd><dt><span class="term"><code class="code">"temporaryStorage"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Specifies the heap object that should be used for temporary buffer
     storage. Default: <code class="literal">"TemporaryStorage"</code>.</p></dd></dl></div></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="servlets-conf"></a>Servlets</h1></div></div><hr></div><div class="partintro"><div></div><p>The gateway includes objects that can create, initialize and dispatch
   to Java Enterprise Edition Servlets and Servlet filters.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#DispatchServlet">DispatchServlet</a></span><span class="refpurpose"> &#8212; dispatch request based on extra path information</span></dt><dt><span class="refentrytitle"><a href="#HandlerServlet">HandlerServlet</a></span><span class="refpurpose"> &#8212; translate and marshal request to a handler</span></dt><dt><span class="refentrytitle"><a href="#Servlet">HttpServlet</a></span><span class="refpurpose"> &#8212; create stock servlet in heap environment</span></dt><dt><span class="refentrytitle"><a href="#ServletFilter">ServletFilter</a></span><span class="refpurpose"> &#8212; create stock servlet filter in heap environment</span></dt></dl></div></div><div lang="en" class="refentry"><a name="DispatchServlet"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DispatchServlet &#8212; dispatch request based on extra path information</p></div><div class="refsect1"><a name="d99e493"></a><h2>Description</h2><a class="indexterm" name="d99e496"></a><p>Dispatches requests to mapped filters and servlets based on request&#8217;s
  extra path information. The extra path information is the path that follows
  the path of the dispatch servlet itself, but precedes the query string. It is
  guaranteed to be a value that always begins with a "/" character.</p><p>All filters that match the pattern are invoked in the order they are
  expressed in the <code class="literal">"bindings"</code> list until a matching servlet
  is encountered. The first matching servlet object in the bindings list is
  invoked, and terminates any further processing of the request. If no matching
  servlet is found, an exception is thrown. To avoid this, a final
  <code class="literal">"catch-all"</code> servlet binding with a pattern of
  <code class="literal">".*"</code> is recommended.</p></div><div class="refsect1"><a name="d99e514"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "DispatchServlet",
     "config": {
         "bindings": [
             {
                 "pattern": pattern,
                 "object": string,
             }, ...
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e519"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"bindings"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>A list of bindings of patterns and associated servlets/filters to
     dispatch to.</p></dd><dt><span class="term"><code class="code">"pattern"</code>: <span class="emphasis"><em><a href="../reference/index.html#Patterns" class="link">pattern</a>,
    required</em></span></span></dt><dd><p>The regular expression pattern to match against the incoming request
     extra path information.</p></dd><dt><span class="term"><code class="code">"object"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the HTTP servlet or servlet filter heap object to
     dispatch to if the regular expression pattern matches.</p></dd></dl></div></div><div class="refsect1"><a name="d99e555"></a><h2>Example</h2><p>Sample from a federation configuration. Federation is implemented as
  its own servlet which will be dispatched-to based on the incoming URI
  starting with <code class="literal">"/saml"</code>. All other requests will go through
  the <code class="literal">HandlerServlet</code>.</p><pre class="brush: javascript;">{
     "name": "Dispatcher",
     "type": "DispatchServlet",
     "config": {
         "bindings": [
             {
                 "pattern":"^/saml",
                 "object":"FederationServlet" 
             },
             {
                 "pattern":".*",
                 "object":"HandlerServlet" 
             }
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e568"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/servlet/DispatchServlet.html" target="_blank">org.forgerock.openig.servlet.DispatchServlet</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HandlerServlet"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HandlerServlet &#8212; translate and marshal request to a handler</p></div><div class="refsect1"><a name="d99e586"></a><h2>Description</h2><a class="indexterm" name="d99e589"></a><p>Services a servlet request by translating it and marshaling to a
  handler.</p></div><div class="refsect1"><a name="d99e596"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "HandlerServlet",
     "config": {
         "handler": string,
         "baseURI": string
     }
}</pre></div><div class="refsect1"><a name="d99e601"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch the exchange
     to.</p></dd><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Overrides request URLs constructed by container, making requests
     relative to a new base URI. Only scheme, host and port are used in the
     supplied URI. Default: use container URL.</p></dd></dl></div></div><div class="refsect1"><a name="d99e625"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/servlet/HandlerServlet.html" target="_blank">org.forgerock.openig.servlet.HandlerServlet</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Servlet"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HttpServlet &#8212; create stock servlet in heap environment</p></div><div class="refsect1"><a name="d99e643"></a><h2>Description</h2><a class="indexterm" name="d99e646"></a><p>Creates and initializes a stock servlet in a heap environment.</p></div><div class="refsect1"><a name="d99e653"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "javax.servlet.http.HttpServlet",
     "config": {
         "initParams": {
             name: string, ...
         }
     }
}</pre></div><div class="refsect1"><a name="d99e658"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"initParams"</code>: <span class="emphasis"><em>object of name-value pairs</em></span></span></dt><dd><p>Initialization parameters to supply to servlet. The
     <code class="literal">name</code> is a string containing the name of the
     initialization parameter.</p></dd></dl></div></div><div class="refsect1"><a name="d99e675"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/servlet/HttpServletHeaplet.html" target="_blank">org.forgerock.openig.servlet.HttpServletHeaplet</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ServletFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ServletFilter &#8212; create stock servlet filter in heap environment</p></div><div class="refsect1"><a name="d99e693"></a><h2>Description</h2><a class="indexterm" name="d99e696"></a><p>Creates and initializes a stock servlet filter in a heap
  environment.</p></div><div class="refsect1"><a name="d99e703"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "javax.servlet.Filter",
     "config": {
         "initParams": {
             name: string, ...
         }
     }
}</pre></div><div class="refsect1"><a name="d99e708"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"initParams"</code>: <span class="emphasis"><em>object of name-value pairs</em></span></span></dt><dd><p>Initialization parameters to supply to servlet filter. The
     <code class="literal">name</code> is a string containing the name of the
     initialization parameter.</p></dd></dl></div></div><div class="refsect1"><a name="d99e725"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/servlet/ServletFilterHeaplet.html" target="_blank">org.forgerock.openig.servlet.ServletFilterHeaplet</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="handlers-conf"></a>Handlers</h1></div></div><hr></div><div class="partintro"><div></div><p>Handler objects process an HTTP exchange request by producing an
   associated response.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#Chain">Chain</a></span><span class="refpurpose"> &#8212; dispatch exchange to ordered list of filters</span></dt><dt><span class="refentrytitle"><a href="#ClientHandler">ClientHandler</a></span><span class="refpurpose"> &#8212; submit exchange requests to remote servers</span></dt><dt><span class="refentrytitle"><a href="#DispatchHandler">DispatchHandler</a></span><span class="refpurpose"> &#8212; dispatch to one of a list of handlers</span></dt><dt><span class="refentrytitle"><a href="#SequenceHandler">SequenceHandler</a></span><span class="refpurpose"> &#8212; process exchange through sequence of handlers</span></dt><dt><span class="refentrytitle"><a href="#StaticResponseHandler">StaticResponseHandler</a></span><span class="refpurpose"> &#8212; create static response in HTTP exchange</span></dt></dl></div></div><div lang="en" class="refentry"><a name="Chain"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Chain &#8212; dispatch exchange to ordered list of filters</p></div><div class="refsect1"><a name="d99e749"></a><h2>Description</h2><a class="indexterm" name="d99e752"></a><p>A chain is responsible for dispatching an exchange to an ordered list
  of filters, and finally a handler.</p></div><div class="refsect1"><a name="d99e759"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "Chain",
     "config": {
         "filters": [ string, ... ],
         "handler": string
     }
}
</pre></div><div class="refsect1"><a name="d99e764"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"filters"</code>: <span class="emphasis"><em>array of strings, required</em></span></span></dt><dd><p>The names of the filter heap objects to dispatch the exchange to,
     in order.</p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler object to dispatch to once the exchange has
     traversed all of the specified filters.</p></dd></dl></div></div><div class="refsect1"><a name="d99e788"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LoginChain",
     "type": "Chain",
     "config": {
         "filters": [ "LoginFilter" ],
         "handler": "ClientHandler" 
     }   
}</pre></div><div class="refsect1"><a name="d99e793"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/Chain.html" target="_blank">org.forgerock.openig.filter.Chain</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ClientHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ClientHandler &#8212; submit exchange requests to remote servers</p></div><div class="refsect1"><a name="d99e811"></a><h2>Description</h2><a class="indexterm" name="d99e814"></a><p>Submits exchange requests to remote servers.</p><div class="note"><h3 class="title">Note</h3><p>This handler does not verify hostnames for outgoing SSL connections.
   This is because the gateway usually accesses the SSL endpoint using a raw IP
   address rather than a fully-qualified hostname.</p></div></div><div class="refsect1"><a name="d99e824"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "ClientHandler",
     "config": {
         "connections": number
     }
}</pre></div><div class="refsect1"><a name="d99e829"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"connections"</code>: <span class="emphasis"><em>number, optional</em></span></span></dt><dd><p>The maximum number of concurrent connections to open. Default:
     64</p></dd></dl></div></div><div class="refsect1"><a name="d99e843"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/handler/ClientHandler.html" target="_blank">org.forgerock.openig.handler.ClientHandler</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="DispatchHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DispatchHandler &#8212; dispatch to one of a list of handlers</p></div><div class="refsect1"><a name="d99e861"></a><h2>Description</h2><a class="indexterm" name="d99e864"></a><p>Dispatches to one of a list of handlers. When an exchange is handled,
  each handler's <code class="literal">condition</code> is evaluated. If a condition
  expression yields <code class="literal">true</code>, then the exchange is dispatched
  to the associated handler with no further processing.</p></div><div class="refsect1"><a name="d99e877"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "DispatchHandler",
     "config": {
         "bindings": [
             {
                 "condition": expression,
                 "handler": string,
                 "baseURI": string,
             }, ...
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e882"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"bindings"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>A list of bindings of conditions and associated handlers to dispatch
     to.</p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Condition to evaluate to determine if associated handler should be
     dispatched to. If omitted, then dispatch is unconditional.</p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to if the associated
     condition yields <code class="literal">true</code>.</p></dd><dt><span class="term"><code class="code">"baseURI"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Overrides the existing request URI, making requests relative to a
     new base URI. Only scheme, host and port are used in the supplied URI.
     Default: leave URI untouched.</p></dd></dl></div></div><div class="refsect1"><a name="d99e931"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "Dispatcher",
     "type": "DispatchHandler",
     "config": {
         "bindings": [ 
             {
                 "condition": "${exchange.request.uri.path == '/login.php'}",
                 "handler": "LoginChain",
             },
             {
                 "condition": "${exchange.request.uri.path == '/logout.php'}",
                 "handler": "LogoutChain",
             },
             {
                 "handler": "ClientHandler",
             }
         ]   
     }   
}</pre></div><div class="refsect1"><a name="d99e936"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/handler/DispatchHandler.html" target="_blank">org.forgerock.openig.handler.DispatchHandler</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SequenceHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SequenceHandler &#8212; process exchange through sequence of handlers</p></div><div class="refsect1"><a name="d99e954"></a><h2>Description</h2><a class="indexterm" name="d99e957"></a><p>Processes an exchange through a sequence of handlers. This allows
  multi-request processing such as retrieving a form, extracting form content
  (for example, nonce) and submitting in a subsequent request. Each
  <code class="literal">handler</code> in the <code class="literal">bindings</code> is dispatched
  to in order; the binding <code class="literal">postcondition</code> determines if the
  sequence should continue.</p></div><div class="refsect1"><a name="d99e973"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "SequenceHandler",
     "config": {
         "bindings": [
             {
                 "handler": string,
                 "postcondition": expression
             }
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e978"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"bindings"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>A list of bindings of handler and postcondition to determine that
     sequence continues.</p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to.</p></dd><dt><span class="term"><code class="code">"postcondition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Evaluated to determine if the sequence continues. Default:
     unconditional.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1014"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/handler/SequenceHandler.html" target="_blank">org.forgerock.openig.handler.SequenceHandler</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="StaticResponseHandler"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>StaticResponseHandler &#8212; create static response in HTTP exchange</p></div><div class="refsect1"><a name="d99e1032"></a><h2>Description</h2><a class="indexterm" name="d99e1035"></a><p>Creates a static response in an HTTP exchange.</p></div><div class="refsect1"><a name="d99e1042"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "StaticResponseHandler",
     "config": {
         "status": number,
         "reason": string,
         "version": string,
         "headers": {
             name: [ expression, ... ], ...
         },
         "entity": string
     }
}</pre></div><div class="refsect1"><a name="d99e1047"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"status"</code>: <span class="emphasis"><em>number, required</em></span></span></dt><dd><p>The response status code (for example, 200).</p></dd><dt><span class="term"><code class="code">"reason"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The response status reason (for example,
     <code class="literal">"OK"</code>).</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Protocol version. Default: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>Header fields to set in the response. The <code class="literal">name</code>
     specifies the header name, with an associated array of expressions to
     evaluate as values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The message entity to write in the response. Conforms to the set
     <code class="literal">Content-Type</code> header and sets
     <code class="literal">Content-Length</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1116"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "ErrorHandler",
     "type":"StaticResponseHandler",
     "config": {
        "status": 500,
        "reason": "Error",
        "entity":"&lt;html&gt;&lt;h2&gt;Epic #FAIL&lt;/h2&gt;&lt;/html&gt;" 
     }
}</pre></div><div class="refsect1"><a name="d99e1121"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/handler/StaticResponseHandler.html" target="_blank">org.forgerock.openig.handler.StaticResponseHandler</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="filters-conf"></a>Filters</h1></div></div><hr></div><div class="partintro"><div></div><p>Filter objects perform filtering of the request and response of an
   HTTP exchange.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#AssignmentFilter">AssignmentFilter</a></span><span class="refpurpose"> &#8212; conditionally assign values to expressions</span></dt><dt><span class="refentrytitle"><a href="#CaptureFilter">CaptureFilter</a></span><span class="refpurpose"> &#8212; capture request and response messages</span></dt><dt><span class="refentrytitle"><a href="#CookieFilter">CookieFilter</a></span><span class="refpurpose"> &#8212; manage, suppress, relay cookies</span></dt><dt><span class="refentrytitle"><a href="#EntityExtractFilter">EntityExtractFilter</a></span><span class="refpurpose"> &#8212; extract pattern from message entity</span></dt><dt><span class="refentrytitle"><a href="#ExceptionFilter">ExceptionFilter</a></span><span class="refpurpose"> &#8212; catch exceptions when handling request</span></dt><dt><span class="refentrytitle"><a href="#FileAttributesFilter">FileAttributesFilter</a></span><span class="refpurpose"> &#8212; retrieve record from a file</span></dt><dt><span class="refentrytitle"><a href="#HeaderFilter">HeaderFilter</a></span><span class="refpurpose"> &#8212; remove and add headers</span></dt><dt><span class="refentrytitle"><a href="#CryptoHeaderFilter">CryptoHeaderFilter</a></span><span class="refpurpose"> &#8212; encrypt, decrypt headers</span></dt><dt><span class="refentrytitle"><a href="#HttpBasicAuthFilter">HttpBasicAuthFilter</a></span><span class="refpurpose"> &#8212; perform HTTP Basic authentication</span></dt><dt><span class="refentrytitle"><a href="#SqlAttributesFilter">SqlAttributesFilter</a></span><span class="refpurpose"> &#8212; execute SQL query</span></dt><dt><span class="refentrytitle"><a href="#StaticRequestFilter">StaticRequestFilter</a></span><span class="refpurpose"> &#8212; create new request within exchange object</span></dt><dt><span class="refentrytitle"><a href="#SwitchFilter">SwitchFilter</a></span><span class="refpurpose"> &#8212; divert exchange to other handler</span></dt></dl></div></div><div lang="en" class="refentry"><a name="AssignmentFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AssignmentFilter &#8212; conditionally assign values to expressions</p></div><div class="refsect1"><a name="d99e1145"></a><h2>Description</h2><a class="indexterm" name="d99e1148"></a><p>Conditionally assigns values to expressions before and after the
  exchange is handled.</p></div><div class="refsect1"><a name="d99e1155"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "AssignmentFilter",
     "config": {
         "onRequest": [
             {
                 "condition": expression,
                 "target": lvalue-expression,
                 "value": expression
             }, ...
         ],
         "onResponse": [
             {
                 "condition": expression,
                 "target": lvalue-expression,
                 "value": expression
             }, ...
         ]
     }
 }</pre></div><div class="refsect1"><a name="d99e1160"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"onRequest"</code>: <span class="emphasis"><em>array of objects,
    optional</em></span></span></dt><dd><p>Defines a list of assignment bindings to evaluate before the
     exchange is handled.</p></dd><dt><span class="term"><code class="code">"onResponse"</code>: <span class="emphasis"><em>array of objects,
    optional</em></span></span></dt><dd><p>Defines a list of assignment bindings to evaluate after the exchange
     is handled.</p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Expression to evaluate to determine if an assignment should occur.
     Omitting the condition makes the assignment unconditional.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the target object whose value is to be
     set.</p></dd><dt><span class="term"><code class="code">"value"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Expression that yields the value to be set in the target.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1220"></a><h2>Example</h2><p>This is an example of how you would capture credentials and store them
  in the Gateway session during a login request. Notice the credentials are
  captured on the request, but not marked as valid until the response returns
  a positive 302. The credentials would then be used to login a user to a
  different application.</p><pre class="brush: javascript;">{
  "name": "PortalLoginCaptureFilter",
  "type": "AssignmentFilter",
  "config": {
      "onRequest": [
          {   
              "target": "${exchange.session.authUsername}",
              "value": "${exchange.request.form['username'][0]}",
          },  
          {   
              "target": "${exchange.session.authPassword}",
              "value": "${exchange.request.form['password'][0]}",
          },  
          {   
              "comment": "Indicates authentication has not yet been confirmed.",
              "target": "${exchange.session.authConfirmed}",
              "value": "${false}",
          }   
      ],  
      "onResponse": [
          {   
              "condition": "${exchange.response.status == 302}",
              "target": "${exchange.session.authConfirmed}",
              "value": "${true}",
          }   
      ]   
  }
 }</pre></div><div class="refsect1"><a name="d99e1227"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/AssignmentFilter.html" target="_blank">org.forgerock.openig.filter.AssignmentFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CaptureFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CaptureFilter &#8212; capture request and response messages</p></div><div class="refsect1"><a name="d99e1245"></a><h2>Description</h2><a class="indexterm" name="d99e1248"></a><p>Captures request and response messages for further analysis.</p></div><div class="refsect1"><a name="d99e1255"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "CaptureFilter",
     "config": {
         "file": string,
         "charset": string,
         "condition": expression,
         "captureEntity": boolean
     }
}</pre></div><div class="refsect1"><a name="d99e1260"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The path of the file where captured output should be written.</p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The character set to encode captured output with. Default:
     <code class="literal">"UTF-8"</code>.</p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>The condition to evaluate to determine whether to capture an
     exchange. Default: unconditional.</p></dd><dt><span class="term"><code class="code">"captureEntity"</code>: <span class="emphasis"><em>boolean,
    optional</em></span></span></dt><dd><p>Indicates that message entity should be captured. Default:
     <code class="literal">true</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1312"></a><h2>Examples</h2><p>Log the entire request and response:</p><pre class="brush: javascript;">{
     "name": "LogToTemporaryFile",
     "type": "CaptureFilter",
     "config": {
         "file": "/tmp/gateway.log",
     }
}</pre><p>Log the request and response. Do not log the entity:</p><pre class="brush: javascript;">{
     "name": "LogToTemporaryFile",
     "type": "CaptureFilter",
     "config": {
         "file": "/tmp/gateway.log" 
         "captureEntity": false,
     }
}</pre><p>Normal usage of the CaptureFilter is to create an OutgoingChain.
  This enables you to call filters like the CaptureFilter, before sending out
  the request:</p><pre class="brush: javascript;">{
     "name": "OutgoingChain",
     "type": "Chain",
     "config": {
         "filters": [ "LogToTemporaryFile" ],
         "handler": "ClientHandler" 
     }   
 },
 {   
     "name": "LogToTemporaryFile",
     "type": "CaptureFilter",
     "config": {
         "captureEntity": false,
         "file": "/tmp/gateway.log",
     }
}</pre></div><div class="refsect1"><a name="d99e1327"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/CaptureFilter.html" target="_blank">org.forgerock.openig.filter.CaptureFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CookieFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CookieFilter &#8212; manage, suppress, relay cookies</p></div><div class="refsect1"><a name="d99e1345"></a><h2>Description</h2><a class="indexterm" name="d99e1348"></a><p>Manages, suppresses and relays cookies. Managed cookies are intercepted
  by the cookie filter itself and stored in the gateway session; managed cookies
  are not transmitted to the user agent. Suppressed cookies are removed from
  both request and response. Relayed cookies are transmitted freely between user
  agent and remote server and vice-versa.</p><p>If a cookie does not appear in one of the three action parameters, then
  the default action is performed, controlled by setting the
  <code class="literal">defaultAction</code> parameter. If unspecified, the default
  action is to manage all cookies. In the event a cookie appears in more than
  one configuration parameter, then it will be selected in the order of
  precedence: managed, suppressed, relayed.</p></div><div class="refsect1"><a name="d99e1360"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "CookieFilter",
     "config": {
         "managed": [ string, ... ],
         "suppressed": [ string, ... ],
         "relayed": [ string, ... ],
         "defaultAction": string
     }
}</pre></div><div class="refsect1"><a name="d99e1365"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"managed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be managed.</p></dd><dt><span class="term"><code class="code">"suppressed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be suppressed.</p></dd><dt><span class="term"><code class="code">"relayed"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>A list of the names of cookies to be relayed.</p></dd><dt><span class="term"><code class="code">"defaultAction"</code>: <span class="emphasis"><em>string,
    optional</em></span></span></dt><dd><p>Action to perform for cookies that do not match an action set. Must
     be one of: <code class="literal">"MANAGE"</code>, <code class="literal">"RELAY"</code>,
     <code class="literal">"SUPPRESS"</code>. Default: <code class="literal">"MANAGE"</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1421"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/CookieFilter.html" target="_blank">org.forgerock.openig.filter.CookieFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="EntityExtractFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>EntityExtractFilter &#8212; extract pattern from message entity</p></div><div class="refsect1"><a name="d99e1439"></a><h2>Description</h2><a class="indexterm" name="d99e1442"></a><p>Extracts regular expression patterns from a message entity. The
  extraction results are stored in a <code class="literal">target</code> object. For a
  given matched <a href="../reference/index.html#Patterns" class="link">pattern</a>, the value
  stored in the object is either the result of applying
  its associated pattern template (if specified) or the match result itself
  otherwise.</p></div><div class="refsect1"><a name="d99e1455"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "EntityExtractFilter",
     "config": {
         "messageType": string,
         "charset": string,
         "target": lvalue-expression,
         "bindings": [
             {
                 "key": string,
                 "pattern": regex-pattern,
                 "template": pattern-template
             }, ...
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e1460"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The message type in the exchange to extract patterns from. Must be
     one of: <code class="literal">"REQUEST"</code>, <code class="literal">"RESPONSE"</code>.</p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Overrides the character set encoding specified in message. Default:
     the message encoding is used.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the target object that contains the
     extraction results.</p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>Name of element in target object to contain an extraction
     result.</p></dd><dt><span class="term"><code class="code">"pattern"</code>: <span class="emphasis"><em><a href="../reference/index.html#Patterns" class="link">pattern</a>,
    required</em></span></span></dt><dd><p>The regular expression pattern to find in the entity.</p></dd><dt><span class="term"><code class="code">"template"</code>: <span class="emphasis"><em><a href="../reference/index.html#Patterns" class="link">pattern-template</a>,
    optional</em></span></span></dt><dd><p>The template to apply to the pattern and store in the named target
     element. Default: store the match result itself.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1536"></a><h2>Examples</h2><p>Extracts a nonce from the response, which is typically a login page,
  and sets its value in the exchange to be used by the downstream filter
  posting the login form. The nonce value would be accessed using the following
  expression <code class="literal">${exchange.wikiNonce.wpLoginToken}</code>. The pattern
  is finding all matches in the HTTP body of the form
  <code class="literal">wpLogintoken value="abc"</code>. Setting the template to
  <code class="literal">$1</code> assigns the value <code class="literal">abc</code> to
  <code class="literal">exchange.wikiNonce.wpLoginToken</code>:</p><pre class="brush: javascript;">{
    "name": "WikiNoncePageExtract",
    "type": "EntityExtractFilter",
    "config": {
        "messageType": "response",
        "target": "${exchange.wikiNonce}",
        "bindings": [
            {
                "key": "wpLoginToken",
                "pattern": "wpLoginToken\"\s.*value=\"(.*)\"",
                "template": "$1" 
            }
        ]
    }
}</pre><p>Reads the response looking for the OpenAM login page. When found it
  sets <code class="literal">loginPage.found = true</code> to be used in a SwitchFilter
  to post the login credentials:</p><pre class="brush: javascript;">{
    "name": "FindLoginPage",
    "type": "EntityExtractFilter",
    "config": {
        "messageType": "response",
        "target": "${exchange.isLoginPage}",
        "bindings": [
             {
                 "key": "found",
                 "pattern": "OpenAM\s\(Login\)",
                 "template": "true"
             }
         ]
    }
}</pre></div><div class="refsect1"><a name="d99e1565"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/EntityExtractFilter.html" target="_blank">org.forgerock.openig.filter.EntityExtractFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="ExceptionFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ExceptionFilter &#8212; catch exceptions when handling request</p></div><div class="refsect1"><a name="d99e1583"></a><h2>Description</h2><a class="indexterm" name="d99e1586"></a><p>Catches any exceptions thrown during handling of a request. This allows
  friendlier error pages to be displayed than would otherwise be displayed by
  the container. Caught exceptions are logged with a log level of
  <code class="literal">WARNING</code> and the exchange is diverted to the specified
  exception handler.</p></div><div class="refsect1"><a name="d99e1596"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "ExceptionFilter",
     "config": {
         "handler": string,
     }
}</pre></div><div class="refsect1"><a name="d99e1601"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to in the event of
     caught exceptions.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1615"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/ExceptionFilter.html" target="_blank">org.forgerock.openig.filter.ExceptionFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="FileAttributesFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>FileAttributesFilter &#8212; retrieve record from a file</p></div><div class="refsect1"><a name="d99e1633"></a><h2>Description</h2><a class="indexterm" name="d99e1636"></a><p>Retrieves and exposes a record from a delimiter-separated file. Lookup
  of the record is performed using a specified <code class="literal">key</code>, whose
  <code class="literal">value</code> is derived from an exchange-scoped expression. The
  resulting record is exposed in an object whose location is specified by the
  <code class="literal">target</code> expression. If a matching record cannot be found,
  then the resulting object is empty.</p><p>The retrieval of the record is performed lazily; it does not occur
  until the first attempt to access a value in the <code class="literal">target</code>.
  This defers the overhead of file operations and text processing until a value
  is first required. This also means that the value expression is not evaluated
  until the object is first accessed.</p></div><div class="refsect1"><a name="d99e1657"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "FileAttributesFilter",
     "config": {
         "file": string,
         "charset": string,
         "separator": string,
         "header": boolean,
         "fields": [ string, ... ],
         "target": lvalue-expression,
         "key": string,
         "value": expression
     }
}</pre></div><div class="refsect1"><a name="d99e1662"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"file"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The file containing the record to be read.</p></dd><dt><span class="term"><code class="code">"charset"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The character set the file is encoded in. Default:
     <code class="literal">"UTF-8"</code>.</p></dd><dt><span class="term"><code class="code">"header"</code>: <span class="emphasis"><em>boolean, optional</em></span></span></dt><dd><p>Indicates the first line of the file contains the set of defined
     field keys. Default: <code class="literal">true</code>.</p></dd><dt><span class="term"><code class="code">"fields"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>Explicit field keys in the order they appear in a record, overriding
     any existing field header. Default: use field header.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the target object that will contain the
     record.</p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the field in the file to perform the lookup on.</p></dd><dt><span class="term"><code class="code">"value"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to in the event of
     caught exceptions.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1746"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/FileAttributesFilter.html" target="_blank">org.forgerock.openig.filter.FileAttributesFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HeaderFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HeaderFilter &#8212; remove and add headers</p></div><div class="refsect1"><a name="d99e1764"></a><h2>Description</h2><a class="indexterm" name="d99e1767"></a><p>Removes headers from and adds headers to a message. Headers are added
  to any existing headers in the message. To replace, remove the header and
  add it.</p></div><div class="refsect1"><a name="d99e1774"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "HeaderFilter",
     "config": {
         "messageType": string,
         "remove": [ string, ... ],
         "add": {
            name: [ string, ... ], ...
         }
     }
}</pre></div><div class="refsect1"><a name="d99e1779"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>Indicates the type of message in the exchange to filter headers for.
     Must be one of: <code class="literal">"REQUEST"</code>,
     <code class="literal">"RESPONSE"</code>.</p></dd><dt><span class="term"><code class="code">"remove"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>The names of header fields to remove from the message.</p></dd><dt><span class="term"><code class="code">"add"</code>: <span class="emphasis"><em>object, optional</em></span></span></dt><dd><p>Header fields to add to the message. The <code class="literal">name</code>
     specifies the header name, with an associated array of string
     values.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1822"></a><h2>Examples</h2><p>Replace the host header on the incoming request with
  <code class="literal">myhost.com</code>:</p><pre class="brush: javascript;">{
     "name": "ReplaceHostFilter",
     "type": "HeaderFilter",
     "config": {
         "messageType": "REQUEST",
         "remove": [ "host" ],
         "add": {
             "host": [ "myhost.com" ]
         }
     }
}</pre><p>Add a Set-Cookie header in the response:</p><pre class="brush: javascript;">{
     "name": "SetCookieFilter",
     "type": "HeaderFilter",
     "config": {
         "messageType": "RESPONSE",
         "add": {
             "Set-Cookie": [ "mysession=12345" ]
         }
     }
}</pre><p>Add headers <code class="literal">custom1</code> and <code class="literal">custom2</code>
  to the request:</p><pre class="brush: javascript;">{
     "name": "SetCustomHeaders",
     "type": "HeaderFilter",
     "config": {
         "messageType": "RESQUEST",
         "add": {
             "custom1": [ "12345", "6789" ],
             "custom2": [ "abcd" ]
         }
     }
}</pre></div><div class="refsect1"><a name="d99e1846"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/HeaderFilter.html" target="_blank">org.forgerock.openig.filter.HeaderFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="CryptoHeaderFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CryptoHeaderFilter &#8212; encrypt, decrypt headers</p></div><div class="refsect1"><a name="d99e1864"></a><h2>Description</h2><a class="indexterm" name="d99e1867"></a><p>Encrypts or decrypts headers in a request or response.</p></div><div class="refsect1"><a name="d99e1874"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "CryptoHeaderFilter",
     "config": {
         "messageType": string,
         "operation": string,
         "algorithm": string,
         "key": string,
         "keyType": string,
         "headers": [ string, ... ]
     }
}</pre></div><div class="refsect1"><a name="d99e1879"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"messageType"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>Indicates the type of message in the exchange to encrypt or decrypt
     headers, form parameters or cookies. Must be one of:
     <code class="literal">"REQUEST"</code>, <code class="literal">"RESPONSE"</code>.</p></dd><dt><span class="term"><code class="code">"operation"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>Indicates whether to encrypt or decrypt. Must be one of:
     <code class="literal">"ENCRYPT"</code>, <code class="literal">"DECRYPT"</code>.</p></dd><dt><span class="term"><code class="code">"algorithm"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>Algorithm used for encryption and decryption. Defaults to
     DES/ECB/NoPadding.</p></dd><dt><span class="term"><code class="code">"key"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>Base64 encoded key value.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>array of strings,
    optional</em></span></span></dt><dd><p>The names of header fields to encrypt or decrypt.</p></dd></dl></div></div><div class="refsect1"><a name="d99e1945"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "DecryptReplayPasswordFilter",
     "type": "CryptoHeaderFilter",
     "config": {
         "messageType": "REQUEST",
         "operation": "DECRYPT",
         "algorithm": "DES/ECB/NoPadding",
         "keyType": "DES",
         "key": "oqdP3DJdE1Q=",
         "headers": [ "replaypassword" ]
}</pre></div><div class="refsect1"><a name="d99e1950"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/CryptoHeaderFilter.html" target="_blank">org.forgerock.openig.filter.CryptoHeaderFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="HttpBasicAuthFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>HttpBasicAuthFilter &#8212; perform HTTP Basic authentication</p></div><div class="refsect1"><a name="d99e1968"></a><h2>Description</h2><a class="indexterm" name="d99e1971"></a><p>Performs authentication through the HTTP Basic authentication scheme.
  For more information, see <a class="link" href="http://www.ietf.org/rfc/rfc2617.txt" target="_blank">RFC 2617</a>.</p><p>If challenged for authentication via a <code class="literal">401
  Unauthorized</code> status code by the server, this filter retries the
  request with credentials attached. Once an HTTP authentication challenge is
  issued from the remote server, all subsequent requests to that remote server
  that pass through the filter includes the user credentials.</p><p>If authentication fails (including the case of no credentials yielded
  from expressions), then the exchange is diverted to the specified
  authentication failure handler.</p></div><div class="refsect1"><a name="d99e1988"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "HttpBasicAuthFilter",
     "config": {
         "username": expression,
         "password": expression,
         "failureHandler": string
     }
}</pre></div><div class="refsect1"><a name="d99e1993"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"username"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the username to supply during
     authentication.</p></dd><dt><span class="term"><code class="code">"password"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the password to supply during
     authentication.</p></dd><dt><span class="term"><code class="code">"failureHandler"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to if authentication
     fails.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2031"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "TomcatAuthenticator",
     "type": "HttpBasicAuthFilter",
     "config": {
         "username": "tomcat",
         "password": "tomcat",
         "failureHandler": "TomcatAuthFailureHandler" 
      }
}</pre></div><div class="refsect1"><a name="d99e2036"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/HttpBasicAuthFilter.html" target="_blank">org.forgerock.openig.filter.HttpBasicAuthFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SqlAttributesFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SqlAttributesFilter &#8212; execute SQL query</p></div><div class="refsect1"><a name="d99e2054"></a><h2>Description</h2><a class="indexterm" name="d99e2057"></a><p>Executes a SQL query through a prepared statement and exposes its
  first result. Parameters in the prepared statement are derived from
  exchange-scoped expressions. The query result is exposed in an object whose
  location is specified by the <code class="literal">target</code> expression. If the
  query yields no result, then the resulting object is empty.</p><p>The execution of the query is performed lazily; it does not occur
  until the first attempt to access a value in the target. This defers the
  overhead of connection pool, network and database query processing until a
  value is first required. This also means that the parameters expressions is
  not evaluated until the object is first accessed.</p></div><div class="refsect1"><a name="d99e2069"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "SqlAttributesFilter",
     "config": {
         "dataSource": string,
         "preparedStatement": string,
         "parameters": [ expression, ... ],
         "target": lvalue-expression
     }
}</pre></div><div class="refsect1"><a name="d99e2074"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"dataSource"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The JNDI name of the factory for connections to the physical data
     source.</p></dd><dt><span class="term"><code class="code">"preparedStatement"</code>: <span class="emphasis"><em>string,
    required</em></span></span></dt><dd><p>The parameterized SQL query to execute, with <code class="literal">?</code>
     parameter placeholders.</p></dd><dt><span class="term"><code class="code">"parameters"</code>: <span class="emphasis"><em>array of <a href="../reference/index.html#Expressions" class="link">expressions</a>,
    required</em></span></span></dt><dd><p>The parameters to evaluate and include in the execution of the
     prepared statement.</p></dd><dt><span class="term"><code class="code">"target"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">lvalue-expression</a>,
    required</em></span></span></dt><dd><p>Expression that yields the target object that will contain the query
     results.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2126"></a><h2>Example</h2><p>Using the users sessionid from a cookie, query the database to find the
  user logged in and set the profile attributes in the exchange:</p><pre class="brush: javascript;">{
        "name": "SqlAttributesFilter",
        "type": "SqlAttributesFilter",
        "config": {
              "target": "${exchange.sql}",
              "dataSource": "java:comp/env/jdbc/mysql",
              "preparedStatement": "SELECT f.value AS 'first', l.value AS
                'last', u.mail AS 'email', GROUP_CONCAT(CAST(r.rid AS CHAR)) AS
                'roles'
                FROM sessions s
                INNER JOIN users u
                ON ( u.uid = s.uid AND u.status = 1 )
                LEFT OUTER JOIN profile_values f
                ON ( f.uid = u.uid AND f.fid = 1 )
                LEFT OUTER JOIN profile_values l
                ON ( l.uid = u.uid AND l.fid = 2 )
                LEFT OUTER JOIN users_roles r
                ON ( r.uid = u.uid )
                WHERE (s.sid = ? AND s.uid &lt;&gt; 0) GROUP BY s.sid;",
              "parameters": [ "${exchange.request.cookies
                [keyMatch(exchange.request.cookies,'JSESSION1234')]
                [0].value}" ]
         }
 }</pre><p>Lines are folded for readability in this example. In your JSON, keep
  the values for <code class="literal">"preparedStatement"</code> and
  <code class="literal">"parameters"</code> on one line.</p></div><div class="refsect1"><a name="d99e2141"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/SqlAttributesFilter.html" target="_blank">org.forgerock.openig.filter.SqlAttributesFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="StaticRequestFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>StaticRequestFilter &#8212; create new request within exchange object</p></div><div class="refsect1"><a name="d99e2159"></a><h2>Description</h2><a class="indexterm" name="d99e2162"></a><p>Creates a new request within the exchange object. It replaces any
  request that may already be present in the exchange. The request can include
  a form, specified in the <code class="literal">form</code> parameter, which is included
  in an entity encoded in <code class="literal">application/x-www-form-urlencoded</code>
  format if request method is <code class="literal">POST</code>, or otherwise as
  (additional) query parameters in the URI.</p></div><div class="refsect1"><a name="d99e2178"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "StaticRequestFilter",
     "config": {
         "method": string,
         "uri": string,
         "version": string,
         "headers": {
             name: [ expression, ... ], ...
         },
         "form": {
             field: [ expression, ... ], ...
         }
     }
}</pre></div><div class="refsect1"><a name="d99e2183"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"method"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The HTTP method to be performed on the resource (for example,
     <code class="literal">"GET"</code>).</p></dd><dt><span class="term"><code class="code">"uri"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The fully-qualified URI of the resource to access (for example,
     <code class="literal">"http://www.example.com/resource.txt"</code>).</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>Protocol version. Default: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>Header fields to set in the request. The <code class="literal">name</code>
     specifies the header name, with an associated array of expressions to
     evaluate as values.</p></dd><dt><span class="term"><code class="code">"form"</code>: <span class="emphasis"><em>array of objects,
    required</em></span></span></dt><dd><p>A form to include in the request. The <code class="literal">field</code>
     specifies the field name, with an associated array of expressions to
     evaluate as values.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2252"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LoginRequestFilter",
     "type": "StaticRequestFilter",
     "config": {
         "method": "POST",
         "uri": "http://10.10.0.2:8080/wp-login.php",
         "form": {
             "log": [ "george" ],
             "pwd": [ "bosco" ],
             "rememberme": [ "forever" ],
             "redirect_to": [ "http://portal.example.com:8080/wp-admin/" ],
             "testcookie": [ "1" ]
         }
     }
}</pre></div><div class="refsect1"><a name="d99e2257"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/StaticRequestFilter.html" target="_blank">org.forgerock.openig.filter.StaticRequestFilter</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="SwitchFilter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>SwitchFilter &#8212; divert exchange to other handler</p></div><div class="refsect1"><a name="d99e2275"></a><h2>Description</h2><a class="indexterm" name="d99e2278"></a><p>Conditionally diverts the exchange to another handler. If a
  <code class="literal">condition</code> evaluates to <code class="literal">true</code>, then the
  exchange is dispatched to the associated <code class="literal">handler</code> with no
  further processing by the switch filter.</p></div><div class="refsect1"><a name="d99e2294"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "SwitchFilter",
     "config": {
         "onRequest": [
             {
                 "condition": expression,
                 "handler": string,
             }, ...
         ],
         "onResponse": [
             {
                 "condition": expression,
                 "handler": string,
             }, ...
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e2299"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"onRequest"</code>: <span class="emphasis"><em>array of objects,
    optional</em></span></span></dt><dd><p>Conditions to test (and handler to dispatch to, if
     <code class="literal">true</code>) before the exchange is handled.</p></dd><dt><span class="term"><code class="code">"onResponse"</code>: <span class="emphasis"><em>array of objects,
    optional</em></span></span></dt><dd><p>Conditions to test (and handler to dispatch to, if
     <code class="literal">true</code>) after the exchange is handled.</p></dd><dt><span class="term"><code class="code">"condition"</code>: <span class="emphasis"><em><a href="../reference/index.html#Expressions" class="link">expression</a>,
    optional</em></span></span></dt><dd><p>Condition to evaluate to determine if exchange should be dispatched
     to handler. Default: unconditional dispatch to handler.</p></dd><dt><span class="term"><code class="code">"handler"</code>: <span class="emphasis"><em>string, required</em></span></span></dt><dd><p>The name of the handler heap object to dispatch to if condition
     yields <code class="literal">true</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2354"></a><h2>Example</h2><p>This example intercepts the response if it is equal to 200 and executes
  the LoginRequestHandler. This filter might be used in a login flow where the
  request for the login page must go through to the target, but the response
  should be intercepted in order to send the login form to the application.
  This is typical for scenarios where there is a hidden value or cookie
  returned in the login page which must be sent in the login form:</p><pre class="brush: javascript;">{
     "name": "SwitchFilter",
     "type": "SwitchFilter",
     "config": {
         "onResponse": [
             {
                 "condition": "${exchange.response.status == 200}",
                 "handler": "LoginRequestHandler" 
             }
         ]
     }
}</pre></div><div class="refsect1"><a name="d99e2361"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/filter/SwitchFilter.html" target="_blank">org.forgerock.openig.filter.SwitchFilter</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="misc-conf"></a>Miscellaneous Heap Objects</h1></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#ConsoleLogSink">ConsoleLogSink</a></span><span class="refpurpose"> &#8212; log to standard error</span></dt><dt><span class="refentrytitle"><a href="#TemporaryStorage">TemporaryStorage</a></span><span class="refpurpose"> &#8212; cache streamed content</span></dt></dl></div><div lang="en" class="refentry"><a name="ConsoleLogSink"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ConsoleLogSink &#8212; log to standard error</p></div><div class="refsect1"><a name="d99e2382"></a><h2>Description</h2><a class="indexterm" name="d99e2385"></a><p>A log sink that writes log entries to the standard error stream.</p></div><div class="refsect1"><a name="d99e2392"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "ConsoleLogSink",
     "config": {
         "level": string
     }
}</pre></div><div class="refsect1"><a name="d99e2397"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"level"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The level of log entries to display in the console. Must be one of:
     <code class="literal">OFF</code>, <code class="literal">ERROR</code>,
     <code class="literal">WARNING</code>, <code class="literal">INFO</code>,
     <code class="literal">CONFIG</code>, <code class="literal">STAT</code>,
     <code class="literal">DEBUG</code>, <code class="literal">TRACE</code>, <code class="literal">ALL</code>.
     Default: <code class="literal">INFO</code>.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2441"></a><h2>Example</h2><pre class="brush: javascript;">{
     "name": "LogSink",
     "comment": "Default sink for logging information.",
     "type": "ConsoleLogSink",
     "config": {
         "level": "DEBUG" 
     }
}</pre></div><div class="refsect1"><a name="d99e2446"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/log/ConsoleLogSink.html" target="_blank">org.forgerock.openig.log.ConsoleLogSink</a></p><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/log/LogLevel.html" target="_blank">org.forgerock.openig.log.LogLevel</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="TemporaryStorage"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TemporaryStorage &#8212; cache streamed content</p></div><div class="refsect1"><a name="d99e2467"></a><h2>Description</h2><a class="indexterm" name="d99e2470"></a><p>Allocates temporary buffers for caching streamed content during request
  processing. Initially uses memory; when the memory limit is exceeded, switches
  to a temporary file.</p></div><div class="refsect1"><a name="d99e2477"></a><h2>Usage</h2><pre class="brush: javascript;">{
     "name": string,
     "type": "TemporaryStorage",
     "config": {
         "initialLength": number,
         "memoryLimit": number,
         "fileLimit": number,
         "directory": string
     }
}</pre></div><div class="refsect1"><a name="d99e2482"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"initialLength"</code>: <span class="emphasis"><em>number,
    optional</em></span></span></dt><dd><p>The initial length of memory buffer byte array. Default: 8192
     (8 KiB).</p></dd><dt><span class="term"><code class="code">"memoryLimit"</code>: <span class="emphasis"><em>number,
    optional</em></span></span></dt><dd><p>The length limit of the memory buffer. Exceeding this limit results
     in promotion from memory to file. Default: 65536 (64 KiB).</p></dd><dt><span class="term"><code class="code">"fileLimit"</code>: <span class="emphasis"><em>number, optional</em></span></span></dt><dd><p>The length limit of the file buffer. Exceeding this limit results in
     a thrown exception. Default: 1048576 (1 MiB).</p></dd><dt><span class="term"><code class="code">"directory"</code>: <span class="emphasis"><em>string, optional</em></span></span></dt><dd><p>The directory where temporary files are created. If omitted, then
     the system-dependent default temporary directory is used (typically
     <code class="literal">"/tmp"</code> on Unix systems). Default: use system-dependent
     default.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2529"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/io/TemporaryStorage.html" target="_blank">org.forgerock.openig.io.TemporaryStorage</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="expressions-conf"></a>Expressions</h1></div></div><hr></div><div class="partintro"><div></div><p>Many configuration parameters support dynamic expressions.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#Expressions">Expressions</a></span><span class="refpurpose"> &#8212; expression configuration parameter values</span></dt><dt><span class="refentrytitle"><a href="#Functions">Functions</a></span><span class="refpurpose"> &#8212; built-in functions to call within expressions</span></dt><dt><span class="refentrytitle"><a href="#Patterns">Patterns</a></span><span class="refpurpose"> &#8212; regular expression patterns</span></dt></dl></div></div><div lang="en" class="refentry"><a name="Expressions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Expressions &#8212; expression configuration parameter values</p></div><div class="refsect1"><a name="d99e2553"></a><h2>Description</h2><a class="indexterm" name="d99e2556"></a><p>Expressions are specified as configuration parameter values for a
  number of built-in objects. Such expressions conform to the Universal
  Expression Language as specified in <a class="link" href="http://www.jcp.org/en/jsr/detail?id=245" target="_blank">JSR-245</a>.</p></div><div class="refsect1"><a name="d99e2566"></a><h2>General Syntax</h2><p>All expressions follow standard Universal Expression Language syntax:
  <code class="literal">${expression}</code>. The expression can be a simple reference to
  a value, a function call, and/or arbitrarily complex arithmetic, logical,
  relational and conditional operations. When supplied within a configuration
  parameter, an expression is always a string enclosed in quotation marks, for
  example: <code class="literal">"${exchange.request.method}"</code>.</p></div><div class="refsect1"><a name="d99e2577"></a><h2>Value Expressions</h2><p>A value expression references a value relative to the scope supplied to
  the expression. In the current version of the gateway, the supplied scope is
  always the HTTP <a href="../reference/index.html#Exchange" class="link">exchange object</a>. For example
  <code class="literal">"${exchange.request.method}"</code> references the method of an
  incoming HTTP request in the exchange scope. A
  <em class="firstterm">lvalue-expression</em> is a specific type of value
  expression, which references a value to be written. For example,
  <code class="literal">"${exchange.session.gotoURL}"</code> specifies a session
  attribute named <code class="literal">gotoURL</code> to write a value to. Attempts to
  write values to read-only values are ignored.</p></div><div class="refsect1"><a name="d99e2597"></a><h2>Indexed Properties</h2><p>Properties of values are accessed using the <code class="literal">.</code> and
  <code class="literal">[]</code> operators, and can be nested arbitrarily. The value
  expressions <code class="literal">"${exchange.request}"</code> and
  <code class="literal">"${exchange['request']}"</code> are equivalent. In the case of
  arrays, the index of an element in the array is expressed as a number in
  brackets, for example
  <code class="literal">"${exchange.request.headers['Content-Type'][0]}"</code>
  references the first <code class="literal">Content-Type</code> header value in a
  request. If a property does not exist, then the index reference yields a
  <code class="literal">null</code> (empty) value.</p></div><div class="refsect1"><a name="d99e2623"></a><h2>Operations</h2><p>Universal Expression Language supports arbitrarily complex arithmetic,
  logical, relational and conditional operations. They are, in order of
  precedence:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Index property value: <code class="literal">[]</code>,
    <code class="literal">.</code></p></li><li class="listitem"><p>Change precedence of operation: <code class="literal">()</code></p></li><li class="listitem"><p>Unary negative: <code class="literal">-</code></p></li><li class="listitem"><p>Logical operations: <code class="literal">not</code>, <code class="literal">!</code>,
    <code class="literal">empty</code></p></li><li class="listitem"><p>Arithmetic operations: <code class="literal">*</code>, <code class="literal">/</code>,
    <code class="literal">div</code>, <code class="literal">%</code>, <code class="literal">mod</code></p></li><li class="listitem"><p>Binary arithmetic operations: <code class="literal">+</code>,
    <code class="literal">-</code></p></li><li class="listitem"><p>Relational operations: <code class="literal">&lt;</code>,
    <code class="literal">&gt;</code>, <code class="literal">&lt;=</code>, <code class="literal">&gt;=</code>,
    <code class="literal">lt</code>, <code class="literal">gt</code>, <code class="literal">le</code>,
    <code class="literal">ge</code>, <code class="literal">==</code>, <code class="literal">!=</code>,
    <code class="literal">eq</code>, <code class="literal">ne</code></p></li><li class="listitem"><p>Logical operations: <code class="literal">&amp;&amp;</code>,
    <code class="literal">and</code>, <code class="literal">||</code>, <code class="literal">or</code></p></li><li class="listitem"><p>Conditional operations: <code class="literal">?</code>,
    <code class="literal">:</code></p></li></ul></div></div><div class="refsect1"><a name="d99e2743"></a><h2>Functions</h2><p>A number of <a href="../reference/index.html#Functions" class="link">built-in functions</a> can be called within an expression. Syntax is
  <code class="literal">${function(param, ...)}</code>, where zero or more parameters
  are supplied to the function. For example,
  <code class="literal">"${toLowerCase(exchange.request.method)}"</code> yields the
  method of the request, converted to lower case. Functions can be operands
  for operations, and can yield parameters for other function calls.</p></div><div class="refsect1"><a name="d99e2757"></a><h2>Examples</h2><p>Lines are folded for readability in these example. In your JSON, keep
  the values on one line.</p><pre class="brush: javascript;">
"${exchange.request.uri.path == '/wordpress/wp-login.php' and
 exchange.request.form['action'][0] != 'logout'}"

"${exchange.request.uri.host 'wiki.example.com'}"

"${exchange.request.cookies[keyMatch(exchange.request.cookies,'^SESS.*')][0]
 .value}"

"${toString(exchange.request.uri)}"

"${exchange.request.uri.value}"

"${exchange.request.method 'POST' and exchange.request.uri.path
 '/wordpress/wp-login.php'}"

"${exchange.request.method 'GET'}"

"${exchange.request.headers['cookie'][0]}"

"${exchange.request.uri.scheme 'http'}"

"${not (exchange.response.status 302 and not empty exchange.session.gotoURL)}"

"${exchange.response.headers['Set-Cookie'][0]}"

"${exchange.request.headers['host'][0]}"</pre></div><div class="refsect1"><a name="d99e2764"></a><h2>See Also</h2><p><a href="../reference/index.html#Exchange" class="link">Exchange</a></p><p><a href="../reference/index.html#Functions" class="link">Functions</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Functions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Functions &#8212; built-in functions to call within expressions</p></div><div class="refsect1"><a name="d99e2785"></a><h2>Description</h2><a class="indexterm" name="d99e2788"></a><p>A set of built-in functions that can be called from within
  <a href="../reference/index.html#Expressions" class="link">expressions</a>.</p></div><div class="refsect1"><a name="d99e2798"></a><h2>contains</h2><pre class="literallayout">contains(object, value)</pre><p>Returns <code class="literal">true</code> if the object contains the specified
  value. If the object is a string, a substring is searched for the value. If
  the object is a collection or array, its elements are searched for the
  value.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object to be searched for the presence of.</p></dd><dt><span class="term">value</span></dt><dd><p>the value to be searched for.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">true</span></dt><dd><p>if the object contains the specified value.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2832"></a><h2>indexOf</h2><pre class="literallayout">indexOf(string, substring)</pre><p>Returns the index within a string of the first occurrence of a specified
  substring.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be searched.</p></dd><dt><span class="term">substring</span></dt><dd><p>the value to search for within the string.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the index of the first instance of substring, or -1 if not
     found.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2863"></a><h2>join</h2><pre class="literallayout">join(strings, separator)</pre><p>Joins an array of strings into a single string value, with a specified
  separator.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">separator</span></dt><dd><p>the separator to place between joined elements.</p></dd><dt><span class="term">strings</span></dt><dd><p>the array of strings to be joined.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string containing the joined strings.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2894"></a><h2>keyMatch</h2><pre class="literallayout">keyMatch(map, pattern)</pre><p>Returns the first key found in a map that matches the specified <a href="../reference/index.html#Expressions" class="link">regular expression pattern</a>, or <code class="literal">null</code> if no such
  match is found.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">map</span></dt><dd><p>the map whose keys are to be searched.</p></dd><dt><span class="term">pattern</span></dt><dd><p>a string containing the regular expression pattern to match.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the first matching key, or <code class="literal">null</code> if no match
     found.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2934"></a><h2>length</h2><pre class="literallayout">length(object)</pre><p>Returns the number of items in a collection, or the number of
  characters in a string.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object whose length is to be determined.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the length of the object, or 0 if length could not be
     determined.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2959"></a><h2>matches</h2><pre class="literallayout">matches(string, pattern)</pre><p>Returns an array of matching groups for a <a href="../reference/index.html#Expressions" class="link">regular expression pattern</a> against a string, or
  <code class="literal">null</code> if no such match is found. The first element of the
  array is the entire match, and each subsequent element correlates to any
  capture group specified within the regular expression.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be searched.</p></dd><dt><span class="term">pattern</span></dt><dd><p>a string containing the regular expression pattern to match.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>an array of matching groups, or <code class="literal">null</code> if no such
     match is found.</p></dd></dl></div></div><div class="refsect1"><a name="d99e2999"></a><h2>split</h2><pre class="literallayout">split(string, pattern)</pre><p>Splits a string into an array of substrings around matches of the given
  <a href="../reference/index.html#Expressions" class="link">regular expression
  pattern</a>.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string to be split.</p></dd><dt><span class="term">pattern</span></dt><dd><p>the regular expression to split substrings around.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the resulting array of split substrings.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3033"></a><h2>toLowerCase</h2><pre class="literallayout">toLowerCase(string)</pre><p>Converts all of the characters in a string to lower case.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose characters are to be converted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with characters converted to lower case.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3058"></a><h2>toString</h2><pre class="literallayout">toString(object)</pre><p>Returns the string value of an aribtrary object.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">object</span></dt><dd><p>the object whose string value is to be returned.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string value of the object.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3083"></a><h2>toUpperCase</h2><pre class="literallayout">toUpperCase(string)</pre><p>Converts all of the characters in a string to upper case.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose characters are to be converted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with characters converted to upper case.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3108"></a><h2>trim</h2><pre class="literallayout">trim(string)</pre><p>Returns a copy of a string with leading and trailing whitespace
  omitted.</p><div class="variablelist"><div class="variablelist-title">Parameters</div><dl class="variablelist"><dt><span class="term">string</span></dt><dd><p>the string whose white space is to be omitted.</p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Returns</div><dl class="variablelist"><dt><span class="term">&nbsp;</span></dt><dd><p>the string with leading and trailing white space omitted.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3133"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/el/Functions.html" target="_blank">org.forgerock.openig.el.Functions</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Patterns"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Patterns &#8212; regular expression patterns</p></div><div class="refsect1"><a name="d99e3151"></a><h2>Description</h2><a class="indexterm" name="d99e3154"></a><p>Patterns in configuration parameters and expressions use the standard
  Java regular expression <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" target="_blank">Pattern</a> class. For more information on regular expressions, see
  Oracle's <a class="link" href="http://download.oracle.com/javase/tutorial/essential/regex/index.html" target="_blank">tutorial on Regular Expressions</a>.</p></div><div class="refsect1"><a name="d99e3167"></a><h2>Pattern Templates</h2><p>A regular expression pattern template expresses a transformation to be
  applied for a matching regular expression pattern. It may contain references
  to <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg" target="_blank">capturing groups</a> within the match result. Each occurrence of
  <code class="literal">$g</code> (where <em class="replaceable"><code>g</code></em> is an integer value)
  is substituted by the indexed capturing group in a match result. Capturing
  group zero <code class="literal">"$0"</code> denotes the entire pattern match. A dollar
  sign or numeral literal immediately following a capture group reference can
  be included as a literal in the template by preceding it with a backslash (
  <code class="literal">\</code> ). Backslash itself must be also escaped in this
  manner.</p></div><div class="refsect1"><a name="d99e3187"></a><h2>See Also</h2><p>Java <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" target="_blank">Pattern</a> class</p><p><a class="link" href="http://download.oracle.com/javase/tutorial/essential/regex/index.html" target="_blank">Regular Expressions tutorial</a></p></div></div></div><div class="reference"><div class="titlepage"><div><div><h1 class="title"><a name="exchange-object-model-conf"></a>Exchange Object Model</h1></div></div><hr></div><div class="partintro"><div></div><p>Expressions are evaluated within an exchange object model scope.</p><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="refentrytitle"><a href="#Exchange">Exchange</a></span><span class="refpurpose"> &#8212; HTTP exchange of request and response</span></dt><dt><span class="refentrytitle"><a href="#Request">Request</a></span><span class="refpurpose"> &#8212; HTTP exchange request</span></dt><dt><span class="refentrytitle"><a href="#Principal">Principal</a></span><span class="refpurpose"> &#8212; user principal in HTTP exchange</span></dt><dt><span class="refentrytitle"><a href="#Response">Response</a></span><span class="refpurpose"> &#8212; HTTP exchange response</span></dt><dt><span class="refentrytitle"><a href="#URI">URI</a></span><span class="refpurpose"> &#8212; Uniform Resource Identifier in HTTP exchange</span></dt></dl></div></div><div lang="en" class="refentry"><a name="Exchange"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Exchange &#8212; HTTP exchange of request and response</p></div><div class="refsect1"><a name="d99e3216"></a><h2>Description</h2><a class="indexterm" name="d99e3219"></a><p>The root object for the exchange object model: an HTTP exchange of
  request and response. The exchange object model parallels the document object
  model, exposing elements of the exchange. It supports this by exposing a set
  of fixed properties and allowing arbitrary properties to be added.</p></div><div class="refsect1"><a name="d99e3226"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"exchange"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Self-referential property to make this the root object in the
     exchange object model.</p></dd><dt><span class="term"><a href="../reference/index.html#Request" class="link"><code class="code">"request"</code></a>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The request portion of the HTTP exchange.</p></dd><dt><span class="term"><a href="../reference/index.html#Response" class="link"><code class="code">"response"</code></a>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The response portion of the HTTP exchange.</p></dd><dt><span class="term"><a href="../reference/index.html#Principal" class="link"><code class="code">"principal"</code></a>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The principal associated with the request, or <code class="literal">null</code>
     if unknown.</p></dd><dt><span class="term"><code class="code">"session"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Session context associated with the remote client. Exposes session
     attributes as name-value pairs, where both name and value are
     strings.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3286"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/http/Exchange.html" target="_blank">org.forgerock.openig.http.Exchange</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Request"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Request &#8212; HTTP exchange request</p></div><div class="refsect1"><a name="d99e3304"></a><h2>Description</h2><a class="indexterm" name="d99e3307"></a><p>An HTTP request message in an exchange object model.</p></div><div class="refsect1"><a name="d99e3314"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"method"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The method to be performed on the resource. Example:
     <code class="literal">"GET"</code>.</p></dd><dt><span class="term"><a href="../reference/index.html#URI" class="link"><code class="code">"uri"</code></a>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The fully-qualified URI of the resource being accessed. Example:
     <code class="literal">"http://www.example.com/resource.txt"</code>.</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Protocol version. Example: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes message header fields as name-value pairs, where name is
     header name and value is an array of header values.</p></dd><dt><span class="term"><code class="code">"cookies"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes incoming request cookies as name-value pairs, where name is
     cookie name and value is an array of string cookie values.</p></dd><dt><span class="term"><code class="code">"form"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes query parameters and/or
     <code class="literal">application/x-www-form-urlencoded</code> entity as name-value
     pairs, where name is the field name and value is an array of string
     values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The message entity body (no accessible properties).</p></dd></dl></div></div><div class="refsect1"><a name="d99e3401"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/http/Request.html" target="_blank">org.forgerock.openig.http.Request</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Principal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Principal &#8212; user principal in HTTP exchange</p></div><div class="refsect1"><a name="d99e3419"></a><h2>Description</h2><a class="indexterm" name="d99e3422"></a><p>Represents a user principal in an exchange object model, containing the
  name of the current authenticated user.</p></div><div class="refsect1"><a name="d99e3429"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"name"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The name of the principal, or <code class="literal">null</code> if principal
     is undefined (user has not been authenticated).</p></dd></dl></div></div><div class="refsect1"><a name="d99e3446"></a><h2>Javadoc</h2><p><a class="link" href="http://download.oracle.com/javase/6/docs/api/java/security/Principal.html" target="_blank">java.security.Principal</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="Response"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Response &#8212; HTTP exchange response</p></div><div class="refsect1"><a name="d99e3464"></a><h2>Description</h2><a class="indexterm" name="d99e3467"></a><p>An HTTP response message in an exchange object model.</p></div><div class="refsect1"><a name="d99e3474"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"status"</code>: <span class="emphasis"><em>number</em></span></span></dt><dd><p>The response status code. Example: 200.</p></dd><dt><span class="term"><code class="code">"reason"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The response status reason. Example: <code class="literal">"OK"</code>.</p></dd><dt><span class="term"><code class="code">"version"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>Protocol version. Example: <code class="literal">"HTTP/1.1"</code>.</p></dd><dt><span class="term"><code class="code">"headers"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>Exposes message header fields as name-value pairs, where name is
     header name and value is an array of header values.</p></dd><dt><span class="term"><code class="code">"entity"</code>: <span class="emphasis"><em>object</em></span></span></dt><dd><p>The message entity body (no accessible properties).</p></dd></dl></div></div><div class="refsect1"><a name="d99e3534"></a><h2>Javadoc</h2><p><a class="link" href="http://docs.forgerock.org/en/openig/2.1.0/javadoc/org/forgerock/openig/http/Response.html" target="_blank">org.forgerock.openig.http.Response</a></p></div></div><div lang="en" class="refentry"><div class="refentry.separator"><hr></div><a name="URI"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>URI &#8212; Uniform Resource Identifier in HTTP exchange</p></div><div class="refsect1"><a name="d99e3552"></a><h2>Description</h2><a class="indexterm" name="d99e3555"></a><p>Represents a Uniform Resource Identifier (URI) reference in an exchange
  object model. URI properties are read-only.</p></div><div class="refsect1"><a name="d99e3562"></a><h2>Properties</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">"scheme"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The scheme component of the URI, or <code class="literal">null</code> if the
     scheme is undefined.</p></dd><dt><span class="term"><code class="code">"schemeSpecificPart"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded scheme-specific part of the URI, never
     <code class="literal">null</code>.</p></dd><dt><span class="term"><code class="code">"authority"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded authority component of the URI, or
     <code class="literal">null</code> if the authority is undefined.</p></dd><dt><span class="term"><code class="code">"userInfo"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded user-information component of the URI, or
     <code class="literal">null</code> if the user information is undefined.</p></dd><dt><span class="term"><code class="code">"host"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The host component of the URI, or <code class="literal">null</code> if the
     host is undefined.</p></dd><dt><span class="term"><code class="code">"port"</code>: <span class="emphasis"><em>number</em></span></span></dt><dd><p>The port component of the URI, or <code class="literal">null</code> if the
     port is undefined.</p></dd><dt><span class="term"><code class="code">"path"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded path component of the URI, or <code class="literal">null</code>
     if the path is undefined.</p></dd><dt><span class="term"><code class="code">"query"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded query component of the URI, or <code class="literal">null</code>
     if the query is undefined.</p></dd><dt><span class="term"><code class="code">"fragment"</code>: <span class="emphasis"><em>string</em></span></span></dt><dd><p>The decoded fragment component of the URI, or <code class="literal">null</code>
     if the fragment is undefined.</p></dd></dl></div></div><div class="refsect1"><a name="d99e3683"></a><h2>Javadoc</h2><p><a class="link" href="http://download.oracle.com/javase/6/docs/api/java/net/URI.html" target="_blank">java.net.URI</a></p></div></div></div><div class="index"><div class="titlepage"><div><div><h1 class="title"><a name="d99e3689"></a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>E</h3><dl><dt>Exchange Object Model</dt><dd><dl><dt>Exchange, <a class="indexterm" href="#d99e3216">Description</a></dt><dt>Principal, <a class="indexterm" href="#d99e3419">Description</a></dt><dt>Request, <a class="indexterm" href="#d99e3304">Description</a></dt><dt>Response, <a class="indexterm" href="#d99e3464">Description</a></dt><dt>URI, <a class="indexterm" href="#d99e3552">Description</a></dt></dl></dd><dt>Expressions</dt><dd><dl><dt>Expressions, <a class="indexterm" href="#d99e2553">Description</a></dt><dt>Functions, <a class="indexterm" href="#d99e2785">Description</a></dt><dt>Patterns, <a class="indexterm" href="#d99e3151">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Filters</dt><dd><dl><dt>AssignmentFilter, <a class="indexterm" href="#d99e1145">Description</a></dt><dt>CaptureFilter, <a class="indexterm" href="#d99e1245">Description</a></dt><dt>CookieFilter, <a class="indexterm" href="#d99e1345">Description</a></dt><dt>CryptoHeaderFilter, <a class="indexterm" href="#d99e1864">Description</a></dt><dt>EntityExtractFilter, <a class="indexterm" href="#d99e1439">Description</a></dt><dt>ExceptionFilter, <a class="indexterm" href="#d99e1583">Description</a></dt><dt>FileAttributesFilter, <a class="indexterm" href="#d99e1633">Description</a></dt><dt>HeaderFilter, <a class="indexterm" href="#d99e1764">Description</a></dt><dt>HttpBasicAuthFilter, <a class="indexterm" href="#d99e1968">Description</a></dt><dt>SqlAttributesFilter, <a class="indexterm" href="#d99e2054">Description</a></dt><dt>StaticRequestFilter, <a class="indexterm" href="#d99e2159">Description</a></dt><dt>SwitchFilter, <a class="indexterm" href="#d99e2275">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>Handlers</dt><dd><dl><dt>Chain, <a class="indexterm" href="#d99e749">Description</a></dt><dt>ClientHandler, <a class="indexterm" href="#d99e811">Description</a></dt><dt>DispatchHandler, <a class="indexterm" href="#d99e861">Description</a></dt><dt>SequenceHandler, <a class="indexterm" href="#d99e954">Description</a></dt><dt>StaticResponseHandler, <a class="indexterm" href="#d99e1032">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Miscellaneous Heap Objects</dt><dd><dl><dt>ConsoleLogSink, <a class="indexterm" href="#d99e2382">Description</a></dt><dt>TemporaryStorage, <a class="indexterm" href="#d99e2467">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Required configuration</dt><dd><dl><dt>Gateway servlet, <a class="indexterm" href="#d99e287">Description</a></dt><dt>Heap objects, <a class="indexterm" href="#d99e356">Description</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Servlets</dt><dd><dl><dt>DispatchServlet, <a class="indexterm" href="#d99e493">Description</a></dt><dt>HandlerServlet, <a class="indexterm" href="#d99e586">Description</a></dt><dt>Servlet, <a class="indexterm" href="#d99e643">Description</a></dt><dt>ServletFilter, <a class="indexterm" href="#d99e693">Description</a></dt></dl></dd></dl></div></div></div></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10060&components=10220&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>