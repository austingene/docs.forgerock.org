<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>OpenAM 11.0.0 Administration Guide</title><link rel="stylesheet" type="text/css" href="css/coredoc.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="description" content="Guide to configuring and using OpenAM features. OpenAM provides open source Authentication, Authorization, Entitlement and Federation software."><script type="text/javascript">
/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
</script>
<script type="text/javascript">
/* On double-click, reformat <div class="screen"> for easy copying. */
var minusPng = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAADHmlDQ1BJQ0MgUHJvZmlsZQAAeAGFVN9r01AU/tplnbDhizpnEQk+aJFuZFN0Q5y2a1e6zVrqNrchSJumbVyaxiTtfrAH2YtvOsV38Qc++QcM2YNve5INxhRh+KyIIkz2IrOemzRNJ1MDufe73/nuOSfn5F6g+XFa0xQvDxRVU0/FwvzE5BTf8gFeHEMr/GhNi4YWSiZHQA/Tsnnvs/MOHsZsdO5v36v+Y9WalQwR8BwgvpQ1xCLhWaBpXNR0E+DWie+dMTXCzUxzWKcECR9nOG9jgeGMjSOWZjQ1QJoJwgfFQjpLuEA4mGng8w3YzoEU5CcmqZIuizyrRVIv5WRFsgz28B9zg/JfsKiU6Zut5xCNbZoZTtF8it4fOX1wjOYA1cE/Xxi9QbidcFg246M1fkLNJK4RJr3n7nRpmO1lmpdZKRIlHCS8YlSuM2xp5gsDiZrm0+30UJKwnzS/NDNZ8+PtUJUE6zHF9fZLRvS6vdfbkZMH4zU+pynWf0D+vff1corleZLw67QejdX0W5I6Vtvb5M2mI8PEd1E/A0hCgo4cZCjgkUIMYZpjxKr4TBYZIkqk0ml0VHmyONY7KJOW7RxHeMlfDrheFvVbsrj24Pue3SXXjrwVhcW3o9hR7bWB6bqyE5obf3VhpaNu4Te55ZsbbasLCFH+iuWxSF5lyk+CUdd1NuaQU5f8dQvPMpTuJXYSWAy6rPBe+CpsCk+FF8KXv9TIzt6tEcuAcSw+q55TzcbsJdJM0utkuL+K9ULGGPmQMUNanb4kTZyKOfLaUAsnBneC6+biXC/XB567zF3h+rkIrS5yI47CF/VFfCHwvjO+Pl+3b4hhp9u+02TrozFa67vTkbqisXqUj9sn9j2OqhMZsrG+sX5WCCu0omNqSrN0TwADJW1Ol/MFk+8RhAt8iK4tiY+rYleQTysKb5kMXpcMSa9I2S6wO4/tA7ZT1l3maV9zOfMqcOkb/cPrLjdVBl4ZwNFzLhegM3XkCbB8XizrFdsfPJ63gJE722OtPW1huos+VqvbdC5bHgG7D6vVn8+q1d3n5H8LeKP8BqkjCtbCoV8yAAAAUklEQVQoFWO8HyrynwEKFFa9ZoSxiaEfhInC9TKADAICBkowyAwmYmwmRg3VDGLBZtvHPGmE37Eo4J/0FCMsaesibDZicRiKENVcRDWDGKmVIAFsW0aIsyjVzwAAAABJRU5ErkJggg%3D%3D";
var minus = "<img alt=\"[-]\" class=\"toggle\" width=\"18\" height=\"10\" src=\"" + minusPng + "\">";
var plusPng = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAADHmlDQ1BJQ0MgUHJvZmlsZQAAeAGFVN9r01AU/tplnbDhizpnEQk+aJFuZFN0Q5y2a1e6zVrqNrchSJumbVyaxiTtfrAH2YtvOsV38Qc++QcM2YNve5INxhRh+KyIIkz2IrOemzRNJ1MDufe73/nuOSfn5F6g+XFa0xQvDxRVU0/FwvzE5BTf8gFeHEMr/GhNi4YWSiZHQA/Tsnnvs/MOHsZsdO5v36v+Y9WalQwR8BwgvpQ1xCLhWaBpXNR0E+DWie+dMTXCzUxzWKcECR9nOG9jgeGMjSOWZjQ1QJoJwgfFQjpLuEA4mGng8w3YzoEU5CcmqZIuizyrRVIv5WRFsgz28B9zg/JfsKiU6Zut5xCNbZoZTtF8it4fOX1wjOYA1cE/Xxi9QbidcFg246M1fkLNJK4RJr3n7nRpmO1lmpdZKRIlHCS8YlSuM2xp5gsDiZrm0+30UJKwnzS/NDNZ8+PtUJUE6zHF9fZLRvS6vdfbkZMH4zU+pynWf0D+vff1corleZLw67QejdX0W5I6Vtvb5M2mI8PEd1E/A0hCgo4cZCjgkUIMYZpjxKr4TBYZIkqk0ml0VHmyONY7KJOW7RxHeMlfDrheFvVbsrj24Pue3SXXjrwVhcW3o9hR7bWB6bqyE5obf3VhpaNu4Te55ZsbbasLCFH+iuWxSF5lyk+CUdd1NuaQU5f8dQvPMpTuJXYSWAy6rPBe+CpsCk+FF8KXv9TIzt6tEcuAcSw+q55TzcbsJdJM0utkuL+K9ULGGPmQMUNanb4kTZyKOfLaUAsnBneC6+biXC/XB567zF3h+rkIrS5yI47CF/VFfCHwvjO+Pl+3b4hhp9u+02TrozFa67vTkbqisXqUj9sn9j2OqhMZsrG+sX5WCCu0omNqSrN0TwADJW1Ol/MFk+8RhAt8iK4tiY+rYleQTysKb5kMXpcMSa9I2S6wO4/tA7ZT1l3maV9zOfMqcOkb/cPrLjdVBl4ZwNFzLhegM3XkCbB8XizrFdsfPJ63gJE722OtPW1huos+VqvbdC5bHgG7D6vVn8+q1d3n5H8LeKP8BqkjCtbCoV8yAAAAYElEQVQoFWO8HyrynwEKFFa9ZoSxiaEfhInC9TKADAICBlz4Q67UfxDGJQ8SB5nBRIzNxKihmkEs2Gz7mCeN8DtUAbIY/6SnGGFJWxch2whzCbIYNl9QzUVUM4iRWgkSAKcsS/O6iJF0AAAAAElFTkSuQmCC";
var plus = "<img alt=\"[+]\" class=\"toggle\" width=\"18\" height=\"10\" src=\"" + plusPng + "\">";

$(document).ready(function() {

  /*
   * DOCS-36: HTML output should wrap large images in links to themselves at
   *          full size
   *
   * It would be cool if when you click (large) images in HTML output, you get
   * the same effect as right-click &gt; copy image location + new tab &gt;
   * paste copied image location and go.
   *
   * Run this before inserting [-] and [+] images below, otherwise clicking
   * [-] opens a new browser tab with the [-] image.
   */
  $("img").wrap(function() {
    return "<a target=\"_blank\" href=\"" + $(this).attr('src') + "\" />";
  });

   /*
    Include both a wrapped (.screen) and unwrapped (.flat) version of
    each screen element, with [-] image to collapse and [+] image
    to expand content.
   */
  $(".screen").each(function () {
    $(this).replaceWith(
      "<div class=\"screen\" title=\"Click [-] to flatten lines.\">"
        + minus + $(this).html() + "</div>" +
      "<div class=\"flat nodisplay\" title=\"Click [+] to wrap long lines.\">"
        + plus + $(this).html().replace(/(\n|\r\n) /g," ") + "</div>"
    )});

  /*
   * COMMWEB-73: Make it easier to copy links to anchors in the HTML core docs
   *
   * On mouseover, prepend a ↪ to titles which links to the element.
   *
   * This code works for elements that are class="title". To affect procedures
   * as well for example, change $(".title") to $(".title, .procedure"). Then
   * also change the code to insert the ↪ in the procedure title, rather than
   * outside the entire procedure, which is a block. The same applies to
   * example and probably other block-formatted elements.
   */
  $(".title").each(function() {
    var href = $(this).children("a").attr("name");
    $(this).prepend('<a href=\"#' + href
      + '\" class=\"showlink\" style=\"display: none;\">&#x021AA; </a>');
    $(this).mouseenter(function() {
      $(this).children('a.showlink').show();
    }).mouseleave(function() {
      $(this).children('a.showlink').hide();
    });
  });

  /*
   * DOCS-57: Add collapse/expand chapter in single-page HTML
   *
   * Use [-] image to mean "collapse" and [+] image to mean "expand".
   */
  var tocollapse = minus.replace(/toggle/, "tocollapse");
  var toexpand = plus.replace(/toggle/,"toexpand");

  $(".titlepage").css("clear", "left");   /* Fix for DOCS-70 */

  $("div.preface,div.chapter,div.reference,div.appendix,div.glossary,div.index").each(function () {
      $(this).prepend(tocollapse + toexpand);
  });
  $(".toexpand").hide();

  $(".tocollapse").click(function() {
      $(this).siblings(":not(.titlepage)").hide();
      $(this).siblings(".toexpand").show();
      $(this).hide();
  });

  $(".toexpand").click(function() {
      $(this).siblings("*").show();
      $(this).hide();
  });

  var bookcollapse = minus.replace(/toggle/,"bookcollapse");
  var bookexpand = plus.replace(/toggle/,"bookexpand");
  $("div.book").prepend(bookcollapse + bookexpand);
  $(".bookexpand").hide();

  $(".bookcollapse").click(function() {
      $(".tocollapse").click();
      $(".bookexpand").show();
      $(this).hide();
  });

  $(".bookexpand").click(function() {
      $(".toexpand").click();
      $(".bookcollapse").show();
      $(this).hide();
  });
});

/*
  Add class="nodisplay" to parent div; remove from parent's sibling.
  If the current parent is .screen, then next sibling is .flat.
*/
$(".toggle").live("click", function() {
  $(this).parent().toggleClass("nodisplay");
  if ($(this).parent().hasClass("screen")) {
    $(this).parent().next().toggleClass("nodisplay");
  } else {
    $(this).parent().prev().toggleClass("nodisplay");
  }
});
</script>
<!-- START SyntaxHighlighter 3.0.83 -->
<!-- shCore.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('K M;I(M)1S 2U("2a\'t 4k M 4K 2g 3l 4G 4H");(6(){6 r(f,e){I(!M.1R(f))1S 3m("3s 15 4R");K a=f.1w;f=M(f.1m,t(f)+(e||""));I(a)f.1w={1m:a.1m,19:a.19?a.19.1a(0):N};H f}6 t(f){H(f.1J?"g":"")+(f.4s?"i":"")+(f.4p?"m":"")+(f.4v?"x":"")+(f.3n?"y":"")}6 B(f,e,a,b){K c=u.L,d,h,g;v=R;5K{O(;c--;){g=u[c];I(a&g.3r&&(!g.2p||g.2p.W(b))){g.2q.12=e;I((h=g.2q.X(f))&&h.P===e){d={3k:g.2b.W(b,h,a),1C:h};1N}}}}5v(i){1S i}5q{v=11}H d}6 p(f,e,a){I(3b.Z.1i)H f.1i(e,a);O(a=a||0;a<f.L;a++)I(f[a]===e)H a;H-1}M=6(f,e){K a=[],b=M.1B,c=0,d,h;I(M.1R(f)){I(e!==1d)1S 3m("2a\'t 5r 5I 5F 5B 5C 15 5E 5p");H r(f)}I(v)1S 2U("2a\'t W 3l M 59 5m 5g 5x 5i");e=e||"";O(d={2N:11,19:[],2K:6(g){H e.1i(g)>-1},3d:6(g){e+=g}};c<f.L;)I(h=B(f,c,b,d)){a.U(h.3k);c+=h.1C[0].L||1}Y I(h=n.X.W(z[b],f.1a(c))){a.U(h[0]);c+=h[0].L}Y{h=f.3a(c);I(h==="[")b=M.2I;Y I(h==="]")b=M.1B;a.U(h);c++}a=15(a.1K(""),n.Q.W(e,w,""));a.1w={1m:f,19:d.2N?d.19:N};H a};M.3v="1.5.0";M.2I=1;M.1B=2;K C=/\\$(?:(\\d\\d?|[$&`\'])|{([$\\w]+)})/g,w=/[^5h]+|([\\s\\S])(?=[\\s\\S]*\\1)/g,A=/^(?:[?*+]|{\\d+(?:,\\d*)?})\\??/,v=11,u=[],n={X:15.Z.X,1A:15.Z.1A,1C:1r.Z.1C,Q:1r.Z.Q,1e:1r.Z.1e},x=n.X.W(/()??/,"")[1]===1d,D=6(){K f=/^/g;n.1A.W(f,"");H!f.12}(),y=6(){K f=/x/g;n.Q.W("x",f,"");H!f.12}(),E=15.Z.3n!==1d,z={};z[M.2I]=/^(?:\\\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S]))/;z[M.1B]=/^(?:\\\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\\d*|x[\\29-26-f]{2}|u[\\29-26-f]{4}|c[A-3o-z]|[\\s\\S])|\\(\\?[:=!]|[?*+]\\?|{\\d+(?:,\\d*)?}\\??)/;M.1h=6(f,e,a,b){u.U({2q:r(f,"g"+(E?"y":"")),2b:e,3r:a||M.1B,2p:b||N})};M.2n=6(f,e){K a=f+"/"+(e||"");H M.2n[a]||(M.2n[a]=M(f,e))};M.3c=6(f){H r(f,"g")};M.5l=6(f){H f.Q(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g,"\\\\$&")};M.5e=6(f,e,a,b){e=r(e,"g"+(b&&E?"y":""));e.12=a=a||0;f=e.X(f);H b?f&&f.P===a?f:N:f};M.3q=6(){M.1h=6(){1S 2U("2a\'t 55 1h 54 3q")}};M.1R=6(f){H 53.Z.1q.W(f)==="[2m 15]"};M.3p=6(f,e,a,b){O(K c=r(e,"g"),d=-1,h;h=c.X(f);){a.W(b,h,++d,f,c);c.12===h.P&&c.12++}I(e.1J)e.12=0};M.57=6(f,e){H 6 a(b,c){K d=e[c].1I?e[c]:{1I:e[c]},h=r(d.1I,"g"),g=[],i;O(i=0;i<b.L;i++)M.3p(b[i],h,6(k){g.U(d.3j?k[d.3j]||"":k[0])});H c===e.L-1||!g.L?g:a(g,c+1)}([f],0)};15.Z.1p=6(f,e){H J.X(e[0])};15.Z.W=6(f,e){H J.X(e)};15.Z.X=6(f){K e=n.X.1p(J,14),a;I(e){I(!x&&e.L>1&&p(e,"")>-1){a=15(J.1m,n.Q.W(t(J),"g",""));n.Q.W(f.1a(e.P),a,6(){O(K c=1;c<14.L-2;c++)I(14[c]===1d)e[c]=1d})}I(J.1w&&J.1w.19)O(K b=1;b<e.L;b++)I(a=J.1w.19[b-1])e[a]=e[b];!D&&J.1J&&!e[0].L&&J.12>e.P&&J.12--}H e};I(!D)15.Z.1A=6(f){(f=n.X.W(J,f))&&J.1J&&!f[0].L&&J.12>f.P&&J.12--;H!!f};1r.Z.1C=6(f){M.1R(f)||(f=15(f));I(f.1J){K e=n.1C.1p(J,14);f.12=0;H e}H f.X(J)};1r.Z.Q=6(f,e){K a=M.1R(f),b,c;I(a&&1j e.58()==="3f"&&e.1i("${")===-1&&y)H n.Q.1p(J,14);I(a){I(f.1w)b=f.1w.19}Y f+="";I(1j e==="6")c=n.Q.W(J,f,6(){I(b){14[0]=1f 1r(14[0]);O(K d=0;d<b.L;d++)I(b[d])14[0][b[d]]=14[d+1]}I(a&&f.1J)f.12=14[14.L-2]+14[0].L;H e.1p(N,14)});Y{c=J+"";c=n.Q.W(c,f,6(){K d=14;H n.Q.W(e,C,6(h,g,i){I(g)5b(g){24"$":H"$";24"&":H d[0];24"`":H d[d.L-1].1a(0,d[d.L-2]);24"\'":H d[d.L-1].1a(d[d.L-2]+d[0].L);5a:i="";g=+g;I(!g)H h;O(;g>d.L-3;){i=1r.Z.1a.W(g,-1)+i;g=1Q.3i(g/10)}H(g?d[g]||"":"$")+i}Y{g=+i;I(g<=d.L-3)H d[g];g=b?p(b,i):-1;H g>-1?d[g+1]:h}})})}I(a&&f.1J)f.12=0;H c};1r.Z.1e=6(f,e){I(!M.1R(f))H n.1e.1p(J,14);K a=J+"",b=[],c=0,d,h;I(e===1d||+e<0)e=5D;Y{e=1Q.3i(+e);I(!e)H[]}O(f=M.3c(f);d=f.X(a);){I(f.12>c){b.U(a.1a(c,d.P));d.L>1&&d.P<a.L&&3b.Z.U.1p(b,d.1a(1));h=d[0].L;c=f.12;I(b.L>=e)1N}f.12===d.P&&f.12++}I(c===a.L){I(!n.1A.W(f,"")||h)b.U("")}Y b.U(a.1a(c));H b.L>e?b.1a(0,e):b};M.1h(/\\(\\?#[^)]*\\)/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"});M.1h(/\\((?!\\?)/,6(){J.19.U(N);H"("});M.1h(/\\(\\?<([$\\w]+)>/,6(f){J.19.U(f[1]);J.2N=R;H"("});M.1h(/\\\\k<([\\w$]+)>/,6(f){K e=p(J.19,f[1]);H e>-1?"\\\\"+(e+1)+(3R(f.2S.3a(f.P+f[0].L))?"":"(?:)"):f[0]});M.1h(/\\[\\^?]/,6(f){H f[0]==="[]"?"\\\\b\\\\B":"[\\\\s\\\\S]"});M.1h(/^\\(\\?([5A]+)\\)/,6(f){J.3d(f[1]);H""});M.1h(/(?:\\s+|#.*)+/,6(f){H n.1A.W(A,f.2S.1a(f.P+f[0].L))?"":"(?:)"},M.1B,6(){H J.2K("x")});M.1h(/\\./,6(){H"[\\\\s\\\\S]"},M.1B,6(){H J.2K("s")})})();1j 2e!="1d"&&(2e.M=M);K 1v=6(){6 r(a,b){a.1l.1i(b)!=-1||(a.1l+=" "+b)}6 t(a){H a.1i("3e")==0?a:"3e"+a}6 B(a){H e.1Y.2A[t(a)]}6 p(a,b,c){I(a==N)H N;K d=c!=R?a.3G:[a.2G],h={"#":"1c",".":"1l"}[b.1o(0,1)]||"3h",g,i;g=h!="3h"?b.1o(1):b.5u();I((a[h]||"").1i(g)!=-1)H a;O(a=0;d&&a<d.L&&i==N;a++)i=p(d[a],b,c);H i}6 C(a,b){K c={},d;O(d 2g a)c[d]=a[d];O(d 2g b)c[d]=b[d];H c}6 w(a,b,c,d){6 h(g){g=g||1P.5y;I(!g.1F){g.1F=g.52;g.3N=6(){J.5w=11}}c.W(d||1P,g)}a.3g?a.3g("4U"+b,h):a.4y(b,h,11)}6 A(a,b){K c=e.1Y.2j,d=N;I(c==N){c={};O(K h 2g e.1U){K g=e.1U[h];d=g.4x;I(d!=N){g.1V=h.4w();O(g=0;g<d.L;g++)c[d[g]]=h}}e.1Y.2j=c}d=e.1U[c[a]];d==N&&b!=11&&1P.1X(e.13.1x.1X+(e.13.1x.3E+a));H d}6 v(a,b){O(K c=a.1e("\\n"),d=0;d<c.L;d++)c[d]=b(c[d],d);H c.1K("\\n")}6 u(a,b){I(a==N||a.L==0||a=="\\n")H a;a=a.Q(/</g,"&1y;");a=a.Q(/ {2,}/g,6(c){O(K d="",h=0;h<c.L-1;h++)d+=e.13.1W;H d+" "});I(b!=N)a=v(a,6(c){I(c.L==0)H"";K d="";c=c.Q(/^(&2s;| )+/,6(h){d=h;H""});I(c.L==0)H d;H d+\'<17 1g="\'+b+\'">\'+c+"</17>"});H a}6 n(a,b){a.1e("\\n");O(K c="",d=0;d<50;d++)c+="                    ";H a=v(a,6(h){I(h.1i("\\t")==-1)H h;O(K g=0;(g=h.1i("\\t"))!=-1;)h=h.1o(0,g)+c.1o(0,b-g%b)+h.1o(g+1,h.L);H h})}6 x(a){H a.Q(/^\\s+|\\s+$/g,"")}6 D(a,b){I(a.P<b.P)H-1;Y I(a.P>b.P)H 1;Y I(a.L<b.L)H-1;Y I(a.L>b.L)H 1;H 0}6 y(a,b){6 c(k){H k[0]}O(K d=N,h=[],g=b.2D?b.2D:c;(d=b.1I.X(a))!=N;){K i=g(d,b);I(1j i=="3f")i=[1f e.2L(i,d.P,b.23)];h=h.1O(i)}H h}6 E(a){K b=/(.*)((&1G;|&1y;).*)/;H a.Q(e.3A.3M,6(c){K d="",h=N;I(h=b.X(c)){c=h[1];d=h[2]}H\'<a 2h="\'+c+\'">\'+c+"</a>"+d})}6 z(){O(K a=1E.36("1k"),b=[],c=0;c<a.L;c++)a[c].3s=="20"&&b.U(a[c]);H b}6 f(a){a=a.1F;K b=p(a,".20",R);a=p(a,".3O",R);K c=1E.4i("3t");I(!(!a||!b||p(a,"3t"))){B(b.1c);r(b,"1m");O(K d=a.3G,h=[],g=0;g<d.L;g++)h.U(d[g].4z||d[g].4A);h=h.1K("\\r");c.39(1E.4D(h));a.39(c);c.2C();c.4C();w(c,"4u",6(){c.2G.4E(c);b.1l=b.1l.Q("1m","")})}}I(1j 3F!="1d"&&1j M=="1d")M=3F("M").M;K e={2v:{"1g-27":"","2i-1s":1,"2z-1s-2t":11,1M:N,1t:N,"42-45":R,"43-22":4,1u:R,16:R,"3V-17":R,2l:11,"41-40":R,2k:11,"1z-1k":11},13:{1W:"&2s;",2M:R,46:11,44:11,34:"4n",1x:{21:"4o 1m",2P:"?",1X:"1v\\n\\n",3E:"4r\'t 4t 1D O: ",4g:"4m 4B\'t 51 O 1z-1k 4F: ",37:\'<!4T 1z 4S "-//4V//3H 4W 1.0 4Z//4Y" "1Z://2y.3L.3K/4X/3I/3H/3I-4P.4J"><1z 4I="1Z://2y.3L.3K/4L/5L"><3J><4N 1Z-4M="5G-5M" 6K="2O/1z; 6J=6I-8" /><1t>6L 1v</1t></3J><3B 1L="25-6M:6Q,6P,6O,6N-6F;6y-2f:#6x;2f:#6w;25-22:6v;2O-3D:3C;"><T 1L="2O-3D:3C;3w-32:1.6z;"><T 1L="25-22:6A-6E;">1v</T><T 1L="25-22:.6C;3w-6B:6R;"><T>3v 3.0.76 (72 73 3x)</T><T><a 2h="1Z://3u.2w/1v" 1F="38" 1L="2f:#3y">1Z://3u.2w/1v</a></T><T>70 17 6U 71.</T><T>6T 6X-3x 6Y 6D.</T></T><T>6t 61 60 J 1k, 5Z <a 2h="6u://2y.62.2w/63-66/65?64=5X-5W&5P=5O" 1L="2f:#3y">5R</a> 5V <2R/>5U 5T 5S!</T></T></3B></1z>\'}},1Y:{2j:N,2A:{}},1U:{},3A:{6n:/\\/\\*[\\s\\S]*?\\*\\//2c,6m:/\\/\\/.*$/2c,6l:/#.*$/2c,6k:/"([^\\\\"\\n]|\\\\.)*"/g,6o:/\'([^\\\\\'\\n]|\\\\.)*\'/g,6p:1f M(\'"([^\\\\\\\\"]|\\\\\\\\.)*"\',"3z"),6s:1f M("\'([^\\\\\\\\\']|\\\\\\\\.)*\'","3z"),6q:/(&1y;|<)!--[\\s\\S]*?--(&1G;|>)/2c,3M:/\\w+:\\/\\/[\\w-.\\/?%&=:@;]*/g,6a:{18:/(&1y;|<)\\?=?/g,1b:/\\?(&1G;|>)/g},69:{18:/(&1y;|<)%=?/g,1b:/%(&1G;|>)/g},6d:{18:/(&1y;|<)\\s*1k.*?(&1G;|>)/2T,1b:/(&1y;|<)\\/\\s*1k\\s*(&1G;|>)/2T}},16:{1H:6(a){6 b(i,k){H e.16.2o(i,k,e.13.1x[k])}O(K c=\'<T 1g="16">\',d=e.16.2x,h=d.2X,g=0;g<h.L;g++)c+=(d[h[g]].1H||b)(a,h[g]);c+="</T>";H c},2o:6(a,b,c){H\'<2W><a 2h="#" 1g="6e 6h\'+b+" "+b+\'">\'+c+"</a></2W>"},2b:6(a){K b=a.1F,c=b.1l||"";b=B(p(b,".20",R).1c);K d=6(h){H(h=15(h+"6f(\\\\w+)").X(c))?h[1]:N}("6g");b&&d&&e.16.2x[d].2B(b);a.3N()},2x:{2X:["21","2P"],21:{1H:6(a){I(a.V("2l")!=R)H"";K b=a.V("1t");H e.16.2o(a,"21",b?b:e.13.1x.21)},2B:6(a){a=1E.6j(t(a.1c));a.1l=a.1l.Q("47","")}},2P:{2B:6(){K a="68=0";a+=", 18="+(31.30-33)/2+", 32="+(31.2Z-2Y)/2+", 30=33, 2Z=2Y";a=a.Q(/^,/,"");a=1P.6Z("","38",a);a.2C();K b=a.1E;b.6W(e.13.1x.37);b.6V();a.2C()}}}},35:6(a,b){K c;I(b)c=[b];Y{c=1E.36(e.13.34);O(K d=[],h=0;h<c.L;h++)d.U(c[h]);c=d}c=c;d=[];I(e.13.2M)c=c.1O(z());I(c.L===0)H d;O(h=0;h<c.L;h++){O(K g=c[h],i=a,k=c[h].1l,j=3W 0,l={},m=1f M("^\\\\[(?<2V>(.*?))\\\\]$"),s=1f M("(?<27>[\\\\w-]+)\\\\s*:\\\\s*(?<1T>[\\\\w-%#]+|\\\\[.*?\\\\]|\\".*?\\"|\'.*?\')\\\\s*;?","g");(j=s.X(k))!=N;){K o=j.1T.Q(/^[\'"]|[\'"]$/g,"");I(o!=N&&m.1A(o)){o=m.X(o);o=o.2V.L>0?o.2V.1e(/\\s*,\\s*/):[]}l[j.27]=o}g={1F:g,1n:C(i,l)};g.1n.1D!=N&&d.U(g)}H d},1M:6(a,b){K c=J.35(a,b),d=N,h=e.13;I(c.L!==0)O(K g=0;g<c.L;g++){b=c[g];K i=b.1F,k=b.1n,j=k.1D,l;I(j!=N){I(k["1z-1k"]=="R"||e.2v["1z-1k"]==R){d=1f e.4l(j);j="4O"}Y I(d=A(j))d=1f d;Y 6H;l=i.3X;I(h.2M){l=l;K m=x(l),s=11;I(m.1i("<![6G[")==0){m=m.4h(9);s=R}K o=m.L;I(m.1i("]]\\>")==o-3){m=m.4h(0,o-3);s=R}l=s?m:l}I((i.1t||"")!="")k.1t=i.1t;k.1D=j;d.2Q(k);b=d.2F(l);I((i.1c||"")!="")b.1c=i.1c;i.2G.74(b,i)}}},2E:6(a){w(1P,"4k",6(){e.1M(a)})}};e.2E=e.2E;e.1M=e.1M;e.2L=6(a,b,c){J.1T=a;J.P=b;J.L=a.L;J.23=c;J.1V=N};e.2L.Z.1q=6(){H J.1T};e.4l=6(a){6 b(j,l){O(K m=0;m<j.L;m++)j[m].P+=l}K c=A(a),d,h=1f e.1U.5Y,g=J,i="2F 1H 2Q".1e(" ");I(c!=N){d=1f c;O(K k=0;k<i.L;k++)(6(){K j=i[k];g[j]=6(){H h[j].1p(h,14)}})();d.28==N?1P.1X(e.13.1x.1X+(e.13.1x.4g+a)):h.2J.U({1I:d.28.17,2D:6(j){O(K l=j.17,m=[],s=d.2J,o=j.P+j.18.L,F=d.28,q,G=0;G<s.L;G++){q=y(l,s[G]);b(q,o);m=m.1O(q)}I(F.18!=N&&j.18!=N){q=y(j.18,F.18);b(q,j.P);m=m.1O(q)}I(F.1b!=N&&j.1b!=N){q=y(j.1b,F.1b);b(q,j.P+j[0].5Q(j.1b));m=m.1O(q)}O(j=0;j<m.L;j++)m[j].1V=c.1V;H m}})}};e.4j=6(){};e.4j.Z={V:6(a,b){K c=J.1n[a];c=c==N?b:c;K d={"R":R,"11":11}[c];H d==N?c:d},3Y:6(a){H 1E.4i(a)},4c:6(a,b){K c=[];I(a!=N)O(K d=0;d<a.L;d++)I(1j a[d]=="2m")c=c.1O(y(b,a[d]));H J.4e(c.6b(D))},4e:6(a){O(K b=0;b<a.L;b++)I(a[b]!==N)O(K c=a[b],d=c.P+c.L,h=b+1;h<a.L&&a[b]!==N;h++){K g=a[h];I(g!==N)I(g.P>d)1N;Y I(g.P==c.P&&g.L>c.L)a[b]=N;Y I(g.P>=c.P&&g.P<d)a[h]=N}H a},4d:6(a){K b=[],c=2u(J.V("2i-1s"));v(a,6(d,h){b.U(h+c)});H b},3U:6(a){K b=J.V("1M",[]);I(1j b!="2m"&&b.U==N)b=[b];a:{a=a.1q();K c=3W 0;O(c=c=1Q.6c(c||0,0);c<b.L;c++)I(b[c]==a){b=c;1N a}b=-1}H b!=-1},2r:6(a,b,c){a=["1s","6i"+b,"P"+a,"6r"+(b%2==0?1:2).1q()];J.3U(b)&&a.U("67");b==0&&a.U("1N");H\'<T 1g="\'+a.1K(" ")+\'">\'+c+"</T>"},3Q:6(a,b){K c="",d=a.1e("\\n").L,h=2u(J.V("2i-1s")),g=J.V("2z-1s-2t");I(g==R)g=(h+d-1).1q().L;Y I(3R(g)==R)g=0;O(K i=0;i<d;i++){K k=b?b[i]:h+i,j;I(k==0)j=e.13.1W;Y{j=g;O(K l=k.1q();l.L<j;)l="0"+l;j=l}a=j;c+=J.2r(i,k,a)}H c},49:6(a,b){a=x(a);K c=a.1e("\\n");J.V("2z-1s-2t");K d=2u(J.V("2i-1s"));a="";O(K h=J.V("1D"),g=0;g<c.L;g++){K i=c[g],k=/^(&2s;|\\s)+/.X(i),j=N,l=b?b[g]:d+g;I(k!=N){j=k[0].1q();i=i.1o(j.L);j=j.Q(" ",e.13.1W)}i=x(i);I(i.L==0)i=e.13.1W;a+=J.2r(g,l,(j!=N?\'<17 1g="\'+h+\' 5N">\'+j+"</17>":"")+i)}H a},4f:6(a){H a?"<4a>"+a+"</4a>":""},4b:6(a,b){6 c(l){H(l=l?l.1V||g:g)?l+" ":""}O(K d=0,h="",g=J.V("1D",""),i=0;i<b.L;i++){K k=b[i],j;I(!(k===N||k.L===0)){j=c(k);h+=u(a.1o(d,k.P-d),j+"48")+u(k.1T,j+k.23);d=k.P+k.L+(k.75||0)}}h+=u(a.1o(d),c()+"48");H h},1H:6(a){K b="",c=["20"],d;I(J.V("2k")==R)J.1n.16=J.1n.1u=11;1l="20";J.V("2l")==R&&c.U("47");I((1u=J.V("1u"))==11)c.U("6S");c.U(J.V("1g-27"));c.U(J.V("1D"));a=a.Q(/^[ ]*[\\n]+|[\\n]*[ ]*$/g,"").Q(/\\r/g," ");b=J.V("43-22");I(J.V("42-45")==R)a=n(a,b);Y{O(K h="",g=0;g<b;g++)h+=" ";a=a.Q(/\\t/g,h)}a=a;a:{b=a=a;h=/<2R\\s*\\/?>|&1y;2R\\s*\\/?&1G;/2T;I(e.13.46==R)b=b.Q(h,"\\n");I(e.13.44==R)b=b.Q(h,"");b=b.1e("\\n");h=/^\\s*/;g=4Q;O(K i=0;i<b.L&&g>0;i++){K k=b[i];I(x(k).L!=0){k=h.X(k);I(k==N){a=a;1N a}g=1Q.4q(k[0].L,g)}}I(g>0)O(i=0;i<b.L;i++)b[i]=b[i].1o(g);a=b.1K("\\n")}I(1u)d=J.4d(a);b=J.4c(J.2J,a);b=J.4b(a,b);b=J.49(b,d);I(J.V("41-40"))b=E(b);1j 2H!="1d"&&2H.3S&&2H.3S.1C(/5s/)&&c.U("5t");H b=\'<T 1c="\'+t(J.1c)+\'" 1g="\'+c.1K(" ")+\'">\'+(J.V("16")?e.16.1H(J):"")+\'<3Z 5z="0" 5H="0" 5J="0">\'+J.4f(J.V("1t"))+"<3T><3P>"+(1u?\'<2d 1g="1u">\'+J.3Q(a)+"</2d>":"")+\'<2d 1g="17"><T 1g="3O">\'+b+"</T></2d></3P></3T></3Z></T>"},2F:6(a){I(a===N)a="";J.17=a;K b=J.3Y("T");b.3X=J.1H(a);J.V("16")&&w(p(b,".16"),"5c",e.16.2b);J.V("3V-17")&&w(p(b,".17"),"56",f);H b},2Q:6(a){J.1c=""+1Q.5d(1Q.5n()*5k).1q();e.1Y.2A[t(J.1c)]=J;J.1n=C(e.2v,a||{});I(J.V("2k")==R)J.1n.16=J.1n.1u=11},5j:6(a){a=a.Q(/^\\s+|\\s+$/g,"").Q(/\\s+/g,"|");H"\\\\b(?:"+a+")\\\\b"},5f:6(a){J.28={18:{1I:a.18,23:"1k"},1b:{1I:a.1b,23:"1k"},17:1f M("(?<18>"+a.18.1m+")(?<17>.*?)(?<1b>"+a.1b.1m+")","5o")}}};H e}();1j 2e!="1d"&&(2e.1v=1v);',62,441,'||||||function|||||||||||||||||||||||||||||||||||||return|if|this|var|length|XRegExp|null|for|index|replace|true||div|push|getParam|call|exec|else|prototype||false|lastIndex|config|arguments|RegExp|toolbar|code|left|captureNames|slice|right|id|undefined|split|new|class|addToken|indexOf|typeof|script|className|source|params|substr|apply|toString|String|line|title|gutter|SyntaxHighlighter|_xregexp|strings|lt|html|test|OUTSIDE_CLASS|match|brush|document|target|gt|getHtml|regex|global|join|style|highlight|break|concat|window|Math|isRegExp|throw|value|brushes|brushName|space|alert|vars|http|syntaxhighlighter|expandSource|size|css|case|font|Fa|name|htmlScript|dA|can|handler|gm|td|exports|color|in|href|first|discoveredBrushes|light|collapse|object|cache|getButtonHtml|trigger|pattern|getLineHtml|nbsp|numbers|parseInt|defaults|com|items|www|pad|highlighters|execute|focus|func|all|getDiv|parentNode|navigator|INSIDE_CLASS|regexList|hasFlag|Match|useScriptTags|hasNamedCapture|text|help|init|br|input|gi|Error|values|span|list|250|height|width|screen|top|500|tagName|findElements|getElementsByTagName|aboutDialog|_blank|appendChild|charAt|Array|copyAsGlobal|setFlag|highlighter_|string|attachEvent|nodeName|floor|backref|output|the|TypeError|sticky|Za|iterate|freezeTokens|scope|type|textarea|alexgorbatchev|version|margin|2010|005896|gs|regexLib|body|center|align|noBrush|require|childNodes|DTD|xhtml1|head|org|w3|url|preventDefault|container|tr|getLineNumbersHtml|isNaN|userAgent|tbody|isLineHighlighted|quick|void|innerHTML|create|table|links|auto|smart|tab|stripBrs|tabs|bloggerMode|collapsed|plain|getCodeLinesHtml|caption|getMatchesHtml|findMatches|figureOutLineNumbers|removeNestedMatches|getTitleHtml|brushNotHtmlScript|substring|createElement|Highlighter|load|HtmlScript|Brush|pre|expand|multiline|min|Can|ignoreCase|find|blur|extended|toLowerCase|aliases|addEventListener|innerText|textContent|wasn|select|createTextNode|removeChild|option|same|frame|xmlns|dtd|twice|1999|equiv|meta|htmlscript|transitional|1E3|expected|PUBLIC|DOCTYPE|on|W3C|XHTML|TR|EN|Transitional||configured|srcElement|Object|after|run|dblclick|matchChain|valueOf|constructor|default|switch|click|round|execAt|forHtmlScript|token|gimy|functions|getKeywords|1E6|escape|within|random|sgi|another|finally|supply|MSIE|ie|toUpperCase|catch|returnValue|definition|event|border|imsx|constructing|one|Infinity|from|when|Content|cellpadding|flags|cellspacing|try|xhtml|Type|spaces|2930402|hosted_button_id|lastIndexOf|donate|active|development|keep|to|xclick|_s|Xml|please|like|you|paypal|cgi|cmd|webscr|bin|highlighted|scrollbars|aspScriptTags|phpScriptTags|sort|max|scriptScriptTags|toolbar_item|_|command|command_|number|getElementById|doubleQuotedString|singleLinePerlComments|singleLineCComments|multiLineCComments|singleQuotedString|multiLineDoubleQuotedString|xmlComments|alt|multiLineSingleQuotedString|If|https|1em|000|fff|background|5em|xx|bottom|75em|Gorbatchev|large|serif|CDATA|continue|utf|charset|content|About|family|sans|Helvetica|Arial|Geneva|3em|nogutter|Copyright|syntax|close|write|2004|Alex|open|JavaScript|highlighter|July|02|replaceChild|offset|83'.split('|'),0,{}))
</script>
<!-- shBrushAci.js -->
<script type="text/javascript">
;(function()
{
  // CommonJS
  SyntaxHighlighter = SyntaxHighlighter || (typeof require !== 'undefined'?
          require('shCore').SyntaxHighlighter : null);

  function Brush()
  {
    var keywords = 'aci acl add all allow anyone authmethod compare '
        + 'dayofweek  delete deny dns export extop groupdn import ip '
        + 'parent proxy read search self selfwrite ssf target ' +
        + 'targetattr targattrfilters targetcontrol targetfilter '
        + 'targetscope timeofday userattr userdn write';
    /* Need to separate keywords having another keyword as a prefix */
    var repeated = 'allow targetattr targattrfilters targetcontrol '
        + 'targetfilter targetscope';
    this.regexList = [
      { regex: new RegExp(this.getKeywords(keywords), 'gim'), css: 'keyword' },
      { regex: new RegExp(this.getKeywords(repeated), 'gim'), css: 'keyword' },
      { regex: /version 3\.0/g,                               css: 'keyword' },
      { regex: SyntaxHighlighter.regexLib.multiLineDoubleQuotedString, css: 'string' },
      { regex: /[\(\);]/g,                                    css: 'color3' },
    ];
  };

  Brush.prototype = new SyntaxHighlighter.Highlighter();
  Brush.aliases = ['aci'];

  SyntaxHighlighter.brushes.Aci = Brush;

  // CommonJS
  typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushBash.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
 // CommonJS
 typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

 function Brush()
 {
  var keywords = 'if fi then elif else for do done until while break continue case function return in eq ne ge le';
  var commands =  'alias apropos awk basename bash bc bg builtin bzip2 cal cat cd cfdisk chgrp chmod chown chroot' +
      'cksum clear cmp comm command cp cron crontab csplit cut date dc dd ddrescue declare df ' +
      'diff diff3 dig dir dircolors dirname dirs du echo egrep eject enable env ethtool eval ' +
      'exec exit expand export expr false fdformat fdisk fg fgrep file find fmt fold format ' +
      'free fsck ftp gawk getopts grep groups gzip hash head history hostname id ifconfig ' +
      'import install join kill less let ln local locate logname logout look lpc lpr lprint ' +
      'lprintd lprintq lprm ls lsof make man mkdir mkfifo mkisofs mknod more mount mtools ' +
      'mv netstat nice nl nohup nslookup open op passwd paste pathchk ping popd pr printcap ' +
      'printenv printf ps pushd pwd quota quotacheck quotactl ram rcp read readonly renice ' +
      'remsync rm rmdir rsync screen scp sdiff sed select seq set sftp shift shopt shutdown ' +
      'sleep sort source split ssh strace su sudo sum symlink sync tail tar tee test time ' +
      'times touch top traceroute trap tr true tsort tty type ulimit umask umount unalias ' +
      'uname unexpand uniq units unset unshar useradd usermod users uuencode uudecode v vdir ' +
      'vi watch wc whereis which who whoami Wget xargs yes'
      ;

  this.regexList = [
   { regex: /^#!.*$/gm,           css: 'preprocessor bold' },
   { regex: /\/[\w-\/]+/gm,          css: 'plain' },
   { regex: SyntaxHighlighter.regexLib.singleLinePerlComments,  css: 'comments' },  // one line comments
   { regex: SyntaxHighlighter.regexLib.doubleQuotedString,   css: 'string' },  // double quoted strings
   { regex: SyntaxHighlighter.regexLib.singleQuotedString,   css: 'string' },  // single quoted strings
   { regex: new RegExp(this.getKeywords(keywords), 'gm'),   css: 'keyword' },  // keywords
   { regex: new RegExp(this.getKeywords(commands), 'gm'),   css: 'functions' }  // commands
   ];
 }

 Brush.prototype = new SyntaxHighlighter.Highlighter();
 Brush.aliases = ['bash', 'shell'];

 SyntaxHighlighter.brushes.Bash = Brush;

 // CommonJS
 typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushCsv.js -->
<script type="text/javascript">
;(function()
{
  // CommonJS
  typeof(require) != 'undefined' ? SyntaxHighlighter =
    require('shCore').SyntaxHighlighter : null;

  function Brush()
  {
    this.regexList = [
      { regex: /[#!;].+(\n|\r)/g,                       css: 'comments'},
      { regex: SyntaxHighlighter.regexLib.url,          css: 'a'},
      { regex: /,/g,                                    css: 'color3'},
      { regex: /[^,"';]/g,                              css: 'string'},
    ];
  };

  Brush.prototype = new SyntaxHighlighter.Highlighter();
  Brush.aliases = ['csv'];

  SyntaxHighlighter.brushes.Csv = Brush;

  // CommonJS
  typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushHttp.js -->
<script type="text/javascript">
;(function()
{
  // CommonJS
  typeof(require) != 'undefined' ? SyntaxHighlighter =
    require('shCore').SyntaxHighlighter : null;

  function Brush()
  {
    var keywords = 'CONNECT DELETE GET HEAD OPTIONS PATCH POST PUT TRACE';
    this.regexList = [
      { regex: new RegExp(this.getKeywords(keywords), 'gm'), css: 'keyword'},
      { regex: /HTTP\/\d\.\d/g,                              css: 'color2'},  // e.g. HTTP/1.1
      { regex: /HTTP\/\d\.\d\s\d{3}\s[\w\s]+(\r|\n)/g,       css: 'color2'},  // 1st line of response
      { regex: /:/g,                                         css: 'color3'},
      { regex: /(\"[^\"]+\"|\'[^\']+\'|\[[^\]]+\])/g,        css: 'string'},  // Strings including [Notes]
      { regex: /\s(\/[^\s]+)\s/g,                            css: 'color2'},  // Absolute URI
      { regex: /[\w-]+(?=:)/g,                               css: 'constants'}, // Header names
    ];
  };

  Brush.prototype = new SyntaxHighlighter.Highlighter();
  Brush.aliases = ['http'];

  SyntaxHighlighter.brushes.Http = Brush;

  // CommonJS
  typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushJava.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
 // CommonJS
 typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

 function Brush()
 {
  var keywords = 'abstract assert boolean break byte case catch char class const ' +
      'continue default do double else enum extends ' +
      'false final finally float for goto if implements import ' +
      'instanceof int interface long native new null ' +
      'package private protected public return ' +
      'short static strictfp super switch synchronized this throw throws true ' +
      'transient try void volatile while';

  this.regexList = [
   { regex: SyntaxHighlighter.regexLib.singleLineCComments, css: 'comments' },  // one line comments
   { regex: /\/\*([^\*][\s\S]*)?\*\//gm,      css: 'comments' },   // multiline comments
   { regex: /\/\*(?!\*\/)\*[\s\S]*?\*\//gm,     css: 'preprocessor' }, // documentation comments
   { regex: SyntaxHighlighter.regexLib.doubleQuotedString,  css: 'string' },  // strings
   { regex: SyntaxHighlighter.regexLib.singleQuotedString,  css: 'string' },  // strings
   { regex: /\b([\d]+(\.[\d]+)?|0x[a-f0-9]+)\b/gi,    css: 'value' },   // numbers
   { regex: /(?!\@interface\b)\@[\$\w]+\b/g,     css: 'color1' },  // annotation @anno
   { regex: /\@interface\b/g,         css: 'color2' },  // @interface keyword
   { regex: new RegExp(this.getKeywords(keywords), 'gm'),  css: 'keyword' }  // java keyword
   ];

  this.forHtmlScript({
   left : /(&lt;|<)%[@!=]?/g, 
   right : /%(&gt;|>)/g 
  });
 };

 Brush.prototype = new SyntaxHighlighter.Highlighter();
 Brush.aliases = ['java'];

 SyntaxHighlighter.brushes.Java = Brush;

 // CommonJS
 typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushJScript.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
 // CommonJS
 typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

 function Brush()
 {
  var keywords = 'break case catch continue ' +
      'default delete do else false  ' +
      'for function if in instanceof ' +
      'new null return super switch ' +
      'this throw true try typeof var while with'
      ;

  var r = SyntaxHighlighter.regexLib;
  
  this.regexList = [
   { regex: r.multiLineDoubleQuotedString,     css: 'string' },   // double quoted strings
   { regex: r.multiLineSingleQuotedString,     css: 'string' },   // single quoted strings
   { regex: r.singleLineCComments,       css: 'comments' },   // one line comments
   { regex: r.multiLineCComments,       css: 'comments' },   // multiline comments
   { regex: /\s*#.*/gm,         css: 'preprocessor' },  // preprocessor tags like #region and #endregion
   { regex: new RegExp(this.getKeywords(keywords), 'gm'), css: 'keyword' }   // keywords
   ];
 
  this.forHtmlScript(r.scriptScriptTags);
 };

 Brush.prototype = new SyntaxHighlighter.Highlighter();
 Brush.aliases = ['js', 'jscript', 'javascript'];

 SyntaxHighlighter.brushes.JScript = Brush;

 // CommonJS
 typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushLDIF.js -->
<script type="text/javascript">
;(function()
{
  // CommonJS
  SyntaxHighlighter = SyntaxHighlighter || (typeof require !== 'undefined'?
      require('shCore').SyntaxHighlighter : null);

  function Brush()
  {
    var keywords = 'add changetype control delete deleteoldrdn dn moddn ' +
                   'modify modrdn newrdn newsuperior replace version';
    
    this.regexList = [
      { regex: new RegExp(this.getKeywords(keywords), 'gmi'),     css: 'keyword' },
      { regex: SyntaxHighlighter.regexLib.singleLinePerlComments, css: 'comments' },
      { regex: SyntaxHighlighter.regexLib.url,                    css: 'a' },
      { regex: /\b(\d+\.)+\d+\b/g,                                css: 'constants' },// OID
      { regex: /\b(true|false)\b/g,                               css: 'constants' },
      { regex: /-(\n|$)/g,                                        css: 'color3' },  // Separator
      { regex: /:<|:&lt;|:/g,                                     css: 'color3' },  // Separator
      { regex: /[\w;-]+(?=:.*(\r|\n)?)/g,                         css: 'string' },  // Attr type
    ];
  };

  Brush.prototype = new SyntaxHighlighter.Highlighter();
  Brush.aliases = ['ldif'];

  SyntaxHighlighter.brushes.LDIF = Brush;

  // CommonJS
  typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushPlain.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
 // CommonJS
 typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

 function Brush()
 {
 };

 Brush.prototype = new SyntaxHighlighter.Highlighter();
 Brush.aliases = ['text', 'plain'];

 SyntaxHighlighter.brushes.Plain = Brush;

 // CommonJS
 typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushProperties.js -->
<script type="text/javascript">
;(function()
{
  // CommonJS
  typeof(require) != 'undefined' ? SyntaxHighlighter =
    require('shCore').SyntaxHighlighter : null;

  function Brush()
  {
    this.regexList = [
      { regex: /[#!;].+(\n|\r)/g,                        css: 'comments'},
      { regex: SyntaxHighlighter.regexLib.url,           css: 'a'},
      { regex: /[=:]/g,                                  css: 'color3'},
      { regex: /\[\w+\]/g,                               css: 'keyword'},
      { regex: /([^\s]|\\ )+(\s+)?(?=(=|:).+(\n|\r)?)/g, css: 'string'},
    ];
  };

  Brush.prototype = new SyntaxHighlighter.Highlighter();
  Brush.aliases = ['ini', 'properties'];

  SyntaxHighlighter.brushes.Properties = Brush;

  // CommonJS
  typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shBrushXml.js -->
<script type="text/javascript">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
;(function()
{
 // CommonJS
 typeof(require) != 'undefined' ? SyntaxHighlighter = require('shCore').SyntaxHighlighter : null;

 function Brush()
 {
  function process(match, regexInfo)
  {
   var constructor = SyntaxHighlighter.Match,
    code = match[0],
    tag = new XRegExp('(&lt;|<)[\\s\\/\\?]*(?<name>[:\\w-\\.]+)', 'xg').exec(code),
    result = []
    ;
  
   if (match.attributes != null) 
   {
    var attributes,
     regex = new XRegExp('(?<name> [\\w:\\-\\.]+)' +
          '\\s*=\\s*' +
          '(?<value> ".*?"|\'.*?\'|\\w+)',
          'xg');

    while ((attributes = regex.exec(code)) != null) 
    {
     result.push(new constructor(attributes.name, match.index + attributes.index, 'color1'));
     result.push(new constructor(attributes.value, match.index + attributes.index + attributes[0].indexOf(attributes.value), 'string'));
    }
   }

   if (tag != null)
    result.push(
     new constructor(tag.name, match.index + tag[0].indexOf(tag.name), 'keyword')
    );

   return result;
  }
 
  this.regexList = [
   { regex: new XRegExp('(\\&lt;|<)\\!\\[[\\w\\s]*?\\[(.|\\s)*?\\]\\](\\&gt;|>)', 'gm'),   css: 'color2' }, // <![ ... [ ... ]]>
   { regex: SyntaxHighlighter.regexLib.xmlComments,            css: 'comments' }, // <!-- ... -->
   { regex: new XRegExp('(&lt;|<)[\\s\\/\\?]*(\\w+)(?<attributes>.*?)[\\s\\/\\?]*(&gt;|>)', 'sg'), func: process }
  ];
 };

 Brush.prototype = new SyntaxHighlighter.Highlighter();
 Brush.aliases = ['xml', 'xhtml', 'xslt', 'html'];

 SyntaxHighlighter.brushes.Xml = Brush;

 // CommonJS
 typeof(exports) != 'undefined' ? exports.Brush = Brush : null;
})();
</script>
<!-- shCoreEclipse.css -->
<style type="text/css">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
.syntaxhighlighter a,
.syntaxhighlighter div,
.syntaxhighlighter code,
.syntaxhighlighter table,
.syntaxhighlighter table td,
.syntaxhighlighter table tr,
.syntaxhighlighter table tbody,
.syntaxhighlighter table thead,
.syntaxhighlighter table caption,
.syntaxhighlighter textarea {
  -moz-border-radius: 0 0 0 0 !important;
  -webkit-border-radius: 0 0 0 0 !important;
  background: none !important;
  border: 0 !important;
  bottom: auto !important;
  float: none !important;
  height: auto !important;
  left: auto !important;
  line-height: 1.2em !important;
  margin: 0 !important;
  outline: 0 !important;
  overflow: visible !important;
  padding: 0 !important;
  position: static !important;
  right: auto !important;
  text-align: left !important;
  top: auto !important;
  vertical-align: baseline !important;
  width: auto !important;
  box-sizing: content-box !important;
  font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important;
  font-weight: normal !important;
  font-style: normal !important;
  font-size: 1em !important;
  min-height: inherit !important;
  min-height: auto !important;
}

.syntaxhighlighter {
  width: 100% !important;
  margin: 1em 0 1em 0 !important;
  position: relative !important;
  overflow: auto !important;
  font-size: 1em !important;
}
.syntaxhighlighter.source {
  overflow: hidden !important;
}
.syntaxhighlighter .bold {
  font-weight: bold !important;
}
.syntaxhighlighter .italic {
  font-style: italic !important;
}
.syntaxhighlighter .line {
  white-space: pre !important;
}
.syntaxhighlighter table {
  width: 100% !important;
}
.syntaxhighlighter table caption {
  text-align: left !important;
  padding: .5em 0 0.5em 1em !important;
}
.syntaxhighlighter table td.code {
  width: 100% !important;
}
.syntaxhighlighter table td.code .container {
  position: relative !important;
}
.syntaxhighlighter table td.code .container textarea {
  box-sizing: border-box !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  background: white !important;
  padding-left: 1em !important;
  overflow: hidden !important;
  white-space: pre !important;
}
.syntaxhighlighter table td.gutter .line {
  text-align: right !important;
  padding: 0 0.5em 0 1em !important;
}
.syntaxhighlighter table td.code .line {
  padding: 0 1em !important;
}
.syntaxhighlighter.nogutter td.code .container textarea, .syntaxhighlighter.nogutter td.code .line {
  padding-left: 0em !important;
}
.syntaxhighlighter.show {
  display: block !important;
}
.syntaxhighlighter.collapsed table {
  display: none !important;
}
.syntaxhighlighter.collapsed .toolbar {
  padding: 0.1em 0.8em 0em 0.8em !important;
  font-size: 1em !important;
  position: static !important;
  width: auto !important;
  height: auto !important;
}
.syntaxhighlighter.collapsed .toolbar span {
  display: inline !important;
  margin-right: 1em !important;
}
.syntaxhighlighter.collapsed .toolbar span a {
  padding: 0 !important;
  display: none !important;
}
.syntaxhighlighter.collapsed .toolbar span a.expandSource {
  display: inline !important;
}
.syntaxhighlighter .toolbar {
  position: absolute !important;
  right: 1px !important;
  top: 1px !important;
  width: 11px !important;
  height: 11px !important;
  font-size: 10px !important;
  z-index: 10 !important;
}
.syntaxhighlighter .toolbar span.title {
  display: inline !important;
}
.syntaxhighlighter .toolbar a {
  display: block !important;
  text-align: center !important;
  text-decoration: none !important;
  padding-top: 1px !important;
}
.syntaxhighlighter .toolbar a.expandSource {
  display: none !important;
}
.syntaxhighlighter.ie {
  font-size: .9em !important;
  padding: 1px 0 1px 0 !important;
}
.syntaxhighlighter.ie .toolbar {
  line-height: 8px !important;
}
.syntaxhighlighter.ie .toolbar a {
  padding-top: 0px !important;
}
.syntaxhighlighter.printing .line.alt1 .content,
.syntaxhighlighter.printing .line.alt2 .content,
.syntaxhighlighter.printing .line.highlighted .number,
.syntaxhighlighter.printing .line.highlighted.alt1 .content,
.syntaxhighlighter.printing .line.highlighted.alt2 .content {
  background: none !important;
}
.syntaxhighlighter.printing .line .number {
  color: #bbbbbb !important;
}
.syntaxhighlighter.printing .line .content {
  color: black !important;
}
.syntaxhighlighter.printing .toolbar {
  display: none !important;
}
.syntaxhighlighter.printing a {
  text-decoration: none !important;
}
.syntaxhighlighter.printing .plain, .syntaxhighlighter.printing .plain a {
  color: black !important;
}
.syntaxhighlighter.printing .comments, .syntaxhighlighter.printing .comments a {
  color: #008200 !important;
}
.syntaxhighlighter.printing .string, .syntaxhighlighter.printing .string a {
  color: blue !important;
}
.syntaxhighlighter.printing .keyword {
  color: #006699 !important;
  font-weight: bold !important;
}
.syntaxhighlighter.printing .preprocessor {
  color: gray !important;
}
.syntaxhighlighter.printing .variable {
  color: #aa7700 !important;
}
.syntaxhighlighter.printing .value {
  color: #009900 !important;
}
.syntaxhighlighter.printing .functions {
  color: #ff1493 !important;
}
.syntaxhighlighter.printing .constants {
  color: #0066cc !important;
}
.syntaxhighlighter.printing .script {
  font-weight: bold !important;
}
.syntaxhighlighter.printing .color1, .syntaxhighlighter.printing .color1 a {
  color: gray !important;
}
.syntaxhighlighter.printing .color2, .syntaxhighlighter.printing .color2 a {
  color: #ff1493 !important;
}
.syntaxhighlighter.printing .color3, .syntaxhighlighter.printing .color3 a {
  color: red !important;
}
.syntaxhighlighter.printing .break, .syntaxhighlighter.printing .break a {
  color: black !important;
}

.syntaxhighlighter {
  background-color: white !important;
}
.syntaxhighlighter .line.alt1 {
  background-color: white !important;
}
.syntaxhighlighter .line.alt2 {
  background-color: white !important;
}
.syntaxhighlighter .line.highlighted.alt1, .syntaxhighlighter .line.highlighted.alt2 {
  background-color: #c3defe !important;
}
.syntaxhighlighter .line.highlighted.number {
  color: white !important;
}
.syntaxhighlighter table caption {
  color: black !important;
}
.syntaxhighlighter .gutter {
  color: #787878 !important;
}
.syntaxhighlighter .gutter .line {
  border-right: 3px solid #d4d0c8 !important;
}
.syntaxhighlighter .gutter .line.highlighted {
  background-color: #d4d0c8 !important;
  color: white !important;
}
.syntaxhighlighter.printing .line .content {
  border: none !important;
}
.syntaxhighlighter.collapsed {
  overflow: visible !important;
}
.syntaxhighlighter.collapsed .toolbar {
  color: #3f5fbf !important;
  background: white !important;
  border: 1px solid #d4d0c8 !important;
}
.syntaxhighlighter.collapsed .toolbar a {
  color: #3f5fbf !important;
}
.syntaxhighlighter.collapsed .toolbar a:hover {
  color: #aa7700 !important;
}
.syntaxhighlighter .toolbar {
  color: #a0a0a0 !important;
  background: #d4d0c8 !important;
  border: none !important;
}
.syntaxhighlighter .toolbar a {
  color: #a0a0a0 !important;
}
.syntaxhighlighter .toolbar a:hover {
  color: red !important;
}
.syntaxhighlighter .plain, .syntaxhighlighter .plain a {
  color: black !important;
}
.syntaxhighlighter .comments, .syntaxhighlighter .comments a {
  color: #3f5fbf !important;
}
.syntaxhighlighter .string, .syntaxhighlighter .string a {
  color: #2a00ff !important;
}
.syntaxhighlighter .keyword {
  color: #7f0055 !important;
}
.syntaxhighlighter .preprocessor {
  color: #646464 !important;
}
.syntaxhighlighter .variable {
  color: #aa7700 !important;
}
.syntaxhighlighter .value {
  color: #009900 !important;
}
.syntaxhighlighter .functions {
  color: #ff1493 !important;
}
.syntaxhighlighter .constants {
  color: #0066cc !important;
}
.syntaxhighlighter .script {
  font-weight: bold !important;
  color: #7f0055 !important;
  background-color: none !important;
}
.syntaxhighlighter .color1, .syntaxhighlighter .color1 a {
  color: gray !important;
}
.syntaxhighlighter .color2, .syntaxhighlighter .color2 a {
  color: #ff1493 !important;
}
.syntaxhighlighter .color3, .syntaxhighlighter .color3 a {
  color: red !important;
}

.syntaxhighlighter .keyword {
  font-weight: bold !important;
}
.syntaxhighlighter .xml .keyword {
  color: #3f7f7f !important;
  font-weight: normal !important;
}
.syntaxhighlighter .xml .color1, .syntaxhighlighter .xml .color1 a {
  color: #7f007f !important;
}
.syntaxhighlighter .xml .string {
  font-style: italic !important;
  color: #2a00ff !important;
}
</style>
<!-- shThemeEclipse.css -->
<style type="text/css">/**
 * SyntaxHighlighter
 * http://alexgorbatchev.com/SyntaxHighlighter
 *
 * SyntaxHighlighter is donationware. If you are using it, please donate.
 * http://alexgorbatchev.com/SyntaxHighlighter/donate.html
 *
 * @version
 * 3.0.83 (July 02 2010)
 * 
 * @copyright
 * Copyright (C) 2004-2010 Alex Gorbatchev.
 *
 * @license
 * Dual licensed under the MIT and GPL licenses.
 */
.syntaxhighlighter {
  background-color: white !important;
}
.syntaxhighlighter .line.alt1 {
  background-color: white !important;
}
.syntaxhighlighter .line.alt2 {
  background-color: white !important;
}
.syntaxhighlighter .line.highlighted.alt1, .syntaxhighlighter .line.highlighted.alt2 {
  background-color: #c3defe !important;
}
.syntaxhighlighter .line.highlighted.number {
  color: white !important;
}
.syntaxhighlighter table caption {
  color: black !important;
}
.syntaxhighlighter .gutter {
  color: #787878 !important;
}
.syntaxhighlighter .gutter .line {
  border-right: 3px solid #d4d0c8 !important;
}
.syntaxhighlighter .gutter .line.highlighted {
  background-color: #d4d0c8 !important;
  color: white !important;
}
.syntaxhighlighter.printing .line .content {
  border: none !important;
}
.syntaxhighlighter.collapsed {
  overflow: visible !important;
}
.syntaxhighlighter.collapsed .toolbar {
  color: #3f5fbf !important;
  background: white !important;
  border: 1px solid #d4d0c8 !important;
}
.syntaxhighlighter.collapsed .toolbar a {
  color: #3f5fbf !important;
}
.syntaxhighlighter.collapsed .toolbar a:hover {
  color: #aa7700 !important;
}
.syntaxhighlighter .toolbar {
  color: #a0a0a0 !important;
  background: #d4d0c8 !important;
  border: none !important;
}
.syntaxhighlighter .toolbar a {
  color: #a0a0a0 !important;
}
.syntaxhighlighter .toolbar a:hover {
  color: red !important;
}
.syntaxhighlighter .plain, .syntaxhighlighter .plain a {
  color: black !important;
}
.syntaxhighlighter .comments, .syntaxhighlighter .comments a {
  color: #3f5fbf !important;
}
.syntaxhighlighter .string, .syntaxhighlighter .string a {
  color: #2a00ff !important;
}
.syntaxhighlighter .keyword {
  color: #7f0055 !important;
}
.syntaxhighlighter .preprocessor {
  color: #646464 !important;
}
.syntaxhighlighter .variable {
  color: #aa7700 !important;
}
.syntaxhighlighter .value {
  color: #009900 !important;
}
.syntaxhighlighter .functions {
  color: #ff1493 !important;
}
.syntaxhighlighter .constants {
  color: #0066cc !important;
}
.syntaxhighlighter .script {
  font-weight: bold !important;
  color: #7f0055 !important;
  background-color: none !important;
}
.syntaxhighlighter .color1, .syntaxhighlighter .color1 a {
  color: gray !important;
}
.syntaxhighlighter .color2, .syntaxhighlighter .color2 a {
  color: #ff1493 !important;
}
.syntaxhighlighter .color3, .syntaxhighlighter .color3 a {
  color: red !important;
}

.syntaxhighlighter .keyword {
  font-weight: bold !important;
}
.syntaxhighlighter .xml .keyword {
  color: #3f7f7f !important;
  font-weight: normal !important;
}
.syntaxhighlighter .xml .color1, .syntaxhighlighter .xml .color1 a {
  color: #7f007f !important;
}
.syntaxhighlighter .xml .string {
  font-style: italic !important;
  color: #2a00ff !important;
}
</style>
<script type="text/javascript">SyntaxHighlighter.all();</script>
<!-- END SyntaxHighlighter 3.0.83 -->
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div><p class="cornerBanner"><a target="_blank" href="http://docs.forgerock.org/en/openam/11.0.1/">v11.0.1 available</a></p></div><div lang="en" class="book" title="OpenAM 11.0.0 Administration Guide"><div class="titlepage"><div><div><h1 class="title"><a name="admin-guide"></a>OpenAM 11.0.0 Administration Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Mark</span> <span class="surname">Craig</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Vanessa</span> <span class="surname">Richie</span></h3></div><div class="author"><h3 class="author"><span class="firstname">Mike</span> <span class="surname">Jang</span></h3></div></div></div><div><p class="releaseinfo">Software release date: November 08, 2013</p></div><div><p class="copyright">Copyright &copy; 2011-2013 ForgeRock, Inc.</p></div><div><a href="legalnotice.html">Legal Notice</a></div><div><p class="pubdate">Publication date: December&nbsp;13,&nbsp;2013</p></div><div><div class="abstract" title="Abstract"><div class="abstract-title">Abstract</div><p>Guide to configuring and using OpenAM features. OpenAM provides open
   source Authentication, Authorization, Entitlement and Federation
   software.</p></div></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="preface"><a href="#preface">Preface</a></span></dt><dt><span class="chapter"><a href="#chap-admin-tools">1. Administration Interfaces &amp; Tools</a></span></dt><dt><span class="chapter"><a href="#chap-auth-services">2. Defining Authentication Services</a></span></dt><dt><span class="chapter"><a href="#chap-authz-policy">3. Defining Authorization Policies</a></span></dt><dt><span class="chapter"><a href="#chap-entitlements">4. Defining Entitlements</a></span></dt><dt><span class="chapter"><a href="#chap-realms">5. Configuring Realms</a></span></dt><dt><span class="chapter"><a href="#chap-agents">6. Configuring Policy Agent Profiles</a></span></dt><dt><span class="chapter"><a href="#chap-mobile">7. Working with Mobile Devices &amp; Applications</a></span></dt><dt><span class="chapter"><a href="#chap-pwd-reset">8. Configuring Password Reset</a></span></dt><dt><span class="chapter"><a href="#chap-sso">9. Configuring Single Sign-On within One Domain</a></span></dt><dt><span class="chapter"><a href="#chap-cdsso">10. Configuring Cross-Domain Single Sign On</a></span></dt><dt><span class="chapter"><a href="#chap-dashboard">11. Configuring the Dashboard Service</a></span></dt><dt><span class="chapter"><a href="#chap-federation">12. Managing SAML 2.0 Federation</a></span></dt><dt><span class="chapter"><a href="#chap-oauth2">13. Managing OAuth 2.0 Authorization</a></span></dt><dt><span class="chapter"><a href="#chap-openid-connect">14. Managing OpenID Connect 1.0 Authorization</a></span></dt><dt><span class="chapter"><a href="#chap-backup-restore">15. Backing Up and Restoring OpenAM Configurations</a></span></dt><dt><span class="chapter"><a href="#chap-certs-keystores">16. Managing Certificates</a></span></dt><dt><span class="chapter"><a href="#chap-monitoring">17. Monitoring OpenAM Services</a></span></dt><dt><span class="chapter"><a href="#chap-tuning">18. Tuning OpenAM</a></span></dt><dt><span class="chapter"><a href="#chap-change-hosts">19. Changing Host Names</a></span></dt><dt><span class="chapter"><a href="#chap-securing">20. Securing OpenAM</a></span></dt><dt><span class="chapter"><a href="#chap-troubleshooting">21. Troubleshooting</a></span></dt><dt><span class="glossary"><a href="#openam-glossary">OpenAM Glossary</a></span></dt><dt><span class="appendix"><a href="#appendix-interface-stability">A. Release Levels &amp; Interface Stability</a></span></dt><dt><span class="index"><a href="#d16811e21452">Index</a></span></dt></dl></div><div lang="en" class="preface" title="Preface"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>Preface</h2></div></div></div><p>This guide shows you how to configure, maintain, and troubleshoot
  OpenAM for single sign on and authorization, password reset, account
  lockout, cross-domain single sign on, and federation.</p><div class="section" title="1.&nbsp;Who Should Use this Guide"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d16811e114"></a>1.&nbsp;Who Should Use this Guide</h2></div></div></div><p>This guide is written for access management designers and
   administrators who build, deploy, and maintain OpenAM services for
   their organizations. This guide covers the tasks you might repeat
   throughout the life cycle of an OpenAM release used in your
   organization.</p><p>This guide starts by introducing the OpenAM administrative
   interfaces and tools, and by showing how to manage OpenAM services.
   This guide continues by showing how to configure the principle
   features of OpenAM. It then demonstrates how to backup, restore,
   monitor, tune, and troubleshoot, OpenAM services.</p><p>You do not need to be an OpenAM wizard to learn something from
   this guide, though a background in access management and maintaining
   web application software can help. You do need some background in
   managing services on your operating systems and in your application
   servers. You can nevertheless get started with this guide, and then
   learn more as you go along.</p></div><div lang="en" class="section" title="2.&nbsp;Formatting Conventions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="formatting-conventions"></a>2.&nbsp;Formatting Conventions</h2></div></div></div><p>Some items are formatted differently from other text, like
 <code class="filename">filenames</code>, <span class="command"><strong>commands</strong></span>, and
 <code class="literal">literal values</code>.</p><div class="screen"><pre class="brush: plain;">$ echo Command line sessions are formatted with lines folded for easier reading.
 In HTML documents click the [-] image for a flat, copy-paste version. Click
 the [+] image for an expanded, line-wrapped version. &gt; /dev/null</pre></div><p>In many cases, sections pertaining to UNIX, GNU/Linux, Mac OS X, BSD,
 and so forth are marked (UNIX). Sections pertaining to Microsoft Windows
 might be marked (Windows). To avoid repetition, however, file system
 directory names are often given only in UNIX format as in
 <code class="filename">/path/to/server</code>, even if the text applies to
 <code class="filename">C:\path\to\server</code> as well.</p><p>Absolute path names usually begin with the placeholder
 <code class="filename">/path/to/</code>, which might translate to
 <code class="filename">/opt/</code>, <code class="filename">C:\Program Files\</code>, or
 somewhere else on your system. Unless you install from native packages,
 you create this location before you install.</p><pre class="brush: java;">class Test {
    public static void main(String [] args)  {
        System.out.println("This is a program listing.");
    }
}</pre></div><div lang="en" class="section" title="3.&nbsp;Accessing Documentation Online"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="accessing-doc-online"></a>3.&nbsp;Accessing Documentation Online</h2></div></div></div><p>Core documentation, such as what you are now reading, aims to
 be technically accurate and complete with respect to the software
 documented. Core documentation therefore follows a <a class="link" href="https://wikis.forgerock.org/confluence/display/devcom/Review+Process" target="_blank">three-phase review process</a> designed to eliminate errors. The
 review process help to ensure that documentation you get with a stable release
 is technically accurate and complete.</p><p>Fully reviewed, published core documentation is available at <a class="link" href="http://docs.forgerock.org/" target="_blank">docs.forgerock.org</a>.</p><p>In-progress documentation can be found at each project site under the
 <a class="link" href="http://forgerock.org" target="_blank">Developer
 Community</a> projects page.</p><p>The ForgeRock Community <a class="link" href="https://wikis.forgerock.org/" target="_blank">Wikis</a> provide additional documentation. We encourage
 you to <a class="link" href="https://idp.forgerock.org/openam/UI/Login?service=register" target="_blank">join the community</a>, so that you can update the Wikis,
 too.</p></div><div lang="en" class="section" title="4.&nbsp;Joining the ForgeRock Community"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="joining-the-community"></a>4.&nbsp;Joining the ForgeRock Community</h2></div></div></div><p>After you <a class="link" href="https://idp.forgerock.org/openam/UI/Login?service=register" target="_blank">sign up</a> to join the ForgeRock community, you can edit the Community
 <a class="link" href="https://wikis.forgerock.org/" target="_blank">Wikis</a>,
 and also log bugs and feature requests in the <a class="link" href="https://bugster.forgerock.org/" target="_blank">issue tracker</a>.</p><p>If you have a question regarding a project but cannot find an answer in
 the project documentation or Wiki, browse to the <a class="link" href="http://forgerock.org" target="_blank">Developer Community</a> page for the
 project, where you can find details on joining the project mailing lists, and
 find links to mailing list archives. You can also suggest updates to documentation
 through the <a class="link" href="https://lists.forgerock.org/mailman/listinfo/docs" target="_blank">ForgeRock docs mailing list</a>.</p><p>The Community Wikis describe how to check out and build source code.
 Should you want to contribute a patch, test, or feature, or want to author
 part of the core documentation, first have a look on the ForgeRock site
 at <a class="link" href="http://forgerock.org/get_involved.html" target="_blank">how to get involved</a>.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools"><div class="titlepage"><div><div><h2 class="title"><a name="chap-admin-tools"></a>Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#openam-console-overview">1.1. OpenAM Web-Based Console</a></span></dt><dt><span class="section"><a href="#openam-cli-overview">1.2. OpenAM Command-Line Tools</a></span></dt><dt><span class="section"><a href="#openam-ssoadm-jsp-overview">1.3. OpenAM ssoadm.jsp</a></span></dt></dl></div><p>This chapter provides a brief introduction to the web-based OpenAM
 console. It also lists and describes each command line interface (CLI)
 administration tool.</p><div class="section" title="1.1.&nbsp;OpenAM Web-Based Console"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-console-overview"></a>1.1.&nbsp;OpenAM Web-Based Console</h2></div></div></div><a class="indexterm" name="d16811e225"></a><p>After you install OpenAM, login to the web-based console as OpenAM
  Administrator, <code class="literal">amadmin</code> with the password you set during
  installation. Navigate to a URL such as
  <code class="literal">http://openam.example.com:8080/openam</code>. In this case,
  communications proceed over the HTTP protocol to a FQDN
  (<code class="literal">openam.example.com</code>), over a standard Java EE web container
  port number (8080), to a specific deployment URI (<code class="literal">/openam</code>).</p><div class="mediaobject" title="How the console looks to amadmin"><a name="figure-console-as-amadmin"></a><img src="images/console-as-amadmin.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-as-amadmin.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-amadmin.html" target="longdesc">D</a>]</span></div></div><p>When you login as the OpenAM Administrator, <code class="literal">amadmin</code>,
  you have access to the complete OpenAM console. In addition, OpenAM has set a
  cookie in your browser that lasts until the session expires, you logout, or
  you close your browser.<sup>[<a name="d16811e255" href="#ftn.d16811e255" class="footnote">1</a>]</sup></p><p>When you login to the OpenAM console as a non-administrative end user,
  you do not have access to the administrative console. Your access is limited
  to a configuration page with your account information.</p><div class="mediaobject" title="How the console looks to an end user"><a name="figure-console-as-bjensen"></a><img src="images/console-as-bjensen.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-as-bjensen.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-bjensen.html" target="longdesc">D</a>]</span></div></div><p>If you configure OpenAM to grant administrative capabilities to
  another user, then that user also sees the console after login. For
  instance, the OpenAM Administrator granted Kirsten Vaughan privileges to
  administer the OpenAM Top Level Realm. (This can be done through the console
  under Access Control &gt; / (Top Level Realm) &gt; Privileges. Kirsten
  has authorization to read and write policy properties and configured
  policy agent properties.) When Kirsten logs in, she sees only part of the
  console capabilities.<sup>[<a name="d16811e270" href="#ftn.d16811e270" class="footnote">2</a>]</sup></p><div class="mediaobject" title="How the console looks to an administrator"><a name="figure-console-as-kvaughan"></a><img src="images/console-as-kvaughan.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-as-kvaughan.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-kvaughan.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="1.2.&nbsp;OpenAM Command-Line Tools"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-cli-overview"></a>1.2.&nbsp;OpenAM Command-Line Tools</h2></div></div></div><p>The script tools in the following list have <code class="literal">.bat</code>
  versions for use on Microsoft Windows.</p><a class="indexterm" name="d16811e289"></a><a class="indexterm" name="d16811e292"></a><div class="variablelist"><p>You can install the following OpenAM command-line tools.</p><dl><dt><span class="term"><span class="command"><strong>agentadmin</strong></span></span></dt><dd><p>This tool lets you manage OpenAM policy agent installations.</p><p>Unpack this tool as part of policy agent installation.</p></dd><dt><span class="term"><span class="command"><strong>ampassword</strong></span></span></dt><dd><p>This tool lets you change OpenAM Administrator passwords, and
     display encrypted password values.</p><p>Install this from the <code class="filename">SSOAdminTools-11.0.0.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>amverifyarchive</strong></span></span></dt><dd><p>This tool checks log archives for tampering.</p><p>Install this from <code class="filename">SSOAdminTools-11.0.0.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>openam-distribution-configurator-11.0.0.jar</strong></span></span></dt><dd><p>This executable .jar file lets you perform a silent installation of an OpenAM
     server with a configuration file. For example, the <span class="command"><strong>java -jar configurator.jar -f
     config.file</strong></span> command couples the <code class="filename">configurator.jar</code> archive
     with the <em class="replaceable"><code>config.file</code></em>. The <code class="filename">sampleconfiguration</code>
     file provided with the tool is set up with the format for the <code class="filename">config.file</code>,
     and it must be adapted for your environment.</p><p>Install this from <code class="filename">SSOConfiguratorTools-11.0.0.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>ssoadm</strong></span></span></dt><dd><p>This tool provides a rich command-line interface for the configuration
     of OpenAM core services.</p><p>In a test environment you can activate
     <code class="filename">ssoadm.jsp</code> to access the same functionality in your
     browser. Once active, you can use many features of the <span class="command"><strong>ssoadm</strong></span>
     command, by navigating to the <code class="filename">ssoadm.jsp</code> URI, in a URL such as
     <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>.</p><p>Install this from <code class="filename">SSOAdminTools-11.0.0.zip</code>.</p><p>To translate settings applied in OpenAM console to service attributes
     for use with <span class="command"><strong>ssoadm</strong></span>, login to the OpenAM console
     as <code class="literal">amadmin</code> and access the services page, in a URL such as
     <code class="literal">http://openam.example.com:8080/openam/services.jsp</code>.</p></dd></dl></div><p>The commands access the OpenAM configuration over HTTP (or HTTPS).
  When using the administration commands in a site configuration, the
  commands access the configuration through the front end load balancer.</p><div class="itemizedlist"><p>Sometimes a command cannot access the load balancer, because:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Network routing restrictions prevent the tool from accessing
    the load balancer.</p></li><li class="listitem"><p>For testing purposes, the load balancer uses a self-signed
    certificate for HTTPS, and the tool does not have a way of trusting the
    self-signed certificate.</p></li><li class="listitem"><p>The load balancer is temporarily unavailable.</p></li></ul></div><p>In such cases you can work around the problem by adding an option
  such as the following to the <span class="command"><strong>java</strong></span> command in the
  tool's script. The option sets a comma-separated list of key-value pairs,
  where the key is the load balancer URL and the value is the server URL.
  (This all belongs on one line with no spaces in the script.)</p><pre class="brush: plain;">
-D"com.iplanet.am.naming.map.site.to.server=https://lb.example.com:443/openam=
http://server1.example.com:8080/openam,https://lb.example.com:443/openam=
http://server2.example.com:8080/openam"</pre><p>In the above example the load balancer is on the <code class="literal">lb</code>
  host, <code class="literal">https://lb.example.com:443/openam</code> is the site name,
  and the OpenAM servers in the site are on <code class="literal">server1</code> and
  <code class="literal">server2</code>.</p></div><div class="section" title="1.3.&nbsp;OpenAM ssoadm.jsp"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-ssoadm-jsp-overview"></a>1.3.&nbsp;OpenAM ssoadm.jsp</h2></div></div></div><p>You can use the <span class="command"><strong>ssoadm.jsp</strong></span> page to access a large
  subset of the configuration capabilities of the <span class="command"><strong>ssoadm</strong></span>
  command. Yet, <span class="command"><strong>ssoadm.jsp</strong></span> is disabled by default to prevent
  potential misuse.</p><div class="procedure" title="Procedure&nbsp;1.1.&nbsp;To Enable ssoadm.jsp"><a name="enable-ssoadm-jsp"></a><div class="procedure-title">Procedure&nbsp;1.1.&nbsp;To Enable ssoadm.jsp</div><a class="indexterm" name="d16811e448"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login as OpenAM administrator, <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Click Configuration &gt; Servers and Sites &gt;
    Servers &gt; <em class="replaceable"><code>URL of your server</code></em>.</p></li><li class="step" title="Step 3"><p>Click Advanced to display the Advanced Properties table,
    and then click Add. In the text boxes that appear, include the following
    information, and then click Save.</p><div class="variablelist"><dl><dt><span class="term">Property Name</span></dt><dd><p>ssoadm.disabled</p></dd><dt><span class="term">Property Value</span></dt><dd><p>false</p></dd></dl></div></li><li class="step" title="Step 4"><p>To see if the change worked, navigate to the URL of OpenAM with the
    <code class="literal">/ssoadm.jsp</code> URI. For the aforementioned URL, you would
    navigate to <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>.</p></li></ol></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e255" href="#d16811e255" class="para">1</a>] </sup>Persistent cookies can remain valid when you
  close your browser. This section reflects OpenAM default behavior before
  you configure additional functionality.</p></div><div class="footnote"><p><sup>[<a id="ftn.d16811e270" href="#d16811e270" class="para">2</a>] </sup>For more on delegated administration,
  see the chapter covering realms.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;2.&nbsp;Defining Authentication Services"><div class="titlepage"><div><div><h2 class="title"><a name="chap-auth-services"></a>Chapter&nbsp;2.&nbsp;Defining Authentication Services</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#what-is-authn">2.1. About Authentication in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-authn-modules">2.2. Configuring Authentication Modules</a></span></dt><dt><span class="section"><a href="#configure-authn-chains">2.3. Configuring Authentication Chains</a></span></dt><dt><span class="section"><a href="#authn-post-auth-plugins">2.4. Post Authentication Plugins</a></span></dt><dt><span class="section"><a href="#authn-from-browser">2.5. Authenticating To OpenAM</a></span></dt><dt><span class="section"><a href="#configure-account-lockout">2.6. Configuring Account Lockout</a></span></dt><dt><span class="section"><a href="#configure-session-quotas">2.7. Configuring Session Quotas</a></span></dt></dl></div><p>An <em class="firstterm">authentication</em> service confirms the identity
 of a user or a client application.</p><p>This chapter describes how to configure authentication in OpenAM.</p><div class="section" title="2.1.&nbsp;About Authentication in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-authn"></a>2.1.&nbsp;About Authentication in OpenAM</h2></div></div></div><a class="indexterm" name="d16811e502"></a><p>Access management is about controlling access to resources. OpenAM
  plays a role similar to border control at an international airport. Instead
  of having each and every airline company deal with access to each
  destination, all airlines redirects passengers to border control. Border
  control then determines who each passenger is according to passport
  credentials. Border control also checks whether the identified passenger
  is authorized to fly to the destination corresponding to the ticket, perhaps
  based on visa credentials. Then, at the departure gate, an agent enforces
  the authorization from border control, allowing the passenger to board the
  plane as long as the passenger has not gotten lost, or tried to board the
  wrong plane, or swapped tickets with someone else. Thus, border control
  handles access management at the airport.</p><p>OpenAM is most frequently used to protect web-accessible resources.
  Users browse to a protected web application page. An agent installed on the
  server with the web application redirects the user to OpenAM for access management.
  OpenAM determines who the user is, and whether the user has the right to
  access the protected page. OpenAM then redirects the user back to the
  protected page, with authorization credentials that can be verified by the agent.
  The agent allows OpenAM authorized users access the page.</p><p>Notice that OpenAM basically needs to determine two things for
  access management: the identity of the user, and whether the user has access rights
  to the protected page. <em class="firstterm">Authentication</em> is how OpenAM identifies
  the user. This chapter covers how to set up the
  authentication process. <em class="firstterm">Authorization</em> is how OpenAM determines
  whether a user has access to a protected resource. Authorization is covered later.</p><p>For authentication, OpenAM uses credentials from the user or
  client application. It then uses defined mechanisms to
  validate credentials and complete the authentication. The authentication
  methods can vary. For example, passengers travelling on international flights authenticate
  with passports and visas. In contrast, passengers travelling on domestic flights might
  authenticate with an identity card or a driver's license. Customers withdrawing
  cash from an ATM authenticate with a card and a PIN. </p><a class="indexterm" name="d16811e519"></a><a class="indexterm" name="d16811e524"></a><p>OpenAM allows you to configure authentication processes and then customize
  how they are applied. OpenAM uses <em class="firstterm">authentication
  modules</em> to handle different ways of authenticating. Basically,
  each authentication module handles one way of obtaining and verifying
  credentials. You can chain different authentication modules together.
  In OpenAM, this is called <em class="firstterm">authentication chaining</em>.
  Each authentication module can be configured to specify the continuation and
  failure semantics with one of the following four flags:
  required, optional, requisite, or sufficient.<sup>[<a name="d16811e537" href="#ftn.d16811e537" class="footnote">3</a>]</sup></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>When a <em class="firstterm">required</em> module fails, the rest of
    the chain is processed, but the authentication fails.</p><p>A required module might be used for login with email and password,
    but then fall through to another module to handle new users who have not
    yet signed up.</p></li><li class="listitem"><p>When an <em class="firstterm">optional</em> module fails,
    authentication continues.</p><p>An optional module might be used to permit a higher level of access
    if the user can present a X.509 certificate for example.</p></li><li class="listitem"><p>When a <em class="firstterm">requisite</em> module fails, authentication
    fails and authentication processing stops.</p><p>A requisite module might be used with exclusive SSO.</p></li><li class="listitem"><p>When a <em class="firstterm">sufficient</em> succeeds, authentication
    is successful and later modules in the chain are skipped.</p><p>You could set Windows Desktop SSO as sufficient, so authenticated
    Windows users are let through, whereas web users have to traverse another
    authentication module such as one requiring an email address and a
    password.</p></li></ul></div><a class="indexterm" name="d16811e573"></a><p>With OpenAM, you can further set <em class="firstterm">authentication
  levels</em> per module, with higher levels being used typically
  to allow access to more restricted resources. The OpenAM SPIs also let you
  develop your own authentication modules, and post-authentication plugins.
  Client applications can specify the authentication level, module, user, and
  authentication service to use among those you have configured. As described
  later in this guide, you can use <em class="firstterm">realms</em> to organize
  which authentication process applies for different applications or different
  domains, perhaps managed by different people.</p><p>When a user successfully authenticates, OpenAM creates a session, which
  allows OpenAM to manage that user's access to resources. In some deployments
  you need to limit how many active sessions a user can have at a given time.
  For example, you might want to prevent a user from using more than two devices
  at once. See <a class="xref" href="#configure-session-quotas" title="2.7.&nbsp;Configuring Session Quotas">Section&nbsp;2.7, &#8220;Configuring Session Quotas&#8221;</a> for
  instructions.</p><p>OpenAM leaves the authentication process flexible so that you can adapt
  how it works to your situation. Although at first the number of choices
  can seem daunting, now that you understand the basic process, you begin to
  see how choosing authentication modules and arranging them in authentication
  chains lets you use OpenAM to protect access to a wide range of applications
  used in your organization.</p></div><div class="section" title="2.2.&nbsp;Configuring Authentication Modules"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-modules"></a>2.2.&nbsp;Configuring Authentication Modules</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#ad-module-conf-hints">2.2.1. Hints For the Active Directory Authentication Module</a></span></dt><dt><span class="section"><a href="#adaptive-auth-module-conf-hints">2.2.2. Hints For the Adaptive Risk Authentication Module</a></span></dt><dt><span class="section"><a href="#anon-module-conf-hints">2.2.3. Hints For the Anonymous Authentication Module</a></span></dt><dt><span class="section"><a href="#cert-module-conf-hints">2.2.4. Hints For the Certificate Authentication Module</a></span></dt><dt><span class="section"><a href="#core-module-conf-hints">2.2.5. Hints For the Core Authentication Module</a></span></dt><dt><span class="section"><a href="#datastore-module-conf-hints">2.2.6. Hints For the Data Store Authentication Module</a></span></dt><dt><span class="section"><a href="#device-print-auth-module-conf-hints">2.2.7. Hints For the Device Print Authentication Module</a></span></dt><dt><span class="section"><a href="#federation-module-conf-hints">2.2.8. Hints For the Federation Authentication Module</a></span></dt><dt><span class="section"><a href="#hotp-module-conf-hints">2.2.9. Hints For the HOTP Authentication Module</a></span></dt><dt><span class="section"><a href="#http-module-conf-hints">2.2.10. Hints For the HTTP Basic Authentication Module</a></span></dt><dt><span class="section"><a href="#jdbc-module-conf-hints">2.2.11. Hints For the JDBC Authentication Module</a></span></dt><dt><span class="section"><a href="#ldap-module-conf-hints">2.2.12. Hints For the LDAP Authentication Module</a></span></dt><dt><span class="section"><a href="#membership-module-conf-hints">2.2.13. Hints For the Membership Authentication Module</a></span></dt><dt><span class="section"><a href="#msisdn-module-conf-hints">2.2.14. Hints For the MSISDN Authentication Module</a></span></dt><dt><span class="section"><a href="#OATH-module-conf-hints">2.2.15. Hints For the OATH Module</a></span></dt><dt><span class="section"><a href="#oauth2-module-conf-hints">2.2.16. Hints For the OAuth 2.0 Authentication Module</a></span></dt><dt><span class="section"><a href="#persistent-cookie">2.2.17. Hints for the Persistent Cookie Module</a></span></dt><dt><span class="section"><a href="#radius-module-conf-hints">2.2.18. Hints For the RADIUS Authentication Module</a></span></dt><dt><span class="section"><a href="#sae-module-conf-hints">2.2.19. Hints For the SAE Authentication Module</a></span></dt><dt><span class="section"><a href="#securid-module-conf-hints">2.2.20. Hints For the SecurID Authentication Module</a></span></dt><dt><span class="section"><a href="#desktop-module-conf-hints">2.2.21. Hints For the Windows Desktop SSO Authentication Module</a></span></dt><dt><span class="section"><a href="#winnt-module-conf-hints">2.2.22. Hints For the Windows NT Authentication Module</a></span></dt><dt><span class="section"><a href="#wss-module-conf-hints">2.2.23. Hints For the WSSAuth Authentication Module</a></span></dt></dl></div><p>The OpenAM console provides two places where the OpenAM administrator
  can configure authentication modules.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Under Configuration &gt; Authentication, you configure available
    modules for use throughout OpenAM. What you set up here is inherited
    for use elsewhere.</p></li><li class="listitem"><p>Under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
    Authentication, you configure modules for your realm. What you set up
    at this level inherits from the global configuration, but you can override
    what is inherited. You can also add your own modules if necessary.</p></li></ol></div><p>The configuration of individual modules depend on its function.
  The configuration of an Active Directory over LDAP user authentication module
  requires connection information and details about where to search for users.
  In contrast, the configuration of the HOTP module for OTP authentication
  requires data about the password length and the mail server or SMS gateway for
  to send the password during authentication.</p><div class="section" title="2.2.1.&nbsp;Hints For the Active Directory Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="ad-module-conf-hints"></a>2.2.1.&nbsp;Hints For the Active Directory Authentication Module</h3></div></div></div><p>OpenAM connects to Active Directory over Lightweight Directory Access
   Protocol (LDAP). OpenAM provides separate Active Directory and LDAP
   modules to support the use of both Active Directory and
   another directory service in an authentication chain.</p><a class="indexterm" name="d16811e614"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthADService</code></p><div class="variablelist"><dl><dt><span class="term">Primary Active Directory Server, </span><span class="term">Secondary Active Directory Server</span></dt><dd><p>The default port for LDAP is 389. If you are connecting to
      Active Directory over SSL, the default port for LDAP/SSL is 636.</p><p>To allow users to change passwords through OpenAM, Active Directory
      requires that you connect over SSL.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to Active Directory Server. Make sure that OpenAM
      can trust the Active Directory certificate when using this option.</p><p>OpenAM first attempts to contact primary servers. If no primary
      server is available, then OpenAM attempts to contact secondaries.</p><p>When authenticating users from a directory server that is remote
      from OpenAM, set both the primary and secondary server values.</p><p><span class="command"><strong>ssoadm</strong></span> attributes: primary is
      <code class="literal">iplanet-am-auth-ldap-server</code>; secondary is
      <code class="literal">iplanet-am-auth-ldap-server2</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better performance.
      When configuring the module for a particular part of the organization,
      you can perhaps start searches from a specific organizational unit such as
      <code class="literal">OU=sales,DC=example,DC=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in Active Directory, for example to
      manage account lockout, or if Active Directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to Active Directory.</p><p>The default is <code class="literal">amldapuser</code>. If the administrator
      authentication chain (default: <code class="literal">ldapService</code>) has been
      configured to include only the Active Directory module, then make sure
      that the password is correct before you logout. If it is incorrect, you
      will be locked out. If you do get locked out, you can login with the
      super user DN, which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> was set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code> and
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes Used to Retrieve User Profile, </span><span class="term">Attributes Used to Search for a User to be Authenticated, </span><span class="term">User Search Filter, </span><span class="term">Search Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">CN=Users,DC=example,DC=com</code> with a filter
      <code class="literal">"(MAIL=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">MAIL=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>The User Search Filter text box provides a more complex filter. For example, 
      if you search on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the resulting 
      search filter <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)
      (objectClass=inetOrgPerson))</code>, where <em class="replaceable"><code>address</code></em> 
      is the mail address provided by the user.</p><p>This controls how and the level of the directory that will be searched.
      You can set the search to run at a high level or against a specific area.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>OBJECT will search only for the entry specified as the DN to Start User
         Search.</p></li><li class="listitem"><p>ONELEVEL will search only the entries that are directly children of that
         object.</p></li><li class="listitem"><p>SUBTREE will search the entry specified and every entry under it.</p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">SSL/TLS Access to Active Directory Server</span></dt><dd><p>If you enable SSL/TLS, OpenAM must be able to trust Active Directory
      certificates, either because the Active Directory certificates were
      signed by a CA whose certificate is already included in the trust store
      used by the container where OpenAM runs, or because you imported the
      certificates into the trust store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">Return User DN to DataStore</span></dt><dd><p>When enabled, and OpenAM uses Active Directory as the user store,
      the module returns the DN rather than the User ID, so the bind for
      authentication can be completed without a search to retrieve
      the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>This list lets you map (external) attribute names from Active
      Directory to (internal) attribute names used by OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Interval</span></dt><dd><p>Specifies how often OpenAM should send a heartbeat request to the
      directory server to ensure that the connection does not remain idle. Some
      network administrators configure firewalls and load balancers to drop
      connections that are idle for too long. You can turn this off by setting
      the value to 0 or to a negative number. To set the units for the interval
      use LDAP Connection Heartbeat Time Unit.</p><p>Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Time Unit</span></dt><dd><p>Specifies the time unit corresponding to LDAP Connection Heartbeat
      Interval.</p><p>Default: minute</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthADAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.2.&nbsp;Hints For the Adaptive Risk Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="adaptive-auth-module-conf-hints"></a>2.2.2.&nbsp;Hints For the Adaptive Risk Authentication Module</h3></div></div></div><p>The Adaptive Risk module is designed to assess risk during
   authentication so that OpenAM can determine whether to require the
   user to complete further authentication steps. After configuring the
   Adaptive Risk module, insert it in your authentication chain with criteria
   set to sufficient as shown in the following example.</p><div class="mediaobject" title="Including the Adaptive Risk module in an authentication chain"><a name="figure-adaptive-auth-module"></a><img src="images/adaptive-auth-module.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-adaptive-auth-module.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-adaptive-auth-module.html" target="longdesc">D</a>]</span></div></div><p>In the example authentication chain shown, OpenAM has users
   authenticate first using the LDAP module providing a user ID and password
   combination. Upon success, OpenAM calls the Adaptive Risk module. The
   Adaptive Risk module assesses the risk based on your configured parameters.
   If the Adaptive Risk module calculates a total score below the threshold you
   set, the module returns success, and OpenAM finishes authentication
   processing without requiring further credentials. Otherwise the Adaptive
   Risk module evaluates the score to be above the risk threshold, and returns
   failure. OpenAM then calls the HOTP module, requiring the user to
   authenticate with a one-time password delivered to her by email or by SMS
   to her mobile phone.</p><p>When you configure the Adaptive Risk module to save cookies and
   profile attributes after successful authentication, OpenAM performs the
   save as post-authentication processing, only after the entire authentication
   chain returns success. You must set up OpenAM to save the data as part of
   post-authentication processing by editing the authentication chain to add
   <code class="literal">org.forgerock.openam.authentication.modules.adaptive.Adaptive</code>
   to the list of post authentication plugins.</p><a class="indexterm" name="d16811e875"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthAdaptiveService</code></p><div class="variablelist" title="General"><div class="variablelist-title">General</div><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-adaptive-auth-level</code></p></dd><dt><span class="term">Risk Threshold</span></dt><dd><p>Risk threshold score. If the sum of the Scores is greater than the
      threshold, the Adaptive Risk module returns failure. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-auth-threshold</code></p></dd></dl></div><div class="variablelist" title="Failed Authentications"><div class="variablelist-title">Failed Authentications</div><dl><dt><span class="term">Failed Authentication Check</span></dt><dd><p>When enabled, check the user profile for authentication failures
      since the last successful login. This check therefore requires
      OpenAM to have access to the user profile, and Account Lockout to be
      enabled (otherwise OpenAM does not record authentication
      failures).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-check</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Failed
      Authentication Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Failed Authentication Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-invert</code></p></dd></dl></div><div class="variablelist" title="IP Address Range"><div class="variablelist-title">IP Address Range</div><dl><dt><span class="term">IP Range Check</span></dt><dd><p>When enabled, check whether the client IP address is within one
      of the specified IP Ranges.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-check</code></p></dd><dt><span class="term">IP Range</span></dt><dd><p>For IPv4, specifies a list of IP ranges either in CIDR-style notation
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>/<em class="replaceable"><code>YY</code></em></code>)
      or as a range from one address to another
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>-<em class="replaceable"><code>y.y.y.y</code></em></code>,
      meaning from <em class="replaceable"><code>x.x.x.x</code></em> to
      <em class="replaceable"><code>y.y.y.y</code></em>).</p><p>For IPv6, specifies a list of IP ranges either in CIDR-style notation
      (<code class="literal"><em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em>/<em class="replaceable"><code>YY</code></em></code>)
      or as a range from one address to another
      (<code class="literal"><em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em>-<em class="replaceable"><code>Y:Y:Y:Y:Y:Y:Y:Y</code></em></code>,
      meaning from <em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em> to
      <em class="replaceable"><code>Y:Y:Y:Y:Y:Y:Y:Y</code></em>).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-range</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP Range
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP Range Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-invert</code></p></dd></dl></div><div class="variablelist" title="IP Address History"><div class="variablelist-title">IP Address History</div><dl><dt><span class="term">IP History Check</span></dt><dd><p>When enabled, check whether the client IP address matches one of
      the known values stored on the profile attribute you specify. This check
      therefore requires that OpenAM have access to the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-check</code></p></dd><dt><span class="term">History Size</span></dt><dd><p>Specifies how many IP address values to retain on the profile
      attribute you specify. Default: 5</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ip-adaptive-history-count</code></p></dd><dt><span class="term">Profile Attribute Name</span></dt><dd><p>Name of the user profile attribute on which to store known IP
      addresses. Default: <code class="literal">iphistory</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-attribute</code></p></dd><dt><span class="term">Save Successful IP Address</span></dt><dd><p>When enabled, save new client IP addresses to the known IP address
      list following successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP History
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP History Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-invert</code></p></dd></dl></div><div class="variablelist" title="Known Cookie"><div class="variablelist-title">Known Cookie</div><dl><dt><span class="term">Cookie Value Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie and optional cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for which OpenAM checks when
      you enable the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-name</code></p></dd><dt><span class="term">Cookie Value</span></dt><dd><p>Specifies the value of the cookie for which OpenAM checks. If
      no value is specified, OpenAM does not check the cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-value</code></p></dd><dt><span class="term">Save Cookie Value on Successful Login</span></dt><dd><p>When enabled, save the cookie as specified in the client's browser
      following successful authentication. If no Cookie Value is specified,
      the value is set to 1.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if user passes the Cookie Value
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-invert</code></p></dd></dl></div><div class="variablelist" title="Device Cookie"><div class="variablelist-title">Device Cookie</div><dl><dt><span class="term">Device Registration Cookie Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie with the correct device registration identifier as
      the value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for the Device Registration Cookie
      Check. Default: Device</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-name</code></p></dd><dt><span class="term">Save Device Registration on Successful Login</span></dt><dd><p>When enabled, save the specified cookie with a hashed device
      identifier value in the client's browser following successful
      authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Device
      Registration Cookie Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Device Registration Cookie Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-invert</code></p></dd></dl></div><div class="variablelist" title="Time Since Last Login"><div class="variablelist-title">Time Since Last Login</div><dl><dt><span class="term">Time Since Last Login Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie that holds the encrypted last login time, and check
      that the last login time is more recent than a maximum number of days you
      specify.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie holding the encrypted last login
      time value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-cookie-name</code></p></dd><dt><span class="term">Max Time since Last Login</span></dt><dd><p>Specifies a threshold age of the last login time in days. If the
      client's last login time is more recent than the number of days specified,
      then the client successfully passes the check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-value</code></p></dd><dt><span class="term">Save time of Successful Login</span></dt><dd><p>When enabled, save the specified cookie with the current time
      encrypted as the last login value in the client's browser following
      successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Time Since
      Last Login Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Time Since Last Login Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-invert</code></p></dd></dl></div><div class="variablelist" title="Profile Attribute"><div class="variablelist-title">Profile Attribute</div><dl><dt><span class="term">Profile Risk Attribute check</span></dt><dd><p>When enabled, check whether the user profile contains the specified
      attribute and value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-check</code></p></dd><dt><span class="term">Attribute Name</span></dt><dd><p>Specifies the attribute to check on the user profile for the
      specified value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-name</code></p></dd><dt><span class="term">Attribute Value</span></dt><dd><p>Specifies the value to match on the profile attribute. If the
      attribute is multi-valued, a single match is sufficient to pass the
      check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Profile Risk
      Attribute Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Profile Risk Attribute Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-invert</code></p></dd></dl></div><div class="variablelist" title="Geo Location"><div class="variablelist-title">Geo Location</div><dl><dt><span class="term">Geolocation Country Code Check</span></dt><dd><p>When enabled, check whether the client IP address location matches
      a country specified in the Valid Country Codes list. The </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">forgerock-am-auth-adaptive-geo-location-check</code></p></dd><dt><span class="term">Geolocation Database location</span></dt><dd><p>Path to GeoIP data file used to convert IP addresses to
      country locations. The geolocation database is not packaged with OpenAM. 
      You can downloaded the GeoIP Country database from  <a class="link" href="http://www.maxmind.com/en/country" target="_top">MaxMind</a>. Use the binary 
      .dat file format, rather than .csv. You can use the GeoLite Country database
      for testing.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-database</code></p></dd><dt><span class="term">Valid Country Codes</span></dt><dd><p>Specifies the list of country codes to match. Use
      <code class="literal">|</code> to separate multiple values.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-values</code>.</p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Geolocation
      Country Code Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Geolocation Country Code Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-invert</code></p></dd></dl></div><div class="variablelist" title="Request Header"><div class="variablelist-title">Request Header</div><dl><dt><span class="term">Request Header Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified header with the correct value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-check</code></p></dd><dt><span class="term">Request Header Name</span></dt><dd><p>Specifies the name of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-name</code></p></dd><dt><span class="term">Request Header Value</span></dt><dd><p>Specifies the value of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Request
      Header Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Request Header Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-invert</code></p></dd></dl></div></div><div class="section" title="2.2.3.&nbsp;Hints For the Anonymous Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="anon-module-conf-hints"></a>2.2.3.&nbsp;Hints For the Anonymous Authentication Module</h3></div></div></div><p>This module lets you track and manage anonymous users, perhaps
   forcing further authentication later when a user moves to access resources
   that require more protection.</p><a class="indexterm" name="d16811e1536"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthAnonymousService</code></p><div class="variablelist"><dl><dt><span class="term">Valid Anonymous Users</span></dt><dd><p>Specifies valid anonymous user IDs in addition to the default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-users-list</code></p></dd><dt><span class="term">Default Anonymous User Name</span></dt><dd><p>Specifies the user ID assigned by the module if the Valid
      Anonymous Users list is empty. Default: <code class="literal">anonymous</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-default-user-name</code></p></dd><dt><span class="term">Case Sensitive User IDs</span></dt><dd><p>Determines whether case matters for anonymous user IDs.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-case-sensitive</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.4.&nbsp;Hints For the Certificate Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="cert-module-conf-hints"></a>2.2.4.&nbsp;Hints For the Certificate Authentication Module</h3></div></div></div><p>X.509 digital certificates can enable secure authentication without
   the need for user names and passwords or other credentials. Certificate
   authentication can be handy to manage authentication by applications.
   If all certificates are signed by a recognized Certificate Authority (CA),
   then you might get away without additional configuration. If you need to
   look up public keys of OpenAM clients, this module can also look up public
   keys in an LDAP directory server.</p><p>When you store certificates and certificate revocation lists (CRL)
   in an LDAP directory service, you must configure both how to access the
   directory service and also how to look up the certificates and CRLs,
   based on the fields in the certificates that OpenAM clients present to
   authenticate.</p><p>Access to the LDAP server and how to search for users is similar
   to LDAP module configuration as in <a class="xref" href="#ldap-module-conf-hints" title="2.2.12.&nbsp;Hints For the LDAP Authentication Module">Section&nbsp;2.2.12, &#8220;Hints For the LDAP Authentication Module&#8221;</a>.
   The primary difference is that, unlike for LDAP configuration, OpenAM
   retrieves the user identifier from a field in the certificate that the
   client application presents, then uses that identifier to search for the
   LDAP directory entry that holds the certificate, which should match the
   certificate presented. For example, if the Subject field of a typical
   certificate has a DN <code class="literal">C=FR, O=Example Corp, CN=Barbara
   Jensen</code>, and Barbara Jensen's entry in the directory has
   <code class="literal">cn=Barbara Jensen</code>, then you can use <code class="literal">CN=Barbara
   Jensen</code> from the Subject DN to search for the entry with
   <code class="literal">cn=Barbara Jensen</code> in the directory.</p><a class="indexterm" name="d16811e1621"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthCertService</code></p><div class="variablelist"><dl><dt><span class="term">Match Certificate in LDAP</span></dt><dd><p>When enabled, OpenAM searches for a match for the user's
      certificate in the LDAP directory. If a match is found and not revoked
      according to a CRL or OCSP validation, then authentication succeeds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-cert-in-ldap</code></p></dd><dt><span class="term">Subject DN Attribute Used to Search LDAP for Certificates</span></dt><dd><p>Indicates which attribute and value in the certificate Subject DN
      is used to find the LDAP entry holding the certificate.</p><p>Default: CN</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-ldap</code></p></dd><dt><span class="term">Match Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks whether the certificate has been
      revoked according to a CRL in the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-crl</code></p></dd><dt><span class="term">Issuer DN Attribute Used to Search LDAP for CRLs</span></dt><dd><p>Indicates which attribute and value in the certificate Issuer DN
      is used to find the CRL in the LDAP directory.</p><p>Default: CN</p><p>If only one attribute is specified, the LDAP search filter used to
      find the CRL based on the Subject DN of the CA certificate is
      <code class="literal">(<em class="replaceable"><code>attr-name</code></em>=<em class="replaceable"><code>attr-value-in-subject-DN</code></em>)</code>.</p><p>For example, if the subject DN of the issuer certificate is
      <code class="literal">C=US, CN=Some CA, serialNumber=123456</code>, and the
      attribute specified is <code class="literal">CN</code>, then the LDAP search filter
      used to find the CRL is <code class="literal">(CN=Some CA)</code>.</p><p>In order to distinguish among different CRLs for the same CA issuer,
      specify multiple attributes separated by commas (<code class="literal">,</code>) in
      the same order they occur in the subject DN. When multiple attribute names
      are provided in a comma-separated list, the LDAP search filter used is
      <code class="literal">(cn=<em class="replaceable"><code>attr1</code></em>=<em class="replaceable"><code>attr1-value-in-subject-DN</code></em>,<em class="replaceable"><code>attr2</code></em>=<em class="replaceable"><code>attr2-value-in-subject-DN</code></em>,...,<em class="replaceable"><code>attrN</code></em>=<em class="replaceable"><code>attrN-value-in-subject-DN</code></em>)</code>.</p><p>For example, if the subject DN of the issuer certificate is
      <code class="literal">C=US, CN=Some CA, serialNumber=123456</code>, and the
      attributes specified are <code class="literal">CN,serialNumber</code>, then
      the LDAP search filter used to find the CRL is
      <code class="literal">(cn=CN=Some CA,serialNumber=123456)</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-crl</code></p></dd><dt><span class="term">HTTP Parameters for CRL Update</span></dt><dd><p>Your certificate authority should provide the URL to use here,
      from which OpenAM can get CRL updates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-param-get-crl</code></p></dd><dt><span class="term">Match CA Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks the CRL against the CA certificate to
      ensure it has not been compromised.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMValidateCACert</code></p></dd><dt><span class="term">Cache CRLs in Memory</span></dt><dd><p>When enabled, CRLs will be cached.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                   <code class="literal">openam-am-auth-cert-attr-cache-crl</code></p></dd><dt><span class="term">Update CA CRLs from CRLDistributionPoint</span></dt><dd><p>When enabled, OpenAM updates CRLs from the LDAP directory store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                   <code class="literal">openam-am-auth-cert-update-crl</code></p></dd><dt><span class="term">OCSP Validation</span></dt><dd><p>Enable this to use Online Certificate Status Protocol (OCSP)
      instead of CRLs to check certificates' revocation status.</p><p>If you enable this, you also must configure OSCP for OpenAM
      under Configuration &gt; Server and Sites &gt; Default Server Settings,
      or Configuration &gt; Server and Sites &gt; <em class="replaceable"><code>Server
      Name</code></em> &gt; Security.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-ocsp</code></p></dd><dt><span class="term">LDAP Server Where Certificates are Stored</span></dt><dd><p>Identifies the LDAP server with certificates. Remember to specify URLs
      with appropriate port numbers (389 for unencrypted LDAP, 636 for LDAP over SSL).
      When configuring a secure connection, scroll down to enable Use SSL/TLS for LDAP
      Access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-ldap-provider-url</code></p></dd><dt><span class="term">LDAP Search Start or Base DN</span></dt><dd><p>Valid base DN for the LDAP search, such as
      <code class="literal">dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-start-search-loc</code></p></dd><dt><span class="term">LDAP Server Authentication User, LDAP Server Authentication Password</span></dt><dd><p>If OpenAM stores attributes in the LDAP directory, for example to
      manage account lockout, or if the LDAP directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-cert-principal-user</code>, and
      <code class="literal"> iplanet-am-auth-cert-principal-passwd</code></p></dd><dt><span class="term">Use SSL/TLS for LDAP Access</span></dt><dd><p>If you use SSL/TLS for LDAP access, OpenAM must be able to trust the
      LDAP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-use-ssl</code></p></dd><dt><span class="term">Certificate Field Used to Access User Profile</span></dt><dd><p>If the user profile is in a different entry from the user
      certificate, then this can be different from subject DN attribute
      used to find the entry with the certificate. When you select other,
      provide an attribute name in the Other Certificate Field Used to Access
      User Profile text box.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-user-profile-mapper</code></p></dd><dt><span class="term">Other Certificate Field Used to Access User Profile</span></dt><dd><p>This field is only used if the Certificate Field Used to Access
      User Profile attribute is set to other. This field allows a custom
      certificate field to be used as the basis of the user search.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-user-profile-mapper-other</code></p></dd><dt><span class="term">SubjectAltNameExt Value Type to Access User Profile</span></dt><dd><p>Use this if you want to look up the user profile from an RFC 822
      style name, or a User Principal Name as used in Active Directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-cert-user-profile-mapper-ext</code></p></dd><dt><span class="term">Trusted Remote Hosts</span></dt><dd><p>Hosts trusted to send certificates to OpenAM, such as load balancers
      doing SSL termination, or OpenAM distributed authentication UI
      instances.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-gw-cert-auth-enabled</code></p></dd><dt><span class="term">HTTP Header Name for Client Certificate</span></dt><dd><p>If you configure trusted hosts, specify the HTTP header name for
      the client certificate inserted by the trusted host.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMHttpParamName</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-cert-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.5.&nbsp;Hints For the Core Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="core-module-conf-hints"></a>2.2.5.&nbsp;Hints For the Core Authentication Module</h3></div></div></div><p>The Core module is a meta-module.</p><p>The Core module lets you set up the list of modules available,
   and specify what types of client applications can authenticate with which
   modules. It also lets you configure connection pools for access to
   directory servers, and whether to retain objects used during authentication
   for use during logout. Furthermore, the Core module lets you set defaults
   used when configuring authentication in a particular realm.</p><a class="indexterm" name="d16811e1942"></a><div class="itemizedlist"><p>The Core Authentication module is divided into seven sections:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#auth-core-global" title="2.2.5.1.&nbsp;Core - Global Attributes">Section&nbsp;2.2.5.1, &#8220;Core - Global Attributes&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-realm-attributes" title="2.2.5.2.&nbsp;Core - Realm Attributes">Section&nbsp;2.2.5.2, &#8220;Core - Realm Attributes&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-persistent-cookie" title="2.2.5.3.&nbsp;Core - Persistent Cookie (Legacy)">Section&nbsp;2.2.5.3, &#8220;Core - Persistent Cookie (Legacy)&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-account-lockout" title="2.2.5.4.&nbsp;Core - Account Lockout">Section&nbsp;2.2.5.4, &#8220;Core - Account Lockout&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-general" title="2.2.5.5.&nbsp;Core - General">Section&nbsp;2.2.5.5, &#8220;Core - General&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-security" title="2.2.5.6.&nbsp;Core - Security">Section&nbsp;2.2.5.6, &#8220;Core - Security&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#auth-core-post-auth" title="2.2.5.7.&nbsp;Core - Post Authentication Processing">Section&nbsp;2.2.5.7, &#8220;Core - Post Authentication Processing&#8221;</a></p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthService</code></p><div class="section" title="2.2.5.1.&nbsp;Core - Global Attributes"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-global"></a>2.2.5.1.&nbsp;Core - Global Attributes</h4></div></div></div><p>The Global Attributes includes the list of available modules, LDAP connection
            settings, authentication process options, and an option to make the XUI the
            default interface. The Global Attributes are defined in the
            <a href="../reference/index.html#authentication-configuration" class="link">
                <em class="citetitle">Authentication Configuration</em></a> section of the
            OpenAM Reference Guide.</p></div><div class="section" title="2.2.5.2.&nbsp;Core - Realm Attributes"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-realm-attributes"></a>2.2.5.2.&nbsp;Core - Realm Attributes</h4></div></div></div><p>This section of the Core Authentication module is on the Realm Attributes section
    page before options for Persistent Cookies.</p><div class="variablelist"><dl><dt><span class="term"><span class="emphasis"><em>User Profile</em></span>, </span><span class="term">User Profile</span></dt><dd><p>Whether a user profile needs to exist in the user data store,
      or should be created on successful authentication.</p><div class="variablelist"><dl><dt><span class="term">Dynamic</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile if one does not already exist.
         OpenAM then issues the SSOToken. OpenAM creates the user profile 
         in the user data store configured for the realm.</p></dd><dt><span class="term">Dynamic with User Alias</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile that contains the User Alias List
         attribute which defines one or more aliases that for mapping a
         user's multiple profiles.</p></dd><dt><span class="term">Ignored</span></dt><dd><p>Specifies that a user profile is not required for the
         Authentication Service to issue an SSOToken after a successful
         authentication.</p></dd><dt><span class="term">Required</span></dt><dd><p>Specifies that on successful authentication the user must have
         a user profile in the user data store configured for the realm in
         order for the Authentication Service to issue an SSOToken.</p></dd></dl></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-dynamic-profile-creation</code></p></dd><dt><span class="term">User Profile Dynamic Creation Default Roles</span></dt><dd><p>Specifies the Distinguished Name (DN) of a role to be assigned to
      a new user whose profile is created when either of the Dynamic options
      is selected under the User Profile attribute. There are no default
      values. The role specified must be within the realm for which the
      authentication process is configured.</p><p>This role can be either an OpenAM or Sun DSEE role, but it cannot
      be a filtered role. If you wish to automatically assign specific services
      to the user, you have to configure the Required Services attribute in
      the User Profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-role</code></p></dd><dt><span class="term">Alias Search Attribute Name</span></dt><dd><p>After a user is successfully authenticated, the user's profile is
      retrieved. OpenAM first searches for the user based on the data store settings. 
      If that fails to find the user, OpenAM will use the attributes listed here to 
      lookup the user profile. This setting accepts any data store specific attribute 
      name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-alias-attr-name</code></p></dd></dl></div></div><div class="section" title="2.2.5.3.&nbsp;Core - Persistent Cookie (Legacy)"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-persistent-cookie"></a>2.2.5.3.&nbsp;Core - Persistent Cookie (Legacy)</h4></div></div></div><p>This section of the Core Authentication module covers the Persistent Cookie options.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Two methods are available in OpenAM to configure persistent cookies. The options described
     here and in <a class="xref" href="#authn-from-browser" title="2.5.&nbsp;Authenticating To OpenAM">Section&nbsp;2.5, &#8220;Authenticating To OpenAM&#8221;</a> specify one method. There is also a new module,
     described in <a class="xref" href="#persistent-cookie" title="2.2.17.&nbsp;Hints for the Persistent Cookie Module">Section&nbsp;2.2.17, &#8220;Hints for the Persistent Cookie Module&#8221;</a>. If you want to set up persistent cookies, you are
     encouraged to use the new module. The options described here have no effect on that module.</p></div><div class="variablelist"><dl><dt><span class="term">Persistent Cookie Mode</span></dt><dd><p>Determines whether users can return to their authenticated session
      after restarting the browser. When enabled, the persistent cookie can be
      used to reauthenticate until the persistent cookie expires (as specified
      by the value of the Persistent Cookie Maximum Time attribute), or until
      the user explicitly logs out. By default, the Authentication Service uses
      only memory cookies (expires when the browser is closed).</p><p>The client must explicitly request a persistent cookie by adding
      <code class="literal">iPSPCookie=yes</code> as a parameter to the login URL. OpenAM
      sets a <code class="literal">DProPCookie</code> as described in
      <a class="xref" href="#authn-from-browser" title="2.5.&nbsp;Authenticating To OpenAM">Section&nbsp;2.5, &#8220;Authenticating To OpenAM&#8221;</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-mode</code></p></dd><dt><span class="term">Persistent Cookie Maximum Time</span></dt><dd><p>Specifies the interval after which a persistent cookie expires.
      The interval begins when the user's session is successfully authenticated.
      The maximum value is 2147483647 (in seconds, so a bit more than 68 years).
      The field accepts any integer value less than the maximum.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-time</code></p></dd><dt><span class="term">Persistent Cookie Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
          associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
          <code class="literal">openam-auth-pcookie-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.5.4.&nbsp;Core - Account Lockout"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-account-lockout"></a>2.2.5.4.&nbsp;Core - Account Lockout</h4></div></div></div><p>This section of the Core Authentication module
          includes details on how account lockouts can be configured.</p><div class="variablelist"><dl><dt><span class="term">Login Failure Lockout Mode</span></dt><dd><p>Selecting this attribute enables a physical lockout. Physical
      lockout will inactivate an LDAP attribute (defined in the Lockout
      Attribute Name property) in the user's profile. This attribute works in
      conjunction with several other lockout and notification attributes.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-lockout-mode</code></p></dd><dt><span class="term">Login Failure Lockout Count</span></dt><dd><p>Defines the number of attempts that a user has to authenticate,
      within the time interval defined in Login Failure Lockout Interval,
      before being locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-count</code></p></dd><dt><span class="term">Login Failure Lockout Interval</span></dt><dd><p>Defines the time in minutes during which failed login attempts are
      counted. If one failed login attempt is followed by a second failed
      attempt, within this defined lockout interval time, the lockout count
      starts, and the user is locked out if the number of attempts reaches
      the number defined in Login Failure Lockout Count. If an attempt within
      the defined lockout interval time proves successful before the number of
      attempts reaches the number defined in Login Failure Lockout Count, the
      lockout count is reset.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-duration</code></p></dd><dt><span class="term">Email Address to Send Lockout Notification</span></dt><dd><p>Specify one (or more) email address(es) to which notification is
      sent if a user lockout occurs.</p><p>Separate multiple addresses with spaces, and append
      <code class="literal">|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>charset</code></em></code>
      to addresses for recipients in non-English locales.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-email-address</code></p></dd><dt><span class="term">Warn User After N Failures</span></dt><dd><p>The number of authentication failures after which OpenAM displays
      a warning message that the user will be locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-lockout-warn-user</code></p></dd><dt><span class="term">Login Failure Lockout Duration</span></dt><dd><p>Defines how many minutes a user must wait after a lockout before
      attempting to authenticate again. Entering a value greater than 0 enables
      memory lockout and disables physical lockout. Memory lockout means
      the user's account is locked in memory for the number of minutes
      specified. The account is unlocked after the time period has passed.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-duration</code></p></dd><dt><span class="term">Lockout Duration Multiplier</span></dt><dd><p>Defines a value with which to multiply the value of the Login
      Failure Lockout Duration attribute for each successive lockout. For
      example, if Login Failure Lockout Duration is set to 3 minutes, and the
      Lockout Duration Multiplier is set to 2, the user is locked out of the
      account for 6 minutes. Once the 6 minutes has elapsed, if the user again
      provides the wrong credentials, the lockout duration is then 12 minutes.
      With the Lockout Duration Multiplier, the lockout duration is
      incrementally increased based on the number of times the user has been
      locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunLockoutDurationMultiplier</code></p></dd><dt><span class="term">Lockout Attribute Name</span></dt><dd><p>Defines the LDAP attribute used for physical lockout. The default
      value is <code class="literal">inetuserstatus</code>, although the field in the
      OpenAM console is empty. The Lockout Attribute Value field must also
      contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-name</code></p></dd><dt><span class="term">Lockout Attribute Value</span></dt><dd><p>Specifies the action to take on the attribute defined in Lockout
      Attribute Name. The default value is <code class="literal">inactive</code>,
      although the field in the OpenAM console is empty. The Lockout Attribute
      Name field must also contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-value</code></p></dd><dt><span class="term">Invalid Attempts Data Attribute Name</span></dt><dd><p>Specifies the LDAP attribute used to hold the number of failed
      authentication attempts towards Login Failure Lockout Count.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthInvalidAttemptsDataAttrName</code></p></dd><dt><span class="term">Store Invalid Attempts in Data Store</span></dt><dd><p>Enables the storage of information regarding failed authentication
      attempts as the value of the Invalid Attempts Data Attribute Name in
      the user data store. In order to store data in this attribute, the
      OpenAM schema has to be loaded. Information stored includes number of
      invalid attempts, time of last failed attempt, lockout time and lockout
      duration. Storing this information in the identity repository allows it
      to be shared among multiple instances of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunStoreInvalidAttemptsInDS</code></p></dd></dl></div></div><div class="section" title="2.2.5.5.&nbsp;Core - General"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-general"></a>2.2.5.5.&nbsp;Core - General</h4></div></div></div><p>This section of the Core Authentication module includes general options.</p><div class="variablelist"><dl><dt><span class="term">Default Authentication Locale</span></dt><dd><p>Specifies the default language subtype to be used by the
      Authentication Service. The default value is
      <code class="literal">en_US</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-locale</code></p></dd><dt><span class="term">Identity Types</span></dt><dd><p>Lists the type or types of identities used during a profile lookup. You can
      choose more than one to search on multiple types if you would like OpenAM to 
      conduct a second lookup if the first lookup fails. Default: Agent and User</p><div class="variablelist"><dl><dt><span class="term">Agent</span></dt><dd><p>Searches for identities under your agents.</p></dd><dt><span class="term">agentgroup</span></dt><dd><p>Searches for identities according to your established agent group.</p></dd><dt><span class="term">agentonly</span></dt><dd><p>Searches for identities only under your agents.</p></dd><dt><span class="term">Group</span></dt><dd><p>Searches for identities according to your established groups.</p></dd><dt><span class="term">User</span></dt><dd><p>Searches for identities according to your users.</p></dd></dl></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMIdentityType</code></p></dd><dt><span class="term">Pluggable User Status Event Classes</span></dt><dd><p>Specifies one or more Java classes used to provide a callback
      mechanism for user status changes during the authentication process.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMAuthCallBack</code>
      OpenAM interface. OpenAM supports account lockout and password changes.
      OpenAM supports password changes through the LDAP authentication module,
      and so the feature is only available for the LDAP module.</p><p>A .jar containing the user status event class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserStatusCallbackPlugins</code></p></dd><dt><span class="term">Default Authentication Level</span></dt><dd><p>Specifies the default authentication level for authentication modules.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.5.6.&nbsp;Core - Security"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-security"></a>2.2.5.6.&nbsp;Core - Security</h4></div></div></div><p>This section of the Core Authentication module
              includes basic security options.</p><div class="variablelist"><dl><dt><span class="term">Module Based Authentication</span></dt><dd><p>Enables users to authenticate using module-based authentication.
      Otherwise, all attempts at authentication using the
      <code class="literal">module=<em class="replaceable"><code>module-name</code></em></code> login
      parameter result in failure. It is recommended that this be turned off in 
      a production environment.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunEnableModuleBasedAuth</code></p></dd><dt><span class="term">Valid goto URL domains</span></dt><dd><p>List external domains to which clients can be redirected after
      authentication. This attribute requires valid DNS domains that reflect
      the set policy rules, such as https://website.example.com/* or 
      https://website.example.com/*?*.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-valid-goto-domains</code></p></dd><dt><span class="term">Zero Page Login</span></dt><dd><p>Enables the administrator to allow users to authenticate to a single
      authentication screen using GET request parameters. Enable this with 
      caution as it can allow credentials to be cached.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam.auth.zero.page.login.enabled</code></p></dd></dl></div></div><div class="section" title="2.2.5.7.&nbsp;Core - Post Authentication Processing"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-post-auth"></a>2.2.5.7.&nbsp;Core - Post Authentication Processing</h4></div></div></div><p>This section of the Core Authentication module
              specifies options for post authentication processing.</p><div class="variablelist"><dl><dt><span class="term">Default Success Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after successful authentication. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. The default value is
      <code class="literal">/openam/console</code>. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-success-url</code></p></dd><dt><span class="term">Default Failure Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after authentication has failed. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-url</code></p></dd><dt><span class="term">Authentication Post Processing Classes</span></dt><dd><p>Specifies one or more Java classes used to customize post
      authentication processes for successful or unsuccessful logins.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMPostAuthProcessInterface</code>
      OpenAM interface.</p><p>A .jar containing the post processing class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. For deployment, add the .jar or
      classes into a custom OpenAM .war file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-post-login-process-class</code></p></dd><dt><span class="term">Generate UserID Mode</span></dt><dd><p>When enabled, the Membership module generates a list of alternate
      user identifiers if the one entered by a user during the
      self-registration process is not valid or already exists. The user
      identifiers are generated by the class specified in the Pluggable User
      Name Generator Class property.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-enabled</code></p></dd><dt><span class="term">Pluggable User Name Generator Class</span></dt><dd><p>Specifies the name of the class used to generate alternate user
      identifiers when Generate UserID Mode is enabled. The default value is
      <code class="literal">com.sun.identity.authentication.spi.DefaultUserIDGenerator</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-class</code></p></dd><dt><span class="term">User Attribute Mapping to Session Attribute</span></dt><dd><p>Enables the authenticating user's identity attributes (stored in
      the identity repository) to be set as session properties in the user's
      SSOToken. The value takes the format
      <code class="literal"><em class="replaceable"><code>User-Profile-Attribute</code></em>|<em class="replaceable"><code>Session-Attribute-Name</code></em></code>.
      If <em class="replaceable"><code>Session-Attribute-Name</code></em> is not specified,
      the value of <em class="replaceable"><code>User-Profile-Attribute</code></em> is used.
      All session attributes contain the <code class="literal">am.protected</code> prefix
      to ensure that they cannot be edited by the Client SDK.</p><p>For example, if you define the user profile attribute as mail and
      the user's email address (available in the user session) as
      <code class="literal">user.mail</code>, the entry for this attribute would be
      <code class="literal">mail|user.mail</code>. After a successful authentication,
      the <code class="literal">SSOToken.getProperty(String)</code> method is used to
      retrieve the user profile attribute set in the session. The user's email
      address is retrieved from the user's session using the
      <code class="literal">SSOToken.getProperty("am.protected.user.mail")</code> method
      call.</p><p>Properties that are set in the user session using User Attribute
      Mapping to Session Attributes can not be modified (for example,
      <code class="literal">SSOToken.setProperty(String, String)</code>). This results in
      an <code class="literal">SSOException</code>. Multi-value attributes, such as
      <code class="literal">memberOf</code>, are listed as a single session variable
      with a <code class="literal">|</code> separator.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserAttributesSessionMapping</code></p></dd></dl></div></div></div><div class="section" title="2.2.6.&nbsp;Hints For the Data Store Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="datastore-module-conf-hints"></a>2.2.6.&nbsp;Hints For the Data Store Authentication Module</h3></div></div></div><p>The Data Store authentication module allows a login using the Identity
   Repository of the realm to authenticate users. Using the Data Store module
   removes the requirement to write an authentication plug-in module, load,
   and then configure the authentication module if you need to authenticate
   against the same data store repository. Additionally, you do not need to
   write a custom authentication module where flat-file authentication is
   needed for the corresponding repository in that realm.</p><p>Yet, the Data Store module is generic. It does not implement data
   store-specific capabilities such as the password policy and password reset
   features provided by LDAP modules. Therefore the Data Store module returns
   failure when such capabilities are invoked.</p><a class="indexterm" name="d16811e2581"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthDataStoreService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthDataStoreAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.7.&nbsp;Hints For the Device Print Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="device-print-auth-module-conf-hints"></a>2.2.7.&nbsp;Hints For the Device Print Authentication Module</h3></div></div></div><p>The Device Print module is a device fingerprinter. It collects information about client
        device locations, fonts, plugins, and more through their browsers. This module does not
        stand on its own, as it uses authentication information from a service to validate a username.
        The Device Print module then validates other characteristics of the user's system.</p><p>If no device print profile is stored for a user, then the user is prompted to fill in an
        HMAC One-Time Password (HOTP),
        sent by email or text. The user can then save that device print profile. On subsequent requests
        the user's device profile is recalled. Each of the device print attributes from the client
        are compared against each of the stored attributes. If the differences exceed a configured
        number of penalty points, the user is asked for another HOTP.</p><p>If you know the HOTP module, some of the attributes in this section may seem familiar. That
        is intentional, as the Device Print module includes all HOTP attributes, though not in the same
        order.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>The following example
        assumes that the Device Print module comes after LDAP authentication. Alternatively, you could
        set it up after another directory service module such as Active Directory, Data Store, RADIUS, or
        Windows NT.</p></div><a class="indexterm" name="d16811e2618"></a><div class="mediaobject" title="Including the Device Print module in an authentication chain"><a name="figure-device-print-module"></a><img src="images/device-print-module.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-device-print-module.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-device-print-module.html" target="longdesc">D</a>]</span></div></div><p>A device fingerprint is based on the unique characteristics of a user like yourself and your
            associated device. You can configure the characteristics that should be part of the fingerprint.
            These characteristics can include:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>User agents, associated with the configuration of a web browser.</p></li><li class="listitem"><p>Installed fonts.</p></li><li class="listitem"><p>The plugins installed for the web browser.</p></li><li class="listitem"><p>The resolution and color depth associated with a display</p></li><li class="listitem"><p>The timezone or even the geolocation of a device.</p></li></ul></div><p>You can specify <code class="literal">penalty points</code> when characteristics of the fingerprint have
            changed. If the total <code class="literal">penalty points</code> exceeds some configured score, the user may
            be asked to verify their identity using HOTP.</p><p>The default value for each <code class="literal">*-penalty-points</code>
            attribute is 35, with a <code class="literal">*-max-tolerated-penalty-points</code> of 50.
            In other words, if more than one characteristic of the device fingerprint has changed, the
            module assumes that the user is trying to connect from a different system.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
            <code class="literal">iPlanetAMAuthDevicePrintModuleService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
                        associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">openam-auth-adaptive-auth-level</code></p></dd><dt><span class="term">Profile expiration days</span></dt><dd><p>The list of device attributes is collected in a profile, which automatically expires
                        in a given number of days. Default: 30.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">iplanet-am-auth-adaptive-device-print-profile-expiration-days</code></p></dd><dt><span class="term">Maximum stored profile quantity</span></dt><dd><p>The number of device profiles may be limited by user. Default: 5.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">iplanet-am-auth-adaptive-device-print-maximum-profiles-stored-quantity</code></p></dd><dt><span class="term">Automatically store new profiles</span></dt><dd><p>When enabled, new device profiles are automatically stored, once the HOTP is verified.
                        Otherwise, the user is prompted for confirmation.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-store-profiles-without-confirmation</code></p></dd><dt><span class="term">Default user profile name</span></dt><dd><p>Every device requires a default profile name that represents the user.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-default-profile-name</code></p></dd><dt><span class="term">User agent penalty points</span></dt><dd><p>Specifies the number of penalty points added when there is a difference between the current
                        and stored user agent. The module adds a fixed number of points if the web browser or
                        related fields are changed. Version differences are ignored if the
                        <code class="literal">User-Agent version ignore</code> attribute is active. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-user-agent-penalty-points</code></p></dd><dt><span class="term">Installed fonts penalty points</span></dt><dd><p>Frequently, when a user installs a new software component, additional fonts are installed.
                        The Device Print module adds a fixed number of penalty points if there is a change in the
                        installed fonts since the last login beyond some maximum tolerated level, and the
                        <code class="literal">Installed fonts required</code> attribute is enabled. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-installed-fonts-penalty-points</code></p></dd><dt><span class="term">Installed plugins penalty points</span></dt><dd><p>Most devices have a number of plugins installed on their browsers, such as Java, Flash, and
                        document readers. If the plugins feature is enabled, and there is a change beyond a maximum
                        tolerated level, a fixed number of penalty points is added. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-installed-plugins-penalty-points</code></p></dd><dt><span class="term">Screen color depth penalty points</span></dt><dd><p>Most client devices are connected to a color monitor, or at least have settings related to
                        such a device. If the <code class="literal">Screen parameters</code> feature is enabled, and a change in
                        color depth is detected, a fixed number of penalty points is added. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-screen-color-depth-penalty-points</code></p></dd><dt><span class="term">Screen resolution penalty points</span></dt><dd><p>Differences in screen resolution sometimes indicate that the user has changed monitors, or
                        perhaps is adjusting to changing eyesight. Whenever a different screen resolution is detected,
                        a fixed number of penalty points is added. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-screen-resolution-penalty-points</code></p></dd><dt><span class="term">Timezone penalty points</span></dt><dd><p>Whenever a connection is made from a different timezone, the Device Print module normally
                        adds a fixed number of penalty points. Organizations where most users travel may want to set
                        this attribute to a lower value. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-timezone-penalty-points</code></p></dd><dt><span class="term">Allowed location range</span></dt><dd><p>If geolocation is enabled, each profile should include a geographic location. The allowed
                    location range specifies a maximum distance, in miles. If a user has travelled beyond that distance,
                    the <code class="literal">Location penalty points</code> is added to the total. Default: 100.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-location-allowed-range</code></p></dd><dt><span class="term">User-Agent version ignore</span></dt><dd><p>Upgrades change the version associated with a user agent. Unless this option is enabled, every
                        change in the version of a browser or related fields is detected as a difference with the stored
                        profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-ignore-version-in-user-agent</code></p></dd><dt><span class="term">Max number of tolerated different installed fonts</span></dt><dd><p>If the <code class="literal">Installed fonts required</code> attribute is enabled, a comparison is made
                        in installed fonts between the existing and stored profiles.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-max-tolerated-diffs-in-installed-fonts</code></p></dd><dt><span class="term">Max tolerated percentage difference between installed fonts</span></dt><dd><p>If the <code class="literal">Installed fonts required</code> attribute is enabled, a comparison is made
                        in installed fonts between the existing and stored profiles. Any differences in number of fonts
                        is noted in percent.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-max-tolerated-percentage-to-mark-as-different-installed-fonts</code></p></dd><dt><span class="term">Max number of tolerated different installed plugins</span></dt><dd><p>If the <code class="literal">Installed plugins required</code> attribute is enabled, a comparison is made
                        between the installed plugins defined in the existing and stored profiles.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-max-tolerated-diffs-in-installed-plugins</code></p></dd><dt><span class="term">Max tolerated percentage difference between installed plugins</span></dt><dd><p>If the <code class="literal">Installed plugins required</code> attribute is enabled, a comparison is
                        made between the installed plugins defined in the existing and stored profiles. Any differences
                        in number of plugins is noted in percent.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-max-tolerated-percentage-to-mark-as-different-plugins</code></p></dd><dt><span class="term">User agent required</span></dt><dd><p>The user agent, as defined by <a class="link" href="http://tools.ietf.org/html/rfc4226#section-14.43" target="_blank">RFC 4226 Section 14.43</a>
                        provides information about the browser, and frequently on the operating system. Default:
                        enabled.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-user-agent-required</code></p></dd><dt><span class="term">Installed plugins required</span></dt><dd><p>Plugins are components that add a specific feature to an existing application. In this
                        context, examples of browser plugins are flash, java, and shockwave.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-plugins-required</code></p></dd><dt><span class="term">Installed fonts required</span></dt><dd><p>Fonts are frequently added to an operating system when new applications are installed. If
                        enabled, installed font information is stored as part of the profile, and checked upon
                        reconnection for comparison.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-fonts-required</code></p></dd><dt><span class="term">Geolocation required</span></dt><dd><p>The geographic location of a device can be tracked. Can be used to limit access from this device to a
                        specified range.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-geolocation-required</code></p></dd><dt><span class="term">Screen parameters required</span></dt><dd><p>Display parameters can be used to help differentiate a profile. If enabled, the Device Print module uses
                        screen color depth and resolution.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-screen-params-required</code></p></dd><dt><span class="term">Time zone required</span></dt><dd><p>The time zone of the current and stored profiles can be collected and compared.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-timezone-required</code></p></dd><dt><span class="term">Location penalty points</span></dt><dd><p>If geo-location has been enabled, and the current location does not match the value stored in
                    the profile this many points are added as a penalty. Default: 35.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-location-penalty-points</code></p></dd><dt><span class="term">Maximum tolerated penalty points</span></dt><dd><p>A limit, in number of points, between the current and stored Device Print profiles. If the
                    total is below that value, the Device Print module sees a match. Default: 50.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                    <code class="literal">iplanet-am-auth-adaptive-device-print-max-tolerated-penalty-points</code></p></dd><dt><span class="term">SMS Gateway Implementation Class</span></dt><dd><p>Change this if you must customize the SMS gateway implementation.
                        The default class sends an SMS or email, depending on the
                        configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMSGatewayImplClassName</code></p></dd><dt><span class="term">Mail Server Host Name</span></dt><dd><p>Host name of the mail server supporting Simple Message Transfer
                        Protocol for electronic mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPHostName</code></p></dd><dt><span class="term">Mail Server Host Port</span></dt><dd><p>The default outgoing mail server port is 25, 465
                        (when connecting over SSL).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPHostPort</code></p></dd><dt><span class="term">Mail Server Authentication Username</span></dt><dd><p>User name for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPUserName</code></p></dd><dt><span class="term">Mail Server Authentication Password</span></dt><dd><p>Password for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPUserPassword</code></p></dd><dt><span class="term">Mail Server Secure Connection</span></dt><dd><p>If OpenAM connects to the mail server securely, OpenAM must be able
                        to trust the server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPSSLEnabled</code></p></dd><dt><span class="term">Email From Address</span></dt><dd><p>The <code class="literal">From:</code> address when sending a one-time
                        password by mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPSMTPFromAddress</code></p></dd><dt><span class="term">One Time Password Validity Length (in minutes)</span></dt><dd><p>One-time passwords are valid for 5 minutes after they are generated
                        by default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPPasswordValidityDuration</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the one-time password to 6 or 8 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPPasswordLength</code></p></dd><dt><span class="term">One Time Password Delivery</span></dt><dd><p>Send the one-time password by SMS, by mail, or both.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPasswordDelivery</code></p></dd><dt><span class="term">Mobile Phone Number Attribute Names</span></dt><dd><p>Provides the attribute name used for the text message. The
                        default value is <code class="literal">telephoneNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">openamTelephoneAttribute</code></p></dd><dt><span class="term">Mobile Carrier Attribute Name</span></dt><dd><p>Provides the name of the carrier that will send the text
                        message.</p><p>Every carrier has their own attribute name ending, for example Verizon
                        uses @vtext.com or vtext.com. Contact your mobile carrier to find out what their
                        attribute name is. If you will be sending international texts, ask your carrier
                        if a country code is a required.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">openamSMSCarrierAttribute</code></p></dd><dt><span class="term">Email Attribute Name</span></dt><dd><p>Provides the attribute name used to email the OTP. The
                        default value is <code class="literal">mail</code> (email).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">openamEmailAttribute</code></p></dd><dt><span class="term">Auto Send OTP Code</span></dt><dd><p>Setup the HOTP module to automatically generate an email
                        or text message when users begin the login process. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                        <code class="literal">sunAMAuthHOTPAutoClicking</code></p></dd></dl></div></div><div class="section" title="2.2.8.&nbsp;Hints For the Federation Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="federation-module-conf-hints"></a>2.2.8.&nbsp;Hints For the Federation Authentication Module</h3></div></div></div><p>The Federation authentication module is used by a service provider
   to create a user session after validating single sign-on protocol messages.
   This authentication module is used by the SAML, SAMLv2, ID-FF, and
   WS-Federation protocols.</p><a class="indexterm" name="d16811e3184"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthFederationService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthFederationAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.9.&nbsp;Hints For the HOTP Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="hotp-module-conf-hints"></a>2.2.9.&nbsp;Hints For the HOTP Authentication Module</h3></div></div></div><p>The HMAC One-Time Password authentication module works together with
   the Data Store module to retrieve a user's mail address or telephone number
   to send a one-time password to complete authentication.</p><p>To use HOTP you set up an authentication chain with the Data Store
   module as the <code class="literal">requisite</code> first module, and the HOTP module
   as the second <code class="literal">requisite</code> module. When authentication
   succeeds against the Data Store module, OpenAM passes the Email Address
   and Telephone Number attributes from the user profile to the HOTP module.
   For the HOTP module to use either attribute, the Email Address must contain
   a valid email address, or the Telephone Number must contain a valid
   SMS telephone number.</p><p>You can set the HOTP module to automatically generate a password when
   users begin logging into the system. You can also setup a mobile phone, 
   mobile carrier, and email attributes for tighter controls over where 
   the messages are generated and what provider the messages go through to reach
   the user.</p><a class="indexterm" name="d16811e3223"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthHOTPService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPAuthLevel</code></p></dd><dt><span class="term">SMS Gateway Implementation Class</span></dt><dd><p>Change this if you must customize the SMS gateway implementation.
      The default class sends an SMS or email, depending on the
      configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMSGatewayImplClassName</code></p></dd><dt><span class="term">Mail Server Host Name</span></dt><dd><p>Host name of the mail server supporting Simple Message Transfer
      Protocol for electronic mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostName</code></p></dd><dt><span class="term">Mail Server Host Port</span></dt><dd><p>The default outgoing mail server port is 25, 465 (when connecting over SSL).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostPort</code></p></dd><dt><span class="term">Mail Server Authentication Username</span></dt><dd><p>User name for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserName</code></p></dd><dt><span class="term">Mail Server Authentication Password</span></dt><dd><p>Password for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserPassword</code></p></dd><dt><span class="term">Mail Server Secure Connection</span></dt><dd><p>If OpenAM connects to the mail server securely, OpenAM must be able
      to trust the server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPSSLEnabled</code></p></dd><dt><span class="term">Email From Address</span></dt><dd><p>The <code class="literal">From:</code> address when sending a one-time
      password by mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPFromAddress</code></p></dd><dt><span class="term">One Time Password Validity Length (in minutes)</span></dt><dd><p>One-time passwords are valid for 5 minutes after they are generated
      by default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordValidityDuration</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the one-time password to 6 or 8 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordLength</code></p></dd><dt><span class="term">One Time Password Delivery</span></dt><dd><p>Send the one-time password by SMS, by mail, or both.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPasswordDelivery</code></p></dd><dt><span class="term">Mobile Phone Number Attribute Names</span></dt><dd><p>Provides the attribute name used for the text message. The 
      default value is <code class="literal">telephoneNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamTelephoneAttribute</code></p></dd><dt><span class="term">Mobile Carrier Attribute Name</span></dt><dd><p>Provides the name of the carrier that will send the text
      message.</p><p>Every carrier has their own attribute name ending, for example Verizon
      uses @vtext.com or vtext.com. Contact your mobile carrier to find out what their 
      attribute name is. If you will be sending international texts, ask your carrier 
      if a country code is a required.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamSMSCarrierAttribute</code></p></dd><dt><span class="term">Email Attribute Name</span></dt><dd><p>Provides the attribute name used to email the OTP. The
      default value is <code class="literal">mail</code> (email).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamEmailAttribute</code></p></dd><dt><span class="term">Auto Send OTP Code</span></dt><dd><p>Setup the HOTP module to automatically generate an email
      or text message when users begin the login process. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPAutoClicking</code></p></dd></dl></div></div><div class="section" title="2.2.10.&nbsp;Hints For the HTTP Basic Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="http-module-conf-hints"></a>2.2.10.&nbsp;Hints For the HTTP Basic Authentication Module</h3></div></div></div><p>HTTP basic authentication takes a user name and password from HTTP
   authentication and tries authentication against the backend module in OpenAM,
   depending on what you configure as the Backend Module Name.</p><a class="indexterm" name="d16811e3431"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthHTTPBasicService</code></p><div class="variablelist"><dl><dt><span class="term">Backend Module Name</span></dt><dd><p>Specifies the module that checks the user credentials. The credentials are
      then supplied to either a Data Store or other identity repository module for authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-http-basic-module-configured</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-httpbasic-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.11.&nbsp;Hints For the JDBC Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-module-conf-hints"></a>2.2.11.&nbsp;Hints For the JDBC Authentication Module</h3></div></div></div><p>The Java Database Connectivity (JDBC) module lets OpenAM connect to
   a database such as MySQL or Oracle DB to authenticate users.</p><a class="indexterm" name="d16811e3472"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthJDBCService</code></p><div class="variablelist"><dl><dt><span class="term">Connection Type</span></dt><dd><p>Choose Connection pool is retrieved via JNDI to connect using the
      Java Naming and Directory Interface connection pool supported by the web
      container in which OpenAM runs. Choose Non-persistent JDBC connection to
      connect directly through the JDBC driver.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCConnectionType</code></p></dd><dt><span class="term">Connection Pool JNDI Name</span></dt><dd><p>When using Connection pool is retrieved via JNDI, this specifies
      the pool. How you configure connection pooling depends on the web
      container where you run OpenAM. Refer to the documentation for your
      web container for instructions on setting up connection pooling.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCJndiName</code></p></dd><dt><span class="term">JDBC Driver</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the JDBC
      driver provided by the database.</p><p>The .jar containing the JDBC driver belongs in the
      <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance, and so you should add it to a custom OpenAM .war file that you
      deploy.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDriver</code></p></dd><dt><span class="term">JDBC URL</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the URL
      to connect to the database.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCUrl</code></p></dd><dt><span class="term">Database Username</span></dt><dd><p>Specify the user name to open the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbuser</code></p></dd><dt><span class="term">Database Password</span></dt><dd><p>Specify the password for the user opening the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbpassword</code></p></dd><dt><span class="term">Password Column Name</span></dt><dd><p>Specify the database column name where passwords are stored.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordColumn</code></p></dd><dt><span class="term">Prepared Statement</span></dt><dd><p>Specify the SQL query to return the password corresponding to the
      user to authenticate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCStatement</code></p></dd><dt><span class="term">Class to Transform Password Syntax</span></dt><dd><p>Specify the class that transforms the password retrieved to the
      same format as provided by the user.</p><p>The default class expects the password in clear text. Custom
      classes must implement the
      <code class="literal">JDBCPasswordSyntaxTransform</code> interface.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordSyntaxTransformPlugin</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthJDBCAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.12.&nbsp;Hints For the LDAP Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="ldap-module-conf-hints"></a>2.2.12.&nbsp;Hints For the LDAP Authentication Module</h3></div></div></div><p>OpenAM connects to directory servers using Lightweight Directory
   Access Protocol (LDAP). To build an easy-to-manage, high performance, pure
   Java, open source directory service, try
   <a class="link" href="http://opendj.org" target="_top">OpenDJ</a> directory services.</p><a class="indexterm" name="d16811e3622"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthLDAPService</code></p><div class="variablelist"><dl><dt><span class="term">Primary LDAP Server, </span><span class="term">Secondary LDAP Server</span></dt><dd><p>Directory servers generally use built-in data replication for high
      availability. Thus a directory service likely consists of a pool of
      replicas to which OpenAM can connect to retrieve and update directory
      data. You set up primary and secondary servers in case a replica is down
      due to maintenance or to a problem with a particular server.</p><p>Set one primary and optionally one secondary directory server for
      each OpenAM server. For the current OpenAM server, specify each directory
      server as a
      <code class="literal"><em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>
      combination. For other OpenAM servers in the deployment, you can specify
      each directory server as
<code class="literal"><em class="replaceable"><code>server-name</code></em>|<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>,
      where <em class="replaceable"><code>server-name</code></em> is the FQDN portion of the
      OpenAM server from the list under Configuration &gt; Servers and
      Sites, and <em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>
      identifies the directory server.</p><p>For example, if the <em class="replaceable"><code>server-name</code></em>
      that is listed is <code class="literal">http://openam.example.com:8080/openam</code>
      and the directory server is accessible at <code class="literal">opendj.example.com:1389</code>,
      you would enter <code class="literal">openam.example.com|opendj.example.com:1389</code>.</p><p>When authenticating users from a directory service that is remote
      from OpenAM, set both the primary and secondary server values.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP Server. Make sure that OpenAM
      can trust the servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      primary is <code class="literal">iplanet-am-auth-ldap-server</code>,
      secondary is <code class="literal">iplanet-am-auth-ldap-server2</code>, and
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better search
      performance. When configuring the module for a particular part of the
      organization, you can perhaps start searches from a specific
      organizational unit such as
      <code class="literal">ou=sales,dc=example,dc=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in the directory, for example to
      manage account lockout, or if the directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the directory.</p><p>The default is <code class="literal">cn=Directory Manager</code>. Make sure
      that password is correct before you logout. If it is incorrect, you will
      be locked out. If this should occur, you can login with the super user DN,
      which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> you set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code>,
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes Used to Retrieve User Profile, </span><span class="term">Attributes Used to Search for a User to be Authenticated, </span><span class="term">User Search Filter, </span><span class="term">Search Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">ou=people,dc=example,dc=com</code> with a filter
      <code class="literal">"(mail=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">mail=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>Should you require a more complex filter for performance, you
      add that to the User Search Filter text box. For example, if you search
      on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the
      resulting search filter
      <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)(objectClass=inetOrgPerson))</code>,
      where <em class="replaceable"><code>address</code></em> is the mail address provided
      by the user.</p><p>Scope OBJECT means search only the entry specified as the DN to
      Start User Search, whereas ONELEVEL means search only the entries
      that are directly children of that object. SUBTREE means search the
      entry specified and every entry under it.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">SSL/TLS Access to LDAP Server</span></dt><dd><p>If you enable SSL/TLS, OpenAM must be able to trust LDAP certificates, either because the certificates were
      signed by a CA whose certificate is already included in the trust store
      used by the container where OpenAM runs, or because you imported the
      certificates into the trust store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">Return User DN to Authenticate</span></dt><dd><p>When enabled, and OpenAM uses the directory service as the user
      store, the module returns the DN rather than the rather than the User ID,
      so the bind for authentication can be completed without a search to
      retrieve the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>This list lets you map (external) attribute names from Active
      Directory to (internal) attribute names used by OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">Minimum Password Length</span></dt><dd><p>Specify the minimum acceptable password length.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-min-password-length</code></p></dd><dt><span class="term">LDAP Behera Password Policy Support</span></dt><dd><p>When enabled, support interoperability with servers that implement
      the Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-behera-ldap-password-policy-09" target="_top">Password Policy for LDAP Directories</a>.</p><p>Support for this Internet-Draft is limited to the LDAP
      authentication module. Other components of OpenAM, such as the password
      change functionality in the <code class="literal">/idm/EndUser</code> page, do
      not support the Internet-Draft. In general, outside of the LDAP
      authentication module, OpenAM binds to the directory server as an
      administrator, such as Directory Manager. When OpenAM binds to the
      directory server as an administrator rather than as an end user, many
      features of the Internet-Draft password policies do not apply.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-behera-password-policy-enabled</code></p></dd><dt><span class="term">Trust All Server Certificates</span></dt><dd><p>When enabled, blindly trust server certificates, including
      self-signed test certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-trust-all</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Interval</span></dt><dd><p>Specifies how often OpenAM should send a heartbeat request to the
      directory server to ensure that the connection does not remain idle. Some
      network administrators configure firewalls and load balancers to drop
      connections that are idle for too long. You can turn this off by setting
      the value to 0 or to a negative number. To set the units for the interval
      use LDAP Connection Heartbeat Time Unit.</p><p>Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Time Unit</span></dt><dd><p>Specifies the time unit corresponding to LDAP Connection Heartbeat
      Interval.</p><p>Default: minute</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-ldap-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.13.&nbsp;Hints For the Membership Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="membership-module-conf-hints"></a>2.2.13.&nbsp;Hints For the Membership Authentication Module</h3></div></div></div><p>The Membership module permits self-registration for new users. You
   can then have OpenAM create new user profiles in the identity
   repository.</p><a class="indexterm" name="d16811e3941"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthMembershipService</code></p><div class="variablelist"><dl><dt><span class="term">Minimum Password Length</span></dt><dd><p>Specify the minimum acceptable number of characters in the password
      provided during self-registration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-min-password-length</code></p></dd><dt><span class="term">Default User Roles</span></dt><dd><p>Specifies the Distinguished Name (DN) of a role to be assigned to
      a new user whose profile is created. There are no default values. The
      role specified must be within the realm for which the authentication
      process is configured.</p><p>This role can be either an OpenAM or Sun DSEE role, but it cannot
      be a filtered role. If you wish to automatically assign specific services
      to the user, you have to configure the Required Services attribute in
      the User Profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-default-roles</code></p></dd><dt><span class="term">User Status After Registration</span></dt><dd><p>If you choose Inactive, then the new user has no access to services
      until an administrator activates the account.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-default-user-status</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-membership-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.14.&nbsp;Hints For the MSISDN Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="msisdn-module-conf-hints"></a>2.2.14.&nbsp;Hints For the MSISDN Authentication Module</h3></div></div></div><p>The Mobile Station Integrated Services Digital Network (MSISDN)
   authentication module enables non-interactive authentication using a mobile
   subscriber ISDN associated with a terminal such as a mobile phone.
   The module checks the subscriber ISDN against the value found on a user's
   entry in an LDAP directory service.</p><a class="indexterm" name="d16811e4008"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthMSISDNService</code></p><div class="variablelist"><dl><dt><span class="term">Trusted Gateway IP Address</span></dt><dd><p>Specifies a list of IP addresses of trusted clients that can access
      MSIDSN modules. Either restrict the clients allowed to access the MSISDN
      module by adding each IPv4 or IPv6 address here, or leave the list empty to allow
      all clients to access the module. If you specify the value
      <code class="literal">none</code>, no clients are allowed access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNTrustedGatewayList</code></p></dd><dt><span class="term">MSISDN Number Search Parameter Name</span></dt><dd><p>Specifies a list of parameter names that identify which parameters
      to search in the request header or cookie header for the MSISDN number.
      For example, if you define x-Cookie-Param, AM_NUMBER, and COOKIE-ID,
      the MSISDN authentication service checks those parameters for the
      MSISDN number.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNParameterNameList</code></p></dd><dt><span class="term">LDAP Server and Port</span></dt><dd><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP. Make sure that OpenAM can trust the
      servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNLdapProviderUrl</code></p></dd><dt><span class="term">LDAP Start Search DN</span></dt><dd><p>Specify the DN of the entry where the search for the user's MSISDN
      number should start.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNBaseDn</code></p></dd><dt><span class="term">Attribute To Use To Search LDAP</span></dt><dd><p>Specify the name of the attribute in the user's profile that
      contains the MSISDN number to search for the user. The default is
      <code class="literal">sunIdentityMSISDNNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserSearchAttribute</code></p></dd><dt><span class="term">LDAP Server Authentication User</span></dt><dd><p>If OpenAM must authenticate to the directory server in order to
      search, then specify the bind DN. The default is
      <code class="literal">cn=amldapuser,ou=DSAME Users,dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalUser</code></p></dd><dt><span class="term">LDAP Server Authentication Password</span></dt><dd><p>Specify the password corresponding to the bind DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalPasswd</code></p></dd><dt><span class="term">SSL/TLS for LDAP Access</span></dt><dd><p>If you choose to enable SSL or TLS, then make sure that
      OpenAM can trust the servers' certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUseSsl</code></p></dd><dt><span class="term">MSISDN Header Search Attribute</span></dt><dd><p>Specify the headers to use for searching the request for the
      MSISDN number.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cookie Header tells OpenAM to search the cookie.</p></li><li class="listitem"><p>Request Header tells OpenAM to search the request header.</p></li><li class="listitem"><p>Request Parameter tells OpenAM to search the request parameters.</p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNHeaderSearch</code></p></dd><dt><span class="term">LDAP Attribute Used to Retrieve User Profile</span></dt><dd><p>Specify the LDAP attribute that is used during a search to return
      the user profile for MSISDN authentication service. The default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserNamingAttribute</code></p></dd><dt><span class="term">Return User DN to DataStore</span></dt><dd><p>Enable this option only when the OpenAM directory is the same as
      the directory configured for MSISDN searches. When enabled, this option
      allows the authentication module to return the DN instead of the User ID.
      OpenAM thus does not need to perform an additional search with the user
      ID to find the user's entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNReturnUserDN</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthMSISDNAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.15.&nbsp;Hints For the OATH Module"><div class="titlepage"><div><div><h3 class="title"><a name="OATH-module-conf-hints"></a>2.2.15.&nbsp;Hints For the OATH Module</h3></div></div></div><p>The Open Authentication (OATH) module provides a more secure method for users to 
      access their accounts with the help of a device, such as their mobile phone or 
      Yubikey. Users can log into OpenAM and update their information more securely from
      a one-time password (OTP) displayed on their device. The OATH module includes the
      <a class="link" href="http://www.openauthentication.org/about/" target="_blank">OATH standard protocols</a> (<a class="link" href="http://tools.ietf.org/html/rfc4226" target="_blank">RFC 4226</a> and 
      <a class="link" href="http://tools.ietf.org/html/rfc6238" target="_blank">
      RFC 6238</a>). The OATH module has several enhancements to the
      HMAC One-Time Password (HOTP) Authentication Module, but does not replace the original
      module for those already using HOTP prior to the 10.1.0 release. The OATH module includes 
      HOTP authentication and Time-Based One-Time Password (TOTP) authentication. Both types
      of authentication require an OATH compliant device that can provide the OTP.</p><a class="indexterm" name="d16811e4200"></a><p> HOTP authentication generates the OTP every time the user requests a new OTP
      on their device. The device tracks the number of times the user requests a new OTP, called
      the counter. The OTP displays for a period of time you designate in the setup, so the 
      user may be further in the counter on their device than on their account. OpenAM will resynchronize
      the counter when the user finally logs in. To accommodate this, you set the number of 
      passwords a user can generate before their device cannot be resynchronized. For example, if 
      you set the number of HOTP Window Size to 50 and someone presses the button 30 on the
      user's device to generate a new OTP, the counter in OpenAM will review the OTPs until
      it reaches the OTP entered by the user. If someone presses the button 51 times,
      you will need to reset the counter to match the number on the device's counter before the
      user can login to OpenAM. HOTP authentication does not check earlier passwords, so if the 
      user attempts to reset the counter on their device, they will not be able to login until
      you reset the counter in OpenAM to match their device.</p><p>TOTP authentication constantly generates a new OTP based on a time interval you specify.
      The device tracks the last two passwords generated and the current password. The Last Login Time
      monitors the time when a user logs in to make sure that user is not logged in several times
      within the present time period. Once a user log into OpenAM, they must wait for the time it 
      takes TOTP to generate the next two passwords and display them. This prevents others from 
      being able to access the users account using the OTP they entered. The user's account can be
      accessed again after the generation of the third new OTP is generated and displayed on their
      device. For this reason, the TOTP Time-Step Interval should not be so long as to
      lock users out, with a recommended time of 30 seconds.</p><p>An authentication chain can be created to generate an OTP from 
      either HOTP or TOTP.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthOATHService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-auth-level</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the OTP between 6 and 9 digits long. The default value is 6 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-password-length</code></p></dd><dt><span class="term">Minimum Secret Key Length</span></dt><dd><p>The minimal number of characters required to set the Secret Key.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-min-secret-key-length</code></p></dd><dt><span class="term">Secret Key Attribute Name</span></dt><dd><p>The name of the attribute where the key will be stored in the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-secret-key-attribute</code></p></dd><dt><span class="term">OATH Algorithm to Use</span></dt><dd><p>Select whether to use HOTP or TOTP. You can create an authentication chain to
      allow for a greater variety of devices. The default value is HOTP.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-algorithm</code></p></dd><dt><span class="term">HOTP Window Size</span></dt><dd><p>The number of requests that the system and the device can be off to resynchronize 
      the password. If a user passes this number of requests before logging 
      into the system, the password will not work. The default value is 100.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-hotp-window-size</code></p></dd><dt><span class="term">Counter Attribute Name</span></dt><dd><p>The name of the HOTP attribute where the counter will be stored in the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-hotp-counter-attribute</code></p></dd><dt><span class="term">Add Checksum Digit</span></dt><dd><p>Adds a checksum digit at the end of the HOTP password to verify it was entered correctly. 
      The default value is No.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-add-checksum</code></p></dd><dt><span class="term">Truncation Offset</span></dt><dd><p>Advanced feature that is device specific. Any value below 0 or above 15 will turn off 
      the functionality. The default value is -1. If not required by the device, leave at the default 
      setting.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-truncation-offset</code></p></dd><dt><span class="term">TOTP Time Step Interval</span></dt><dd><p>Defines how long the password will appear on the user's device (in seconds).
      We recommend keeping this number low, for example 30 seconds, because once a user
      logs out, they will not be able to login again until two full time cycles have passed.
      The default value is 30 seconds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-size-of-time-step</code></p></dd><dt><span class="term">TOTP Time Steps</span></dt><dd><p>The number of requests that the system and the device can be off to resynchronize 
      the password. If a user passes this number of requests before logging into the system,
      the password will not work. The default value is 2.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-steps-in-window</code></p></dd><dt><span class="term">Last Login Time Attribute</span></dt><dd><p>The name of the attribute where both HOTP and TOTP authentication will store information
      on when a person last logged in.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-last-login-time-attribute-name</code></p></dd></dl></div><p>If you plan to use Yubikey for your OATH module, you will need to take some
    time to set it up. Go to the <a class="link" href="http://www.yubico.com/products/services-software/personalization-tools/use/" target="_blank">
    YubiKey website</a> to configure your YubiKey device. If you do not have a
    YubiKey device, you can purchase them from this page as well.</p><p>Select the appropriate instructions, keeping in mind that the cross-platform
    personalization tool is recommended unless you have specific need for one of the
    other types. You have the greatest selection of platforms for this choice. Each 
    device will need to be setup before use.</p></div><div class="section" title="2.2.16.&nbsp;Hints For the OAuth 2.0 Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="oauth2-module-conf-hints"></a>2.2.16.&nbsp;Hints For the OAuth 2.0 Authentication Module</h3></div></div></div><p>The OAuth 2.0 authentication module lets OpenAM authenticate clients
   of OAuth resource servers. References in this section are to RFC 6749, <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank">The OAuth
   2.0 Authorization Framework</a>.</p><a class="indexterm" name="d16811e4377"></a><a class="indexterm" name="d16811e4382"></a><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>The default settings are for Facebook.</p></div><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthOAuthService</code></p><div class="variablelist"><dl><dt><span class="term">Client ID</span></dt><dd><p>OAuth <code class="literal">client_id</code> as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.2" target="_blank">section 2.2 of RFC 6749</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-id</code></p></dd><dt><span class="term">Client Secret</span></dt><dd><p>OAuth <code class="literal">client_secret</code> as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.3" target="_blank">section 2.3 of RFC 6749</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-secret</code></p></dd><dt><span class="term">Authentication Endpoint URL</span></dt><dd><p>URL to the end point handling OAuth authentication as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.1" target="_blank">section 3.1 of RFC 6749</a>. The default value is
      <code class="literal">https://www.facebook.com/dialog/oauth</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-service</code></p></dd><dt><span class="term">Access Token Endpoint URL</span></dt><dd><p>URL to the end point handling access tokens as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.2" target="_blank">section 3.2 of RFC 6749</a>. The default value is
      <code class="literal">https://graph.facebook.com/oauth/access_token</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-token-service</code></p></dd><dt><span class="term">User Profile Service URL</span></dt><dd><p>User profile URL that returns profile information in JSON
      format. The default value is
      <code class="literal">https://graph.facebook.com/me</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-user-profile-service</code></p></dd><dt><span class="term">Scope</span></dt><dd><p>Comma separated list of user profile attributes that the application
      requires. The default value is <code class="literal">email,read_stream</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-scope</code></p></dd><dt><span class="term">Proxy URL</span></dt><dd><p>URL to the <code class="filename">/oauth2c/OAuthProxy.jsp</code> file,
      part of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-sso-proxy-url</code></p></dd><dt><span class="term">Account Mapper</span></dt><dd><p>Class implementing account mapping. The default value is
      <code class="literal">org.forgerock.openam.authentication.modules.oauth2.DefaultAccountMapper</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper</code></p></dd><dt><span class="term">Account Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes used to find the
      local profile of the authenticated user, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.
      Default values <code class="literal">email=mail</code> and <code class="literal"> id=facebook-id</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper-configuration</code></p></dd><dt><span class="term">Attribute Mapper</span></dt><dd><p>Class implementing attribute mapping. Default:
      <code class="literal">org.forgerock.openam.authentication.modules.oauth2.DefaultAttributeMapper</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper</code></p></dd><dt><span class="term">Attribute Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes to local user profile
      attributes, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper-configuration</code></p></dd><dt><span class="term">Save attributes in the session</span></dt><dd><p>When enabled, add the mapped attributes to the session saved. The
      default mode is <code class="literal">Enabled</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-save-attributes-to-session-flag</code></p></dd><dt><span class="term">Email attribute in OAuth2 Response</span></dt><dd><p>Specifies the attribute identifying email address in the response
      from the profile service in the OAuth provider. This setting is used to
      send an email address with an activation code for accounts created
      dynamically.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-mail-attribute</code></p></dd><dt><span class="term">Create account if it does not exist</span></dt><dd><p>When enabled, if the user profile does not exist, optionally
      retrieve a password and activation code from the user, and then create
      the profile. The default mode is <code class="literal">Enabled</code>.</p><p>When the OAuth 2.0 client is configured to create new accounts,
      the SMTP settings must also be valid. As part of account creation,
      the OAuth 2.0 client authentication module sends the resource owner
      an email with an account activation code. To send the mail, OpenAM
      uses the SMTP settings you provide here in the OAuth 2.0 client
      configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-createaccount-flag</code></p></dd><dt><span class="term">Prompt for password setting and activation code</span></dt><dd><p>When enabled, the user sets a password, receives an activation code
      by email. The user must correctly set both in order for the account to
      be created.  The default mode is <code class="literal">Enabled</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-prompt-password-flag</code></p></dd><dt><span class="term">Map to anonymous user</span></dt><dd><p>When enabled, map the OAuth authenticated user to the anonymous
      user you specify. No account is created, even if Create account if it
      does not exist is enabled.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-map-to-anonymous-flag</code></p></dd><dt><span class="term">Anonymous User</span></dt><dd><p>Specifies an anonymous user that exists in the current realm. The
      default is <code class="literal">anonymous</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-anonymous-user</code></p></dd><dt><span class="term">OAuth 2.0 Provider logout service</span></dt><dd><p>Specifies the optional URL of the OAuth Provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-service-url</code></p></dd><dt><span class="term">Logout options</span></dt><dd><p>Specifies whether not to log the user out without prompting from
      the OAuth Provider on logout, to log the user out without prompting, or
      to prompt the user regarding whether to logout from the OAuth
      provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-behaviour</code></p></dd><dt><span class="term">Mail Server Gateway implementation class</span></dt><dd><p>Class to interact with the mail server. Default:
      <code class="literal">org.forgerock. openam.authentication.modules.oauth2.DefaultEmailGatewayImpl</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-email-gwy-impl</code></p></dd><dt><span class="term">SMTP host</span></dt><dd><p>Host name of the mail server. The default is
      <code class="literal">localhost</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-hostname</code></p></dd><dt><span class="term">SMTP port</span></dt><dd><p>SMTP port number for the mail server. The default value is
      <code class="literal">25</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-port</code></p></dd><dt><span class="term">SMTP User Name</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the user name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-username</code></p></dd><dt><span class="term">SMTP User Password</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-password</code></p></dd><dt><span class="term">SMTP SSL Enabled</span></dt><dd><p>When enabled, connect to the mail server over SSL. OpenAM must be
      able to trust the SMTP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-ssl_enabled</code></p></dd><dt><span class="term">SMTP From address</span></dt><dd><p>Specifies the message sender address, such as
      <code class="literal">no-reply@example.com</code>. The default value is
      <code class="literal">info@forgerock.com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-email-from</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-level</code></p></dd></dl></div><p>The following tables show endpoint URLs for OpenAM when <a href="../admin-guide/index.html#chap-oauth2" class="link">configured as an
    OAuth 2.0 provider</a>, and also URLs for large OAuth 2.0 providers.
    The default endpoints are for Facebook as the OAuth 2.0 provider.</p><p>In addition to the endpoint URLs you can set other fields, like scope
    and attribute mapping, depending on the provider you use.</p><div class="table"><a name="oauth2-openam"></a><div class="table-title">Table&nbsp;2.1.&nbsp;Endpoint URLs for OpenAM</div><div class="table-contents"><table summary="Endpoint URLs for OpenAM" width="100%" border="0"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>OpenAM Field</th><th>Details</th></tr></thead><tbody><tr><td>Authentication Endpoint URL</td><td>
         <p><code class="literal">/oauth2/authorize</code> under the deployment
          URL.<sup>[<a name="oauth2-realms-footnote" href="#ftn.oauth2-realms-footnote" class="footnote">a</a>]</sup>
         </p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize</code>.</p>
       </td></tr><tr><td>Access Token Endpoint URL</td><td>
         <p><code class="literal">/oauth2/access_token</code> under the deployment
          URL.<sup>[<a href="#ftn.oauth2-realms-footnote" class="footnoteref">a</a>]</sup></p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/access_token</code>.</p></td></tr><tr><td>User Profile Service URL</td><td>
         <p><code class="literal">/oauth2/tokeninfo</code> under the deployment URL.</p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/tokeninfo</code>.</p></td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div class="footnote"><p><sup>[<a id="ftn.oauth2-realms-footnote" href="#oauth2-realms-footnote" class="para">a</a>] </sup>This OpenAM endpoint can take additional parameters. In
           particular you must specify the realm if the OpenAM OAuth 2.0
           provider is configured for a subrealm rather than / (Top-Level
           Realm).</p><p>For example, if the OAuth 2.0 provider is configured for the
           realm <code class="literal">/customers</code>, then the authentication endpoint
           URL is as follows:
           <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize?realm=/customers</code></p><p>The <code class="literal">/oauth2/authorize</code> endpoint can also take
           <code class="literal">module</code> and <code class="literal">service</code> parameters.
           Use either as described in <a href="../admin-guide/index.html#authn-from-browser" class="link"><em class="citetitle">Authenticating To OpenAM</em></a>, where
           <code class="literal">module</code> specifies the authentication module
           instance to use or <code class="literal">service</code> specifies the
           authentication chain to use when authenticating the resource
           owner.</p></div></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="oauth2-facebook"></a><div class="table-title">Table&nbsp;2.2.&nbsp;Endpoint URLs for Facebook</div><div class="table-contents"><table summary="Endpoint URLs for Facebook" width="100%" border="0"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>OpenAM Field</th><th>Details</th></tr></thead><tbody><tr><td>Authentication Endpoint URL</td><td>https://www.facebook.com/dialog/oauth</td></tr><tr><td>Access Token Endpoint URL</td><td>https://graph.facebook.com/oauth/access_token</td></tr><tr><td>User Profile Service URL</td><td>https://graph.facebook.com/me</td></tr><tr><td>OAuth 2.0 Provider logout service</td><td>http://www.facebook.com/logout.php</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="oauth2-google"></a><div class="table-title">Table&nbsp;2.3.&nbsp;Endpoint URLs for Google</div><div class="table-contents"><table summary="Endpoint URLs for Google" width="100%" border="0"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>OpenAM Field</th><th>Details</th></tr></thead><tbody><tr><td>Authentication Endpoint URL</td><td>https://accounts.google.com/o/oauth2/auth</td></tr><tr><td>Access Token Endpoint URL</td><td>https://accounts.google.com/o/oauth2/token</td></tr><tr><td>User Profile Service URL</td><td>https://www.googleapis.com/oauth2/v1/userinfo</td></tr><tr><td>OAuth 2.0 Provider logout service</td><td>https://mail.google.com/mail/?logout</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="oauth2-msn"></a><div class="table-title">Table&nbsp;2.4.&nbsp;Endpoint URLs for MSN</div><div class="table-contents"><table summary="Endpoint URLs for MSN" width="100%" border="0"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>OpenAM Field</th><th>Details</th></tr></thead><tbody><tr><td>Authentication Endpoint URL</td><td>https://oauth.live.com/authorize</td></tr><tr><td>Access Token Endpoint URL</td><td>https://oauth.live.com/token</td></tr><tr><td>User Profile Service URL</td><td>https://apis.live.net/v5.0/me</td></tr><tr><td>OAuth 2.0 Provider logout service</td><td>http://oauth.live.com/logout</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="2.2.17.&nbsp;Hints for the Persistent Cookie Module"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-cookie"></a>2.2.17.&nbsp;Hints for the Persistent Cookie Module</h3></div></div></div><p>The Persistent Cookie module supports configuration of cookie lifetimes, based
      on requests and a maximum time. It is the preferred method for creating a persistent cookie.
      If you choose this method, be aware that it does not interact with the persistent cookie
      options associated with the Core Authentication module.</p><a class="indexterm" name="d16811e5001"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
      <code class="literal">iPlanetAMAuthPersistentCookieService</code></p><p>To configure the Persistent Cookie Module globally in the console, navigate to
      Configuration &gt; Authentication &gt; Persistent Cookie. In the window that appears
      you should see the following attributes:</p><div class="variablelist"><dl><dt><span class="term">Idle Timeout</span></dt><dd><p>Specify the maximum idle time between requests, in hours. If
                  that time is exceeded, the cookie is no longer valid.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                  <code class="literal">openam-auth-persistent-cookie-idle-time</code></p></dd><dt><span class="term">Max Life</span></dt><dd><p>Specify the maximum life of the cookie in hours.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                  <code class="literal">openam-auth-persistent-cookie-max-life</code></p></dd></dl></div><p>The Persistent Cookie module belongs with a second module in an authentication chain. To see how
      this works, navigate to Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; New.
      Enter a name for the chain and add modules as shown in the figure. The following example shows how a
      Persistent Cookie module is sufficient; if that cookie does not yet exist, authentication in this case
      relies on a data store module such as LDAP.</p><div class="mediaobject" title="Including the Persistent Cookie module in an authentication chain"><a name="figure-persistent-cookie"></a><img src="images/persistent-cookie-mod.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-persistent-cookie.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-persistent-cookie.html" target="longdesc">D</a>]</span></div></div><p>Scroll down in the properties page for the chain. You should set the
      <code class="literal">PersistentCookieAuthModule</code> as shown in the following figure:</p><div class="mediaobject" title="Including the Persistent Cookie attribute in the post processing class"><a name="figure-persistent-cookie-class"></a><img src="images/persistent-cookie-class.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-persistent-cookie-class.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-persistent-cookie-class.html" target="longdesc">D</a>]</span></div></div><p>You should now be able to authenticate automatically, as long as the cookie exists
      for the associated domain.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Unlike the legacy Core Authentication module, the Persistent Cookie module does not
      support the iPSPCookie option described in <a class="xref" href="#authn-from-browser" title="2.5.&nbsp;Authenticating To OpenAM">Section&nbsp;2.5, &#8220;Authenticating To OpenAM&#8221;</a></p></div></div><div class="section" title="2.2.18.&nbsp;Hints For the RADIUS Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="radius-module-conf-hints"></a>2.2.18.&nbsp;Hints For the RADIUS Authentication Module</h3></div></div></div><p>The Remote Authentication Dial-In User Service (RADIUS) module lets
   OpenAM authenticate users against RADIUS servers.</p><a class="indexterm" name="d16811e5076"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthRadiusService</code></p><div class="variablelist"><dl><dt><span class="term">Primary Radius Servers, Secondary Radius Servers</span></dt><dd><p>Specify the IP address or fully qualified domain name of the
      primary RADIUS server. The default is <code class="literal">127.0.0.1</code>
      (localhost loopback).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">primary is iplanet-am-auth-radius-server1</code>;
      secondary is <code class="literal">iplanet-am-auth-radius-server2</code></p></dd><dt><span class="term">Shared Secret</span></dt><dd><p>Specify the shared secret for RADIUS authentication. The shared
      secret should be as secure as a well-chosen password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-secret</code></p></dd><dt><span class="term">Port Number</span></dt><dd><p>Specify the RADIUS server port. Default is 1645.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-server-port</code></p></dd><dt><span class="term">Timeout</span></dt><dd><p>Specify how many seconds to wait for the RADIUS server to respond.
      The default value is 3 seconds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-timeout</code></p></dd><dt><span class="term">Health check interval</span></dt><dd><p>Used for failover. Specify how often OpenAM performs a health check
      on a previously unavailable RADIUS server by sending an invalid
      authentication request. Default: 5 minutes</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-radius-healthcheck-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-radius-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.19.&nbsp;Hints For the SAE Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="sae-module-conf-hints"></a>2.2.19.&nbsp;Hints For the SAE Authentication Module</h3></div></div></div><p>The Secure Attribute Exchange (SAE) module lets OpenAM authenticate
   a user who has already authenticated with an entity that can vouch for
   the user to OpenAM, so that OpenAM creates a session for the user.
   This module is useful in virtual federation, where an existing entity
   instructs the local OpenAM instance to use federation protocols to transfer
   authentication and attribute information to a partner application.</p><a class="indexterm" name="d16811e5171"></a><p><span class="command"><strong>ssoadm</strong></span> attribute:
   <code class="literal">sunAMAuthSAEService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthSAEAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.20.&nbsp;Hints For the SecurID Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="securid-module-conf-hints"></a>2.2.20.&nbsp;Hints For the SecurID Authentication Module</h3></div></div></div><p>The SecurID module lets OpenAM authenticate users with RSA
   Authentication Manager software and RSA SecurID authenticators.</p><a class="indexterm" name="d16811e5200"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthSecurIDService</code></p><div class="variablelist"><dl><dt><span class="term">ACE/Server Configuration Path</span></dt><dd><p>Specify the directory in which the SecurID ACE/Server
      <code class="filename">sdconf.rec</code> file is located, which by default is
      expected under the configuration directory for OpenAM, such as
      <code class="filename">$HOME/openam/openam/auth/ace/data</code>. The directory
      must exist before OpenAM can use SecurID authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-securid-server-config-path</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-securid-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.21.&nbsp;Hints For the Windows Desktop SSO Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="desktop-module-conf-hints"></a>2.2.21.&nbsp;Hints For the Windows Desktop SSO Authentication Module</h3></div></div></div><p>The Windows Desktop SSO module uses Kerberos authentication. The user
   presents a Kerberos token to OpenAM through the Simple and Protected
   GSS-API Negotiation Mechanism (SPNEGO) protocol. The Windows Desktop SSO
   authentication module enables desktop single sign on such that a user who
   has already authenticated with a Kerberos Key Distribution Center can
   authenticate to OpenAM without having to provide the login information
   again. Users might need to set up Integrated Windows Authentication in
   Internet Explorer to benefit from single sign on when logged on to
   a Windows desktop.</p><a class="indexterm" name="d16811e5247"></a><a class="indexterm" name="d16811e5252"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthWindowsDesktopSSOService</code></p><div class="variablelist"><dl><dt><span class="term">Service Principal</span></dt><dd><p>Specify the Kerberos principal for authentication in the following
      format.</p><pre class="literallayout">HTTP/<em class="replaceable"><code>host</code></em>.<em class="replaceable"><code>domain</code></em>@<em class="replaceable"><code>dc-domain-name</code></em></pre><p>Here, <em class="replaceable"><code>host</code></em> and
      <em class="replaceable"><code>domain</code></em> correspond to the host and domain names
      of the OpenAM instance, and <em class="replaceable"><code>dc-domain-name</code></em>
      is the domain name of the Windows Kerberos domain controller server.
      The <em class="replaceable"><code>dc-domain-name</code></em> can differ from the domain
      name for OpenAM.</p><p>You set up the account on the Windows domain controller, creating
      a computer account for OpenAM and associating the new account with a
      service provider name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-principal-name</code></p></dd><dt><span class="term">Keytab File Name</span></dt><dd><p>Specify the full path of the keytab file for the Service Principal.
      You generate the keytab file using the Windows <span class="command"><strong>ktpass</strong></span>
      utility.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-keytab-file</code></p></dd><dt><span class="term">Kerberos Realm</span></dt><dd><p>Specify the Kerberos Key Distribution Center realm. For the
      Windows Kerberos service this is the domain controller server domain
      name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kerberos-realm</code></p></dd><dt><span class="term">Kerberos Server Name</span></dt><dd><p>Specify the fully qualified domain name of the Kerberos Key
      Distribution Center server, such as that of the domain controller
      server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kdc</code></p></dd><dt><span class="term">Return Principal with Domain Name</span></dt><dd><p>When enabled, OpenAM automatically returns the Kerberos principal
      with the domain controller's domain name during authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-returnRealm</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-auth-level</code></p></dd><dt><span class="term">Search for the user in the realm</span></dt><dd><p>Validates the user against the configured data stores. If the user from the
     Kerberos token is not found, authentication will fail. If an authentication
     chain is set, the user will be able to authenticate through another module.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-windowsdesktopsso-lookupUserInRealm</code></p></dd></dl></div><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Note: For Windows 7 and later, you will need to turn off the "Enable
  Integrated Windows Authentication" option in Internet Explorer. In addition, you
  will need to add and activate the DisableNTMLPreAuth key to the Windows Registry.
  For detailed instructions, see the Microsoft KB article on when <a class="link" href="http://support.microsoft.com/kb/251404" target="_blank"><em class="citetitle">You cannot post data
  to a non-NTLM-authenticated Web site</em></a></p></div></div><div class="section" title="2.2.22.&nbsp;Hints For the Windows NT Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="winnt-module-conf-hints"></a>2.2.22.&nbsp;Hints For the Windows NT Authentication Module</h3></div></div></div><p>The Windows NT module lets OpenAM authenticate against a Microsoft
   Windows NT server.</p><p>This module requires that you install a Samba client in a 
   <code class="filename">bin</code> directory under the OpenAM configuration directory
   such as <code class="filename">$HOME/openam/openam/bin</code>.</p><a class="indexterm" name="d16811e5396"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthNTService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Domain</span></dt><dd><p>Specify the Windows domain name to which users belong.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-domain</code></p></dd><dt><span class="term">Authentication Host</span></dt><dd><p>Specify the NetBIOS name of the Windows NT host to which to
      authenticate users.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-host</code></p></dd><dt><span class="term">Samba Configuration File Name</span></dt><dd><p>Specify the full path to the Samba configuration file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-samba-config-file-name</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.23.&nbsp;Hints For the WSSAuth Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="wss-module-conf-hints"></a>2.2.23.&nbsp;Hints For the WSSAuth Authentication Module</h3></div></div></div><p>The Web Service Security (WSSAuth) module lets OpenAM validate a
   user name, password combination received as an authentication token in
   a request from a Web Service Client to a Web Service Provider.</p><a class="indexterm" name="d16811e5461"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthWSSAuthModuleService</code></p><div class="variablelist"><dl><dt><span class="term">User search attribute</span></dt><dd><p>Specify a user attribute to search for a user. Default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserSearchAttribute</code></p></dd><dt><span class="term">User realm</span></dt><dd><p>Specify the realm to which users belong. For the OpenAM Security
      Token Service, this is <code class="literal">/</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebServicesUserRealm</code></p></dd><dt><span class="term">User password attribute</span></dt><dd><p>Specify the password attribute or that of the password equivalent.
      The default is <code class="literal">userPassword</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserPasswordAttribute</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesAuthenticationLevel</code></p></dd></dl></div></div></div><div class="section" title="2.3.&nbsp;Configuring Authentication Chains"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-chains"></a>2.3.&nbsp;Configuring Authentication Chains</h2></div></div></div><a class="indexterm" name="d16811e5534"></a><p>Once you have configured authentication modules, and added the modules
  to the list of module instances, you can configure authentication chains.
  Authentication chains let you handle situations where alternative modules
  are needed, or where a single set of credentials is not sufficient.</p><div class="procedure" title="Procedure&nbsp;2.1.&nbsp;To Create an Authentication Chain"><a name="create-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.1.&nbsp;To Create an Authentication Chain</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to create the authentication chain.</p></li><li class="step" title="Step 2"><p>On the Authentication tab page for the realm, scroll to the bottom
    of the page, and click the New button in the Authentication Chaining
    table.</p></li><li class="step" title="Step 3"><p>Give the new authentication chain a name, and add instances of the
    modules to use in the chain.</p></li><li class="step" title="Step 4"><p>Assign appropriate criteria (optional, required, requisite, sufficient)
    as described above in <a class="xref" href="#what-is-authn" title="2.1.&nbsp;About Authentication in OpenAM">Section&nbsp;2.1, &#8220;About Authentication in OpenAM&#8221;</a>. You can also
    configure where OpenAM redirects the user upon successful and failed
    authentication, and plug in your post-authentication processing classes
    as necessary.</p></li><li class="step" title="Step 5"><p>If you need modules in the chain to share user credentials, then set
    options for the module.</p><div class="variablelist"><dl><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>
       to allow subsequent modules in the authentication chain to use
       the credentials, such as user name and password, captured by this
       module. (Default: <code class="literal">true</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-store-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-store-shared-state-enabled=true</code>
       to store the captured credentials. Shared state is cleared when the
       user successfully authenticates, quits the chain, or logs out.
       (Default: <code class="literal">false</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-behavior-pattern</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>
       (the default) to try authenticating with the captured password. If
       authentication fails, then OpenAM prompts the user for the credentials
       again.</p><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=useFirstPass</code>
       to authenticate with the captured password. If authentication fails,
       then the module fails.</p></dd></dl></div><p>For example, consider a chain with two modules sharing credentials
    according to the default settings. The first module in the chain has the
    option <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>, and
    criteria <code class="literal">REQUIRED</code>. The second module in the chain has
    options <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>,
    <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>,
    and criteria <code class="literal">REQUIRED</code>. A successful authentication
    sequence happens as follows. The user enters her credentials for the first
    module, successfully authenticating. The first module shares the
    credentials with the second module, successfully authenticating the user
    without prompting again for her credentials, unless the credentials for
    the first module do not successfully authenticate here to the second
    module. Just be sure to separate the options with a space and not a comma.</p></li><li class="step" title="Step 6"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;2.2.&nbsp;To Select the Default Chain"><a name="set-default-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.2.&nbsp;To Select the Default Chain</div><p>Before you select the default chain for users, and especially for
   administrators, test the authentication chain first. For example,
   <code class="literal">http://openam.example.com:8080/openam/UI/Login?service=NewChain</code>.
   If you cannot log in, then go back and fix the authentication chain's
   configuration before making it the default.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to set the default authentication chain.</p></li><li class="step" title="Step 2"><p>If necessary, on the Authentication tab page for the realm, adjust
    the drop-down lists for Organization Authentication Configuration and
    Administrator Authentication Configuration to the appropriate
    authentication chains.</p><p>The Organization Authentication Configuration serves when users
    access <code class="literal">/openam/UI/Login</code>.</p><p>The Administrator Authentication Configuration serves when users
    access <code class="literal">/openam/console</code>.</p><p>You can set these independently to separate administrative login
    from user login. For example, you can change the default user chain, but
    leave the default administrator chain as is to avoid locking yourself
    out as administrator. By default, <code class="literal">amadmin</code> can login at
    <code class="literal">/openam/UI/Login</code>. You can change that for your
    deployment.</p></li><li class="step" title="Step 3"><p>Save your work.</p></li></ol></div></div><div class="section" title="2.4.&nbsp;Post Authentication Plugins"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authn-post-auth-plugins"></a>2.4.&nbsp;Post Authentication Plugins</h2></div></div></div><a class="indexterm" name="d16811e5662"></a><p>Post authentication plugins include custom processing at the end of the
  authentication process, immediately before the subject is authenticated.
  Common uses of post authentication plugins include setting cookies and
  session variables. Post authentication plugins are often used in conjunction
  with policy agents. The post authentication plugin sets custom session
  properties, and then the policy agent injects the custom properties into the
  request header to the protected application.</p><p>In the OpenAM console, you add post authentication plugins to an
  authentication chain. Navigate to Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Authentication &gt; Authentication Chaining &gt;
  <em class="replaceable"><code>Auth Chain Name</code></em>. Scroll down to the Post Authentication
  Processing Class list.</p><div class="variablelist" title="Standard Post Authentication Plugins"><div class="variablelist-title">Standard Post Authentication Plugins</div><p>OpenAM provides some post authentication plugins as part of the
   standard product delivery.</p><dl><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.modules.adaptive.Adaptive</code></span></dt><dd><p>The adaptive authentication plugin serves to save cookies and profile
     attributes after successful authentication.</p><p>Add it to your authentication chains that use the adaptive
     authentication module configured to save cookies and profile
     attributes.</p></dd><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.modules.oauth2.OAuth2PostAuthnPlugin</code></span></dt><dd><p>The OAuth 2.0 post authentication plugin builds a global logout URL
     used by <code class="filename">/oauth2c/OAuthLogout.jsp</code> after successful
     OAuth 2.0 client authentication. This logs the resource owner out
     with the OAuth 2.0 provider when logging out of OpenAM.</p><p>Before using this plugin, configure the OAuth 2.0 authentication
     module with the correct OAuth 2.0 Provider logout service URL, and set
     the Logout options to Log out or Prompt. This plugin cannot succeed unless
     those parameters are correctly set.</p><p>Sometimes OAuth 2.0 providers change their endpoints, including
     their logout URLs. When using a provider like Facebook, Google, or MSN
     make sure you are aware when they change their endpoint locations so that
     you can change your client configuration accordingly.</p></dd><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.plugins.AccountExpirePlugin</code></span></dt><dd><p>The account expiration post authentication plugin sets an account
     expiration date after successful authentication. OpenAM uses this to
     prevent expired accounts from being used to authenticate.</p><p>The default of 30 days can be changed using the advanced OpenAM
     server property,
     <code class="literal">org.forgerock.openam.authentication.accountExpire.days</code>.</p></dd></dl></div><p>If necessary, you can also write your own custom post authentication
  plugin as described in the <em class="citetitle">Developer's Guide</em> chapter
  on <a href="../dev-guide/index.html#chap-post-auth" class="link"><em class="citetitle">Creating a Post
  Authentication Plugin</em></a>.</p></div><div class="section" title="2.5.&nbsp;Authenticating To OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authn-from-browser"></a>2.5.&nbsp;Authenticating To OpenAM</h2></div></div></div><p>This section explains how to connect to OpenAM for user authentication
  by adding parameters to the login URL when testing your configuration.</p><p>The base URL to authenticate to OpenAM points to
  <code class="literal">/UI/Login</code> under the deployment URL, such as
  <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>.
  <sup>[<a name="d16811e5742" href="#ftn.d16811e5742" class="footnote">4</a>]</sup> You can, however, specify parameters in the query string
  of the URL to request a specific authentication configuration. For example,
  <code class="literal">http://openam.example.com:8080/openam/UI/Login?module=LDAP</code>
  requests that OpenAM use the LDAP authentication module.</p><div class="variablelist"><p>OpenAM accepts the following parameters in the query string. With
   the exception of <code class="literal">IDToken</code> parameters, use no more than
   one occurrence of each.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>The way you enter parameters depends on whether you are using the
   classic UI or the XUI. For example, if you want to request that OpenAM end the
   user's current session and start a new session in the classic UI, you might enter
   a URL similar to: <code class="literal">http://openam.example.com:8080/openam/UI/Login?locale=fr</code>.
   Alternatively, for the JavaScript-based XUI, the corresponding URL would be subtly different:
   <code class="literal">http://openam.example.com:8080/openam/XUI/#login/&amp;arg=newsession</code>.
   </p></div><dl><dt><span class="term">arg=newsession</span></dt><dd><p>Request that OpenAM end the user's current session and start a
     new session.</p></dd><dt><span class="term">authlevel</span></dt><dd><p>Request that OpenAM authenticate the user using a module with at
     least the specified authentication level that you have configured.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">module</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">ForceAuth</span></dt><dd><p>If <code class="literal">ForceAuth=true</code>, request that OpenAM force the
     user to authenticate even if she already has a valid session. On
     successful authentication, OpenAM updates the session token.</p></dd><dt><span class="term">goto</span></dt><dd><p>On successful authentication, or successful logout, request that
     OpenAM redirect the user to the specified location. Values must be
     URL encoded.</p></dd><dt><span class="term">gotoOnFail</span></dt><dd><p>On authentication failure, request that OpenAM redirect the user to
     the specified location. Values must be URL encoded.</p></dd><dt><span class="term">IDToken1, IDToken2, ..., IDTokenN</span></dt><dd><p>Pass the specified credentials as <code class="literal">IDToken</code>
     parameters in the URL. The <code class="literal">IDToken</code> credentials map
     to the fields in the login page for the authentication module, such as
     <code class="literal">IDToken1</code> as user ID and <code class="literal">IDToken2</code>
     as password for basic user name, password authentication. The order
     depends on the callbacks in login page for the module;
     <code class="literal">IDTokenN</code> represents the N<sup>th</sup>
     callback of the login page.</p></dd><dt><span class="term">iPSPCookie=yes</span></dt><dd><p>Applicable only if you configure persistent cookies based on
     <a class="xref" href="#auth-core-persistent-cookie" title="2.2.5.3.&nbsp;Core - Persistent Cookie (Legacy)">Section&nbsp;2.2.5.3, &#8220;Core - Persistent Cookie (Legacy)&#8221;</a></p><p>Request that OpenAM return a persistent cookie that remains in the
     browser after the browser is closed, allowing the user to login again
     without being prompted for credentials. This only works if you have
     configured persistent cookie mode for the realm where the user logs
     in.</p><p>OpenAM sets an <code class="literal">DProPCookie</code> that persists until
     expiry. The following screen shot shows an example.</p><div class="mediaobject" title="DProPCookie shown in the browser"><a name="figure-persistent-dpropcookie"></a><img src="images/persistent-dpropcookie.png"></div><p>An alternative persistent cookie mechanism extends the lifetime of
     the normal <code class="literal">iPlanetDirectoryPro</code> using the advanced
     server settings, <code class="literal">openam.session.persist_am_cookie</code>
     or <code class="literal">openam.session.allow_persist_am_cookie</code>, and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code>.</p><p>To set the mechanism globally for the server, browse in the OpenAM
     console to Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
     Name</code></em> &gt; Advanced, and then set
     <code class="literal">openam.session.persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds.</p><p>To allow users to use this mechanism on a per-session basis,
     browse in the OpenAM console to Configuration &gt; Servers and
     Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; Advanced, and then
     set <code class="literal">openam.session.allow_persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds. (If the OpenAM .war deployed does not include the console, set
     these properties in the .properties configuration file.) Also configure
     the session properties either globally under Configuration &gt; Global
     &gt; Session &gt; Dynamic Attributes, or per realm under Access Control
     &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Services &gt; Session.
     Then, to request the cookie, use
     <code class="literal">openam.session.persist_am_cookie=Yes</code> as one of the
     query string parameters in the login URL.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Neither the XUI nor the Persistent Cookie
     module supports the deprecated <code class="literal">iPSPCookie</code>.</p></div></dd><dt><span class="term">locale</span></dt><dd><p>Request that OpenAM display the user interface in the specified,
     supported locale. Locale can also be set in the user's profile, in
     the HTTP header from her browser, configured in OpenAM, and so on.</p></dd><dt><span class="term">module</span></dt><dd><p>Request that OpenAM use the authentication module instance as
     configured for the realm where the user is authenticating.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">realm</span></dt><dd><p>Request that OpenAM authenticate the user to the specified realm.</p></dd><dt><span class="term">service</span></dt><dd><p>Request that OpenAM authenticate the user with the specified
     authentication chain.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">user</span></dt><dd><p>Request that the user, specified by her OpenAM universal ID,
     authenticate according to the chain specified in her profile.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">service</code>.</p></dd></dl></div></div><div class="section" title="2.6.&nbsp;Configuring Account Lockout"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-account-lockout"></a>2.6.&nbsp;Configuring Account Lockout</h2></div></div></div><a class="indexterm" name="d16811e5975"></a><div class="itemizedlist"><p>OpenAM supports two different approaches to <em class="firstterm">account
   lockout</em>, where OpenAM locks an account after repeated
   authentication failures. Lockout works with modules for which users
   can enter a password incorrectly.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Memory lockout locks the user account, keeping track of the locked
    state only in memory, and then unlocking the account after a specified
    delay. Memory lockout is also released when OpenAM restarts.</p></li><li class="listitem"><p>Persistent (physical) lockout sets the user account status to
    <code class="literal">inactive</code> in the user profile. For persistent lockout,
    OpenAM tracks failed authentication attempts by writing to the user
    repository.</p><p>Persistent account lockout works independently of account lockout
    mechanisms in the underlying directory server that serves as the user
    data store.</p></li></ul></div><div class="itemizedlist"><p>You configure account lockout by editing settings for the <a href="../admin-guide/index.html#core-module-conf-hints" class="link">core authentication
   module</a>. Access the settings in OpenAM console under Access Control
   &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; All
   Core Settings..., and then scroll down to the Account Lockout section.
   The inline help explains the settings in detail.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Enable lockout by checking Login Failure Lockout Mode, setting
    the number of attempts, and setting the lockout interval and
    duration.</p><p>You can also opt to warn users after several consecutive failures,
    or to multiply the lockout duration on each successive lockout.</p></li><li class="listitem"><p>You can set up email notification upon lockout to an administrator
    if OpenAM is configured to send mail. (Configuration &gt; Servers and Sites &gt;
    Default Server Settings &gt; General &gt; Mail Server.)</p></li><li class="listitem"><p>For persistent lockout, OpenAM sets the value of the user's
    <code class="literal">inetuserstatus</code> profile attribute to
    <code class="literal">inactive</code>. You can also specify another attribute to
    update on lockout. You can further set a non-default attribute on which
    to store the number of failed authentication attempts. When you do store
    the number of failed attempts in the data store, other OpenAM servers
    accessing the user data store can also see the number.</p></li></ul></div><p>If you need to unlock a user's account, find the user under Access
  Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Subjects &gt; User,
  set the user's User Status to Active, and click Save.</p></div><div class="section" title="2.7.&nbsp;Configuring Session Quotas"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-session-quotas"></a>2.7.&nbsp;Configuring Session Quotas</h2></div></div></div><a class="indexterm" name="d16811e6029"></a><p>OpenAM lets you limit the number of active sessions for a user by
  setting session quotas. You also configure session quota exhaustion actions
  so that when a user goes beyond the session quota, OpenAM takes the
  appropriate action.</p><div class="important" title="Important" style="font-style: italic;"><h3 class="title">Important</h3><p>To enforce session quotas across multiple servers in a site, configure
   session failover as described in the <em class="citetitle">Installation Guide</em>
   chapter, <a href="../install-guide/index.html#chap-session-failover" class="link"><em class="citetitle">Setting Up OpenAM
   Session Failover</em></a>.</p></div><div class="procedure" title="Procedure&nbsp;2.3.&nbsp;To Configure Session Quotas &amp; Exhaustion Actions"><a name="session-quotas-and-exhaustion-actions"></a><div class="procedure-title">Procedure&nbsp;2.3.&nbsp;To Configure Session Quotas &amp; Exhaustion Actions</div><p>The session quota applies to all sessions opened for the same
  user (as represented by the user's universal identifier).</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Log in to OpenAM Console as administrator, and then browse to
   Configuration &gt; Global &gt; Session.</p></li><li class="step" title="Step 2"><p>Set Enable Quota Constraints to <code class="literal">ON</code>.</p></li><li class="step" title="Step 3"><p>Set Resulting behavior if session quota exhausted.</p><div class="variablelist"><p>The following settings are available by default.</p><dl><dt><span class="term"><code class="literal">DENY_ACCESS</code></span></dt><dd><p>Deny access, preventing the user from creating an additional
      session.</p></dd><dt><span class="term"><code class="literal">DESTROY_NEXT_EXPIRING</code></span></dt><dd><p>Remove the next session to expire, and create a new session for
      the user. The next session to expire is the session with the minimum
      time left until expiration.</p><p>This is the default setting.</p></dd><dt><span class="term"><code class="literal">DESTROY_OLDEST_SESSION</code></span></dt><dd><p>Remove the oldest session, and create a new session for the
      user.</p></dd><dt><span class="term"><code class="literal">DESTROY_OLD_SESSIONS</code></span></dt><dd><p>Remove all existing sessions, and create a new session for the
      user.</p></dd></dl></div><p>If none of these session quota exhaustion actions fit your deployment,
   you can implement a custom session quota exhaustion action. See the
   <em class="citetitle">Developer's Guide</em> chapter on <a href="../dev-guide/index.html#chap-custom-quota-exhaustion-action" class="link"><em class="citetitle">Customizing
   Session Quota Exhaustion Actions</em></a> for an example.</p></li><li class="step" title="Step 4"><p>Set Active User Sessions to the session quota.</p><p>The default is 5 sessions.</p></li><li class="step" title="Step 5"><p>Save your work.</p></li><li class="step" title="Step 6"><p>If you have multiple servers but session failover is not configured,
   configure multi-server mode as described below.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>If you have only a single OpenAM server, skip this step. OpenAM
     enforces the session quota you set for the server.</p></li><li class="listitem"><p>If you have multiple servers with session failover configured, then
     also skip this step. In this case OpenAM uses the session store to enforce
     session quotas globally across your deployment. In other words when the
     Set Active User Sessions is 5, a user can have a maximum of 5 active
     sessions.</p></li><li class="listitem"><p>If you have multiple OpenAM servers but session failover is not
     configured, configure multi-server mode for session quotas. Browse to
     Configuration &gt; Servers and Sites &gt; Default Server Settings or
     Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
     Name</code></em>, and then use the Advanced tab page to set the
     following advanced server property.</p><div class="literallayout"><p>openam.session.useLocalSessionsInMultiServerMode&nbsp;=&nbsp;true</p></div><p>When you set this property to <code class="literal">true</code> for your OpenAM
     servers, users can potentially reach the session quota for each individual
     server before all session quotas are exhausted. In other words if you have
     4 OpenAM servers and Set Active User Sessions is 5, then the user can have
     a maximum of 20 (5 * 4) sessions.</p></li></ul></div></li></ol></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e537" href="#d16811e537" class="para">3</a>] </sup>The four flags, required, optional, requisite, and sufficient, come from
  the standards created for the Java Authentication and Authorization Service
  (JAAS).</p></div><div class="footnote"><p><sup>[<a id="ftn.d16811e5742" href="#d16811e5742" class="para">4</a>] </sup>The base URL to logout is similar, for example
  <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;3.&nbsp;Defining Authorization Policies"><div class="titlepage"><div><div><h2 class="title"><a name="chap-authz-policy"></a>Chapter&nbsp;3.&nbsp;Defining Authorization Policies</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#what-is-authz">3.1. About Authorization in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-authz-policy">3.2. Configuring Policies</a></span></dt><dt><span class="section"><a href="#policy-resolution">3.3. How OpenAM Reaches Policy Decisions</a></span></dt><dt><span class="section"><a href="#script-policy">3.4. Managing Policies Outside the Console</a></span></dt><dt><span class="section"><a href="#delegate-policy">3.5. Delegating Policy Management &amp; Decisions</a></span></dt></dl></div><p><em class="firstterm">Authorization</em> is determining whether to grant or
 deny a user access to a resource. <em class="firstterm">Policies</em> define how
 to determine whether to grant or deny access. This chapter describes how to
 configure authorization policies managed by OpenAM.</p><div class="section" title="3.1.&nbsp;About Authorization in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-authz"></a>3.1.&nbsp;About Authorization in OpenAM</h2></div></div></div><a class="indexterm" name="d16811e6149"></a><a class="indexterm" name="d16811e6152"></a><p>Applications rely on OpenAM for access management, which breaks down
  into authentication, or determining who is trying to access a resource,
  and authorization, or determining whether to grant or deny access. This
  is because whether access is granted generally depends on what the rules
  about access are, who is trying to gain access, and perhaps some other
  conditions, such as whether the access itself needs to happen over a
  secure channel or what time of day it is. To return to the international
  airport example, the rule may be that passengers with valid passports and
  visa presenting valid plane tickets are allowed through to the gate where the
  plane is waiting to take off, but only under the condition that the plane
  is going to leave soon. (You cannot expect to get to the gate today with a
  scheduled departure for three months from now.)</p><p>To allow OpenAM to determine whether to grant access, you define
  authorization policies. A policy includes <em class="firstterm">rules</em>
  that match what resources a user aims to access in what way and whether to
  grant or deny that access, <em class="firstterm">subjects</em> to whom the
  policy applies, and potentially <em class="firstterm">conditions</em> under
  which the policy applies. When queried about whether to let a user through
  to a protected resource, OpenAM decides to authorize access or not based on
  the applicable policy. OpenAM then communicates its decision to the
  application using OpenAM for access management, or in the common case to the
  policy agent installed in the server where the application runs. The
  application or the agent then enforces the authorization decision from
  OpenAM.</p><p>For example, consider the case where OpenAM protects a web site
  page that users access to update their profiles. An OpenAM policy agent
  installed in the web server intercepts client requests to enforce policy.
  The policy says that authenticated users can access the page to update their
  profiles as long as they come in over HTTPS, rather than HTTP.</p><p>When a user browses to the page to update her profile, the OpenAM
  policy agent intercepts the request. The policy agent notices that the
  request is to access a protected resource, but the request is coming from a
  user who has not yet logged in and has no authorization to visit the page.
  The agent therefore redirects the user to OpenAM.</p><p>OpenAM receives the redirected user, serving a login page that
  collects her email and password. With the email and password credentials,
  OpenAM authenticates the user, and gives her a session. OpenAM then redirects
  the user to the policy agent, which gets the policy decision from OpenAM for
  the page she wants to access, and grants access to the page. OpenAM and the
  policy agent use cookies set in the user's browser to reference her session.
  While the user has a valid session with OpenAM, she can go away to another
  page in her browser, come back to the update profile page, and gain access
  without having to enter her email and password again.</p><p>Notice how OpenAM and the policy agent handle the access in the
  example. The web site developer can offer a profile page, but the web site
  developer never has to manage login, nor has to handle who can access a page.
  As OpenAM administrator, you can change authentication and authorization
  independently of updates to the web site. You might need to agree with web
  site developers on how OpenAM identifies users so web developers can find
  their particular profiles, or identify the user by her own name when she logs
  in. Yet your organization is now spared from new web site development
  projects when you want to add external access to your Intranet for roaming
  users, open certain of your sites to partners, only let managers access
  certain pages of your HR web site, or allow users already logged in to their
  desktops to visit protected web sites without having to type their user names
  and passwords again.</p><p>When OpenAM denies a request due to a condition that could be corrected
  by further authentication, OpenAM can send advice to the policy agent, and
  the policy agent can then take remedial action. For instance, suppose a
  user comes to a web site having authenticated with an email address and
  password, which is configured as authentication level 0. Had the user
  authenticated over the VPN which relies on one-time password authentication,
  she would have had authentication level 1 in her session. Yet, because she
  has authentication level 0, she currently cannot access the page she wants,
  which requires authentication level 1. OpenAM can send advice in this case,
  prompting the agent or application to redirect her to authenticate again with
  a one-time password, gaining authentication level 1, and thus having OpenAM
  grant her access to the protected page.</p><p>Policies can include <em class="firstterm">response providers</em>.
  Response providers extend HTTP headers with additional information beyond
  an "allow" or "deny" decision. For example, a response provider can return
  a message about why access was denied.</p></div><div class="section" title="3.2.&nbsp;Configuring Policies"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authz-policy"></a>3.2.&nbsp;Configuring Policies</h2></div></div></div><p>An OpenAM authorization policy defines who can access what, under what
  conditions. The OpenAM agents enforcing policy call upon OpenAM to make
  policy decisions. Decisions from OpenAM can be as simple as "allow" or
  "deny." Decisions from OpenAM can alternatively provide additional
  information required for policy enforcement. OpenAM policies use response
  providers to return such additional information.</p><div class="procedure" title="Procedure&nbsp;3.1.&nbsp;To Create a Policy"><a name="create-policy"></a><div class="procedure-title">Procedure&nbsp;3.1.&nbsp;To Create a Policy</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, select Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Policies, then click New Policy.</p></li><li class="step" title="Step 2"><p>Provide at minimum a name for the policy.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;3.2.&nbsp;To Configure a Policy For a Web Site"><a name="configure-url-policy"></a><div class="procedure-title">Procedure&nbsp;3.2.&nbsp;To Configure a Policy For a Web Site</div><a class="indexterm" name="d16811e6203"></a><a class="indexterm" name="d16811e6208"></a><p>Once a policy is created, you can further specify rules, subjects,
   conditions, and response providers.</p><div class="itemizedlist"><p>OpenAM has, by default, three kinds of resources that you can protect
    with a policy.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>A <em class="firstterm">Discovery Service</em>, used in federated access
     management, locates the web service providing the data needed to complete
     an operation. Your policy protects what clients can look up and what they
     can update.</p></li><li class="listitem"><p>A <em class="firstterm">Liberty Personal Profile Service</em>, used in
     federated access management, provides an identity's basic profile
     information. Your policy protects what clients can query and what they
     can modify.</p></li><li class="listitem"><p>A <em class="firstterm">URL Policy Agent</em> protects resources on a
     specific web site or web application. Your policy protects what URLs
     client applications can access with HTTP GET and POST operations.</p></li></ul></div><p>Follow these steps to configure a policy to protect a web site or web
   application.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, select Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Policies &gt; <em class="replaceable"><code>Policy
    Name</code></em> to display the policy to edit.</p></li><li class="step" title="Step 2"><a name="define-rules"></a><p>
     In the Rules table, click New, and then create at least one Rule,
     identifying a resource name to protect.
    </p><div class="itemizedlist"><p>
      A Rule can specify an individual URL or resource name to protect.
      Alternatively, a Rule can match URLs or resource names by using wildcards.
     </p><ul class="itemizedlist" type="disc"><li class="listitem"><p>
       The wildcard <code class="literal">*</code> matches multiple levels in a path.

       When used at the end of a rule
       <code class="literal">*</code> matches one or more characters,
       not zero or more characters.
      </p><p>
       For example, <code class="literal">http://www.example.com/*</code> matches
       <code class="literal">http://www.example.com/index.html</code> and also
       <code class="literal">http://www.example.com/company/images/logo.png</code>,
       but not <code class="literal">http://www.example.com/</code>.
      </p></li><li class="listitem"><p>
       The wildcard <code class="literal">-*-</code> matches a single level in a path.
      </p><p>
       For example, <code class="literal">http://www.example.com/-*-</code> matches
       <code class="literal">http://www.example.com/index.html</code> but does not match
       <code class="literal">http://www.example.com/company/images/logo.png</code>.
      </p></li><li class="listitem"><p>
       Wildcards do not match <code class="literal">?</code>.
       You must explicitly add Rules to match URLs with query strings.
      </p><p>
       For example, to match everything under
       <code class="literal">http://www.example.com/</code> specify three Rules,
       one for <code class="literal">http://www.example.com/</code>,
       one for <code class="literal">http://www.example.com/*</code>, and
       one for <code class="literal">http://www.example.com/*?*</code>.
      </p><p>
       When defining Rules to match URLs with query strings, know that
       OpenAM sorts the query string field-value pairs by field name
       when normalizing URLs, before checking whether a policy matches.
       Therefore the query string
       <code class="literal">?subject=SPBnfm+t5PlP+ISyQhVlplE22A8=&amp;action=get</code>
       is equivalent to the query string
       <code class="literal">?action=get&amp;subject=SPBnfm+t5PlP+ISyQhVlplE22A8=</code>.
      </p></li><li class="listitem"><p>
       Duplicate and trailing slashes (<code class="literal">/</code>)
       are not considered part of the resource name to match.
      </p><p>
       For example, <code class="literal">http://www.example.com/path</code>,
       <code class="literal">http://www.example.com/path/</code>,
       <code class="literal">http://www.example.com//path/</code>, and
       <code class="literal">http://www.example.com/path//</code>
       are all treated in the same way.
      </p></li><li class="listitem"><p>
       Wildcards can be used in protocols, host names, and port numbers.
      </p><p>
       For example, <code class="literal">http*://*:*/*</code> matches
       <code class="literal">http://www.example.com/index.html</code>,
       <code class="literal">https://www.example.com/index.html</code>, and
       <code class="literal">http://www.example.net:8080/index.html</code>.
      </p><p>
       When a port number is not explicitly specified,
       then the default port number is implied.
       Therefore <code class="literal">http://www.example.com/*</code>
       is the same as <code class="literal">http://www.example.com:80/*</code>,
       and <code class="literal">https://www.example.com/*</code>
       is the same as <code class="literal">https://www.example.com:443/*</code>.
      </p></li><li class="listitem"><p>
       Wildcards cannot be escaped.
      </p></li><li class="listitem"><p>
       Do not mix <code class="literal">*</code> and <code class="literal">-*-</code> in the same Rule.
      </p></li><li class="listitem"><p>
       By default, comparisons are not case sensitive.
       The delimiter, wildcards and case sensitivity are configurable.
       To see examples of other configurations, browse in the OpenAM Console to
       Configuration &gt; Global &gt; Policy Configuration &gt; Resource Comparator.
      </p></li></ul></div><p>
     Follow these steps for each new Rule you create.
    </p><ol type="a" class="substeps"><li class="step" title="Step 2.a"><p>Select URL Policy Agent (with resource name), and click Next.</p></li><li class="step" title="Step 2.b"><p>Name the new rule, add the URL to protect in the Resource Name
      field, and set whether to allow or deny HTTP GET and POST requests
      to the URL.</p></li><li class="step" title="Step 2.c"><p>Click Finish.</p><p>The new rule is not yet saved until you click the Save button
      in the Edit Policy screen.</p></li></ol></li><li class="step" title="Step 3"><p>In the Subjects table, click New... to define a subject, identifying
    the users to whom the policy applies.</p><ol type="a" class="substeps"><li class="step" title="Step 3.a"><p>In the Select Subject Type screen, make your selection,
      and then click next.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Authenticated Users refers to users who have authenticated
        with OpenAM, even if they do not have profiles in the realm where
        you define the policy.</p></li><li class="listitem"><p>OpenAM Identity Subject refers to users or groups you can find
        under Access Control &gt; Realm Name &gt; Subjects.</p></li><li class="listitem"><p>Web Services Clients are for federated access management.</p></li></ul></div></li><li class="step" title="Step 3.b"><p>Name the subject.</p></li><li class="step" title="Step 3.c"><p>If you want to apply the policy to everyone but the subjects
      you identified, then select Exclusive.</p><p>For example</p></li><li class="step" title="Step 3.d"><p>If you selected OpenAM Identity Subject, use the Filter section
      to find and add to your list the subjects to whom to apply the
      policy.</p></li><li class="step" title="Step 3.e"><p>Click Finish.</p></li></ol></li><li class="step" title="Step 4"><p>In the Conditions table, click New... to create a condition,
    constraining the circumstances under which the policy applies.</p><ol type="a" class="substeps"><li class="step" title="Step 4.a"><p>Select the Condition Type from the list.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Active Session Time lets you make the policy depend on how
        long the user's session has been active, and even to terminate the
        session if deemed too old, such that the user must authenticate
        again.</p></li><li class="listitem"><p>Authentication by Module Chain lets you make the policy depend
        on the realm where the user authenticated, and on the authentication
        chain used to authenticate.</p></li><li class="listitem"><p>Authentication by Module Instance lets you make the policy depend
        on the realm where the user authenticated, and on the authentication
        module used to authenticate, as well as setting timeouts for
        application authentication.</p></li><li class="listitem"><p>Authentication Level (greater than or equal to) lets you
        make the policy depend on the realm where the user authenticated,
        and on a minimum acceptable authentication level.</p></li><li class="listitem"><p>Authentication Level (less than or equal to) lets you
        make the policy depend on the realm where the user authenticated,
        and on a maximum acceptable authentication level.</p></li><li class="listitem"><p>Authentication to a Realm lets you make the policy depend on
        the realm where the user authenticated.</p></li><li class="listitem"><p>Current Session Properties lets you make the policy depend on
        attributes set in the user's session.</p></li><li class="listitem"><p>Identity Membership lets you make the policy depend on a list
        of OpenAM subjects that you select, and whether the user belongs to
        the list of users or is a member of a group you selected.</p></li><li class="listitem"><p>IP Address/DNS Name lets you apply the policy to clients in
        specific IP address ranges or coming from a particular DNS
        domain. It also lets you choose between IPv4 and IPv6 address versions.</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>For IPv4, fill in the fields for the From and To with four sets of
          four characters.</p></li><li class="listitem"><p>For IPv6, fill in the fields for the From and To with eight sets of
          four hexadecimal characters. The default separator between each set of
          IPv6 hexadecimal characters is a colon.</p></li><li class="listitem"><p>For a hybrid address, select IPv6. Fill in the first four fields for the 
          From and To with four characters of the IPv6 address, then change
          the punctuation to a . and add the four IPv4 characters in the remaining three 
          fields.</p></li></ul></div></li><li class="listitem"><p>LDAP Filter Condition lets you make the policy depend on whether
        the user's entry can be found using the LDAP search filter you specify
        in the directory configured for the policy service, which by default
        is the identity repository. See Configuration &gt; Global &gt; Policy
        Configuration &gt; Realm Attributes &gt; Primary LDAP Server.</p><p>Alternatively you can set this for the realm under Access Control
        &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Services &gt; Policy
        Configuration.</p></li><li class="listitem"><p>Resource/Environment/IP Address lets you make the policy apply
        using a complex condition such as whether the user is making a request
        from the localhost and has authenticated with the LDAP authentication
        module. This address also works with IPv4, IPv6, or a hybrid of the two.</p></li><li class="listitem"><p>Time (day, date, time, and timezone) lets you make the policy
        depend on when the policy is evaluated.</p></li></ul></div></li><li class="step" title="Step 4.b"><p>Based on the Condition Type you choose, configure the condition,
      and then click Finish.</p></li></ol></li><li class="step" title="Step 5"><p>In the Response Providers table, click New to set up a response
    provider that adds attributes retrieved from the user entry in the identity
    repository into the headers of the request at policy decision time.</p><ol type="a" class="substeps"><li class="step" title="Step 5.a"><p>Name the provider.</p></li><li class="step" title="Step 5.b"><p>Add static attributes having the form
      <code class="literal"><em class="replaceable"><code>attribute</code></em>=<em class="replaceable"><code>value</code></em></code>.</p></li><li class="step" title="Step 5.c"><p>Add dynamic attributes having the form
      <code class="literal"><em class="replaceable"><code>responseAttr</code></em>=<em class="replaceable"><code>repoAttr</code></em></code>,
      where <em class="replaceable"><code>responseAttr</code></em> is the attribute name
      to be put into the header of the request, and
      <em class="replaceable"><code>repoAttr</code></em> is the attribute name used in the
      identity repository.</p></li><li class="step" title="Step 5.d"><p>Click Finish.</p></li></ol></li><li class="step" title="Step 6"><p>Save your work.</p></li></ol></div></div><div class="section" title="3.3.&nbsp;How OpenAM Reaches Policy Decisions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="policy-resolution"></a>3.3.&nbsp;How OpenAM Reaches Policy Decisions</h2></div></div></div><p>OpenAM has to match policies to resources to take policy decisions.
  For a policy to match, the resource has to match a resources identified in
  a rule. The user making the request has to match a subject. Furthermore, at
  least one condition for each condition type has to be satisfied.</p><p>If more than one policy matches, OpenAM has to reconcile differences.
  When multiple policies match, the order in which OpenAM uses them to make a
  policy decision is not deterministic. However, a deny decision overrides an
  allow decision, and so by default once OpenAM reaches a deny decision its
  stops checking further policies. (If you want OpenAM to continue checking
  despite the deny, see Configuration &gt; Global &gt; Policy Configuration
  &gt; Continue Evaluation on Deny Decision.)</p></div><div class="section" title="3.4.&nbsp;Managing Policies Outside the Console"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="script-policy"></a>3.4.&nbsp;Managing Policies Outside the Console</h2></div></div></div><a class="indexterm" name="d16811e6543"></a><a class="indexterm" name="d16811e6548"></a><p>When you first create policies, the OpenAM console helps you to get
  started quickly. Yet, when you have many policies to manage you might find
  it easier to script operations, starting from policies originally created
  in the console, then exported to XML.</p><div class="procedure" title="Procedure&nbsp;3.3.&nbsp;To Export Policies From the Console"><a name="export-policy-to-xml"></a><div class="procedure-title">Procedure&nbsp;3.3.&nbsp;To Export Policies From the Console</div><p>You can export policies created in the console to an XML Policies
   document.</p><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm list-policies</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 list-policies
 --realm "/"
 --adminid amadmin
 --password-file /tmp/pwd.txt 

Policy definitions were returned under realm, /.
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE Policies 
PUBLIC "-//OpenSSO Policy Administration DTD//EN"
"jar://com/sun/identity/policy/policyAdmin.dtd"&gt;

&lt;!-- extracted from realm, / --&gt;
&lt;Policies&gt;
&lt;Policy name="URL Policy" createdby="id=amadmin,ou=user,o=openam"
 lastmodifiedby="id=amadmin,ou=user,o=openam" creationdate="1312553988059"
 lastmodifieddate="1315403023466" referralPolicy="false" active="true" &gt;
&lt;Rule name="Allow GET with parameters"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*?*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Rule name="Allow GET and POST"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="POST" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Subjects name="Subjects:1312553593870WmIuFvI=" description=""&gt;
&lt;Subject name="All Authenticated Users" type="AuthenticatedUsers"
 includeType="inclusive"&gt;
&lt;/Subject&gt;
&lt;/Subjects&gt;
&lt;/Policy&gt;
&lt;/Policies&gt;</pre></div></li></ul></div><div class="procedure" title="Procedure&nbsp;3.4.&nbsp;To Import Policies Using the Command Line"><a name="import-policy-from-xml"></a><div class="procedure-title">Procedure&nbsp;3.4.&nbsp;To Import Policies Using the Command Line</div><p>In a production environment where you manage operations using scripts
   rather than the console, use exported, file-based policies edited for your
   needs, and then import the policies using <span class="command"><strong>ssoadm</strong></span>.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Create your XML policy file.</p><div class="screen"><pre class="brush: plain;">$ cat policy.xml
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE Policies 
PUBLIC "-//OpenSSO Policy Administration DTD//EN"
"jar://com/sun/identity/policy/policyAdmin.dtd"&gt;
&lt;!-- New policy, same as the old policy --&gt;
&lt;Policies&gt;
&lt;Policy name="New Policy" referralPolicy="false" active="true" &gt;
&lt;Rule name="Allow GET with parameters"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*?*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Rule name="Allow GET and POST"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="POST" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Subjects name="Subjects" description="Everybody authenticated"&gt;
&lt;Subject name="All Authenticated Users" type="AuthenticatedUsers"
 includeType="inclusive"&gt;
&lt;/Subject&gt;
&lt;/Subjects&gt;
&lt;/Policy&gt;
&lt;/Policies&gt;</pre></div></li><li class="step" title="Step 2"><p>Use the <span class="command"><strong>ssoadm create-policies</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 create-policies
 --realm "/"
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --xmlfile policy.xml

Policies were created under realm, /.</pre></div></li></ol></div></div><div class="section" title="3.5.&nbsp;Delegating Policy Management &amp; Decisions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="delegate-policy"></a>3.5.&nbsp;Delegating Policy Management &amp; Decisions</h2></div></div></div><a class="indexterm" name="d16811e6592"></a><a class="indexterm" name="d16811e6597"></a><p>You use a <em class="firstterm">referral</em> to delegate policy
  management, and to delegate policy decision making.</p><p>Referrals are covered in the <a href="../admin-guide/index.html#chap-realms" class="link">chapter on
  Realms</a>.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;4.&nbsp;Defining Entitlements"><div class="titlepage"><div><div><h2 class="title"><a name="chap-entitlements"></a>Chapter&nbsp;4.&nbsp;Defining Entitlements</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-entitlements">4.1. About Entitlements</a></span></dt><dt><span class="section"><a href="#managing-entitlements-cli">4.2. Managing Entitlements on the Command Line</a></span></dt></dl></div><p>This chapter covers how to define entitlements for fine-grained
 authorization to access particular resources.</p><div class="section" title="4.1.&nbsp;About Entitlements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-entitlements"></a>4.1.&nbsp;About Entitlements</h2></div></div></div><a class="indexterm" name="d16811e6621"></a><a class="indexterm" name="d16811e6624"></a><a class="indexterm" name="d16811e6627"></a><p>OpenAM <em class="firstterm">entitlements</em> serve much the same purpose
  as OpenAM policies, defining who has access to what, under what conditions.
  OpenAM stores and manages policies centrally using the standard eXtensible
  Access Control Markup Language (XACML). You can access OpenAM entitlements
  and policy decisions using the RESTful web interface, for even lighter weight
  policy enforcement than with OpenAM policy agents.</p><div class="itemizedlist"><p>The OpenAM entitlements service uses XACML terminology to refer to
   the different points dealing with policy.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>OpenAM serves as a <em class="firstterm">policy administration point</em>
    (PAP) where you define, store, and manage policies. OpenAM uses the
    configuration directory to store entitlements, whereas profiles are stored
    in the identity repository (user data store).</p></li><li class="listitem"><p>OpenAM also serves as a <em class="firstterm">policy decision point</em>
    (PDP), evaluating policies and issuing authorization decisions, and as a
    <em class="firstterm">policy information point</em>, providing the information
    needed for authorization decisions.</p></li><li class="listitem"><p>OpenAM policy agents act as <em class="firstterm">policy enforcement
    points</em>, obtaining decisions from PDPs to protect access to
    resources.</p></li></ul></div><p>Entitlement policies define who has who has access to what, under what
  conditions, in the same way that other OpenAM policies define policy.
  Entitlement policies do let you define virtual subjects and subjects based on
  attribute lookup to determine who has access to the resources.</p><p>Entitlements apply for <em class="firstterm">applications</em>, which in
  this context mean protected resources that share a common set of actions
  and related policies. For example, the web agent application protects web
  resources accessed through HTTP GET and POST actions using a web policy
  agent to enforce decisions to allow or deny access. You can also define more
  specific applications as demonstrated by the examples delivered with
  OpenAM.</p><p><em class="firstterm">Delegations</em> grant specific users privileges
  to manage policies.</p></div><div class="section" title="4.2.&nbsp;Managing Entitlements on the Command Line"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="managing-entitlements-cli"></a>4.2.&nbsp;Managing Entitlements on the Command Line</h2></div></div></div><a class="indexterm" name="d16811e6673"></a><a class="indexterm" name="d16811e6678"></a><a class="indexterm" name="d16811e6683"></a><p>To manage entitlements, you can use the <span class="command"><strong>ssoadm</strong></span>
  command. The <span class="command"><strong>ssoadm</strong></span> command provides several other
  subcommands for managing entitlements in addition to those shown here.</p><div class="procedure" title="Procedure&nbsp;4.1.&nbsp;To List Current Policies"><a name="export-entitlements-policy-cli"></a><div class="procedure-title">Procedure&nbsp;4.1.&nbsp;To List Current Policies</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm list-xacml</strong></span> command to list current
    policies, ready for export.</p><div class="screen"><pre class="brush: plain;">$ ssoadm list-xacml --realm / --adminid amadmin --password-file /tmp/pwd.txt

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;PolicySet PolicyCombiningAlgId="urn:oasis:names:tc:xacml:3.0:
 rule-combining-algorithm:deny-overrides" Version="2011.10.07.12.22.04.705"
 PolicySetId="/:2011.10.07.12.22.04.704" xmlns="urn:oasis:names:tc:xacml:3.0:
 core:schema:cd-1"&gt;
    &lt;Target/&gt;
... other policies ...
    &lt;Policy RuleCombiningAlgId="urn:oasis:names:tc:xacml:3.0:
 rule-combining-algorithm:deny-overrides" Version="2011.10.07.11.51.27.444"
 PolicyId="New Policy"&gt;
... policy content here ...
    &lt;/Policy&gt;
&lt;/PolicySet&gt;</pre></div></li></ul></div><div class="procedure" title="Procedure&nbsp;4.2.&nbsp;To Import an Entitlements Policy"><a name="import-entitlements-policy-cli"></a><div class="procedure-title">Procedure&nbsp;4.2.&nbsp;To Import an Entitlements Policy</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm create-xacml</strong></span> command to import
    a policy.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 create-xacml
 --realm /
 --xmlfile policy.xml
 --adminid amadmin
 --password-file /tmp/pwd.txt</pre></div></li></ul></div><div class="procedure" title="Procedure&nbsp;4.3.&nbsp;To Create an Application"><a name="create-entitlements-application-cli"></a><div class="procedure-title">Procedure&nbsp;4.3.&nbsp;To Create an Application</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm create-appl</strong></span> command to create an
    application type.</p><div class="screen"><pre class="brush: plain;">$ cat application.txt
resources=http://myapp.example.com:80/*
subjects=com.sun.identity.admin.model.IdRepoUserViewSubject
subjects=com.sun.identity.admin.model.VirtualViewSubject
subjects=com.sun.identity.admin.model.OrViewSubject
subjects=com.sun.identity.admin.model.AndViewSubject
conditions=com.sun.identity.admin.model.DateRangeCondition
conditions=com.sun.identity.admin.model.DaysOfWeekCondition
conditions=com.sun.identity.admin.model.IpRangeViewCondition
conditions=com.sun.identity.admin.model.DnsNameViewCondition
conditions=com.sun.identity.admin.model.TimeRangeCondition
conditions=com.sun.identity.admin.model.TimezoneCondition
conditions=com.sun.identity.admin.model.OrViewCondition
conditions=com.sun.identity.admin.model.AndViewCondition
conditions=com.sun.identity.admin.model.NotViewCondition
entitlementCombiner=com.sun.identity.entitlement.DenyOverride
$ ssoadm
 create-appl
 --realm /
 --applicationtype iPlanetAMWebAgentService
 --name myApp
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --datafile application.txt

myApp was created.</pre></div></li></ul></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;5.&nbsp;Configuring Realms"><div class="titlepage"><div><div><h2 class="title"><a name="chap-realms"></a>Chapter&nbsp;5.&nbsp;Configuring Realms</h2></div></div></div><a class="indexterm" name="d16811e6733"></a><p>This chapter shows how to configure OpenAM <em class="firstterm">realms</em>,
 which are used to group configuration and identities together. For example,
 you might have one realm for OpenAM administrators and agents, and another
 realm for users. In this two-realm setup, the OpenAM administrator can
 login to the administrative realm to manage the services, but cannot
 authenticate as OpenAM administrator to the realm that protects web sites
 with HR and financial information.</p><p>OpenAM associates a realm with at least one identity repository and
 authentication process. OpenAM also associates the realm with authorization
 policies and entitlements for users, and privileges for administrators. Each
 realm can have its own configuration for services.</p><p>When you first configure OpenAM, OpenAM sets up the default
 <code class="literal">/ (Top Level Realm)</code>, containing OpenAM configuration
 data, and allowing authentication using the identity repository you choose
 during initial configuration. The top level realm might hold the overall
 configuration for Example.com for instance.</p><p>You create new realms to subdivide authentication, and authorization,
 and to delegate management of sub-realms. For example, your organization
 might require separate realms for payroll, human resources, and IT management
 domains and their applications.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#create-new-realm" title="Procedure&nbsp;5.1.&nbsp;To Create a New Realm">Procedure&nbsp;5.1, &#8220;To Create a New Realm&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#delegate-realm-administration" title="Procedure&nbsp;5.2.&nbsp;To Delegate Administration">Procedure&nbsp;5.2, &#8220;To Delegate Administration&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#delegate-policy-to-realm" title="Procedure&nbsp;5.3.&nbsp;To Delegate Policy Management">Procedure&nbsp;5.3, &#8220;To Delegate Policy Management&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#realm-data-store" title="Procedure&nbsp;5.4.&nbsp;To Configure a Data Store for a Realm">Procedure&nbsp;5.4, &#8220;To Configure a Data Store for a Realm&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#agent-redirect-login-to-realm" title="Procedure&nbsp;5.5.&nbsp;To Configure a Web or J2EE Agent For Login to a Realm">Procedure&nbsp;5.5, &#8220;To Configure a Web or J2EE Agent For Login to a Realm&#8221;</a></p></li></ul></div><div class="procedure" title="Procedure&nbsp;5.1.&nbsp;To Create a New Realm"><a name="create-new-realm"></a><div class="procedure-title">Procedure&nbsp;5.1.&nbsp;To Create a New Realm</div><a class="indexterm" name="d16811e6769"></a><p>You can create a new realm through the OpenAM console as described
  below, or by using the <span class="command"><strong>ssoadm create-realm</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as OpenAM Administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>On the Access Control tab &gt; Realms table, click New... to open
   the New Realm page, where you configure the realm.</p><p>If you configure the realm to be inactive, then users cannot use
   it to authenticate or be granted access to protected resources.</p><p>Realm/DNS aliases must follow standard FQDN conventions, such as
   <code class="literal">hr.example.com</code> or
   <code class="literal">pay.example.com</code>.</p></li><li class="step" title="Step 3"><p>Save your work after defining the configuration for the new realm.</p></li></ol></div><p>You configure a realm through the console starting from the Access
 Control tab &gt; Realms table. By default the new realm inherits configuration
 from the global configuration. The default identity repository is the one you
 choose when configuring OpenAM after deployment. The default authentication
 mechanism corresponds to that identity repository as well. You can, however,
 constrain authentication to rely on different data stores, and set policy
 for agents to define authorization in the realm.</p><div class="procedure" title="Procedure&nbsp;5.2.&nbsp;To Delegate Administration"><a name="delegate-realm-administration"></a><div class="procedure-title">Procedure&nbsp;5.2.&nbsp;To Delegate Administration</div><a class="indexterm" name="d16811e6806"></a><p>You can delegate administration in a realm. OpenAM grants
  administrative capabilities to members of groups having administrative
  privileges.</p><p>You can grant privileges through the OpenAM console as described
  below, or by using the <span class="command"><strong>ssoadm add-privileges</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab &gt; Realms table, click the realm
   for which you want to delegate administration to view the realm
   configuration.</p></li><li class="step" title="Step 2"><p>On the Privileges tab, click the name of the group to whom you intend
   to grant access.</p></li><li class="step" title="Step 3"><p>Select the administrative privileges to delegate for the realm,
   and then save your work.</p><div class="variablelist"><p>When using the <span class="command"><strong>ssoadm add-privileges</strong></span> command,
    the privilege names are as follow.</p><dl><dt><span class="term"><code class="literal">AgentAdmin</code></span></dt><dd><p>Read and write access to all configured Agents</p></dd><dt><span class="term"><code class="literal">EntitlementRestAccess</code></span></dt><dd><p>REST calls for Policy Evaluation</p></dd><dt><span class="term"><code class="literal">FederationAdmin</code></span></dt><dd><p>Read and write access to all federation metadata configurations</p></dd><dt><span class="term"><code class="literal">LogAdmin</code></span></dt><dd><p>Read and write access to all log files</p></dd><dt><span class="term"><code class="literal">LogRead</code></span></dt><dd><p>Read access to all log files</p></dd><dt><span class="term"><code class="literal">LogWrite</code></span></dt><dd><p>Write access to all log files</p></dd><dt><span class="term"><code class="literal">PolicyAdmin</code></span></dt><dd><p>Read and write access only for policy properties</p></dd><dt><span class="term"><code class="literal">PrivilegeRestAccess</code></span></dt><dd><p>REST calls for managing entitlements</p></dd><dt><span class="term"><code class="literal">PrivilegeRestReadAccess</code></span></dt><dd><p>REST calls for searching entitlements</p></dd><dt><span class="term"><code class="literal">RealmAdmin</code></span></dt><dd><p>Read and write access to all realm and policy properties</p></dd></dl></div></li></ol></div><div class="procedure" title="Procedure&nbsp;5.3.&nbsp;To Delegate Policy Management"><a name="delegate-policy-to-realm"></a><div class="procedure-title">Procedure&nbsp;5.3.&nbsp;To Delegate Policy Management</div><a class="indexterm" name="d16811e6904"></a><p>When you delegate access management for a realm, you might want to
  delegate policy management. You can delegate policy management by creating a
  referral.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Policies, where
   <em class="replaceable"><code>Realm Name</code></em> is the realm <span class="emphasis"><em>from
   which</em></span> you intend to delegate policy.</p></li><li class="step" title="Step 2"><p>Click the New Referral... button in the Policies table.</p></li><li class="step" title="Step 3"><p>In the New Referral screen, provide at minimum a name for the
   referral.</p></li><li class="step" title="Step 4"><p>
    Set up Rules to identify the resources that the Referral applies to.
   </p><p>
    When defining Rules to match resources,
    specify Resource Names as you would for Policies.
   </p><p>
    For example, you specify a URL Policy Agent rule to create policies
    for all resources under <code class="literal">http://example.com/</code>
    by creating rules for <code class="literal">http://example.com/</code>,
    for <code class="literal">http://example.com/*</code>,
    and also for <code class="literal">http://example.com/*?*</code>.

    When used at the end of a rule
    <code class="literal">*</code> matches one or more characters,
    rather than zero or more characters.
   </p></li><li class="step" title="Step 5"><p>Set up referrals to identify the realms <span class="emphasis"><em>to which</em></span>
   to delegate policy management.</p><p>You can delegate to peer realms or sub realms (child realms), but
   not to parent realms.</p></li><li class="step" title="Step 6"><p>Save your work.</p><p>At this point you can let the realm administrator know that she
   can create policies in her realm for the resources you specified in the
   rules of the referral.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;5.4.&nbsp;To Configure a Data Store for a Realm"><a name="realm-data-store"></a><div class="procedure-title">Procedure&nbsp;5.4.&nbsp;To Configure a Data Store for a Realm</div><p>When you first set up a realm, the new realm inherits the data store
  from the parent realm. Yet, if your administrators are in one realm and
  your users in another, your new child realm might retrieve users from
  a different data store.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Data Stores.</p></li><li class="step" title="Step 2"><p>Click New... in the Data Stores table to create a data store
   profile, and to provide the information needed to connect to the
   data store.</p></li><li class="step" title="Step 3"><p>In the first screen, name the data store and select the type
   of data store to use.</p><p>Most data stores are directory services, though the Database
   Repository lets you connect to an SQL database through JDBC.</p></li><li class="step" title="Step 4"><p>In the second screen, provide information on how to connect
   to your data store, and then click Finish to save your work.</p><p>See the <a href="../admin-guide/index.html#chap-auth-services" class="link">chapter on
   authentication</a> for hints on connecting to
   <a href="../admin-guide/index.html#ad-module-conf-hints" class="link">Active Directory</a>,
   <a href="../admin-guide/index.html#ldap-module-conf-hints" class="link">LDAP directory</a>, and
   <a href="../admin-guide/index.html#jdbc-module-conf-hints" class="link">JDBC</a> data
   sources.</p></li><li class="step" title="Step 5"><p>Click the Subjects tab, and make sure the connection to your
   new data store is working, by searching for a known identity.</p><p>By default the Subjects list only retrieves 100 entries from the
   data store. Narrow your search if you do not see the identity you are
   looking for in the list.</p></li><li class="step" title="Step 6"><p>If you no longer need the connection to the inherited data store
   <span class="emphasis"><em>in this realm</em></span>, then you can delete its entry in the
   Data Stores table.</p><p>Also, once you change the data store for a realm, you might
   opt to change the <a href="../admin-guide/index.html#configure-authn-modules" class="link">authentication module
   configuration</a> as described in the chapter on authentication to use
   your realm data store, rather than the inherited settings.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;5.5.&nbsp;To Configure a Web or J2EE Agent For Login to a Realm"><a name="agent-redirect-login-to-realm"></a><div class="procedure-title">Procedure&nbsp;5.5.&nbsp;To Configure a Web or J2EE Agent For Login to a Realm</div><p>You might choose to configure your agent in one realm, yet
  have your real users authenticate through another realm. In this case,
  you want your agents to redirect users to authenticate to their realm,
  rather than the agent realm.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; <em class="replaceable"><code>Web
   or J2EE Agent Type</code></em> &gt; <em class="replaceable"><code>Agent Name</code></em>
   &gt; OpenAM Services.</p></li><li class="step" title="Step 2"><p>Add login and logout URLs, including the realm in the query
   string.</p><div class="itemizedlist"><p>For example, if your <em class="replaceable"><code>Realm Name</code></em> is
    <code class="literal">hr</code>, and you access OpenAM at
    <code class="literal">http://openam.example.com:8080/openam</code>:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Login URL:
     <code class="literal">http://openam.example.com:8080/openam/UI/Login?realm=hr</code></p></li><li class="listitem"><p>Logout URL:
     <code class="literal">http://openam.example.com:8080/openam/UI/Logout?realm=hr</code></p></li></ul></div></li><li class="step" title="Step 3"><p>Save your work.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;6.&nbsp;Configuring Policy Agent Profiles"><div class="titlepage"><div><div><h2 class="title"><a name="chap-agents"></a>Chapter&nbsp;6.&nbsp;Configuring Policy Agent Profiles</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#gateway-or-policy-agent">6.1. Identity Gateway or Policy Agent?</a></span></dt><dt><span class="section"><a href="#kinds-of-agent-profiles">6.2. Kinds of Agent Profiles</a></span></dt><dt><span class="section"><a href="#create-agent-profiles">6.3. Creating Agent Profiles</a></span></dt><dt><span class="section"><a href="#delegate-agent-profile-creation">6.4. Delegating Agent Profile Creation</a></span></dt><dt><span class="section"><a href="#configure-web-policy-agent">6.5. Configuring Web Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-j2ee-policy-agent">6.6. Configuring J2EE Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-wsp-policy-agent">6.7. Configuring Web Service Provider Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-wsc-policy-agent">6.8. Configuring Web Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-sts-policy-agent">6.9. Configuring Security Token Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-22-policy-agent">6.10. Configuring Version 2.2 Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-oauth2-client">6.11. Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</a></span></dt><dt><span class="section"><a href="#configure-agent-auth">6.12. Configuring Agent Authenticators</a></span></dt></dl></div><a class="indexterm" name="d16811e7065"></a><p>You install policy agents in web servers and web application containers
 to enforce access policies OpenAM applies to protected web sites and web
 applications. Policy agents depend on OpenAM for all authentication and
 authorization decisions. Their primary responsibility consists in enforcing
 what OpenAM decides in a way that is unobtrusive to the user. In organizations
 with many servers, you might well install many policy agents.</p><p>Policy agents can have local configurations where they are installed,
 but usually you store all policy agent configuration information in the
 OpenAM configuration store, defining policy agent profiles for each, and then
 you let the policy agents access their profiles through OpenAM such that you
 manage all agent configuration changes centrally. This chapter describes how
 to set up policy agent profiles in OpenAM for centralized configuration.</p><div class="section" title="6.1.&nbsp;Identity Gateway or Policy Agent?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gateway-or-policy-agent"></a>6.1.&nbsp;Identity Gateway or Policy Agent?</h2></div></div></div><a class="indexterm" name="d16811e7075"></a><p>OpenAM includes both the <a class="link" href="http://openig.forgerock.org/" target="_blank">Identity
  Gateway</a> and also a variety of policy agents. Both the Identity Gateway
  and also the policy agents enforce policy, redirecting users to authenticate
  when necessary, and controlling access to protected resources. Yet, the
  Identity Gateway runs as a self-contained reverse proxy located between the
  users and the protected applications. Policy agents are installed into the
  servers where applications run, intercepting requests in that context.</p><p>The Identity Gateway allows you to protect access to applications not
  suited for a policy agent. Not all web servers and Java EE applications have
  policy agents. Not all operating systems work with policy agents.</p><p>Policy agents have the advantage, where you can install them,
  of sitting within your existing server infrastructure. Once you have
  agents installed into the servers with web applications or sites to protect,
  then you can manage their configurations centrally from OpenAM.</p><p>Of course, for organizations with both servers where you can install
  policy agents and also applications that you must protect without touching
  the server, you can use policy agents on the former and the Identity
  Gateway for the latter.</p></div><div class="section" title="6.2.&nbsp;Kinds of Agent Profiles"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="kinds-of-agent-profiles"></a>6.2.&nbsp;Kinds of Agent Profiles</h2></div></div></div><p>When you open the OpenAM console to configure agents for the top level
  realm, you can choose from a number of different types of agents. Web and J2EE policy
  agents are the most common, requiring the least integration effort.</p><a class="indexterm" name="d16811e7094"></a><div class="variablelist"><dl><dt><span class="term">Web</span></dt><dd><p>You install web agents in web servers to protect web sites.</p></dd><dt><span class="term">J2EE</span></dt><dd><p>You install J2EE agents in web application containers to protect
     web applications.</p></dd><dt><span class="term">Web Service Provider</span></dt><dd><p>WSP agents are for use with Web Services Security.</p></dd><dt><span class="term">Web Service Client</span></dt><dd><p>WSC agents are for use with Web Services Security.</p></dd><dt><span class="term">Discovery</span></dt><dd><p>The Discovery Service agent has the trust authority configuration
     that OpenAM uses to communicate with a Liberty Discovery Service.</p></dd><dt><span class="term">STS Client</span></dt><dd><p>The Security Token Service client agent is for securing
     requests to the Security Token Service.</p></dd><dt><span class="term">2.2 Agents</span></dt><dd><p>Version 2.2 web and J2EE policy agents hold their configuration
     locally, connecting to OpenAM with a user name, password combination.
     This kind of agent is provided for backwards compatibility.</p></dd><dt><span class="term">OAuth 2.0 Client Agent</span></dt><dd><p>OAuth 2.0 clients are registered using this type of policy agent
     profile.</p></dd><dt><span class="term">Agent Authenticator</span></dt><dd><p>The agent authenticator can read agent profiles by connecting
     to OpenAM with a user name, password combination, but unlike the
     agent profile administrator, cannot change agent configuration.</p></dd></dl></div></div><div class="section" title="6.3.&nbsp;Creating Agent Profiles"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create-agent-profiles"></a>6.3.&nbsp;Creating Agent Profiles</h2></div></div></div><a class="indexterm" name="d16811e7157"></a><p>This section concerns creating agent profiles, and creating groups
  that let agents inherit settings when you have many agents with nearly
  the same profile settings.</p><div class="procedure" title="Procedure&nbsp;6.1.&nbsp;To Create an Agent Profile"><a name="create-agent-profile"></a><div class="procedure-title">Procedure&nbsp;6.1.&nbsp;To Create an Agent Profile</div><p>To create a new web or J2EE policy agent profile, you need a name and
   password for the agent, and the URLs to OpenAM and the application to
   protect.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step" title="Step 2"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Agent table.</p></li><li class="step" title="Step 3"><p>Provide a name for the agent, and also the URLs to OpenAM and to
    the application to protect, then click Create.</p><div class="mediaobject" title="Creating a new web agent profile"><a name="figure-create-agent"></a><img src="images/create-agent.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-create-agent.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-create-agent.html" target="longdesc">D</a>]</span></div></div></li><li class="step" title="Step 4"><p>After creating the agent profile, you can click the link to the
    new profile to adjust and export the configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;6.2.&nbsp;To Create an Agent Profile Group &amp; Inherit Settings"><a name="create-agent-group"></a><div class="procedure-title">Procedure&nbsp;6.2.&nbsp;To Create an Agent Profile Group &amp; Inherit Settings</div><a class="indexterm" name="d16811e7192"></a><p>Agent profile groups let you set up multiple agents to inherit
   settings from the group. To create a new web or J2EE agent profile group,
   you need a name and the URL to the OpenAM server in which you store the
   profile.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step" title="Step 2"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Group table.</p><p>After creating the group profile, you can click the link to the new
    group profile to fine-tune or export the configuration.</p></li><li class="step" title="Step 3"><p>Inherit group settings by selecting your agent profile, and then
    selecting the group name in the Group drop-down list near the top of
    the profile page.</p><p>You can then adjust inheritance by clicking Inheritance Settings
    on the agent profile page.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;6.3.&nbsp;To Create an Agent Profile Using the Command Line"><a name="create-agent-profile-cli"></a><div class="procedure-title">Procedure&nbsp;6.3.&nbsp;To Create an Agent Profile Using the Command Line</div><p>You can create a policy agent profile in OpenAM using the
   <span class="command"><strong>ssoadm</strong></span> command-line tool. You do so by specifying
   the agent properties either as a list of attributes, or by using an
   agent properties file as shown below. Export an existing policy
   agent configuration before you start to see what properties you
   want to set when creating the agent profile.</p><p>The following procedure demonstrates creating a web policy agent
   profile using the <span class="command"><strong>ssoadm</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Make sure the <span class="command"><strong>ssoadm</strong></span> command is installed as
    described in the <em class="citetitle">Installation Guide</em> procedure,
    <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
    Administration Tools</em></a>.</p></li><li class="step" title="Step 2"><p>Determine the list of properties to set in the agent profile.</p><p>The following properties file shows a minimal configuration for a
    web policy agent profile.</p><div class="informalexample"><div class="screen"><pre class="brush: plain;">$ cat myWebAgent.properties
com.sun.identity.agents.config.agenturi.prefix=http://www.example.com:80/amagent
com.sun.identity.agents.config.cdsso.cdcservlet.url[0]=https://openam.example.com:8443/openam/cdcservlet
com.sun.identity.agents.config.fqdn.default=www.example.com
com.sun.identity.agents.config.login.url[0]=http://openam.example.com:8443/openam/UI/Login
com.sun.identity.agents.config.logout.url[0]=http://openam.example.com:8443/openam/UI/Logout
com.sun.identity.agents.config.remote.logfile=amAgent_www_example_com_80.log
com.sun.identity.agents.config.repository.location=centralized
com.sun.identity.client.notification.url=http://www.example.com:80/UpdateAgentCacheServlet?shortcircuit=false
com.sun.identity.client.notification.url=http://www.example.com:80/UpdateAgentCacheServlet?shortcircuit=false
sunIdentityServerDeviceKeyValue[0]=agentRootURL=http://www.example.com:80/
sunIdentityServerDeviceStatus=Active
userpassword=password

</pre></div></div></li><li class="step" title="Step 3"><p>Set up a password file used when authenticating to OpenAM.</p><div class="screen"><pre class="brush: plain;">$ echo password &gt; /tmp/pwd.txt
$ chmod 400 /tmp/pwd.txt</pre></div></li><li class="step" title="Step 4"><p>Create the profile in OpenAM.</p><div class="screen"><pre class="brush: plain;">$ ssoadm create-agent --realm /
 --agentname myWebAgent --agenttype WebAgent --adminid amadmin
 --password-file /tmp/pwd.txt --datafile myWebAgent.properties

Agent configuration was created.</pre></div><p>At this point you can view the profile in OpenAM Console under
    Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents to make
    sure the configuration is what you expect.</p></li></ol></div></div><div class="section" title="6.4.&nbsp;Delegating Agent Profile Creation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="delegate-agent-profile-creation"></a>6.4.&nbsp;Delegating Agent Profile Creation</h2></div></div></div><a class="indexterm" name="d16811e7265"></a><p>If you want to create policy agent profiles when installing policy
  agents, then you need the credentials of an OpenAM user who can read and
  write agent profiles.</p><p>You can use the OpenAM administrator account when creating policy agent
  profiles. If however you delegate policy agent installation, then you might
  not want to share OpenAM administrator credentials with everyone who
  installs policy agents.</p><div class="procedure"><a name="create-agent-administrators"></a><p>Follow these steps to create <em class="firstterm">agent administrator</em>
   users for a realm.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In OpenAM console, browse to Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Subjects.</p></li><li class="step" title="Step 2"><p>Under Group click New... and create a group for agent
    administrators.</p></li><li class="step" title="Step 3"><p>Switch to the Privileges tab for the realm, and click the name of the
    group you created.</p></li><li class="step" title="Step 4"><p>Select "Read and write access to all configured Agents," and then
    Save your work.</p></li><li class="step" title="Step 5"><p>Return to the Subjects tab, and under User create as many agent
    administrator users as needed.</p></li><li class="step" title="Step 6"><p>For each agent administrator user, edit the user profile.</p><p>Under the Group tab of the user profile, add the user to agent
    profile administrator group, and then Save your work.</p></li><li class="step" title="Step 7"><p>Provide each system administrator who installs policy agents with
    their agent administrator credentials.</p><p>When installing the policy agent with the
    <code class="option">--custom-install</code> option, the system administrator can
    choose the option to create the profile during installation, and then
    provide the agent administrator user name and the path to a read-only
    file containing the agent administrator password.</p></li></ol></div></div><div class="section" title="6.5.&nbsp;Configuring Web Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-web-policy-agent"></a>6.5.&nbsp;Configuring Web Policy Agents</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#configure-web-pa-global-props">6.5.1. Configuring Web Policy Agent Global Properties</a></span></dt><dt><span class="section"><a href="#configure-web-pa-application-props">6.5.2. Configuring Web Policy Agent Application Properties</a></span></dt><dt><span class="section"><a href="#configure-web-pa-sso-props">6.5.3. Configuring Web Policy Agent SSO Properties</a></span></dt><dt><span class="section"><a href="#configure-web-pa-services-props">6.5.4. Configuring Web Policy Agent OpenAM Services Properties</a></span></dt><dt><span class="section"><a href="#configure-web-pa-misc-props">6.5.5. Configuring Web Policy Agent Miscellaneous Properties</a></span></dt><dt><span class="section"><a href="#configure-web-pa-advanced-props">6.5.6. Configuring Web Policy Agent Advanced Properties</a></span></dt></dl></div><a class="indexterm" name="d16811e7314"></a><p>When you create a web policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.<sup>[<a name="d16811e7321" href="#ftn.d16811e7321" class="footnote">5</a>]</sup></p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p><p>This corresponds to the local Java properties configuration file
   that is set up when you install an agent, for example in
   <code class="filename">Agent_001/config/OpenSSOAgentConfiguration.properties</code>.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the agent for the changes to take effect.</p><div class="section" title="6.5.1.&nbsp;Configuring Web Policy Agent Global Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-global-props"></a>6.5.1.&nbsp;Configuring Web Policy Agent Global Properties</h3></div></div></div><p>This section covers global web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist" title="Profile properties"><a name="web-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured web agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p><p>If you change this to a local configuration, you can no longer
      manage the policy agent configuration through OpenAM console.</p><p>Property: <code class="literal">com.sun.identity.agents.config.repository.location</code></p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notification messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Enable Notifications</span></dt><dd><p>If enabled, the agent receives policy updates from the OpenAM
      notification mechanism to maintain its internal cache. If disabled, the
      agent must poll OpenAM for changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notification.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Deployment URI Prefix</span></dt><dd><p>The default value is
      <code class="literal"><em class="replaceable"><code>agent-root-URL</code></em>/amagent</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code></p><p>Hot swap: yes</p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in minutes to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 60.</p><p>Property: <code class="literal">com.sun.identity.agents.config.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Configuration Cleanup Interval</span></dt><dd><p>Interval in minutes to cleanup old agent configuration entries
      unless they are referenced by current requests. Default: 30.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cleanup.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
      the virtual host names to this list as well. OpenAM checks that
      <code class="literal">goto</code> URLs match one of the agent root URLs for
      CDSSO.</p></dd></dl></div><div class="variablelist" title="General properties"><a name="web-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">SSO Only Mode</span></dt><dd><p>When enabled, agent only enforces authentication (SSO), but no
      policies for authorization.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.only</code></p></dd><dt><span class="term">Resources Access Denied URL</span></dt><dd><p>The URL of the customized access denied page. If no value is
      specified (default), then the agent returns an HTTP status of 403
      (Forbidden).</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.url</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> or even <code class="literal">All</code> for
      fine-grained detail.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.level</code></p><p>You can set the level in the configuration file by module using
      the format
      <code class="literal"><em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>][,<em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>]]*</code>,
      where <em class="replaceable"><code>module</code></em> is one of
      <code class="literal">AuthService</code>, <code class="literal">NamingService</code>,
      <code class="literal">PolicyService</code>, <code class="literal">SessionService</code>,
      <code class="literal">PolicyEngine</code>, <code class="literal">ServiceEngine</code>,
      <code class="literal">Notification</code>, <code class="literal">PolicyAgent</code>,
      <code class="literal">RemoteLog</code>, or <code class="literal">all</code>,
      and <em class="replaceable"><code>level</code></em> is one of the following.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">0</code>: Disable logging from specified module</p><p>At this level the agent nevertheless logs messages having the
        level value <code class="literal">always</code>.</p></li><li class="listitem"><p><code class="literal">1</code>: Log error messages</p></li><li class="listitem"><p><code class="literal">2</code>: Log warning and error messages</p></li><li class="listitem"><p><code class="literal">3</code>: Log info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">4</code>: Log debug, info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">5</code>: Like level 4, but with even more debugging messages</p></li></ul></div><p>When you omit <em class="replaceable"><code>level</code></em>, the agent uses the
      default level, which is the level associated with the
      <code class="literal">all</code> module.</p><p>The following example used in the local configuration sets the
      log overall level to debug for all messages.</p><pre class="literallayout">com.sun.identity.agents.config.debug.level=all:4</pre></dd><dt><span class="term">Agent Debug File Rotation</span></dt><dd><p>When enabled, rotate the debug file when specified file size is
      reached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.rotate</code></p></dd><dt><span class="term">Agent Debug File Size</span></dt><dd><p>Debug file size in bytes beyond which the log file is rotated. The
      minimum is 1048576 bytes (1 MB), and lower values are reset to 1 MB.
      OpenAM console sets a default of 10 MB.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.size</code></p></dd></dl></div><div class="variablelist" title="Audit properties"><a name="web-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Remote Audit Log Interval</span></dt><dd><p>Periodic interval in minutes in which audit log messages are sent
      to the remote log file.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.log.interval</code></p><p>Default: 5</p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p><p>Default: 50 MB</p></dd></dl></div><div class="variablelist" title="Fully Qualified Domain Name Checking properties"><a name="web-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources. Without this value, the web server can fail to
      start, thus you set the property on agent installation, and only change
      it when absolutely necessary.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.example</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.example</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.example</code>.</p><p>Invalid FQDN values can cause the web server to become unusable
      or render resources inaccessible.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section" title="6.5.2.&nbsp;Configuring Web Policy Agent Application Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-application-props"></a>6.5.2.&nbsp;Configuring Web Policy Agent Application Properties</h3></div></div></div><p>This section covers application web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist" title="Not Enforced URL Processing properties"><a name="web-agent-not-enforced-url-properties"></a><div class="variablelist-title">Not Enforced URL Processing properties</div><dl><dt><span class="term">Ignore Path Info for Not Enforced URLs</span></dt><dd><p>When enabled, the path info and query are stripped from the
      request URL before being compared with the URLs of the not enforced list
      for those URLs containing a wildcard character. This prevents a user
      from accessing <code class="literal">http://host/index.html</code> by requesting
      <code class="literal">http://host/index.html/hack.gif</code> when the not enforced
      list includes <code class="literal">http://host/*.gif</code>.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>This setting is not supported by the Varnish Cache agent.</p></div><p>For a more generally applicable setting, see
      <a class="xref" href="#web-agent-ignore-path-info-properties" title="Ignore Path Info properties">Ignore Path Info properties</a>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info.for.not.enforced.list</code></p></dd><dt><span class="term">Enable Regular Expressions for Not Enforced URLs (Not yet in OpenAM console)</span></dt><dd><p>Enable use of <a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expressions</a> in
      Not Enforced URL settings by using the following property under Advanced
      &gt; Custom Properties in the agent profile.</p><pre class="literallayout">com.forgerock.agents.notenforced.url.regex.enable=true</pre></dd><dt><span class="term">Not Enforced URLs</span></dt><dd><p>List of URLs for which no authentication is required. You can use
      wildcards to define a pattern for a URL.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URL. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URL.</p><p>OpenAM does not let you mix <code class="literal">*</code> and
      <code class="literal">-*-</code> in the same URL.</p><p>Examples include
      <code class="literal">http://www.example.com/logout.html</code>,
      <code class="literal">http://www.example.com/images/*</code>,
      <code class="literal">http://www.example.com/css/-*-</code>, and
      <code class="literal">http://www.example.com/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">http://www.example.com/images//</code> and
      <code class="literal">http://www.example.com/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url</code></p><p>If you enabled use of <a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expressions</a> to match
      Not Enforced URLs, then all your settings must be done using regular
      expressions. (Do not mix settings; use either the mechanism
      described above or Perl-compatible regular expressions, but not both.)</p><p>The following example shows settings where no authentication is
      required for URLs whose path ends <code class="literal">/publicA</code> or
      <code class="literal">/publicB</code> (with or without query string parameters),
      and no authentication is required to access .png, .jpg, .gif, .js, or .css
      files under URLs that do not contain <code class="literal">/protectedA/</code>
      or <code class="literal">/protectedB/</code>.</p><pre class="literallayout">.*/(PublicServletA|PublicServletB)(\?.*|$)
^(?!.*(/protectedA/|/protectedB/)).*\.(png|jpg|gif|js|css)(\?.*|$)</pre></dd><dt><span class="term">Invert Not Enforced URLs</span></dt><dd><p>Only enforce not enforced list of URLs. In other words, enforce
      policy only for those URLs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.invert</code></p></dd><dt><span class="term">Fetch Attributes for Not Enforced URLs</span></dt><dd><p>When enabled, the agent fetches profile, response, and session
      attributes that are mapped by doing policy evaluation, and forwards
      these attributes to not enforced URLs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.attributes.enable</code></p></dd></dl></div><div class="variablelist" title="Not Enforced IP Processing properties"><a name="web-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing properties</div><dl><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p></dd><dt><span class="term">CIDR Client IP Specification (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, web policy agents with this property set to
      <code class="literal">cidr</code> can use IPv4 netmasks and IP ranges instead of
      wildcards as values for Not Enforced Client IP addresses. Version 3.0.5
      adds support for IPv6, including the IPv6 loopback address,
      <code class="literal">::1</code>.</p><p>When the parameter is defined, wildcards are ignored in Not
      Enforced Client IP settings. Instead, you can use settings such as
      those shown in the following examples.</p><div class="variablelist"><dl><dt><span class="term">Netmask Example</span></dt><dd><p>To disable policy agent enforcement for addresses in
         192.168.1.1 to 192.168.1.255, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.1/24</pre><p>The following example shows an IPv6 address with a corresponding network mask.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 2001:5c0:9168:0:0:0:0:2/128</pre><p>Currently the policy agent stops evaluating properties after
         reaching an invalid netmask in the list.</p></dd><dt><span class="term">IP Range Example</span></dt><dd><p>To disable policy agent enforcement for addresses between
         192.168.1.1 to 192.168.4.3 inclusive, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.1-192.168.4.3</pre><p>The following example shows a range of IPv6 addresses.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 2001:5c0:9168:0:0:0:0:1-2001:5c0:9168:0:0:0:0:2</pre></dd></dl></div><p>Property: <code class="literal">com.forgerock.agents.config.notenforced.ip.handler</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client IP Validation</span></dt><dd><p>When enabled, validate that the subsequent browser requests come
      from the same IP address that the SSO token is initially issued
      against.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.validation.enable</code></p></dd></dl></div><div class="variablelist" title="Profile Attributes Processing properties"><a name="web-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are LDAP attribute names, and Map Values
      are HTTP header names.</p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Response Attributes Processing properties"><a name="web-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Session Attributes Processing properties"><a name="web-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken] =CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Common Attributes Fetching Processing properties"><a name="web-agent-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl><dt><span class="term">Attribute Multi Value Separator</span></dt><dd><p>Specifies separator for multiple values. Applies to all types of
      attributes such as profile, session and response attributes. Default:
      <code class="literal">|</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.multi.value.separator</code></p></dd></dl></div></div><div class="section" title="6.5.3.&nbsp;Configuring Web Policy Agent SSO Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-sso-props"></a>6.5.3.&nbsp;Configuring Web Policy Agent SSO Properties</h3></div></div></div><p>This section covers SSO web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist" title="Cookie properties"><a name="web-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.name</code></p><p>Hot swap: no</p></dd><dt><span class="term">Cookie Security</span></dt><dd><p>When enabled, the agent marks cookies secure, sending them only
      if the communication channel is secure.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.secure</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTPOnly Cookies (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.5, web policy agents with this property set to
      <code class="literal">true</code> mark cookies as HTTPOnly, to prevent scripts
      and third-party programs from accessing the cookies.</p><p>Property: <code class="literal">com.sun.identity.cookie.httponly</code></p></dd></dl></div><div class="variablelist" title="Cross Domain SSO properties"><a name="web-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">Cookies Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO. If this property is left blank, then
      the fully qualified domain name of the cookie for the agent server
      is used to set the cookie domain, meaning that a host cookie rather than
      a domain cookie is set.</p><p>To set the list to <code class="literal">.example.com</code>, and
      <code class="literal">.example.net</code> using the configuration file property,
      include the following.</p><pre class="literallayout">com.sun.identity.agents.config.cdsso.cookie.domain[0]=.example.com 
com.sun.identity.agents.config.cdsso.cookie.domain[1]=.example.net</pre><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cookie.domain</code></p></dd></dl></div><div class="variablelist" title="Cookie Reset properties"><a name="web-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies in the format
      <code class="literal"><em class="replaceable"><code>name</code></em>[=<em class="replaceable"><code>value</code></em>][;Domain=<em class="replaceable"><code>value</code></em>]</code>.</p><p>Concrete examples include the following with two list items
      configured.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">LtpaToken</code>, corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[0]=LtpaToken</code>.
        The default domain is taken from FQDN Default.</p></li><li class="listitem"><p><code class="literal">token=value;Domain=subdomain.domain.com</code>,
        corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[1]= token=value;Domain=subdomain.domain.com</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset</code></p></dd></dl></div></div><div class="section" title="6.5.4.&nbsp;Configuring Web Policy Agent OpenAM Services Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-services-props"></a>6.5.4.&nbsp;Configuring Web Policy Agent OpenAM Services Properties</h3></div></div></div><p>This section covers OpenAM services web agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist" title="Login URL properties"><a name="web-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so then can authenticate.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">OpenAM Conditional Login URL (Not yet in OpenAM console)</span></dt><dd><p>
  To conditionally redirect users based on the incoming request URL,
  set this property.
 </p><p>
  This takes the incoming request domain to match,
  a vertical bar ( <code class="literal">|</code> ),
  and then a comma-separated list of URLs to which to redirect incoming users.
 </p><p>
  If the domain before the vertical bar matches an incoming request URL,
  then the policy agent uses the list of URLs
  to determine how to redirect the user-agent.

  If the global property FQDN Check
  (<code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code>)
  is enabled for the policy agent,
  then the policy agent iterates through the list
  until it finds an appropriate redirect URL that matches the FQDN check.

  Otherwise, the policy agent redirects the user-agent
  to the first URL in the list.
 </p><p>
  Property: <code class="literal">com.forgerock.agents.conditional.login.url</code>
 </p><p>
  Examples:

  <code class="literal">com.forgerock.agents.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/UI/Login,
  http://openam2.example.com/openam/UI/Login</code>,

  <code class="literal">com.forgerock.agents.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/UI/Login,
  http://openam4.example.com/openam/UI/Login</code>
 </p><p>
  If CDSSO is enabled for the policy agent,
  then this property takes CDSSO Servlet URLs for its values
  (<code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code>),
  rather than OpenAM login URLs.
 </p><p>
  CDSSO examples:

  <code class="literal">com.forgerock.agents.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/cdcservlet,
  http://openam2.example.com/openam/cdcservlet</code>,

  <code class="literal">com.forgerock.agents.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/cdcservlet,
  http://openam4.example.com/openam/cdcservlet</code>
 </p></dd><dt><span class="term">Agent Connection Timeout</span></dt><dd><p>Timeout period in seconds for an agent connection with OpenAM auth
      server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.connection.timeout</code></p><p>Default: 2</p></dd><dt><span class="term">Polling Period for Primary Server</span></dt><dd><p>Interval in minutes, agent polls to check the primary server is up
      and running. Default: 5.</p><p>Property: <code class="literal">com.sun.identity.agents.config.poll.primary.server</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Logout URL properties"><a name="web-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd><dt><span class="term">Enable Logout URL Redirect (Not yet in OpenAM console)</span></dt><dd><p>Logout URL redirect is enabled by default.</p><p>When this is disabled, instead of redirecting the user-agent, the
      policy agent performs session logout in the background and then continues
      processing access to the current URL. Disable this using Advanced &gt;
      Custom Properties in the agent profile.</p><pre class="literallayout">com.forgerock.agents.config.logout.redirect.disable=true</pre></dd></dl></div><div class="variablelist" title="Agent Logout URL properties"><a name="web-agent-agent-logout-url-properties"></a><div class="variablelist-title">Agent Logout URL properties</div><dl><dt><span class="term">Logout URL List</span></dt><dd><p>List of application logout URLs, such as
      <code class="literal">http://www.example.com/logout.html</code>.
      The user is logged out of the OpenAM session when these URLs are accessed.
      When using this property, specify a value for the Logout Redirect URL
      property.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.logout.url</code></p></dd><dt><span class="term">Agent Logout URL Regular Expression (Not yet in OpenAM console)</span></dt><dd><p><a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expression</a> that matches logout URLs.
      Set this using Advanced &gt; Custom Properties in the agent profile.</p><p>For example, to match URLs with <code class="literal">protectedA</code> or
      <code class="literal">protectedB</code> in the path and <code class="literal">op=logout</code>
      in the query string, use the following setting.</p><pre class="brush: ini;">com.forgerock.agents.agent.logout.url.regex= \
   .*(/protectedA\?|/protectedB\?/).*(\&amp;op=logout\&amp;)(.*|$)</pre><p>When you use this property, the agent ignores the settings for
      Logout URL List.</p></dd><dt><span class="term">Logout Cookies List for Reset</span></dt><dd><p>Cookies to be reset upon logout in the same format as the cookie
      reset list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.cookie.reset</code></p></dd><dt><span class="term">Logout Redirect URL</span></dt><dd><p>User gets redirected to this URL after logout. Specify this
      property alongside a Logout URL List.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.redirect.url</code></p></dd></dl></div><div class="variablelist" title="Policy Client Service properties"><a name="web-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl><dt><span class="term">Policy Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">SSO Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an SSO entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">User ID Parameter</span></dt><dd><p>Agent sets this value for User Id passed in the session from
      OpenAM to the REMOTE_USER server variable. Default: UserToken.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param</code></p></dd><dt><span class="term">User ID Parameter Type</span></dt><dd><p>User ID can be fetched from either SESSION and LDAP attributes.
      Default: <code class="literal">SESSION</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param.type</code></p></dd><dt><span class="term">Fetch Policies from Root Resource</span></dt><dd><p>When enabled, the agent caches the policy decision of the
      resource and all resources from the root of the resource down. For
      example, if the resource is <code class="literal">http://host/a/b/c</code>, then
      the root of the resource is <code class="literal">http://host/</code>. This setting
      can be useful when a client is expect to access multiple resources on the
      same path. Yet, caching can be expensive if very many policies are
      defined for the root resource.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fetch.from.root.resource</code></p><p>Default: false</p><p>Hot swap: no</p></dd><dt><span class="term">Retrieve Client Hostname</span></dt><dd><p>When enabled, get the client hostname through DNS reverse lookup
      for use in policy evaluation. This setting can impact performance.</p><p>Property: <code class="literal">com.sun.identity.agents.config.get.client.host.name</code></p></dd><dt><span class="term">Policy Clock Skew</span></dt><dd><p>Time in seconds used adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Use this property to adjust for small time differences encountered
      despite use of a time synchronization service. When this property is
      not set and agent time is greater than OpenAM server time, the agent
      can make policy calls to the OpenAM server before the policy subject
      cache has expired, or you can see infinite redirection occur.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.clock.skew</code></p><p>Hot swap: no</p></dd></dl></div></div><div class="section" title="6.5.5.&nbsp;Configuring Web Policy Agent Miscellaneous Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-misc-props"></a>6.5.5.&nbsp;Configuring Web Policy Agent Miscellaneous Properties</h3></div></div></div><p>This section covers miscellaneous web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist" title="Advice Handling properties"><a name="web-agent-advice-handling-properties"></a><div class="variablelist-title">Advice Handling properties</div><dl><dt><span class="term">Composite Advice Handling (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, when set to <code class="literal">true</code>, the agent
      sends composite advice in the query (GET request) instead of sending it
      through a POST request.</p><p>Property: <code class="literal">com.sun.am.use_redirect_for_advice</code></p></dd></dl></div><div class="variablelist" title="Locale properties"><a name="web-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl><dt><span class="term">Agent Locale</span></dt><dd><p>The default locale for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Anonymous user properties"><a name="web-agent-anonymous-user-properties"></a><div class="variablelist-title">Anonymous user properties</div><dl><dt><span class="term">Anonymous User</span></dt><dd><p>Enable or disable REMOTE_USER processing for anonymous users.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.enable</code></p></dd></dl></div><div class="variablelist" title="Cookie Processing properties"><a name="web-agent-cookie-processing-properties"></a><div class="variablelist-title">Cookie Processing properties</div><dl><dt><span class="term">Encode special chars in Cookies</span></dt><dd><p>When enabled, encode special chars in cookie by URL encoding.
      This is useful when profile, session, and response attributes contain
      special characters, and the attributes fetch mode is set to
      <code class="literal">HTTP_COOKIE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.cookie.special.chars.enable</code></p></dd><dt><span class="term">Profile Attributes Cookie Prefix</span></dt><dd><p>Sets cookie prefix in the attributes headers. Default:
      <code class="literal">HTTP_</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.prefix</code></p></dd><dt><span class="term">Profile Attributes Cookie Maxage</span></dt><dd><p>Maximum age in seconds of custom cookie headers. Default:
      300.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.maxage</code></p></dd></dl></div><div class="variablelist" title="URL Handling properties"><a name="web-agent-url-handling-properties"></a><div class="variablelist-title">URL Handling properties</div><dl><dt><span class="term">URL Comparison Case Sensitivity Check</span></dt><dd><p>When enabled, enforces case insensitivity in both policy and
      not enforced URL evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.url.comparison.case.ignore</code></p></dd><dt><span class="term">Encode URL's Special Characters</span></dt><dd><p>When enabled, encodes the URL which has special characters before
      doing policy evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.url.special.chars.enable</code></p></dd></dl></div><div class="variablelist" title="Ignore Naming URL properties"><a name="web-agent-ignore-naming-url-properties"></a><div class="variablelist-title">Ignore Naming URL properties</div><dl><dt><span class="term">Ignore Preferred Naming URL in Naming Request</span></dt><dd><p>When enabled, do not send a preferred naming URL in the naming request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.preferred.naming.url</code></p></dd></dl></div><div class="variablelist" title="Invalid URL properties (Not yet in OpenAM console)"><a name="web-agent-invalid-url-properties"></a><div class="variablelist-title">Invalid URL properties (Not yet in OpenAM console)</div><dl><dt><span class="term">Invalid URL Regular Expression</span></dt><dd><p>Use a <a class="link" href="http://www.pcre.org/" target="_blank">Perl-compatible regular expression</a> to filter out invalid
      request URLs. The policy agent reject requests to invalid URLs
      with HTTP 403 Forbidden status without further processing. Use Advanced
      &gt; Custom Properties to set this in the agent profile.</p><p>For example, to filter out URLs containing the symbols in the list
      ./, /., /, ., ,\, %00-%1f, %7f-%ff, %25, %2B, %2C, %7E, .info, use the
      following setting.</p><pre class="brush: ini;">com.forgerock.agents.agent.invalid.url.regex= \
 ^((?!(|/\.|\./||*|\.info|%25|%2B|%2C|%[0-1][0-9a-fA-F]|%[7-9a-fA-F][0-9a-fA-F])).)$</pre></dd></dl></div><div class="variablelist" title="Ignore Server Check properties"><a name="web-agent-ignore-server-check-properties"></a><div class="variablelist-title">Ignore Server Check properties</div><dl><dt><span class="term">Ignore Server Check</span></dt><dd><p>When enabled, do not check whether OpenAM is up before doing a
      302 redirect.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.server.check</code></p></dd></dl></div><div class="variablelist" title="Ignore Path Info properties"><a name="web-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>This setting is not supported by the Varnish Cache agent.</p></div><p>For example, if the not enforced list includes
      <code class="literal">http://host/*.gif</code>, then stripping path info from the
      request URI prevents access to <code class="literal">http://host/index.html</code>
      by using <code class="literal">http://host/index.html?hack.gif</code>.</p><p>However, when a web server is configured as a reverse proxy for a
      J2EE application server, the path info is interpreted to map a resource
      on the proxy server rather than the application server. This prevents the
      not enforced list or the policy from being applied to the part of the URI
      below the application server path if a wildcard character is used.</p><p>For example, if the not enforced list includes
      <code class="literal">http://host/webapp/servcontext/*</code> and the request URL is
      <code class="literal">http://host/webapp/servcontext/example.jsp</code>, the path
      info is <code class="literal">/servcontext/example.jsp</code> and the resulting
      request URL with path info stripped is
      <code class="literal">http://host/webapp/</code>, which does not match the
      not enforced list. Thus when this property is enabled, path info is
      not stripped from teh request URL even if there is a wildcard in the not
      enforced list or policy.</p><p>Make sure therefore when this property is enabled that there is
      nothing following the wildcard in the not enforced list or policy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist" title="Multi-byte Enable properties"><a name="web-agent-multi-byte-properties"></a><div class="variablelist-title">Multi-byte Enable properties</div><dl><dt><span class="term">Native Encoding of Profile Attributes</span></dt><dd><p>When enabled, the agent encodes the LDAP header values in the
      default encoding of operating system locale. When disabled, the agent
      uses UTF-8.</p><p>Property: <code class="literal">com.sun.identity.agents.config.convert.mbyte.enable</code></p></dd></dl></div><div class="variablelist" title="Goto Parameter Name properties"><a name="web-agent-goto-parameter-name-properties"></a><div class="variablelist-title">Goto Parameter Name properties</div><dl><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
      = http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcservlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd></dl></div><div class="variablelist" title="Deprecated Agent properties"><a name="web-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Agent properties</div><dl><dt><span class="term">Anonymous User Default Value</span></dt><dd><p>User ID of unauthenticated users. Default:
      <code class="literal">anonymous</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.id</code></p></dd></dl></div></div><div class="section" title="6.5.6.&nbsp;Configuring Web Policy Agent Advanced Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-advanced-props"></a>6.5.6.&nbsp;Configuring Web Policy Agent Advanced Properties</h3></div></div></div><p>This section covers advanced web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist" title="Client Identification properties"><a name="web-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies are load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist" title="Load Balancer properties"><a name="web-agent-lb-properties"></a><div class="variablelist-title">Load Balancer properties</div><dl><dt><span class="term">Load Balancer Setup</span></dt><dd><p>Enable if a load balancer is used for OpenAM services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.balancer.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Override Request URL Protocol</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the protocol users use is different
      from the protocol the agent uses. When enabled, the protocol is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.protocol</code></p></dd><dt><span class="term">Override Request URL Host</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the host name users use is different
      from the host name the agent uses. When enabled, the host is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.host</code></p></dd><dt><span class="term">Override Request URL Port</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the port users use is different
      from the port the agent uses. When enabled, the port is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.port</code></p></dd><dt><span class="term">Override Notification URL</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the URL users use is different
      from the URL the agent uses. When enabled, the URL is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.notification.url</code></p></dd></dl></div><div class="variablelist" title="Post Data Preservation properties"><a name="web-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation. This feature is available in
      the Apache 2.2, Microsoft IIS 6, Microsoft IIS 7, and Sun Java System
      Web Server web policy agents as of version 3.0.3.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">POST Data Entries Cache Period</span></dt><dd><p>POST cache entry lifetime in minutes. Default: 10.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postcache.entry.lifetime</code></p></dd><dt><span class="term">POST Data Preservation Cookie Name (Not yet in OpenAM Console)</span></dt><dd><p>When HTTP POST data preservation is enabled, override properties
      are set to true, and the agent is behind a load balancer, then this
      property sets the name and value of the sticky cookie to use.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.lbcookie</code></p></dd><dt><span class="term">Post Data Preservation URI Prefix (Not yet in OpenAM Console)</span></dt><dd><p>If you run multiple web servers with policy agents behind a load
      balancer that directs traffic based on the request URI, and you need to
      preserve POST data, then set this property.</p><p>By default, policy agents use a dummy URL for POST data preservation,
      <code class="literal">http://<em class="replaceable"><code>agent.host</code></em>:<em class="replaceable"><code>port</code></em>/dummypost/sunpostpreserve</code>,
      to handle POST data across redirects to and from OpenAM. When you set this
      property, the policy agent prefixes the property value to the dummy URL
      path. In other words, when you set
      <code class="literal">com.forgerock.agents.config.pdpuri.prefix = app1</code>,
      the policy agent uses the dummy URL,
      <code class="literal">http://<em class="replaceable"><code>agent.host</code></em>:<em class="replaceable"><code>port</code></em>/app1/dummypost/sunpostpreserve</code>.</p><p>Next, use the prefix you set when you define load balancer URI
      rules. This ensures that clients end up being redirected to the policy
      agent that preserved the POST data.</p><p>Property: <code class="literal">com.forgerock.agents.config.pdpuri.prefix</code></p></dd></dl></div><div class="variablelist" title="Sun Java System Proxy Server properties"><a name="web-agent-sjsws-properties"></a><div class="variablelist-title">Sun Java System Proxy Server properties</div><dl><dt><span class="term">Override Proxy Server's Host and Port</span></dt><dd><p>When enabled ignore the host and port settings.</p><p>Property: <code class="literal">com.sun.identity.agents.config.proxy.override.host.port</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Microsoft IIS Server properties"><a name="web-agent-iis-properties"></a><div class="variablelist-title">Microsoft IIS Server properties</div><dl><dt><span class="term">Authentication Type</span></dt><dd><p>The agent should normally perform authentication, so this is not
      required. If necessary, set to <code class="literal">none</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.auth.type</code></p><p>Hot swap: no</p></dd><dt><span class="term">Replay Password Key</span></dt><dd><p>DES key for decrypting the basic authentication password in the
      session.</p><p>Property: <code class="literal">com.sun.identity.agents.config.replaypasswd.key</code></p></dd><dt><span class="term">Filter Priority</span></dt><dd><p>The loading priority of filter, DEFAULT, HIGH, LOW, or MEDIUM.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.filter.priority</code></p></dd><dt><span class="term">Filter configured with OWA</span></dt><dd><p>Enable if the IIS agent filter is configured for OWA.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable</code></p></dd><dt><span class="term">Change URL Protocol to https</span></dt><dd><p>Enable to avoid IE6 security pop-ups.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.change.protocol</code></p></dd><dt><span class="term">Idle Session Timeout Page URL</span></dt><dd><p>URL of the local idle session timeout page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.session.timeout.url</code></p></dd></dl></div><div class="variablelist" title="IBM Lotus Domino Server properties"><a name="web-agent-domino-properties"></a><div class="variablelist-title">IBM Lotus Domino Server properties</div><dl><dt><span class="term">Check User in Domino Database</span></dt><dd><p>When enabled, the agent checks whether the user exists in the
      Domino name database.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.check.name.database</code></p></dd><dt><span class="term">Use LTPA token</span></dt><dd><p>Enable if the agent needs to use LTPA Token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.enable</code></p></dd><dt><span class="term">LTPA Token Cookie Name</span></dt><dd><p>The name of the cookie that contains the LTPA token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.cookie.name</code></p></dd><dt><span class="term">LTPA Token Configuration Name</span></dt><dd><p>The configuration name that the agent uses in order to employ the
      LTPA token mechanism.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.config.name</code></p></dd><dt><span class="term">LTPA Token Organization Name</span></dt><dd><p>The organization name to which the LTPA token belongs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.org.name</code></p></dd></dl></div><div class="variablelist" title="Custom properties"><a name="web-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div class="section" title="6.6.&nbsp;Configuring J2EE Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-j2ee-policy-agent"></a>6.6.&nbsp;Configuring J2EE Policy Agents</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#configure-j2ee-pa-global-props">6.6.1. Configuring J2EE Policy Agent Global Properties</a></span></dt><dt><span class="section"><a href="#configure-j2ee-pa-application-props">6.6.2. Configuring J2EE Policy Agent Application Properties</a></span></dt><dt><span class="section"><a href="#configure-j2ee-pa-sso-props">6.6.3. Configuring J2EE Policy Agent SSO Properties</a></span></dt><dt><span class="section"><a href="#configure-j2ee-pa-services-props">6.6.4. Configuring J2EE Policy Agent OpenAM Services Properties</a></span></dt><dt><span class="section"><a href="#configure-j2ee-pa-misc-props">6.6.5. Configuring J2EE Policy Agent Miscellaneous Properties</a></span></dt><dt><span class="section"><a href="#configure-j2ee-pa-advanced-props">6.6.6. Configuring J2EE Policy Agent Advanced Properties</a></span></dt></dl></div><a class="indexterm" name="d16811e9284"></a><p>When you create a J2EE policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.<sup>[<a name="d16811e9291" href="#ftn.d16811e9291" class="footnote">6</a>]</sup></p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the agent.</p><div class="section" title="6.6.1.&nbsp;Configuring J2EE Policy Agent Global Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-global-props"></a>6.6.1.&nbsp;Configuring J2EE Policy Agent Global Properties</h3></div></div></div><p>This section covers global web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist" title="Profile properties"><a name="j2ee-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured web agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p><p>If you change this to a local configuration, you can no longer
      manage the policy agent configuration through OpenAM console.</p><p>Property: <code class="literal">com.sun.identity.agents.config.repository.location</code></p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in seconds to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 0</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.interval</code></p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notification messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
      the virtual host names to this list as well. OpenAM checks that
      <code class="literal">goto</code> URLs match one of the agent root URLs for
      CDSSO.</p></dd></dl></div><div class="variablelist" title="General properties"><a name="j2ee-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Agent Filter Mode</span></dt><dd><p>Specifies how the agent filters requests to protected web
      applications. The global value functions as a default, and applies for
      protected applications that do not have their own filter settings.
      Valid settings include the following.</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">ALL</code></span></dt><dd><p>Enforce both the J2EE policy defined for the web container where
         the protected application runs, and also OpenAM policies.</p><p>When setting the filter mode to <code class="literal">ALL</code>, set the
         Map Key, but do not set any Corresponding Map Value.</p></dd><dt><span class="term"><code class="literal">J2EE_POLICY</code></span></dt><dd><p>Enforce only the J2EE policy defined for the web container where
         the protected application runs.</p></dd><dt><span class="term"><code class="literal">NONE</code></span></dt><dd><p>Do not enforce policies to protect resources. In other words,
         turn off access management. Not for use in production.</p></dd><dt><span class="term"><code class="literal">SSO_ONLY</code></span></dt><dd><p>Enforce only authentication, not policies.</p></dd><dt><span class="term"><code class="literal">URL_POLICY</code></span></dt><dd><p>Enforce only OpenAM, URL resource based policies.</p><p>When setting the filter mode to <code class="literal">URL_POLICY</code>,
         set the Map Key to the application name and the Corresponding Map
         Value to <code class="literal">URL_POLICY</code>.</p></dd></dl></div><p>Property: <code class="literal">com.sun.identity.agents.config.filter.mode</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTP Session Binding</span></dt><dd><p>When enabled the agent invalidates the HTTP session upon login
      failure, when the user has no SSO session, or when the principal user
      name does not match the SSO user name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.httpsession.binding</code></p></dd><dt><span class="term">Login Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum
      number of failed login attempts allowed during a single browser session,
      after which the agent blocks requests from the user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.attempt.limit</code></p></dd><dt><span class="term">Custom Response Header</span></dt><dd><p>Specifies the custom headers the agent sets for the client. The
      key is the header name. The value is the header value.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.header</code></p><p>For example,
      <code class="literal">com.sun.identity.agents.config.response.header[Cache-Control]=no-cache</code>.</p></dd><dt><span class="term">Redirect Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum number
      of redirects allowed for a single browser session, after which the agent
      blocks the request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.attempt.limit</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> for fine-grained detail.</p><p>Property: <code class="literal">com.iplanet.services.debug.level</code></p></dd></dl></div><div class="variablelist" title="User Mapping properties"><a name="j2ee-user-mapping-properties"></a><div class="variablelist-title">User Mapping properties</div><dl><dt><span class="term">User Mapping Mode</span></dt><dd><p>Specifies the mechanism used to determine the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.mapping.mode</code></p></dd><dt><span class="term">User Attribute Name</span></dt><dd><p>Specifies the data store attribute that contains the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.attribute.name</code></p></dd><dt><span class="term">User Principal Flag</span></dt><dd><p>When enabled, OpenAM uses both the principal user name and also the
      user ID for authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.principal</code></p></dd><dt><span class="term">User Token Name</span></dt><dd><p>Specifies the session property name for the authenticated user's
      ID. Default: <code class="literal">UserToken</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.token</code></p></dd></dl></div><div class="variablelist" title="Audit properties"><a name="j2ee-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p><p>Default: 50 MB</p></dd></dl></div><div class="variablelist" title="Fully Qualified Domain Name Checking properties"><a name="j2ee-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.example</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.example</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.example</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section" title="6.6.2.&nbsp;Configuring J2EE Policy Agent Application Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-application-props"></a>6.6.2.&nbsp;Configuring J2EE Policy Agent Application Properties</h3></div></div></div><p>This section covers application web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist" title="Login Processing properties"><a name="j2ee-agent-login-processing-properties"></a><div class="variablelist-title">Login Processing properties</div><dl><dt><span class="term">Login Form URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-login-page</code> element, such as
      <code class="literal">/myApp/jsp/login.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.form</code></p></dd><dt><span class="term">Login Error URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-error-page</code> element, such as
      <code class="literal">/myApp/jsp/error.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.error.uri</code></p></dd><dt><span class="term">Use Internal Login</span></dt><dd><p>When enabled, the agent uses the internal default content file
      for the login.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.use.internal</code></p></dd><dt><span class="term">Login Content File Name</span></dt><dd><p>Full path name to the file containing custom login content when
      Use Internal Login is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.content.file</code></p></dd></dl></div><div class="variablelist" title="Logout Processing properties"><a name="j2ee-agent-logout-processing-properties"></a><div class="variablelist-title">Logout Processing properties</div><dl><dt><span class="term">Application Logout Handler</span></dt><dd><p>Specifies how logout handlers map to specific applications. The key
      is the web application name. The value is the logout handler class.</p><p>To set a global logout handler for applications without other
      logout handlers defined, leave the key empty and set the value to the
      global logout handler class name,
      <code class="literal">GlobalApplicationLogoutHandler</code>.</p><p>To set a logout handler for a specific application, set the key
      to the name of the application, and the value to the logout handler class
      name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.application.handler</code></p></dd><dt><span class="term">Application Logout URI</span></dt><dd><p>Specifies request URIs that indicate logout events. The key is the
      web application name. The value is the application logout URI.</p><p>To set a global logout URI for applications without other logout
      URIs defined, leave the key empty and set the value to the global logout
      URI, <code class="literal">/logout.jsp</code>.</p><p>To set a logout URI for a specific application, set the key to the
      name of the application, and the value to the application logout
      page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.uri</code></p></dd><dt><span class="term">Logout Request Parameter</span></dt><dd><p>Specifies parameters in the HTTP request that indicate logout
      events. The key is the web application name. The value is the logout
      request parameter.</p><p>To set a global logout request parameter for applications without
      other logout request parameters defined, leave the key empty and set the
      value to the global logout request parameter,
      <code class="literal">logoutparam</code>.</p><p>To set a logout request parameter for a specific application, set
      the key to the name of the application, and the value to the application
      logout request parameter, such as <code class="literal">logoutparam</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.request.param</code></p></dd><dt><span class="term">Logout Introspect Enabled</span></dt><dd><p>When enabled, the agent checks the HTTP request body to locate the
      Logout Request Parameter you set.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.introspect.enabled</code></p></dd><dt><span class="term">Logout Entry URI</span></dt><dd><p>Specifies the URIs to return after successful logout and subsequent
      authentication. The key is the web application name. The value is the
      URI to return.</p><p>To set a global logout entry URI for applications without other
      logout entry URIs defined, leave the key empty and set the value to the
      global logout entry URI, <code class="literal">/welcome.html</code>.</p><p>To set a logout entry URI for a specific application, set the key
      to the name of the application, and the value to the application
      logout entry URI, such as <code class="literal">/myApp/welcome.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.entry.uri</code></p></dd></dl></div><div class="variablelist" title="Access Denied URI Processing properties"><a name="j2ee-agent-access-denied-uri-processing-properties"></a><div class="variablelist-title">Access Denied URI Processing properties</div><dl><dt><span class="term">Resource Access Denied URI</span></dt><dd><p>Specifies the URIs of custom pages to return when access is denied.
      The key is the web application name. The value is the custom URI.</p><p>To set a global custom access denied URI for applications without
      other custom access denied URIs defined, leave the key empty and set the
      value to the global custom access denied URI,
      <code class="literal">/sample/accessdenied.html</code>.</p><p>To set a custom access denied URI for a specific application, set
      the key to the name of the application, and the value to the application
      access denied URI, such as <code class="literal">/myApp/accessdenied.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.uri</code></p></dd></dl></div><div class="variablelist" title="Not Enforced URI Processing properties"><a name="j2ee-agent-not-enforced-uri-properties"></a><div class="variablelist-title">Not Enforced URI Processing properties</div><dl><dt><span class="term">Not Enforced URIs</span></dt><dd><p>List of URIs for which no authentication is required, and the agent
      does not protect access. You can use wildcards to define a pattern for a
      URI.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URI. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URI.</p><p>OpenAM does not let you mix <code class="literal">*</code> and
      <code class="literal">-*-</code> in the same URI.</p><p>Examples include <code class="literal">/logout.html</code>,
      <code class="literal">/images/*</code>, <code class="literal">/css/-*-</code>, and
      <code class="literal">/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">/images//</code> and
      <code class="literal">/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri</code></p></dd><dt><span class="term">Invert Not Enforced URIs</span></dt><dd><p>Only enforce not enforced list of URIs. In other words, enforce
      policy only for those URIs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.invert</code></p></dd><dt><span class="term">Not Enforced URIs Cache Enabled</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced URI
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.enable</code></p></dd><dt><span class="term">Not Enforced URIs Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      URIs cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.size</code></p><p>Default: 1000</p></dd><dt><span class="term">Refresh Session Idle Time</span></dt><dd><p>When enabled, the agent reset the session idle time when granting
      access to a not enforced URI, prolonging the time before the user must
      authenticate again.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.refresh.session.idletime</code></p></dd></dl></div><div class="variablelist" title="Not Enforced IP Processing properties"><a name="j2ee-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing properties</div><dl><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p></dd><dt><span class="term">Not Enforced IP Invert List</span></dt><dd><p>Only enforce the not enforced list of IP addresses. In other words,
      enforce policy only for those client addresses and patterns specified in
      the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.invert</code></p></dd><dt><span class="term">Not Enforced IP Cache Flag</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced IP
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.enable</code></p></dd><dt><span class="term">Not Enforced IP Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      addresses cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.size</code></p><p>Default: 1000</p></dd></dl></div><div class="variablelist" title="Profile Attributes Processing properties"><a name="j2ee-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, profile attributes are part
      of the HTTP request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are LDAP attribute names, and Map Values
      are HTTP header names.</p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Response Attributes Processing properties"><a name="j2ee-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, response attributes are part
      of the HTTP response.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Common Attributes Fetching Processing properties"><a name="j2ee-agent-common-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl><dt><span class="term">Cookie Separator Character</span></dt><dd><p>Specifies the separator for multiple values of the same attribute
      when it is set as a cookie. Default: <code class="literal">|</code> (also known as the vertical bar character).</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.separator</code></p></dd><dt><span class="term">Fetch Attribute Date Format</span></dt><dd><p>Specifies the <code class="literal">java.text.SimpleDateFormat</code> of date
      attribute values used when an attribute is set in an HTTP header. Default:
      <code class="literal">EEE, d MMM yyyy hh:mm:ss z</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.date.format</code></p></dd><dt><span class="term">Attribute Cookie Encode</span></dt><dd><p>When enabled, attribute values are URL encoded before being set as
      a cookie.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.encode</code></p></dd></dl></div><div class="variablelist" title="Session Attributes Processing properties"><a name="j2ee-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, session attributes are part
      of the HTTP response.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken]=CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Privilege Attributes Processing properties"><a name="j2ee-agent-privilege-attributes-properties"></a><div class="variablelist-title">Privilege Attributes Processing properties</div><dl><dt><span class="term">Default Privileged Attribute</span></dt><dd><p>Specifies the list of privileged attributes granted to all users
      with a valid OpenAM session, such as
      <code class="literal">AUTHENTICATED_USERS</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.default.privileged.attribute</code></p></dd><dt><span class="term">Privileged Attribute Type</span></dt><dd><p>Specifies the list of privileged attribute types fetched for each
      user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.type</code></p></dd><dt><span class="term">Privileged Attributes To Lower Case</span></dt><dd><p>Specifies how privileged attribute types should be converted to
      lower case.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.tolowercase</code></p></dd><dt><span class="term">Privileged Session Attribute</span></dt><dd><p>Specifies the list of session property names, such as
      <code class="literal">UserToken</code> which hold privileged attributes for
      authenticated users.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.session.attribute</code></p></dd><dt><span class="term">Enable Privileged Attribute Mapping</span></dt><dd><p>When enabled, lets you use Privileged Attribute Mapping.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.mapping.enable</code></p></dd><dt><span class="term">Privileged Attribute Mapping</span></dt><dd><p>OpenAM allows original attribute values to be mapped to other
      values. For example, you can map UUIDs to principal names in roles
      specified in a web application's deployment descriptor. For example, to
      map the UUID <code class="literal">id=employee,ou=group,o=openam</code> to the
      principal name <code class="literal">am_employee_role</code> in the deployment
      descriptor, set the key to
      <code class="literal">id=employee,ou=group,o=openam</code>, and the value to
      <code class="literal">am_employee_role</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Custom Authentication Processing properties"><a name="j2ee-agent-custom-authentication-properties"></a><div class="variablelist-title">Custom Authentication Processing properties</div><dl><dt><span class="term">Custom Authentication Handler</span></dt><dd><p>Specifies custom authentication handler classes for users
      authenticated with the application server. The key is the web application
      name and the value is the authentication handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.handler</code></p></dd><dt><span class="term">Custom Logout Handler</span></dt><dd><p>Specifies custom logout handler classes to log users out of the
      application server. The key is the web application name and the value is
      the logout handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.handler</code></p></dd><dt><span class="term">Custom Verification Handler</span></dt><dd><p>Specifies custom verification classes to validate user credentials
      with the local user repository. The key is the web application name and
      the value is the validation handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.verification.handler</code></p></dd></dl></div></div><div class="section" title="6.6.3.&nbsp;Configuring J2EE Policy Agent SSO Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-sso-props"></a>6.6.3.&nbsp;Configuring J2EE Policy Agent SSO Properties</h3></div></div></div><p>This section covers SSO web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist" title="Cookie properties"><a name="j2ee-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.iplanet.am.cookie.name</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Caching properties"><a name="j2ee-agent-caching-properties"></a><div class="variablelist-title">Caching properties</div><dl><dt><span class="term">SSO Cache Enable</span></dt><dd><p>When enabled, the agent exposes SSO Cache through the agent SDK
      APIs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.amsso.cache.enable</code></p></dd></dl></div><div class="variablelist" title="Cross Domain SSO properties"><a name="j2ee-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to process CDSSO requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.redirect.uri</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">CDSSO Clock Skew</span></dt><dd><p>When set to a value other than zero, specifies the clock skew in
      seconds that the agent accepts when determining the validity of the CDSSO
      authentication response assertion.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.clock.skew</code></p></dd><dt><span class="term">CDSSO Trusted ID Provider</span></dt><dd><p>Specifies the list of OpenAM servers or identity providers the
      agent trusts when evaluating CDC Liberty Responses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.trusted.id.provider</code></p></dd><dt><span class="term">CDSSO Secure Enable</span></dt><dd><p>When enabled, the agent marks the SSO Token cookie as secure, thus
      the cookie is only transmitted over secure connections.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.secure.enable</code></p></dd><dt><span class="term">CDSSO Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.domain</code></p></dd></dl></div><div class="variablelist" title="Cookie Reset properties"><a name="j2ee-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies to reset if Cookie Reset is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.name</code></p></dd><dt><span class="term">Cookie Reset Domain Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie domain values when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.domain</code></p></dd><dt><span class="term">Cookie Reset Path Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie paths when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.path</code></p></dd></dl></div></div><div class="section" title="6.6.4.&nbsp;Configuring J2EE Policy Agent OpenAM Services Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-services-props"></a>6.6.4.&nbsp;Configuring J2EE Policy Agent OpenAM Services Properties</h3></div></div></div><p>This section covers OpenAM services web agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist" title="Login URL properties"><a name="j2ee-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so then can authenticate.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">OpenAM Conditional Login URL (Not yet in OpenAM console)</span></dt><dd><p>
  To conditionally redirect users based on the incoming request URL,
  set this property.
 </p><p>
  This takes the incoming request domain to match,
  a vertical bar ( <code class="literal">|</code> ),
  and then a comma-separated list of URLs to which to redirect incoming users.
 </p><p>
  If the domain before the vertical bar matches an incoming request URL,
  then the policy agent uses the list of URLs
  to determine how to redirect the user-agent.

  If the global property FQDN Check
  (<code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code>)
  is enabled for the policy agent,
  then the policy agent iterates through the list
  until it finds an appropriate redirect URL that matches the FQDN check.

  Otherwise, the policy agent redirects the user-agent
  to the first URL in the list.
 </p><p>
  Property: <code class="literal">com.sun.identity.agents.config.conditional.login.url</code>
 </p><p>
  Examples:

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/UI/Login,
  http://openam2.example.com/openam/UI/Login</code>,

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/UI/Login,
  http://openam4.example.com/openam/UI/Login</code>
 </p><p>
  If CDSSO is enabled for the policy agent,
  then this property takes CDSSO Servlet URLs for its values
  (<code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code>),
  rather than OpenAM login URLs.
 </p><p>
  CDSSO examples:

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/cdcservlet,
  http://openam2.example.com/openam/cdcservlet</code>,

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/cdcservlet,
  http://openam4.example.com/openam/cdcservlet</code>
 </p></dd><dt><span class="term">Login URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Login
      URL list as the priority for Login and CDSSO URLs when handling
      failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.prioritized</code></p></dd><dt><span class="term">Login URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Login URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.enabled</code></p></dd><dt><span class="term">Login URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Login URLs when Login URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.timeout</code></p><p>Default: 2000</p></dd></dl></div><div class="variablelist" title="Logout URL properties"><a name="j2ee-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URLs, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>. The
      user is logged out of the OpenAM session when accessing these URLs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd><dt><span class="term">OpenAM Conditional Logout URL (Not yet in OpenAM console)</span></dt><dd><p>The values take the incoming request URL to match and a
      comma-separated list of URLs to which to redirect users logging
      out.</p><p>Property: <code class="literal">com.sun.identity.agents.config.conditional.logout.url</code></p><p>Example: <code class="literal">com.sun.identity.agents.config.conditional.logout.url[0]=
      logout.example.com|http://openam1.example.com/openam/UI/Logout,
      http://openam2.example.com/openam/UI/Logout</code></p></dd><dt><span class="term">Logout URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Logout
      URL list as the priority for Logout URLs when handling failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.prioritized</code></p></dd><dt><span class="term">Logout URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Logout URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.enabled</code></p></dd><dt><span class="term">Logout URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Logout URLs when Logout URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.timeout</code></p><p>Default: 2000</p></dd></dl></div><div class="variablelist" title="Authentication Service properties"><a name="j2ee-agent-agent-authn-service-properties"></a><div class="variablelist-title">Authentication Service properties</div><dl><dt><span class="term">OpenAM Authentication Service Protocol</span></dt><dd><p>Specifies the protocol used by the OpenAM authentication
      service.</p><p>Property: <code class="literal">com.iplanet.am.server.protocol</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Host Name</span></dt><dd><p>Specifies the OpenAM authentication service host name.</p><p>Property: <code class="literal">com.iplanet.am.server.host</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Port</span></dt><dd><p>Specifies the OpenAM authentication service port number.</p><p>Property: <code class="literal">com.iplanet.am.server.port</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Policy Client Service properties"><a name="j2ee-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl><dt><span class="term">Enable Policy Notifications</span></dt><dd><p>When enabled, OpenAM sends notification about changes to policy.</p><p>Property: <code class="literal">com.sun.identity.agents.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Polling Interval</span></dt><dd><p>Specifies the time in minutes after which the policy cache is
      refreshed.</p><p>Property: <code class="literal">com.sun.identity.agents.polling.interval</code></p><p>Default: 3</p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Cache Mode</span></dt><dd><p>Set to cache mode subtree when only a small number of policy rules
      are defined. For large numbers of policy rules, set to self.</p><p>Property: <code class="literal">com.sun.identity.policy.client.cacheMode</code></p><p>Default: self</p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Boolean Action Values</span></dt><dd><p>Specifies the values, such as <code class="literal">allow</code> and
      <code class="literal">deny</code>, that are associated with boolean policy
      decisions.</p><p>Default: <code class="literal">iPlanetAMWebAgentService|GET|allow|deny:iPlanetAMWebAgentService|POST|allow|deny</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.booleanActionValues</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Resource Comparators</span></dt><dd><p>Specifies the comparators used for service names in policy.</p><p>Default: <code class="literal">serviceType=iPlanetAMWebAgentService|
      class=com.sun.identity.policy.plugins.HttpURLResourceName|wildcard=*|
      delimiter=/|caseSensitive=false</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.resourceComparators</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Clock Skew</span></dt><dd><p>Time in seconds used adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Default: 10.</p><p>Property: <code class="literal">com.sun.identity.policy.client.clockSkew</code></p><p>Hot swap: no</p></dd><dt><span class="term">URL Policy Env GET Parameters</span></dt><dd><p>Specifies the list of HTTP GET request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.get.param</code></p></dd><dt><span class="term">URL Policy Env POST Parameters</span></dt><dd><p>Specifies the list of HTTP POST request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.post.param</code></p></dd><dt><span class="term">URL Policy Env jsession Parameters</span></dt><dd><p>Specifies the list of HTTP session attributes whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.jsession.param</code></p></dd><dt><span class="term">Use HTTP-Redirect for composite advice</span></dt><dd><p>When enabled, the remote policy client is configured to use
      HTTP-Redirect instead of HTTP-POST for composite advice.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.advice.use.redirect</code></p></dd></dl></div><div class="variablelist" title="User Data Cache Service properties"><a name="j2ee-agent-user-data-cache-service-properties"></a><div class="variablelist-title">User Data Cache Service properties</div><dl><dt><span class="term">Enable Notification of User Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update user
      management data caches.</p><p>Property: <code class="literal">com.sun.identity.idm.remote.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">User Data Cache Polling Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached user management data.</p><p>Property: <code class="literal">com.iplanet.am.sdk.remote.pollingTime</code></p><p>Default: 1</p><p>Hot swap: no</p></dd><dt><span class="term">Enable Notification of Service Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update service
      configuration data caches.</p><p>Property: <code class="literal">com.sun.identity.sm.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Service Data Cache Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached service configuration data.</p><p>Property: <code class="literal">com.sun.identity.sm.cacheTime</code></p><p>Default: 1</p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Session Client Service properties"><a name="j2ee-agent-session-client-service-properties"></a><div class="variablelist-title">Session Client Service properties</div><dl><dt><span class="term">Enable Client Polling</span></dt><dd><p>When enabled, the session client polls to update the session cache
      rather than relying on notifications from OpenAM.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client Polling Period</span></dt><dd><p>Specifies the time in seconds after which the session client
      requests an update from OpenAM for cached session information.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.period</code></p><p>Default: 180</p><p>Hot swap: no</p></dd></dl></div></div><div class="section" title="6.6.5.&nbsp;Configuring J2EE Policy Agent Miscellaneous Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-misc-props"></a>6.6.5.&nbsp;Configuring J2EE Policy Agent Miscellaneous Properties</h3></div></div></div><p>This section covers miscellaneous web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist" title="Locale properties"><a name="j2ee-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl><dt><span class="term">Locale Language</span></dt><dd><p>The default language for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.language</code></p><p>Hot swap: no</p></dd><dt><span class="term">Locale Country</span></dt><dd><p>The default country for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.country</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Port Check Processing properties"><a name="j2ee-agent-port-check-properties"></a><div class="variablelist-title">Port Check Processing properties</div><dl><dt><span class="term">Port Check Enable</span></dt><dd><p>When enabled, activate port checking, correcting requests on the
      wrong port.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.enable</code></p></dd><dt><span class="term">Port Check File</span></dt><dd><p>Specifies the name of the file containing the content to handle
      requests on the wrong port when port checking is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.file</code></p></dd><dt><span class="term">Port Check Setting</span></dt><dd><p>Specifies which ports correspond to which protocols. The agent uses
      the map when handling requests with invalid port numbers during port
      checking.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.setting</code></p></dd></dl></div><div class="variablelist" title="Bypass Principal List properties"><a name="j2ee-agent-bypass-principal-list-properties"></a><div class="variablelist-title">Bypass Principal List properties</div><dl><dt><span class="term">Bypass Principal List</span></dt><dd><p>Specifies a list of principals the agent bypasses for
      authentication and search purposes, such as <code class="literal">guest</code>
      or <code class="literal">testuser</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.bypass.principal</code></p></dd></dl></div><div class="variablelist" title="Agent Password Encryptor properties"><a name="j2ee-agent-password-encryptor-properties"></a><div class="variablelist-title">Agent Password Encryptor properties</div><dl><dt><span class="term">Encryption Provider</span></dt><dd><p>Specifies the agent's encryption provider class.</p><p>Default: <code class="literal">com.iplanet.services.util.JCEEncryption</code></p><p>Property: <code class="literal">com.iplanet.security.encryptor</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Ignore Path Info properties"><a name="j2ee-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><p>For example, if the not enforced list includes
      <code class="literal">/*.gif</code>, then stripping path info from the request URL
      prevents access to <code class="literal">http://host/index.html</code> by using
      <code class="literal">http://host/index.html?hack.gif</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist" title="Deprecated Client Browser User Agent Properties"><a name="j2ee-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Client Browser User Agent Properties</div><dl><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
      = http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcserlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd><dt><span class="term">Legacy User Agent Support Enable</span></dt><dd><p>When enabled, provide support for legacy browsers.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.support.enable</code></p></dd><dt><span class="term">Legacy User Agent List</span></dt><dd><p>List of header values that identify legacy browsers. Entries can
      use the wildcard character, <code class="literal">*</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.user.agent</code></p></dd><dt><span class="term">Legacy User Agent Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to redirect legacy user agent
      requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.redirect.uri</code></p></dd></dl></div></div><div class="section" title="6.6.6.&nbsp;Configuring J2EE Policy Agent Advanced Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-advanced-props"></a>6.6.6.&nbsp;Configuring J2EE Policy Agent Advanced Properties</h3></div></div></div><p>This section covers advanced web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist" title="Client Identification properties"><a name="j2ee-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies are load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist" title="Web Service Processing properties"><a name="j2ee-agent-web-service-processing-properties"></a><div class="variablelist-title">Web Service Processing properties</div><dl><dt><span class="term">Web Service Enable</span></dt><dd><p>Enable web service processing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.enable</code></p></dd><dt><span class="term">Web Service End Points</span></dt><dd><p>Specifies a list of web application end points that represent web
      services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.endpoint</code></p></dd><dt><span class="term">Web Service Process GET Enable</span></dt><dd><p>When enabled, the agent processes HTTP GET requests for web service
      endpoints.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.process.get.enable</code></p></dd><dt><span class="term">Web Service Authenticator</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceAuthenticator</code>,
      used to authenticate web service requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.responseprocessor</code></p></dd><dt><span class="term">Web Service Response Processor</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceResponseProcessor</code>,
      used to process web service reponses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.responseprocessor</code></p></dd><dt><span class="term">Web Service Internal Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an internal error fault
       for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.internalerror.content</code></p></dd><dt><span class="term">Web Service Authorization Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an authorization error
      fault for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.autherror.content</code></p></dd></dl></div><div class="variablelist" title="Alternate Agent URL properties"><a name="j2ee-agent-alternate-url-properties"></a><div class="variablelist-title">Alternate Agent URL properties</div><dl><dt><span class="term">Alternative Agent Host Name</span></dt><dd><p>Specifies the host name of the agent protected server to show to
      client browsers, rather than the actual host name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.host</code></p></dd><dt><span class="term">Alternative Agent Port Name</span></dt><dd><p>Specifies the port number of the agent protected server to show to
      client browsers, rather than the actual port number.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.port</code></p></dd><dt><span class="term">Alternative Agent Protocol</span></dt><dd><p>Specifies the protocol used to contact the agent from the browser
      client browsers, rather than the actual protocol used by the server.
      Either <code class="literal">http</code> or <code class="literal">https</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.protocol</code></p></dd></dl></div><div class="variablelist" title="JBoss Application Server properties"><a name="j2ee-agent-jboss-properties"></a><div class="variablelist-title">JBoss Application Server properties</div><dl><dt><span class="term">WebAuthentication Available</span></dt><dd><p>When enabled, allow programmatic authentication with the JBoss
      container using the WebAuthentication feature. This feature works only with
      JBoss 4.2.2 to 7 when the <code class="literal">J2EE_POLICY</code> or
      <code class="literal">ALL</code> filter mode is in use.</p><p>Property: <code class="literal">com.sun.identity.agents.config.jboss.webauth.available</code></p></dd></dl></div><div class="variablelist" title="Cross Site Scripting Detection properties"><a name="j2ee-agent-xss-detection-properties"></a><div class="variablelist-title">Cross Site Scripting Detection properties</div><dl><dt><span class="term">Possible XSS code elements</span></dt><dd><p>Specifies strings that, when found in the request, cause the agent
      to redirect the client to an error page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.xss.code.elements</code></p></dd><dt><span class="term">XSS detection redirect URI</span></dt><dd><p>Maps applications to URIs of customized pages to which to redirect
      clients upon detection of XSS code elements.</p><p>For example, to redirect clients of MyApp to
      <code class="literal">/myapp/error.html</code>, enter MyApp as the Map Key and
      <code class="literal">/myapp/error.html</code> as the Corresponding Map
      Value.</p><p>Property: <code class="literal">com.sun.identity.agents.config.xss.redirect.uri</code></p></dd></dl></div><div class="variablelist" title="Post Data Preservation properties"><a name="j2ee-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation, storing POST data before
      redirecting the browser to the login screen, and then autosubmitting
      the same POST after successful authentication to the original URL.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">Missing PDP entry URI</span></dt><dd><p>Specifies a list of application-specific URIs if the referenced
      Post Data Preservation entry cannot be found in the local cache because
      it has exceeded its POST entry TTL. Either the agent redirects to a
      URI in this list, or it shows an HTTP 403 Forbidden error.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.cache.noentry.url</code></p></dd><dt><span class="term">POST entry TTL</span></dt><dd><p>POST data storage lifetime in milliseconds. Default: 300000.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.cache.entry.ttl</code></p></dd><dt><span class="term">PDP Stickysession mode</span></dt><dd><p>Specifies whether to create a cookie, or to append a query string to
      the URL to assist with sticky load balancing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.mode</code></p></dd><dt><span class="term">PDP Stickysession key-value</span></dt><dd><p>Specifies the key-value pair for stickysession mode. For example,
      a setting of <code class="literal">lb=myserver</code> either sets an
      <code class="literal">lb</code> cookie with <code class="literal">myserver</code> value, or
      adds <code class="literal">lb=myserver</code> to the URL query string.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.value</code></p></dd></dl></div><div class="variablelist" title="Custom properties"><a name="j2ee-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div class="section" title="6.7.&nbsp;Configuring Web Service Provider Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsp-policy-agent"></a>6.7.&nbsp;Configuring Web Service Provider Policy Agents</h2></div></div></div><a class="indexterm" name="d16811e11507"></a><p>This section covers Web Service Provider (WSP) properties. WSPs
  both validate incoming web service requests from Web Service Clients (WSC),
  and also secure outgoing responses sent back to WSCs.</p><p>After creating a WSP profile, you access WSP properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Provider &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="wsp-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="wsp-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanisms allowed to validate the web service
     request.</p></dd><dt><span class="term">Authentication Chain</span></dt><dd><p>Specifies which OpenAM authentication chain consumes the credentials
     from the web service request to authenticate the WSC.</p></dd><dt><span class="term">Token Conversion Type</span></dt><dd><p>Specifies how to covert the incoming token before issuing requests
     to other WSPs.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers from the request
     for subsequent processing.</p></dd><dt><span class="term">Detect Message Replay</span></dt><dd><p>Yes means the agent checks whether the request is a replay of
     an earlier request, and if so, rejects the request.</p></dd><dt><span class="term">Detect User Token Replay</span></dt><dd><p>Yes means the agent checks whether the user token is a replay
     from an earlier requests, and if so, rejects the request.</p></dd><dt><span class="term">Private Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to verify the request signature.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the WSP and
     WSC.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials compared with
     the user name security token in a request.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="wsp-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="wsp-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Request Signature Verified</span></dt><dd><p>Yes means verify signatures in requests.</p></dd><dt><span class="term">Is Response Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the response with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign responses is
     referenced in the response.</p></dd><dt><span class="term">Is Request Decrypted</span></dt><dd><p>Yes means do decrypt the specified parts of incoming requests.</p></dd><dt><span class="term">Is Response Encrypted</span></dt><dd><p>Yes means do encrypt the outgoing response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="wsp-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Client</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify request signatures and encrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign responses and decrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="wsp-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="wsp-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Key Tab File</span></dt><dd><p>Specifies the Kerberos keytab file using the form
     <code class="literal"><em class="replaceable"><code>openam-host</code></em>.HTTP.keytab</code>,
     where <em class="replaceable"><code>openam-host</code></em> is the host name for
     OpenAM.</p></dd><dt><span class="term">Verify Kerberos Signature</span></dt><dd><p>Yes means the agent signs the Kerberos token.</p></dd></dl></div></div><div class="section" title="6.8.&nbsp;Configuring Web Service Client Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsc-policy-agent"></a>6.8.&nbsp;Configuring Web Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d16811e11781"></a><p>This section covers Web Service Client (WSC) properties. WSCs
  both secure outgoing requests sent to Web Service Providers (WSP),
  and also validate incoming from WSPs.</p><p>After creating a WSC profile, you access WSC properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="wsc-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="wsc-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure web service requests.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Security Token
     Service. Associated with the STSSecurity Security Mechanism.</p></dd><dt><span class="term">Discovery Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Discovery
     Service. Associated with the LibertyDiscoverySecurity Security Mechanism.</p></dd><dt><span class="term">User Authentication Required</span></dt><dd><p>Yes means users must authenticate to access the WSC's protected
     page.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers in the request
     for subsequent processing.</p></dd><dt><span class="term">User Pass Through Security Token</span></dt><dd><p>Yes means the agent passes along the Security Token from the Subject,
     rather than generating a token or requesting it from the Security Token
     Service.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials shared with the
     WSP and used to generate a Username Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the WSP and
     WSC.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="wsc-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the outgoing request to attribute
     names as retrieved from the SSOToken or the identity repository.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="wsc-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of outgoing requests.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the incoming response.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="wsc-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="wsc-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="wsc-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div class="section" title="6.9.&nbsp;Configuring Security Token Service Client Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sts-policy-agent"></a>6.9.&nbsp;Configuring Security Token Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d16811e12035"></a><p>This section covers Security Token Service (STS) Client properties. STS
  clients both secure outgoing requests to trust authorities, and also validate
  incoming requests from trust authorities. You can configure STS clients to
  work with OpenAM's Security Token Service and with its Discovery
  Service.</p><p>After creating an STS Client profile, you access STS Client properties
  in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; STS Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="sts-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">WS-Trust Version</span></dt><dd><p>Specifies whether to use WS-Trust 1.3 or 1.0.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="sts-agent-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure the STS request.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the STS Client agent profile to use if the security
     mechanism is STS Security.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers for subsequent
     processing.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials the agent uses
     to generate a Username security token.</p></dd><dt><span class="term">Requested Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to encrypt responses.</p></dd><dt><span class="term">Requested Claims</span></dt><dd><p>Specifies the Uniform Resource Identitiers for the claims to
     be represented in the Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the agent and the
     WSC.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="sts-agent-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="sts-agent-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of requests.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="sts-agent-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="sts-agent-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Security Token Service End Point</span></dt><dd><p>Specifies the URL to the Security Token Service end point.</p></dd><dt><span class="term">Security Token Service MEX End Point</span></dt><dd><p>Specifies the URL to the Security Token Service message exchange
     end point.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="sts-agent-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div class="section" title="6.10.&nbsp;Configuring Version 2.2 Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-22-policy-agent"></a>6.10.&nbsp;Configuring Version 2.2 Policy Agents</h2></div></div></div><a class="indexterm" name="d16811e12286"></a><p>This section covers version 2.2 agent properties. Version 2.2 agents
  store their configurations locally, with a user name, password combination
  used to connect to OpenAM.</p><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; 2.2 Agents &gt; <em class="replaceable"><code>Agent Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Description</span></dt><dd><p>Specifies a short description for the agent.</p></dd><dt><span class="term">Agent Key Value(s)</span></dt><dd><p>Additional key-value pairs that OpenAM uses to receive agent
      requests concerning credential assertions.</p><p>OpenAM currently supports one property,
      <code class="literal">agentRootURL=<em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where the key is case-sensitive.</p></dd></dl></div></div><div class="section" title="6.11.&nbsp;Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-oauth2-client"></a>6.11.&nbsp;Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</h2></div></div></div><a class="indexterm" name="d16811e12343"></a><a class="indexterm" name="d16811e12348"></a><a class="indexterm" name="d16811e12351"></a><p>When you want to register an OAuth 2.0 client with OpenAM as the
  OAuth 2.0 authorization server, or register an OpenID Connect 1.0 client
  through OpenAM console, then create an OAuth 2.0 Client agent profile.
  After creating the agent profile, you can further configure the properties
  in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; OAuth 2.0 Client &gt; <em class="replaceable"><code>Client
  Name</code></em>.</p><div class="itemizedlist"><p>The topmost configuration fields are for both OAuth 2.0 and OpenID
   Connect 1.0, whereas others are specifically for OpenID Connect 1.0.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#configure-oauth2-client-common" title="Common Client Configuration">Common Client Configuration</a></p></li><li class="listitem"><p><a class="xref" href="#configure-oauth2-client-openid-connect" title="OpenID Connect 1.0 Client Configuration">OpenID Connect 1.0 Client Configuration</a></p></li></ul></div><div class="variablelist" title="Common Client Configuration"><a name="configure-oauth2-client-common"></a><div class="variablelist-title">Common Client Configuration</div><p>The following configuration fields are common to OAuth 2.0 and OpenID
   Connect 1.0 clients.</p><dl><dt><span class="term">Group</span></dt><dd><p>Set this if you have configured an OAuth 2.0 Client agent
     group.</p></dd><dt><span class="term">Status</span></dt><dd><p>Whether the client profile is active for use.</p></dd><dt><span class="term">Client password</span></dt><dd><p>The client password as described by RFC 6749 in the section,
     <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.3.1" target="_blank">Client Password</a>.</p></dd><dt><span class="term">Client type</span></dt><dd><p>Confidential clients can maintain confidentiality of their
     credentials. Public clients cannot.</p><p>A web application running on a server where its credentials are
     protected is an example of a confidential client.</p><p>A JavaScript client running in a browser is an example of a public
     client.</p></dd><dt><span class="term">Redirection URIs</span></dt><dd><p>Specify client redirection endpoint URIs as described by RFC 6749
     in the section, <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.1.2" target="_blank">Redirection
     Endpoint</a>. OpenAM's OAuth 2.0 authorization service redirects the
     the resource owner's user-agent back to this endpoint during the
     authorization code grant process. If your client has more than one
     redirection URI, then it must specify the redirection URI to use in
     the authorization request.</p><p>Redirection URIs are required for OpenID Connect 1.0 clients.</p></dd><dt><span class="term">Scopes</span></dt><dd><p>Specify scopes in <code class="literal"><em class="replaceable"><code>scope</code></em></code>
     or <code class="literal"><em class="replaceable"><code>scope</code></em>|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code> format. These scopes are to be
     presented to the resource owner when the resource owner is asked to
     authorize client access to protected resources.</p></dd><dt><span class="term">Display name</span></dt><dd><p>Specify a client name to display to the resource owner
     when the resource owner is asked to authorize client access to protected
     resources. Valid formats include <code class="literal"><em class="replaceable"><code>name</code></em></code> or <code class="literal"><em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     name</code></em></code>.</p></dd><dt><span class="term">Display description</span></dt><dd><p>Specify a client description to display to the resource owner
     when the resource owner is asked to authorize client access to protected
     resources. Valid formats include <code class="literal"><em class="replaceable"><code>description</code></em></code> or <code class="literal"><em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code>.</p></dd><dt><span class="term">Default Scope(s)</span></dt><dd><p>Specify scopes in <code class="literal"><em class="replaceable"><code>scope</code></em></code>
     or <code class="literal"><em class="replaceable"><code>scope</code></em>|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code> format. These scopes are set
     automatically when tokens are issued.</p></dd></dl></div><div class="variablelist" title="OpenID Connect 1.0 Client Configuration"><a name="configure-oauth2-client-openid-connect"></a><div class="variablelist-title">OpenID Connect 1.0 Client Configuration</div><p>The following optional configuration fields are for OpenID Connect 1.0
   clients.</p><dl><dt><span class="term">ID Token Signed Response Algorithm</span></dt><dd><p>Algorithm that the ID Token for this client must be signed with</p><p>Default: <code class="literal">HmacSHA256</code></p><p>Valid values are listed in <em class="citetitle">JSON Web Algorithms
     (JWA)</em>: <a class="link" href="http://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms#section-3.1" target="_blank"><em class="citetitle">"alg" (Algorithm) Header Parameter Values for JWS</em></a>.
     OpenAM supports <code class="literal">HmacSHA256</code>,
     <code class="literal">HmacSHA384</code>, and <code class="literal">HmacSHA512</code>.</p></dd><dt><span class="term">Post Logout Redirect URI</span></dt><dd><p>URI to which to redirect the user-agent after the client logout
      process</p></dd><dt><span class="term">The access token used to update the client</span></dt><dd><p>The <code class="literal">registration_access_token</code> value that you
     provide when registering the client, and then subsequently when reading
     or updating the client profile.</p></dd><dt><span class="term">URI of the Client Application</span></dt><dd><p>The relying party (client) URI to which the OpenID Connect Provider
     sends session changed notification messages using the HTML 5 postMessage
     API.</p></dd></dl></div></div><div class="section" title="6.12.&nbsp;Configuring Agent Authenticators"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-agent-auth"></a>6.12.&nbsp;Configuring Agent Authenticators</h2></div></div></div><a class="indexterm" name="d16811e12553"></a><p>An <em class="firstterm">agent authenticator</em> has read-only access to
  multiple agent profiles defined in the same realm, typically allowing an
  agent to read web service agent profiles.</p><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Agent Authenticator &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Agent Profiles allow to Read</span></dt><dd><p>Specifies which agent profiles in the realm the agent authenticator
     can read.</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>Specifies the list of agent root URLs for CDSSO. The valid value is
     in the format
     <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
     where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
     such as <code class="literal">http</code> or <code class="literal">https</code>,
     <em class="replaceable"><code>hostname</code></em> represents the host name of the
     system where the agent resides, and <em class="replaceable"><code>port</code></em>
     represents the port number on which the agent is installed.
     The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
     the virtual host names to this list as well. OpenAM checks that
     <code class="literal">goto</code> URLs match one of the agent root URLs for
     CDSSO.</p></dd></dl></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e7321" href="#d16811e7321" class="para">5</a>] </sup>The configuration file syntax is that
  of a standard Java properties file, though backslash escapes can be used only
  to wrap long lines. See <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load</a> for a description of the format. The value
  of a property specified multiple times is not defined.</p></div><div class="footnote"><p><sup>[<a id="ftn.d16811e9291" href="#d16811e9291" class="para">6</a>] </sup>The configuration file syntax is that
  of a standard Java properties file, though backslash escapes can be used only
  to wrap long lines. See
  <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load</a>
  for a description of the format. The value of a property specified multiple
  times is not defined.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;7.&nbsp;Working with Mobile Devices &amp; Applications"><div class="titlepage"><div><div><h2 class="title"><a name="chap-mobile"></a>Chapter&nbsp;7.&nbsp;Working with Mobile Devices &amp; Applications</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#mobile-oauth">7.1. Simplifying Access on Mobile Devices</a></span></dt><dt><span class="section"><a href="#mobile-oath">7.2. Protecting Access for Mobile Users</a></span></dt><dt><span class="section"><a href="#mobile-rest">7.3. Simplifying Access with REST APIs</a></span></dt><dt><span class="section"><a href="#get-mobile-sample-apps">7.4. Getting Source Code for Sample Mobile Applications</a></span></dt></dl></div><p>When building applications that run on mobile devices, you can use
 the same OpenAM service that you also use for access management in your
 web, cloud, and other applications. OpenAM has features that make it
 particularly well suited for the mobile world, too.</p><div class="section" title="7.1.&nbsp;Simplifying Access on Mobile Devices"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mobile-oauth"></a>7.1.&nbsp;Simplifying Access on Mobile Devices</h2></div></div></div><p>On many mobile devices, users want to avoid repeatedly entering
  credentials such as an email address or user name and a password. They
  do not want new credentials to manage for every application they try.
  They do not want to share their credentials across applications. Instead
  users want single sign-on with few identity providers. They want to
  authorize access for applications rather than share their
  credentials.</p><p>OpenAM supports emerging standards including <a href="../admin-guide/index.html#chap-oauth2" class="link">OAuth 2.0</a> and <span class="olink">OpenID Connect 1.0</span>.
  After you register your application as an OAuth or OpenID Connect client
  with OpenAM, your application can then redirect a user to OpenAM to
  authenticate and to authorize access to resources that the user owns,
  such as profile data. Your application gets an access token that can be
  used later to gain authorized access without requiring the user to
  authenticate again. OpenID Connect extends OAuth, standardizing how client
  applications discover and register with identity providers, and also
  defining how applications can manage user sessions and handle logout when
  they no longer want to authorize access.</p><div class="mediaobject" title="OAuth 2.0 with a mobile application"><a name="figure-mobile-oauth"></a><img src="images/mobile-oauth.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-mobile-oauth.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-mobile-oauth.html" target="longdesc">D</a>]</span></div></div><p>An OAuth 2.0 client application can thus make simplify the user
  experience on the phone to authorizing access.</p><div class="mediaobject" title="OAuth 2.0 mobile application demonstration"><a name="figure-oauth2-phone"></a><img src="images/oauth2-phone.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-phone.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-phone.html" target="longdesc">D</a>]</span></div></div><p>In addition to serving as an identity provider, OpenAM can also
  function as an OAuth 2.0 client, protecting access to resources within
  your control based on authorization granted by an identity provider who
  users already know and use, such as Facebook, Google, MSN and others.
  OpenAM's built in authorization policy management makes it
  straightforward to integrate this capability into your
  applications.</p><p>The OAuth and OpenID Connect standards specify REST interfaces,
  making them essentially programming language-independent and accessible
  for web applications and mobile applications alike.</p><p>OpenAM also supports <a class="link" href="http://www.openauthentication.org/" target="_blank">Open Authentication</a> architecture with the OATH module
  mentioned in the next section.</p></div><div class="section" title="7.2.&nbsp;Protecting Access for Mobile Users"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mobile-oath"></a>7.2.&nbsp;Protecting Access for Mobile Users</h2></div></div></div><p>You must give users access to your organization's resources while
  they are on the go. At the same time you must manage risk. OpenAM
  supports risk-based adaptive authentication, device fingerprints,
  one-time passwords and other multi-factor authentication capabilities
  that help you do both. As OpenAM handles authentication through
  plugin modules that you can chain, your OpenAM service can meet a
  variety of requirements.</p><p>OpenAM's <a href="../admin-guide/index.html#adaptive-auth-module-conf-hints" class="link">Adaptive Risk authentication
  module</a> lets you add risk assessment to any authentication module
  chain, dynamically requiring stronger authentication when circumstances
  require it (new location, ancient last login time, new device, new IP address,
  specific application, and so forth). You can add the <a href="../admin-guide/index.html#device-print-auth-module-conf-hints" class="link">Device Print module</a>
  to an authentication chain to fingerprint users' devices for additional risk
  assessment, making it easier to handle sign-on when users bring their
  own devices.</p><div class="mediaobject" title="Including the Adaptive Risk module in an authentication chain"><a name="figure-adaptive-auth-module-again"></a><img src="images/adaptive-auth-module.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-adaptive-auth-module-again.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-adaptive-auth-module-again.html" target="longdesc">D</a>]</span></div></div><p>OpenAM also lets you decide exactly what stronger authentication
  means in your situation. You can for example add multi-factor
  authentication involving mobile devices using OpenAM's <a href="../admin-guide/index.html#OATH-module-conf-hints" class="link">OATH</a> and <a href="../admin-guide/index.html#hotp-module-conf-hints" class="link">HOTP</a>
  modules either to use a one-time password soft token generated on a
  device, or to send a one-time password in a text message to a mobile
  phone.</p><p>In addition to capabilities supporting new applications, OpenAM
  integrates well with existing systems needed by users on the move.
  Whether users are authenticating from a mobile device through a gateway
  using an MSISDN, starting single sign-on by logging on to a laptop, or
  connecting to a VPN with certificate based authentication, OpenAM has an
  authentication module for that.</p><div class="mediaobject" title="OpenAM authentication modules"><a name="figure-openam-modules"></a><img src="images/openam-modules.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openam-modules.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openam-modules.html" target="longdesc">D</a>]</span></div></div><p>All of these capabilities are available with OpenAM out of the
  box.</p></div><div class="section" title="7.3.&nbsp;Simplifying Access with REST APIs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mobile-rest"></a>7.3.&nbsp;Simplifying Access with REST APIs</h2></div></div></div><p>Representational State Transfer (REST) is a architectural style
  designed in parallel with HTTP. REST simplifies integration and
  deployment while enabling layered, web-scale services. REST APIs in OpenAM
  implement REST in a way that reuses common HTTP verbs and decouples APIs
  from the programming languages that developers use to interact with them.
  OpenAM exposes REST APIs for many capabilities such as those in the following
  list.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Authentication (including a callback mechanism so applications can
    work with all OpenAM authentication modules)</p></li><li class="listitem"><p>Logout</p></li><li class="listitem"><p>Managing groups</p></li><li class="listitem"><p>Managing policy agent profiles</p></li><li class="listitem"><p>Managing realms</p></li><li class="listitem"><p>Managing user profiles</p></li><li class="listitem"><p>OAuth 2.0 authorization</p></li><li class="listitem"><p>OpenAM native authorization</p></li><li class="listitem"><p>OpenID Connect 1.0 authorization</p></li><li class="listitem"><p>Resetting forgotten passwords</p></li><li class="listitem"><p>Token validation</p></li><li class="listitem"><p>User self-registration</p></li></ul></div><div class="mediaobject" title="OpenAM capabilities in a single image"><a name="figure-openam-single"></a><img src="images/openam-single.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openam-single.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openam-single.html" target="longdesc">D</a>]</span></div></div><p>As <a href="../dev-guide/index.html#chap-rest" class="link">OpenAM REST APIs</a>
  provide language-independent access, they make it easier to build cross-device
  applications. Developers can use the same APIs to access OpenAM both from
  web applications and also from native mobile applications.</p><p>Furthermore OpenAM REST APIs are built on an underlying common
  REST framework, designed to provide common access to resource providers.
  The common REST framework standardizes both how resource providers serve
  standard requests (create, read, update, delete, query, patch), and also
  how resource providers offer extended operations in a managed way (using
  actions). Applications built to interact with OpenAM REST APIs
  increasingly can interoperate with other products in the ForgeRock stack
  such as <a class="link" href="http://forgerock.com/what-we-offer/open-identity-stack/openidm/" target="_blank">OpenIDM for identity management</a> and <a class="link" href="http://forgerock.com/what-we-offer/open-identity-stack/opendj/" target="_blank">OpenDJ for highly available data</a>.</p></div><div class="section" title="7.4.&nbsp;Getting Source Code for Sample Mobile Applications"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="get-mobile-sample-apps"></a>7.4.&nbsp;Getting Source Code for Sample Mobile Applications</h2></div></div></div><p>
   You can get source code for sample mobile applications
   from ForgeRock's public source code repository under
   <code class="literal">https://svn.forgerock.org/commons/samples/mobile</code>.
  </p><p>
   For example, if you have a Mac running OS X 10.8 or later
   with Xcode installed, try the <a class="link" href="http://commons.forgerock.org/samples/mobile/ios/openam-ios-oauth2-sample-app/" target="_blank">OpenAM OAuth 2.0 iOS Sample App</a>.
  </p><div class="mediaobject" title="OpenAM OAuth 2.0 iOS Sample App"><a name="figure-ios-oauth2-sample-app"></a><img src="images/ios-oauth2-sample-app.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-ios-oauth2-sample-app.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-ios-oauth2-sample-app.html" target="longdesc">D</a>]</span></div></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;8.&nbsp;Configuring Password Reset"><div class="titlepage"><div><div><h2 class="title"><a name="chap-pwd-reset"></a>Chapter&nbsp;8.&nbsp;Configuring Password Reset</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-pwd-reset">8.1. About Password Reset</a></span></dt><dt><span class="section"><a href="#forgotten-pwd-reset">8.2. Resetting Forgotten Passwords</a></span></dt></dl></div><a class="indexterm" name="d16811e12802"></a><p>This chapter focuses on how to enable users to reset their own
 passwords in secure fashion.</p><div class="section" title="8.1.&nbsp;About Password Reset"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-pwd-reset"></a>8.1.&nbsp;About Password Reset</h2></div></div></div><p>Users who know their passwords, but must reset them because for example
  the password is going to expire, can reset their passwords by successfully
  authenticating to OpenAM, visiting their end user pages, such as
  <code class="literal">http://openam.example.com:8080/openam/idm/EndUser</code>, and
  clicking Edit next to the Password field to display the change password
  page.</p><div class="mediaobject" title="The OpenAM Change Password page"><a name="figure-console-change-pwd"></a><img src="images/console-change-pwd.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-change-pwd.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-change-pwd.html" target="longdesc">D</a>]</span></div></div><p>You therefore do not need to configure password reset for users
  who can remember their current password. Instead, you point them to the
  <code class="literal">idm/EndUser</code> page to let them do it themselves.</p></div><div class="section" title="8.2.&nbsp;Resetting Forgotten Passwords"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="forgotten-pwd-reset"></a>8.2.&nbsp;Resetting Forgotten Passwords</h2></div></div></div><p>OpenAM can provide self-service password reset for forgotten passwords.
  To enable self-service password reset, you must configure the password
  reset service itself, which consists mainly of setting up secret questions,
  and configuring an SMTP mail server to send reset passwords to the users
  of the service.</p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>Users must be able to access their mail after the service resets
   their passwords, or they will not be able to receive the new password.
   Do not therefore set up the service to reset the password used to access
   the email account specified in the user's profile.</p></div><div class="procedure" title="Procedure&nbsp;8.1.&nbsp;To Set Up the Password Reset Service"><a name="set-up-pwd-reset-service"></a><div class="procedure-title">Procedure&nbsp;8.1.&nbsp;To Set Up the Password Reset Service</div><p>You can configure the password reset service for OpenAM, letting
   each realm inherit the global settings. Alternatively, you can choose to
   configure the service only for an individual realm.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>When OpenAM is configured with default settings, it uses the
    <code class="literal">ldapService</code> authentication chain, which relies on the
    <code class="literal">DataStore</code> authentication module. The
    <code class="literal">DataStore</code> authentication module provides a generic
    authentication mechanism for OpenAM data stores, and therefore cannot
    handle specific data store settings, such as the directory server password
    policy setting to force password changes on reset. When you use settings
    the module cannot handle, then authentication can fail.</p><p>If you must configure the directory server to force password changes
    on reset, then also configure a separate authentication chain for users.
    The separate authentication chain must require the <code class="literal">LDAP</code>
    authentication module rather than the <code class="literal">DataStore</code>
    authentication module.</p><p>You can create and configure authentication chains, and assign them
    in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Authentication.</p><p>The OpenAM administrator, <code class="literal">amadmin</code>, uses the
    <code class="literal">DataStore</code> authentication module. If you set Access
    Control &gt; /(Top Level Realm) &gt; Authentication &gt;
    Core &gt; Organization Authentication Configuration to use your
    <code class="literal">LDAP</code> based authentication chain for users, let the
    Administrator Authentication Configuration continue to use the
    <code class="literal">DataStore</code> based authentication chain.</p></li><li class="step" title="Step 2"><p>Configure the Password Reset service in one of the following ways.</p><ul class="stepalternatives">
     <li class="step" title="Step 2.1"><p>To configure the service globally for all realms, login to OpenAM
      Console as administrator and browse to Configuration &gt; Global &gt;
      Password Reset in the Global Properties list.</p></li>

     <li class="step" title="Step 2.2"><p>To configure the service for a particular realm, login to OpenAM
      console as the realm administrator and browse to Access Control &gt;
      <em class="replaceable"><code>Realm Name</code></em> &gt; Services, then click Add...
      to add a new Password Reset service configuration.</p></li>
    </ul></li><li class="step" title="Step 3"><p>In the Password Reset page, use the following hints to adjust
    settings, and then save your work.</p><p>In addition to the User Validation and Secret Question values
    provided, you must configure at least the Bind DN and Bind Password
    of the user who can reset passwords in the LDAP data store.</p><div class="variablelist"><dl><dt><span class="term">User Validation</span></dt><dd><p>OpenAM uses this LDAP attribute and the value entered by the
       user to look up the user profile in the data store.</p></dd><dt><span class="term">Secret Question</span></dt><dd><p>This list corresponds to property values held in the file
       <code class="filename">amPasswordReset.properties</code> inside
       <code class="filename">openam-core-11.0.0.jar</code>, which you can find
       under <code class="filename">WEB-INF/lib/</code> where OpenAM is installed.</p><p>To make changes, extract a version from
       <code class="filename">openam-core-11.0.0.jar</code>, copy it to
       <code class="filename">WEB-INF/classes/</code> where OpenAM is deployed, and
       then edit
       <code class="filename">WEB-INF/classes/amPasswordReset.properties</code>.</p><p>Localized versions of this file are named
       <code class="filename">amPasswordReset_<em class="replaceable"><code>locale</code></em>.properties</code>.
       You should localize only the questions at the end, leaving the rest of
       the localized file as is. For example if the default properties file
       contains:</p><pre class="literallayout">favourite-restaurant=What is your favorite restaurant?</pre><p>Then <code class="filename">WEB-INF/classes/amPasswordReset_fr.properties</code>
       ought to contain:</p><pre class="literallayout">favourite-restaurant=Quel est votre restaurant pr&eacute;f&eacute;r&eacute; ?</pre><p>After changing these files, you must restart OpenAM.</p></dd><dt><span class="term">Search Filter</span></dt><dd><p>An additional LDAP search filter you specify here is &amp;-ed
       with the filter constructed for user validation to find the user
       entry in the data store.</p></dd><dt><span class="term">Base DN</span></dt><dd><p>If you specify no base DN for the search, the search for the user
       entry starts from the base DN for the realm.</p></dd><dt><span class="term">Bind DN</span></dt><dd><p>The DN of the user with access to change passwords in the
       LDAP data store.</p></dd><dt><span class="term">Bind Password</span></dt><dd><p>The password of the user with access to change passwords in the
       LDAP data store.</p></dd><dt><span class="term">Reset Password Creator</span></dt><dd><p>Classname of a plugin that implements the
       <code class="literal">PasswordGenerator</code> interface.</p><p>Default: <code class="literal">com.sun.identity.password.plugins.RandomPasswordGenerator</code></p></dd><dt><span class="term">Password Reset Notification Class</span></dt><dd><p>Classname of a plugin that implements the
       <code class="literal">NotifyPassword</code> interface.</p><p>Default: <code class="literal">com.sun.identity.password.plugins.EmailPassword</code></p></dd><dt><span class="term">Password Reset</span></dt><dd><p>Enables the service.</p></dd><dt><span class="term">Personal Question</span></dt><dd><p>When enabled, allows the user to create custom secret
       questions.</p></dd><dt><span class="term">Maximum Number of Questions</span></dt><dd><p>Maximum number of questions to ask during password reset.</p></dd><dt><span class="term">Force Change Password on Next Login</span></dt><dd><p>When enabled, the user must change her password next time she
       logs in after OpenAM resets her password.</p></dd><dt><span class="term">Password Reset Failure Lockout</span></dt><dd><p>When enabled, the user only gets the specified number of tries
       before her account is locked.</p></dd><dt><span class="term">Password Reset Failure Lockout Count</span></dt><dd><p>If Password Reset Failure Lockout is enabled, this specifies the
       maximum number of tries to reset a password within the specified
       interval before the user's account is locked.</p></dd><dt><span class="term">Password Reset Failure Lockout Interval</span></dt><dd><p>This interval applies when Password Reset Failure Lockout is
       enabled, and when Password Reset Failure Lockout Count is set. During
       this interval, a user can try to reset her password the specified
       number of times before being locked out. For example, if this interval
       is 5 minutes and the count is set to 3, a user gets 3 tries during
       a given 5 minute interval to reset her password.</p></dd><dt><span class="term">Email Address to Send Lockout Notification</span></dt><dd><p>This specifies the administrator address(es) which receive(s)
       notification on user account lockout. Each address must be a full
       email address such as <code class="literal">admin@example.com</code>, or
       <code class="literal">admin@host.domain</code>.</p><p>OpenAM must be able to send mail through an SMTP-capable service
       for this to work. See <a class="xref" href="#set-up-mail-notification" title="Procedure&nbsp;8.2.&nbsp;To Set Up SMTP Mail Notification">Procedure&nbsp;8.2, &#8220;To Set Up SMTP Mail Notification&#8221;</a>.</p></dd><dt><span class="term">Warn User After N Failures</span></dt><dd><p>If you configure Password Reset Failure Lockout, set this to
       warn users who are about to use up their count of tries.</p></dd><dt><span class="term">Password Reset Failure Lockout Duration</span></dt><dd><p>If you configure Password Reset Failure Lockout, set this to a
       number of minutes other than <code class="literal">0</code> so that lockout is
       temporary, requiring only that the locked-out user wait to try again
       to reset her password, rather than necessarily require help from
       an administrator.</p></dd><dt><span class="term">Password Reset Lockout Attribute Name</span></dt><dd><p>If you configure Password Reset Failure Lockout, then OpenAM sets
       sets data store attribute to <code class="literal">inactive</code> upon
       lockout.</p></dd><dt><span class="term">Password Reset Lockout Attribute Value</span></dt><dd><p>If set to <code class="literal">inactive</code>, then a user who is locked
       out cannot attempt to reset her password if the Password Reset
       Failure Lockout Duration is <code class="literal">0</code>.</p></dd><dt><span class="term">Password Reset E-mail Attribute Name</span></dt><dd><p>Identity attribute that holds the user's email address.</p><p>Default: <code class="literal">mail</code></p></dd></dl></div></li><li class="step" title="Step 4"><p>If you changed Secret Questions in the
    <code class="filename">WEB-INF/classes/amPasswordReset.properties</code> file or in
    any localized versions, restart OpenAM for the changes to take
    effect.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;8.2.&nbsp;To Set Up SMTP Mail Notification"><a name="set-up-mail-notification"></a><div class="procedure-title">Procedure&nbsp;8.2.&nbsp;To Set Up SMTP Mail Notification</div><p>By default, OpenAM expects the SMTP service to listen on
   <code class="literal">localhost:25</code>. You can change these settings.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, click the Configuration &gt; Servers and
    Sites &gt; Default Server Settings.</p></li><li class="step" title="Step 2"><p>In the Edit server-default page, scroll down to Mail Server to
    change the Mail Server Host Name or Mail Server Port Number.</p></li><li class="step" title="Step 3"><p>Save your work.</p></li><li class="step" title="Step 4"><p>By default, OpenAM sends password reset notifications from
    <code class="literal">&lt;Password-Administrator&gt;</code>.</p><p>To set a valid from address, extract
    <code class="filename">amPasswordResetModuleMsgs.properties</code> from
    <code class="filename">openam-core-11.0.0.jar</code>, copy it to
    <code class="filename">WEB-INF/classes/</code> where OpenAM is deployed, and then
    edit the file to change the <code class="literal">fromAddress.label</code> property
    value, as in the following example.</p><pre class="literallayout">fromAddress.label=no-reply@example.com</pre><p>Save your work, and then restart OpenAM for the properties file change
    to take effect.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;8.3.&nbsp;To Prepare Users to Reset Passwords"><a name="prepare-users-for-pwd-reset"></a><div class="procedure-title">Procedure&nbsp;8.3.&nbsp;To Prepare Users to Reset Passwords</div><p>Before a user can reset her password, she must choose answers for
   secret questions.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>When her account is first created, direct the user to her
    <code class="literal">idm/EndUser</code> page, such as
    <code class="literal">http://openam.example.com:8080/openam/idm/EndUser</code>,
    where she can provide a valid email address to recover the reset password
    and can edit Password Reset Options.</p><div class="mediaobject" title="The OpenAM end user page"><a name="figure-console-end-user"></a><img src="images/console-end-user.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-end-user.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-end-user.html" target="longdesc">D</a>]</span></div></div><p>By default OpenAM console redirects end users to this page when
    they login.</p></li><li class="step" title="Step 2"><p>After the user updates her secret questions, she can use the
    password reset service when necessary.</p><div class="mediaobject" title="The OpenAM secret question page"><a name="figure-console-secret-questions"></a><img src="images/console-secret-questions.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-secret-questions.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-secret-questions.html" target="longdesc">D</a>]</span></div></div><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Answers to secret questions are case sensitive.</p></div></li></ol></div><div class="procedure" title="Procedure&nbsp;8.4.&nbsp;To Direct Users to Reset Passwords"><a name="redirect-to-reset-pwd"></a><div class="procedure-title">Procedure&nbsp;8.4.&nbsp;To Direct Users to Reset Passwords</div><p>Having setup her email and answers to secret questions, the user
   can use the reset password service.</p><p>Create a test subject and use these steps to validate your
   configuration.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Send the user with a forgotten password to enter her user ID at
    the password reset URL.</p><p>If the user is in the default realm use <code class="literal">password</code>
    at the end of the URL to OpenAM, as in
    <code class="literal">http://openam.example.com:8080/openam/password</code>.</p><p>If the password reset service is enabled only for the user's realm
    and not the parent realm, or the realm to reset the password is different
    from the user's default realm, use <code class="literal">ui/PWResetUserValidation?realm=<em class="replaceable"><code>realm
    name</code></em>, as in</code>
    <code class="literal">http://openam.example.com:8080/openam/ui/PWResetUserValidation?realm=<em class="replaceable"><code>realm
    name</code></em></code>.</p><div class="mediaobject" title="The OpenAM user validation page"><a name="figure-console-user-validation"></a><img src="images/console-user-validation.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-user-validation.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-user-validation.html" target="longdesc">D</a>]</span></div></div></li><li class="step" title="Step 2"><p>The user answers the specified questions, and clicks OK.</p><p>OpenAM resets the password, sending mail to the SMTP service
    you configured.</p><div class="mediaobject" title="The OpenAM user validation page"><a name="figure-console-answer-questions"></a><img src="images/console-answer-questions.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-console-answer-questions.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-answer-questions.html" target="longdesc">D</a>]</span></div></div><p>When the user clicks OK, OpenAM sends the email and shows a
    confirmation message.</p><p>The user receives the email with a line such as the following.</p><pre class="literallayout">Your OpenAM password was changed to:  647bWluw</pre></li><li class="step" title="Step 3"><p>The user logs in using the new password.</p><p>If you configured the system to force a change on password reset,
    then OpenAM requires the user to change her password.</p></li></ol></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;9.&nbsp;Configuring Single Sign-On within One Domain"><div class="titlepage"><div><div><h2 class="title"><a name="chap-sso"></a>Chapter&nbsp;9.&nbsp;Configuring Single Sign-On within One Domain</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#sso-cookies">9.1. The Basics of the HTTP Cookie</a></span></dt><dt><span class="section"><a href="#sso-process">9.2. Cookies and the SSO Session Process</a></span></dt><dt><span class="section"><a href="#sso-problems">9.3. Potential Problems</a></span></dt><dt><span class="section"><a href="#configure-sso-one-domain">9.4. Configure SSO on One Domain</a></span></dt></dl></div><p>This chapter describes the configuration of <em class="firstterm">Single Sign-On</em> (SSO) services for
        multiple resources on one domain. To understand how SSO works, you need to understand some key elements of the
        HTTP cookie, as described in RFC 6525, <a class="link" href="http://tools.ietf.org/html/rfc6265" target="_blank">
        HTTP State Management Mechanism</a>.</p><a class="indexterm" name="d16811e13267"></a><p>With SSO a user can access multiple independent services from a single session.</p><div class="section" title="9.1.&nbsp;The Basics of the HTTP Cookie"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sso-cookies"></a>9.1.&nbsp;The Basics of the HTTP Cookie</h2></div></div></div><p>Within an HTTP cookie, you can store a single custom
        <code class="literal"><em class="replaceable"><code>name</code></em>=<em class="replaceable"><code>value</code></em></code> pair, such as
        <code class="literal"><em class="replaceable"><code>sessionid</code></em>=<em class="replaceable"><code>value</code></em></code>.
        Other custom names within a cookie are as follows.</p><div class="variablelist"><dl><dt><span class="term">Domain</span></dt><dd><p>Normally set to the domain from where the cookie was issued. To work with multiple subdomains,
                    the <code class="varname">Domain</code> should be set to a URL like
                    <code class="varname">Domain</code><code class="literal">=example.net</code>. This is also known as the cookie domain,
                    as defined in the
                    <a href="../reference/index.html#chap-config-ref" class="link">
                    <em class="citetitle">Configuration Reference</em></a> chapter of the Reference document.
                    A cookie domain set to <code class="literal">example.net</code> will work for subdomains such as
                    <code class="literal">app1.example.net</code> and <code class="literal">service1.example.net</code>.
                    </p></dd><dt><span class="term">Path</span></dt><dd><p>The directory in the URL to which the cookie applies. If the <code class="varname">Path</code>
                    <code class="literal">=/openam</code>, the cookie applies to the <code class="filename">/openam</code> subdirectory of
                    the FQDN, and lower level directories, including <code class="filename">openam/UI</code> and
                    <code class="filename">openam/UI/Login</code>.</p></dd><dt><span class="term">Secure</span></dt><dd><p>If the <code class="varname">Secure</code> name is included, the cookie can be transferred only over
                    HTTPS. When a request is made over HTTP, the cookie is not made available to the application.</p></dd><dt><span class="term">HttpOnly</span></dt><dd><p>When the <code class="varname">HttpOnly</code> name is included, that cookie will not be accessible
                    through JavaScript. According to
                    <a class="link" href="http://tools.ietf.org/html/rfc6265#section-4.1.2.6" target="_blank">RFC 6265</a>,
                    the noted flag "instructs the user agent to omit the cookie when providing access to cookies via
                    'non-HTTP' APIs (such as a web browser API that exposes cookies to scripts)."</p></dd><dt><span class="term">Expires</span></dt><dd><p>The lifetime of a cookie can be limited, with an <code class="varname">Expires</code> name configured
                        with a time, based on UTC (GMT).</p></dd></dl></div><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>Be careful. Do not take a shortcut with a top-level domain. Web browser clients today are designed to
            ignore cookies set to top-level domains including <code class="literal">com</code>, <code class="literal">net</code>, and
            <code class="literal">co.uk</code>. In addition, a cookie with a value like <code class="varname">Domain</code>=
            <code class="literal">app1.example.net</code> will not work for similar subdomains such as
            <code class="literal">app2.example.net</code>.</p></div></div><div class="section" title="9.2.&nbsp;Cookies and the SSO Session Process"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sso-process"></a>9.2.&nbsp;Cookies and the SSO Session Process</h2></div></div></div><p>OpenAM uses cookies to track user sessions. The diagram shown next illustrates how OpenAM assigns and tracks
    cookies.</p><div class="itemizedlist"><p>In the diagram:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>The domain shown in the description is <code class="literal">example.net</code></p></li><li class="listitem"><p>The protected resource application can be found on <code class="literal">app.example.net</code></p></li><li class="listitem"><p>The OpenAM server is located on <code class="literal">sso.example.net</code>.</p></li></ul></div><div class="mediaobject" title="SSO with Policy Agent"><a name="figure-sso-web-sequence"></a><img src="images/ssov3.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-sso-web-sequence.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-sso-web-sequence.html" target="longdesc">D</a>]</span></div></div><p>A client points his browser to a protected resource application. An agent on the
    application checks the client browser cookies for the presence of a session ID, a component of
    an SSO Token. If such a Session ID exists and is valid, the agent requests validation  (see arrow 8).</p><p>If no valid session ID currently exists, the agent redirects the client to OpenAM for authentication (AuthN).
    The client is then sent to OpenAM for AuthN. If the client submits valid credentials, the AuthN service
    creates a session cookie. The SSO Token and configured domain name is embedded in that cookie. OpenAM issues an HTTP
    redirect to send the client browser back to the protected resource. The SSO Token is actually a Java Object.</p><p>The agent then verifies the validity of the session with the OpenAM session service, before granting access.
    </p></div><div class="section" title="9.3.&nbsp;Potential Problems"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sso-problems"></a>9.3.&nbsp;Potential Problems</h2></div></div></div><p>In general, problems with SSO relate to some sort of mismatch of domain names. For example, a cookie that is
    configured on a third-level domain such as <code class="literal">sso.example.net</code> will not work with an application on a
    similar domain such as <code class="literal">app.example.net</code>. Even if the Session ID is valid, the application will not
    receive the SSO Token. The request is then redirected to OpenAM. The client gets what appears as a SSO Token in the
    diagram, which is actually a valid SSO tracking cookie that redirects immediated, and the cycle continues.
    Other issues that may lead to similar problems are shown here.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>When a cookie domain does not match a domain for the protected application</p><p>Assume the application is configured on a domain named <code class="literal">example.org</code>. That application
        will not receive an SSO Token configured on the <code class="literal">example.net</code> domain.</p></li><li class="listitem"><p>When a third-level domain is used for the SSO Token</p><p>If an SSO Token is configured on <code class="literal">sso.example.net</code>, an application on
        <code class="literal">app.example.net</code> does not receive the corresponding cookie. In this case, the solution is to
        configure the SSO Token on <code class="literal">example.net</code>.</p></li><li class="listitem"><p>When the <code class="varname">Secure</code> flag is used with a regular HTTP application</p><p>If you need encrypted communications for an application protected by OpenAM, use the
        <code class="varname">Secure</code> flag and make sure the application is accessible over HTTPS.</p></li><li class="listitem"><p>When the path listed in the cookie does not match the path for the application</p><p>Perhaps the cookie is configured with an <code class="filename">/helloworld</code> path; that won't match an
        application that might be configured with an <code class="filename">/hellomars</code> path. In that case, the application
        will not receive the cookie.</p></li><li class="listitem"><p>When an inappropriate name is used for the cookie domain</p><p>As noted earlier, client browsers are configured to ignore first-level domains such as
        <code class="literal">com</code> and <code class="literal">net</code> as well as functional equivalents such as
        <code class="literal">co.uk</code> and <code class="literal">co.jp</code>.</p></li><li class="listitem"><p>When working with different browsers</p><p>The <code class="literal"><em class="replaceable"><code>name</code></em></code>=<code class="literal"><em class="replaceable"><code>value</code></em></code>
        pairs described earlier may not apply to all browsers. The requirements for an HTTP cookie sent to an IE
        browser may differ from the requirements for other standard browsers such as Firefox and Chrome. Based on
        anecdotal reports, IE does not recognize domain names that start with a number. In addition, IE reportedly
        refuses cookies that include the underscore (_) character in the FQDN.</p></li></ul></div></div><div class="section" title="9.4.&nbsp;Configure SSO on One Domain"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sso-one-domain"></a>9.4.&nbsp;Configure SSO on One Domain</h2></div></div></div><p>Now that you have read about the SSO process, you should be able to set it up on a server configured with
        OpenAM and a web service protected by an OpenAM agent. The following procedure assumes that you know how to
        configure OpenAM, the Apache Web server, and associated OpenAM Apache agent.</p><div class="procedure" title="Procedure&nbsp;9.1.&nbsp;Configure SSO on One Domain"><a name="sso-one-domain-procedure"></a><div class="procedure-title">Procedure&nbsp;9.1.&nbsp;Configure SSO on One Domain</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Install OpenAM as described in the <a href="../install-guide/index.html#install-guide" class="link"><em class="citetitle">OpenAM
            11.0.0 Installation Guide</em></a>. This procedure uses a Server URL of 
            <code class="literal">http://openam.example.net:8080/openam</code>.</p></li><li class="step" title="Step 2"><p>Install the appropriate policy agent, as described in the <a href="../web-install-guide/index.html#web-install-guide" class="link"><em class="citetitle">OpenAM Web Policy
            Agent 3.3.0 Installation Guide</em></a>
            or <a href="../jee-install-guide/index.html#jee-install-guide" class="link"><em class="citetitle">OpenAM Java EE Policy
            Agent 3.3.0 Installation Guide</em></a>. 
            This procedure uses an agent URL of <code class="literal">http://app.example.net:80</code>, 
            and an agent name of <code class="literal">webagent1</code>.</p></li><li class="step" title="Step 3"><p>Make sure that both URLs are configured with IP addresses, as described in the chapter on
            <a href="../install-guide/index.html#chap-install-core" class="link">
            <em class="citetitle">Installing OpenAM Core Services</em></a>.</p></li><li class="step" title="Step 4"><p>Return to the OpenAM server on <code class="literal">http://openam.example.net:8080/openam</code>. Log in as
                the administrative user, normally <code class="literal">amadmin</code>. To activate and configure the agent,
                follow the procedure described in the <a href="../web-install-guide/index.html#web-install-guide" class="link"><em class="citetitle">OpenAM Web Policy
                Agent 3.3.0 Installation Guide</em></a>
                or <a href="../jee-install-guide/index.html#jee-install-guide" class="link"><em class="citetitle">OpenAM Java EE Policy
                Agent 3.3.0 Installation Guide</em></a>.</p></li><li class="step" title="Step 5"><p>Now you can configure SSO Only mode. In the OpenAM console, click Access Control &gt;
                <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; <em class="replaceable"><code>webagent1</code></em>. Scroll down
                to SSO Only Mode and activate the Enabled box.</p></li><li class="step" title="Step 6"><p>Save your changes.</p></li><li class="step" title="Step 7"><p>Make sure you have configured the SSO domain, in this case, <code class="literal">example.net</code>. Click
            Configuration &gt; System &gt; Platform. Make sure <code class="literal">example.net</code> (or your chosen domain)
            is selected as a cookie domain.</p></li><li class="step" title="Step 8"><p>Save your changes.</p></li><li class="step" title="Step 9"><p>Restart the web server. The agent should be active. You should now be able to log out of the OpenAM
            server.</p></li><li class="step" title="Step 10"><p>Verify the agent URL, in this case, <code class="literal">http://app.example.net</code>. The OpenAM
            web agent should now redirect requests to the OpenAM server.</p></li></ol></div><p>If you want to configure OpenAM and an application on two different cookie domains, such as <code class="literal">example.org
    </code> and <code class="literal">example.net</code>, you will need to set up Cross-Domain SSO (CDSSO). For more
        information, see the chapter on
        <a href="../admin-guide/index.html#chap-cdsso" class="link">
            <em class="citetitle">Configuring Cross-Domain Single Sign On</em></a>.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;10.&nbsp;Configuring Cross-Domain Single Sign On"><div class="titlepage"><div><div><h2 class="title"><a name="chap-cdsso"></a>Chapter&nbsp;10.&nbsp;Configuring Cross-Domain Single Sign On</h2></div></div></div><p>This chapter shows you how to configure cross-domain single sign on
 (CDSSO). When you have multiple domains in a single organization, CDSSO lets
 your OpenAM servers in one domain work with policy agents from other
 domains.</p><p>CDSSO is an OpenAM-specific capability. For single sign on across
 multiple organizations or when integrating with other access management
 software, use OpenAM's federation capabilities.</p><a class="indexterm" name="d16811e13634"></a><p><em class="firstterm">Cross-domain single sign on</em> provides
 a safe mechanism for managing access across multiple different domains that
 you control. CDSSO lets OpenAM authenticate users redirected by policy agents
 in other DNS domains.</p><p>Single sign on depends on cookies to store session information. Yet for
 for security reasons, browsers do not let a web site in one domain to get
 access to a cookie from another domain. With CDSSO, the policy agents work
 around this by negotiating with OpenAM to allow access.</p><p>The Java EE policy agent allows CDSSO by using a mechanism to write
 the SSO token from OpenAM authentication to a cookie with the domain
 the host where the agent runs. The following sequence diagram illustrates
 this mechanism.</p><div class="mediaobject" title="Java EE policy agent mechanism for CDSSO"><a name="figure-cdsso-jee-sequence"></a><img src="images/cdsso-jee-sequence.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-cdsso-jee-sequence.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-cdsso-jee-sequence.html" target="longdesc">D</a>]</span></div></div><p>Whereas the Java EE policy agent has an endpoint specifically to handle
 the cookie domain translation, the web policy agent handles the request
 directly as shown in the following sequence diagram.</p><div class="mediaobject" title="Web policy agent mechanism for CDSSO"><a name="figure-cdsso-web-sequence"></a><img src="images/cdsso-web-sequence.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-cdsso-web-sequence.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-cdsso-web-sequence.html" target="longdesc">D</a>]</span></div></div><div class="itemizedlist"><p>This chapter includes the following procedures.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#enable-cdsso-jee-agent" title="Procedure&nbsp;10.1.&nbsp;To Enable CDSSO For a Java EE Policy Agent">Procedure&nbsp;10.1, &#8220;To Enable CDSSO For a Java EE Policy Agent&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#enable-cdsso-web-agent" title="Procedure&nbsp;10.2.&nbsp;To Enable CDSSO For a Web Policy Agent">Procedure&nbsp;10.2, &#8220;To Enable CDSSO For a Web Policy Agent&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#show-cdsso-login-progress" title="Procedure&nbsp;10.3.&nbsp;To Indicate Progress During CDSSO Login">Procedure&nbsp;10.3, &#8220;To Indicate Progress During CDSSO Login&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#enable-cdsso-cookie-hijacking-protection" title="Procedure&nbsp;10.4.&nbsp;To Protect Against CDSSO Cookie Hijacking">Procedure&nbsp;10.4, &#8220;To Protect Against CDSSO Cookie Hijacking&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#using-saml2-with-policy-agents" title="Procedure&nbsp;10.5.&nbsp;Using SAML 2.0 With Policy Agents">Procedure&nbsp;10.5, &#8220;Using SAML 2.0 With Policy Agents&#8221;</a></p></li></ul></div><div class="procedure" title="Procedure&nbsp;10.1.&nbsp;To Enable CDSSO For a Java EE Policy Agent"><a name="enable-cdsso-jee-agent"></a><div class="procedure-title">Procedure&nbsp;10.1.&nbsp;To Enable CDSSO For a Java EE Policy Agent</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; J2EE &gt;
   <em class="replaceable"><code>Agent Name</code></em> &gt; SSO.</p></li><li class="step" title="Step 2"><p>Scroll down and enable Cross Domain SSO.</p></li><li class="step" title="Step 3"><p>Check that the CDSSO Redirect URI is set.</p><p>Depending on where you deployed your Java EE agent application, the
   default is something like <code class="literal">/agentapp/sunwCDSSORedirectURI</code>.</p></li><li class="step" title="Step 4"><p>Set the list of URLs for CDSSO Servlet URL to the Cross Domain
   Controller Servlet URLs of the servers the agent accesses, such as
   <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>If the agent accesses OpenAM through a load balancer, use the load
   balancer URLs, such as
   <code class="literal">http://load-balancer.example.com:8080/openam/cdcservlet</code>.</p></li><li class="step" title="Step 5"><p>Leave the CDSSO Clock Skew set to 0.</p><p>Make sure instead that the clocks on the servers where you run OpenAM
   and policy agents are synchronized.</p></li><li class="step" title="Step 6"><p>Set the list of URLs for CDSSO Trusted ID Provider to the Cross Domain
   Controller Servlet URLs of the OpenAM servers the agent accesses, such
   <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>This list should include one CDC Servlet URL for every OpenAM server
   the agent might access. You do not need to include site or load balancer
   URLs.</p></li><li class="step" title="Step 7"><p>To protect the SSO token from network snooping, you can select CDSSO
   Secure Enable to mark the SSO token cookie as secure.</p><p>If you select this, then the SSO token cookie can only be sent over
   a secure connection (HTTPS).</p></li><li class="step" title="Step 8"><p>Add the domains involved in CDSSO in the CDSSO Domain List.</p></li><li class="step" title="Step 9"><p>If necessary, update the Agent Root URL for CDSSO list on the Global
   tab page.</p><p>If the policy agent is on a server with virtual host names, add the
   virtual host URLs to the list.</p><p>If the policy agent is behind a load balancer, add the load balancer
   URL to the list.</p></li><li class="step" title="Step 10"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;10.2.&nbsp;To Enable CDSSO For a Web Policy Agent"><a name="enable-cdsso-web-agent"></a><div class="procedure-title">Procedure&nbsp;10.2.&nbsp;To Enable CDSSO For a Web Policy Agent</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; Web &gt;
   <em class="replaceable"><code>Agent Name</code></em> &gt; SSO.</p></li><li class="step" title="Step 2"><p>Enable Cross Domain SSO.</p></li><li class="step" title="Step 3"><p>Set the list of URLs for CDSSO Servlet URL to the Cross Domain
   Controller Servlet URLs of the servers the agent accesses, such as
   <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>If the agent accesses OpenAM through a load balancer, use the load
   balancer URLs, such as
   <code class="literal">http://load-balancer.example.com:8080/openam/cdcservlet</code>.</p></li><li class="step" title="Step 4"><p>Add the domains involved in CDSSO in the Cookies Domain List.</p></li><li class="step" title="Step 5"><p>If necessary, update the Agent Root URL for CDSSO list on the Global
   tab page.</p><p>If the policy agent is on a server with virtual host names, add the
   virtual host URLs to the list.</p><p>If the policy agent is behind a load balancer, add the load balancer
   URL to the list.</p></li><li class="step" title="Step 6"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;10.3.&nbsp;To Indicate Progress During CDSSO Login"><a name="show-cdsso-login-progress"></a><div class="procedure-title">Procedure&nbsp;10.3.&nbsp;To Indicate Progress During CDSSO Login</div><p>The default self-submitting form page that OpenAM presents to users
  contains hidden fields, but is otherwise blank. If you want to show users
  that the operation is in progress, then customize the necessary JSP.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Edit a copy of the file
   <code class="filename">config/federation/default/cdclogin.jsp</code> to add a
   clue that SSO is in progress, such as an image.</p><p>You can find this file where you deployed OpenAM, such as
   <code class="filename">/path/to/tomcat/webapps/openam/config/federation/default/cdclogin.jsp</code>.</p><p>When you add an image or other presentation element, make sure that
   you retain the form and JavaScript as is.</p></li><li class="step" title="Step 2"><p>Unpack OpenAM-11.0.0.war, and replace the file with your
   modified version.</p><p>Also include any images you reference in the page.</p></li><li class="step" title="Step 3"><p>Pack up your custom version of OpenAM, and then deploy it in your
   web container.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;10.4.&nbsp;To Protect Against CDSSO Cookie Hijacking"><a name="enable-cdsso-cookie-hijacking-protection"></a><div class="procedure-title">Procedure&nbsp;10.4.&nbsp;To Protect Against CDSSO Cookie Hijacking</div><p>When cookies are set for an entire domain such as
  <code class="literal">.example.com</code>, an attacker who steals a cookie can use it
  from any host in the domain such as <code class="literal">untrusted.example.com</code>.
  Cookie hijacking protection restricts cookies to the fully-qualified domain
  name (FQDN) of the host where they are issued, such as
  <code class="literal">openam-server.example.com</code> and
  <code class="literal">server-with-agent.example.com</code>, using CDSSO to handle
  authentication and authorization.</p><p>For CDSSO with cookie hijacking protection, when a client successfully
  authenticates OpenAM issues the master SSO token cookie for its FQDN.
  OpenAM issues <em class="firstterm">restricted token</em> cookies for the
  other FQDNs where the policy agents reside. The client ends up with cookies
  having different session identifiers for different FQDNs, and the OpenAM
  server stores the correlation between the master SSO token and restricted
  tokens, such that the client only has one master session internally in
  OpenAM.</p><p>To protect against cookie hijacking you restrict the OpenAM server
  domain to the server where OpenAM runs. This sets the domain of the SSO token
  cookie to the host running the OpenAM server that issued the token. You also
  enable use of a unique SSO token cookie. For your Java EE policy agents, you
  enable use of the unique SSO token cookie in the agent configuration as
  well.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Configuration &gt; System &gt;
   Platform.</p></li><li class="step" title="Step 2"><p>Remove the domain such as <code class="literal">.example.com</code> from the
   Cookies Domains list, and replace it with the server host name such as
   <code class="literal">openam.example.com</code>, or if OpenAM is behind a load
   balancer with the load balancer host name, such as
   <code class="literal">load-balancer.example.com</code>.</p></li><li class="step" title="Step 3"><p>Save your work.</p></li><li class="step" title="Step 4"><p>In the OpenAM console, browse to Configuration &gt; Servers and Sites
   &gt; Default Server Settings &gt; Advanced, and then make the necessary
   changes.</p><ol type="a" class="substeps"><li class="step" title="Step 4.a"><p>Change the setting for the property
     <code class="literal">com.sun.identity.enableUniqueSSOTokenCookie</code> to
     <code class="literal">true</code>, from the default <code class="literal">false</code>.</p></li><li class="step" title="Step 4.b"><p>Make sure that the property
     <code class="literal">com.sun.identity.authentication.uniqueCookieName</code> is
     set to the name of the cookie that will hold the URL to the OpenAM server
     that authenticated the user.</p><p>The default name is <code class="literal">sunIdentityServerAuthNServer</code>.</p></li></ol><p>Save your work.</p></li><li class="step" title="Step 5"><p>Browse to Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
   Name</code></em> &gt; Advanced, and add the property
   <code class="literal">com.sun.identity.authentication.uniqueCookieDomain</code>,
   setting the value to the fully-qualified domain name of the current OpenAM
   server, such as <code class="literal">openam.example.com</code>.</p><p>Then Save your work.</p></li><li class="step" title="Step 6"><p>For each Java EE policy agent, browse in the OpenAM console to Access
   Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; J2EE &gt;
   <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced &gt; Custom Properties,
   and add <code class="literal">com.sun.identity.enableUniqueSSOTokenCookie=true</code>
   to the list.</p></li><li class="step" title="Step 7"><p>Save your work.</p></li><li class="step" title="Step 8"><p>Restart OpenAM or the container in which it runs for the configuration
   changes to take effect.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;10.5.&nbsp;Using SAML 2.0 With Policy Agents"><a name="using-saml2-with-policy-agents"></a><div class="procedure-title">Procedure&nbsp;10.5.&nbsp;Using SAML 2.0 With Policy Agents</div><p>The federation mechanism associated with SAML can be used as an alternative to
   CDSSO for both Web and Java EE policy agents. This assumes OpenAM is configured as an
   IDP on one domain, and the desired policy agent protects resources on behalf of a second
   instance of OpenAM, where that instance acts as an SP on a second domain.</p><p>While using SAML 2.0 adds complexity, it supports attribute
   mapping, which may be useful when the two domains are associated with datastores
   with different attributes.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Install a policy agent. The basic process for installing policy agents is available in the
    <a class="link" href="web-install-guide" target="_blank"><em class="citetitle">OpenAM Web Policy Agent
    Installation Guide</em></a> and the <a class="link" href="jee-install-guide" target="_blank"><em class="citetitle">OpenAM Java EE Policy Agent
    Installation Guide</em></a>.</p></li><li class="step" title="Step 2"><p>Now you can replace the given OpenAM Login URL and OpenAM Logout URLs with SAML2 URLs
    configured in the section on <a href="../admin-guide/index.html#chap-federation" class="link"><em class="citetitle">Managing SAML 2.0 Federation</em>
    </a>.</p></li><li class="step" title="Step 3"><ul class="stepalternatives">
     <li class="step" title="Step 3.1"><p>If you have configured the Web policy agents to store their properties centralized on an
       OpenAM server, navigate to the URL for the OpenAM console.
       Select Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; Web &gt;
       <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM Services. </p><p>For the Web Agent, under the OpenAM Services tab, in the Agent Logout URL section, set up a
       list of application logout URLs. In the Logout Redirect URL text box, enter an appropriate URL to
       redirect the user after logout.</p></li>
      <li class="step" title="Step 3.2"><p>Alternatively, if the Web policy agents are set up to store properties on local systems, find
       the <code class="filename">OpenSSOAgentConfiguration.properties</code> file in the
       <code class="filename">/path/to/agent/config/</code> directory. You can specify OpenAM Login and Logout URLs
       with the <code class="literal">com.sun.identity.agents.config.login.url</code> and
       <code class="literal">com.sun.identity.agents.config.logout.url</code> attributes, respectively.</p></li>
     </ul></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;11.&nbsp;Configuring the Dashboard Service"><div class="titlepage"><div><div><h2 class="title"><a name="chap-dashboard"></a>Chapter&nbsp;11.&nbsp;Configuring the Dashboard Service</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-the-dashboard">11.1. About the Dashboard Service</a></span></dt><dt><span class="section"><a href="#dashboard-setup">11.2. Setting Up the Dashboard Service</a></span></dt><dt><span class="section"><a href="#dashboard-realms">11.3. Configuring Dashboard Service for a Realm</a></span></dt><dt><span class="section"><a href="#dashboard-users">11.4. Adding Applications to a User's Dashboard</a></span></dt></dl></div><a class="indexterm" name="d16811e13975"></a><p>This chapter shows how to configure the OpenAM <em class="firstterm">Dashboard</em>.</p><div class="section" title="11.1.&nbsp;About the Dashboard Service"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-the-dashboard"></a>11.1.&nbsp;About the Dashboard Service</h2></div></div></div><p>The Dashboard service provides the end user with an interface to access
   applications secured by OpenAM, both cloud-based applications like SalesForce
   and internal applications protected by policy agents. The Dashboard service uses SSO to 
   login to the applications when the user clicks on the application icon. For some apps, 
   like SalesForce, you will want to limit access to only a few users. Other apps, 
   like Google Mail or Drive, you will probably want to make available to all users.</p><div class="mediaobject" title="User Dashboard screen"><a name="figure-user-dashboard"></a><img src="images/user-dashboard.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-user-dashboard.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-user-dashboard.html" target="longdesc">D</a>]</span></div></div><p>The Dashboard service is meant to give users a single place to access their
   applications. Keep in mind that this does not limit user access, only what appears
   on the user Dashboard.</p><div class="itemizedlist"><p>There are three stages to setting up the Dashboard service.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Setup the Dashboard service and add applications.</p></li><li class="listitem"><p>Add the service to the realms.</p></li><li class="listitem"><p>Assign users applications so that they appear on the users' Dashboards. 
     This can be done manually or through a provisioning solution.</p></li></ul></div></div><div class="section" title="11.2.&nbsp;Setting Up the Dashboard Service"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dashboard-setup"></a>11.2.&nbsp;Setting Up the Dashboard Service</h2></div></div></div><p>Making some applications universally available ensures that all users have the same
   basic applications. However, some of your applications should be protected from the
   majority of your users. You will need to single out which users will include the 
   application on their Dashboard.</p><p>There are three default applications in the Dashboard service: Google, SalesForce,
   and ZenDesk.</p><div class="procedure" title="Procedure&nbsp;11.1.&nbsp;To Add Applications from the Dashboard"><a name="dashboard-add"></a><div class="procedure-title">Procedure&nbsp;11.1.&nbsp;To Add Applications from the Dashboard</div><p>You can add applications to the Dashboard service with the following steps.
    All fields except the Dashboard Class name and ICF Identifier are required for 
    the application to work properly from the Dashboard.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as OpenAM Administrator,
     <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>On the Configuration tab &gt; Global &gt; Dashboard click New
     to add a new application to the Dashboard service and to provide the information
     needed to connect to the app. </p></li><li class="step" title="Step 3"><p>Provide a unique name for the application.</p></li><li class="step" title="Step 4"><p>Add a Dashboard Class Name that identifies how the end user
     will access the app, such as <code class="literal">SAML2ApplicationClass</code>
     for a SAML 2.0 application.</p></li><li class="step" title="Step 5"><p>Add a Dashboard Name for the application.</p></li><li class="step" title="Step 6"><p>Add a Dashboard Display Name. This name is what the end user
     will see, such as Google.</p></li><li class="step" title="Step 7"><p>Add the Dashboard Icon you would like the end user to see for the application. 
     Either use a fully-qualified URL or an appropriate relative URL so that the
     icon is rendered properly on the user Dashboard.</p></li><li class="step" title="Step 8"><p>Add the Dashboard Login URL to point to the location the end user
     will go to once they click on the icon.</p></li><li class="step" title="Step 9"><p>Leave the ICF Identifier blank.</p></li><li class="step" title="Step 10"><p>Click Add when you are done.</p></li></ol></div></div><div class="section" title="11.3.&nbsp;Configuring Dashboard Service for a Realm"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dashboard-realms"></a>11.3.&nbsp;Configuring Dashboard Service for a Realm</h2></div></div></div><div class="procedure" title="Procedure&nbsp;11.2.&nbsp;To Add the Application Dashboard Service to a Realm"><a name="dashboard-single-realm"></a><div class="procedure-title">Procedure&nbsp;11.2.&nbsp;To Add the Application Dashboard Service to a Realm</div><p>You must add the Dashboard service to a realm before it will be available. 
    The following instructions show you how to add an application to a single realm.
    Before you begin, make sure you have the name of the application as it appears
    on the Secondary Configuration Instance table under Configuration &gt; Global 
    &gt; Dashboard.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
     &gt; Services, click Add....</p></li><li class="step" title="Step 2"><p>Select the Dashboard service, then click Next.</p></li><li class="step" title="Step 3"><p>Add or remove the applications you would like to appear on the Dashboard
     service for the realm.</p></li><li class="step" title="Step 4"><p>Click Finish when you are done.</p></li></ol></div></div><div class="section" title="11.4.&nbsp;Adding Applications to a User's Dashboard"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dashboard-users"></a>11.4.&nbsp;Adding Applications to a User's Dashboard</h2></div></div></div><div class="procedure" title="Procedure&nbsp;11.3.&nbsp;To Add an Application to a User's Dashboard"><a name="assign-app-to-user"></a><div class="procedure-title">Procedure&nbsp;11.3.&nbsp;To Add an Application to a User's Dashboard</div><a class="indexterm" name="d16811e14087"></a><p>Use the following steps to add an application to a user's Dashboard.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
      &gt; Subjects, click the user identifier to edit the user's profile.</p></li><li class="step" title="Step 2"><p>Under Services, click Dashboard.</p></li><li class="step" title="Step 3"><p>Add the application beside the user name under the user's Assigned
      Dashboard list.</p></li><li class="step" title="Step 4"><p>Click Save.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;11.4.&nbsp;Removing User Access to an Application"><a name="dashboard-remove-user-access"></a><div class="procedure-title">Procedure&nbsp;11.4.&nbsp;Removing User Access to an Application</div><a class="indexterm" name="d16811e14110"></a><p>You may need to remove an application from user's Dashboard, but
     you don't want to entirely delete the user. The following steps walk you through
     removing an application from a user's Dashboard.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
      &gt; Subjects, click the user identifier to edit the user's profile.</p></li><li class="step" title="Step 2"><p>Under Services, click Dashboard.</p></li><li class="step" title="Step 3"><p>Delete the application beside the user name under the user's Assigned
      Dashboard list.</p></li><li class="step" title="Step 4"><p>Click Save.</p></li></ol></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;12.&nbsp;Managing SAML 2.0 Federation"><div class="titlepage"><div><div><h2 class="title"><a name="chap-federation"></a>Chapter&nbsp;12.&nbsp;Managing SAML 2.0 Federation</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-federation">12.1. About SAML 2.0 SSO &amp; Federation</a></span></dt><dt><span class="section"><a href="#set-up-federation">12.2. Setting Up SAML 2.0 SSO</a></span></dt><dt><span class="section"><a href="#configure-idp">12.3. Configuring Identity Providers</a></span></dt><dt><span class="section"><a href="#configure-sp">12.4. Configuring Service Providers</a></span></dt><dt><span class="section"><a href="#configure-cot">12.5. Configuring Circles of Trust</a></span></dt><dt><span class="section"><a href="#google-apps-as-sp">12.6. Configuring Google Apps as a Remote Service Provider</a></span></dt><dt><span class="section"><a href="#salesforce-as-sp">12.7. Configuring Salesforce CRM as a Remote Service Provider</a></span></dt><dt><span class="section"><a href="#using-saml2-sso-slo">12.8. Using SAML 2.0 Single Sign-On &amp; Single Logout</a></span></dt><dt><span class="section"><a href="#saml2-ecp-config">12.9. Configuring OpenAM For the ECP Profile</a></span></dt><dt><span class="section"><a href="#federation-linking-accounts">12.10. Managing Federated Accounts</a></span></dt><dt><span class="section"><a href="#using-saml2-artifacts">12.11. Using SAML 2.0 Artifacts</a></span></dt></dl></div><p>This chapter addresses how to set up and manage SAML 2.0 SSO for
 single sign on and single log out across resources belonging to
 organizations participating in a circle of trust.</p><div class="section" title="12.1.&nbsp;About SAML 2.0 SSO &amp; Federation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-federation"></a>12.1.&nbsp;About SAML 2.0 SSO &amp; Federation</h2></div></div></div><a class="indexterm" name="d16811e14139"></a><p>SAML 2.0 SSO is part of federated access management. Federation lets
  access management cross organizational boundaries. Federation helps
  organizations share identities and services without giving away their
  identity information, or the services they provide.</p><p>To bridge heterogeneous systems, federation requires interoperability,
  and thus depends on standards for orchestrating interaction and exchanging
  information between providers. OpenAM federation relies on standards such as
  <a class="link" href="http://saml.xml.org/saml-specifications" target="_top">Security Assertion
  Markup Language (SAML) 2.0</a>. SAML 2.0 describes the messages, how they
  are relayed, how they are exchanged, and common use cases.</p><div class="itemizedlist"><p>To achieve SAML 2.0 SSO, OpenAM separates <em class="firstterm">identity
   providers</em> from <em class="firstterm">service providers</em>,
   lets you include them them in a <em class="firstterm">circle of trust</em>, and
   has you configure how the providers in the circle of trust interact.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>An identity provider stores and serves identity profiles, and
    handles authentication.</p></li><li class="listitem"><p>A service provider offers services that access protected
    resources, and handles authorization.</p></li><li class="listitem"><p>A circle of trust groups at least one identity provider and at least
    one service provider who agree to share authentication information, with
    assertions about authenticated users that let service providers make
    authorization decisions.</p><p>Providers in a circle of trust share <em class="firstterm">metadata</em>,
    configuration information that federation partners require to access each
    others' services.</p></li><li class="listitem"><p>SAML 2.0 SSO maps attributes from accounts at the identity provider to
    attributes on accounts at the service provider. The identity provider makes
    assertions to the service provider, for example to attest that a user has
    authenticated with the identity provider. The service provider then
    consumes assertions from the identity provider to make authorization
    decisions, for example to let an authenticated user complete a purchase
    that gets charged to the user's account at the identity provider.</p></li></ul></div><p>In federation deployments where not all providers support SAML 2.0,
  OpenAM can act as a multi-protocol hub, translating for providers who rely
  on other and older standards such as SAML 1.x, Liberty Alliance Project
  frameworks, and WS-Federation (for integration with Active Directory
  Federation Services, for example).</p></div><div class="section" title="12.2.&nbsp;Setting Up SAML 2.0 SSO"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="set-up-federation"></a>12.2.&nbsp;Setting Up SAML 2.0 SSO</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#deploy-idp-discovery">12.2.1. Deploying the Identity Provider Discovery Service</a></span></dt></dl></div><div class="itemizedlist"><p>Before you set up SAML 2.0 SSO in OpenAM, you must:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Know which providers participate in the circle of trust.</p></li><li class="listitem"><p>Know how OpenAM installations act as identity providers, or
    service providers.</p></li><li class="listitem"><p>Agree with other providers on a synchronized time service.</p></li><li class="listitem"><p>For identity information exchanged with other participants in a
    circle of trust, define how to map shared user attributes. Local user
    profile attribute names should map to user profile attribute names at other
    providers.</p><p>For example, if you exchange user identifiers with your partners, and
    you call it <code class="literal">uid</code> whereas another partner calls it
    <code class="literal">userid</code>, then you map your <code class="literal">uid</code> to
    your partner's <code class="literal">userid</code>.</p></li><li class="listitem"><p>Import the keys used to sign assertions into the JKS key store in
    your OpenAM configuration directory. You can use the Java
    <span class="command"><strong>keytool</strong></span> command.</p><p>The OpenAM configuration key store is located at the top level of
    the configuration directory, such as
    <code class="filename">$HOME/openam/keystore.jks</code>. The password,
    stored in <code class="filename">$HOME/openam/.keypass</code>, is
    <code class="literal">changeit</code> by default. Also by default the only key
    available is for a self-signed certificate (alias: test) installed with
    OpenAM.</p></li></ul></div><p>During set up, you must share metadata for providers that you host
  with other providers in the circle of trust. You must also configure
  remote providers, connecting to other providers by importing their
  metadata.</p><p>In OpenAM terms, a hosted provider is one served by the current
  OpenAM server, whereas a remote provider is one hosted elsewhere.</p><div class="itemizedlist"><p>This section covers the following topics.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#create-hosted-idp" title="Procedure&nbsp;12.1.&nbsp;To Create a Hosted Identity Provider">Procedure&nbsp;12.1, &#8220;To Create a Hosted Identity Provider&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#create-hosted-sp" title="Procedure&nbsp;12.2.&nbsp;To Create a Hosted Service Provider">Procedure&nbsp;12.2, &#8220;To Create a Hosted Service Provider&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#create-remote-idp" title="Procedure&nbsp;12.3.&nbsp;To Create a Remote Identity Provider">Procedure&nbsp;12.3, &#8220;To Create a Remote Identity Provider&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#create-remote-sp" title="Procedure&nbsp;12.4.&nbsp;To Create a Remote Service Provider">Procedure&nbsp;12.4, &#8220;To Create a Remote Service Provider&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#create-fedlet" title="Procedure&nbsp;12.5.&nbsp;To Create a Fedlet for Service Providers">Procedure&nbsp;12.5, &#8220;To Create a Fedlet for Service Providers&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="#deploy-idp-discovery" title="12.2.1.&nbsp;Deploying the Identity Provider Discovery Service">Section&nbsp;12.2.1, &#8220;Deploying the Identity Provider Discovery Service&#8221;</a></p></li></ul></div><div class="procedure" title="Procedure&nbsp;12.1.&nbsp;To Create a Hosted Identity Provider"><a name="create-hosted-idp"></a><div class="procedure-title">Procedure&nbsp;12.1.&nbsp;To Create a Hosted Identity Provider</div><a class="indexterm" name="d16811e14257"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the OpenAM console Common Tasks page, click Create Hosted Identity
    Provider.</p></li><li class="step" title="Step 2"><p>Unless you already have metadata for the provider, accept the
    Name for this identity provider in the field provided, or provide your
    own unique identifier.</p><p>The default name is the URL to the current server which hosts the
    identity provider.</p></li><li class="step" title="Step 3"><p>Select the Signing Key you imported into the OpenAM key store.</p></li><li class="step" title="Step 4"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 5"><p>For the attributes you share, map service provider attribute names
    (Name in Assertion), to user profile names from your identity repository
    (Local Attribute Name).</p><p>The default IDP mapping implementation allows you to add static values
    in addition to values taken from the user profile. You add a static value
    by enclosing the profile attribute name in double quotes
    (<code class="literal">"</code>), as in the following examples.</p><p>To add a static SAML attribute called <code class="literal">partnerID</code>
    with a value of <code class="literal">staticPartnerIDValue</code>, add
    <code class="literal">partnerID</code> as the Name in Assertion with
    <code class="literal">"staticPartnerIDValue"</code> as the Local Attribute
    Name.</p><p>
    The default IDP attribute mapper also allows you
    to Base64 encode binary attributes when adding them to the SAML attributes.
    Add <code class="literal">;binary</code> to the end of the attribute name,
    as in the following example:
   </p><pre class="literallayout">objectGUID=objectGUID;binary</pre><p>
    This maps the local binary attribute <code class="literal">objectGUID</code>
    to a SAML attribute called <code class="literal">objectGUID</code> that is Base64 encoded.
   </p><p>
    The default IDP attribute mapper also supports
    <code class="literal">NameFormatURI</code> format as shown in the following example:
   </p><pre class="literallayout">urn:oasis:names:tc:SAML:2.0:attrname-format:uri|objectGUID=objectGUID;binary</pre></li><li class="step" title="Step 6"><p>Click Configure to save your configuration.</p></li><li class="step" title="Step 7"><p>Export the XML-based metadata from your provider to share
    with other providers in your circle of trust.</p><div class="screen"><pre class="brush: plain;">$ curl -o metadata.xml
 http://www.idp.example:8080/openam/saml2/jsp/exportmetadata.jsp?entityid=
 http://www.idp.example:8080/openam&amp;realm=/realm-name</pre></div><p>When you have configured only the top-level realm,
    <code class="literal">/</code>, you can omit the query string.</p><p>Alternatively, provide the URL, to other providers so they can load
    the metadata.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.2.&nbsp;To Create a Hosted Service Provider"><a name="create-hosted-sp"></a><div class="procedure-title">Procedure&nbsp;12.2.&nbsp;To Create a Hosted Service Provider</div><a class="indexterm" name="d16811e14340"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the OpenAM console Common Tasks page, click Create Hosted Service
    Provider.</p></li><li class="step" title="Step 2"><p>Unless you already have metadata for the provider, accept the
    Name for this service provider in the field provided, or provide your
    own unique identifier.</p><p>The default name is the URL to the current server which hosts the
    service provider.</p></li><li class="step" title="Step 3"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 4"><p>If the identity provider has not already mapped the attributes you
    share, map identity provider attribute names (Name in Assertion), to user
    profile names from your identity repository (Local Attribute Name).</p></li><li class="step" title="Step 5"><p>Click Configure to save your configuration.</p></li><li class="step" title="Step 6"><p>Export the XML-based metadata from your provider to share
    with other providers in your circle of trust.</p><div class="screen"><pre class="brush: plain;">$ curl -o metadata.xml
 http://www.sp.example:8080/openam/saml2/jsp/exportmetadata.jsp?entityid=
 http://www.sp.example:8080/openam&amp;realm=/realm-name</pre></div><p>When you have configured only the top-level realm,
    <code class="literal">/</code>, you can omit the query string.</p><p>Alternatively, provide the URL, to other providers so they can load
    the metadata.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.3.&nbsp;To Create a Remote Identity Provider"><a name="create-remote-idp"></a><div class="procedure-title">Procedure&nbsp;12.3.&nbsp;To Create a Remote Identity Provider</div><a class="indexterm" name="d16811e14379"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Obtain the identity provider metadata, or the URL where you can
    obtain it.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Register Remote
    Identity Provider.</p></li><li class="step" title="Step 3"><p>Provide the identity provider metadata or link to obtain
    metadata.</p></li><li class="step" title="Step 4"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 5"><p>Click Configure to save your configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.4.&nbsp;To Create a Remote Service Provider"><a name="create-remote-sp"></a><div class="procedure-title">Procedure&nbsp;12.4.&nbsp;To Create a Remote Service Provider</div><a class="indexterm" name="d16811e14402"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Obtain the service provider metadata, or the URL where you can
    obtain it.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Register Remote Service
    Provider.</p></li><li class="step" title="Step 3"><p>Provide the identity provider metadata or link to obtain
    metadata.</p></li><li class="step" title="Step 4"><p>If the identity provider has not already mapped the attributes you
    share, map identity provider attribute names (Name in Assertion), to user
    profile names from your identity repository (Local Attribute Name).</p></li><li class="step" title="Step 5"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 6"><p>Click Configure to save your configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.5.&nbsp;To Create a Fedlet for Service Providers"><a name="create-fedlet"></a><div class="procedure-title">Procedure&nbsp;12.5.&nbsp;To Create a Fedlet for Service Providers</div><a class="indexterm" name="d16811e14428"></a><p>When your organization acts as the identity provider, and you want
   quickly to enable service providers to federate their services with yours,
   you can provide them with a <em class="firstterm">fedlet</em>. A fedlet is
   a small Java or .NET web application that can act as a service provider for
   a specific identity provider without requiring that you install all of
   OpenAM.</p><p>Fedlets support the following SAML 2.0 features.</p><div class="table"><a name="fedlet-saml2-features"></a><div class="table-title">Table&nbsp;12.1.&nbsp;Fedlet Support for SAML 2.0 Features</div><div class="table-contents"><table summary="Fedlet Support for SAML 2.0 Features" border="0"><colgroup><col width="66%"><col width="17%"><col width="17%"></colgroup><thead><tr><th>SAML 2.0 Feature</th><th>Java Fedlet</th><th>.NET Fedlet</th></tr></thead><tbody><tr><td>IDP &amp; SP-initiated Single Sign-On (HTTP Artifact)</td><td>Supported</td><td>Supported</td></tr><tr><td>IDP &amp; SP-initiated Single Sign-On (HTTP POST)</td><td>Supported</td><td>Supported</td></tr><tr><td>IDP &amp; SP-initiated Single Logout (HTTP POST)</td><td>Supported</td><td>Supported</td></tr><tr><td>IDP &amp; SP-initiated Single Logout (HTTP Redirect)</td><td>Supported</td><td>Supported</td></tr><tr><td>Sign Requests &amp; Responses</td><td>Supported</td><td>Supported</td></tr><tr><td>Encrypt Assertion, Attribute, &amp; NameID Elements</td><td>Supported</td><td>Supported</td></tr><tr><td>Export SP Metadata</td><td>Supported</td><td>Supported</td></tr><tr><td>Attribute Queries</td><td>Supported</td><td>Supported</td></tr><tr><td>XACML Requests</td><td>Supported</td><td>Not supported</td></tr><tr><td>Multiple IDPs</td><td>Supported</td><td>Supported</td></tr><tr><td>External IDP Discovery Service</td><td>Supported</td><td>Supported</td></tr><tr><td>Bundled IDP Reader Service for Discovery</td><td>Supported</td><td>Not supported</td></tr></tbody></table></div></div><br class="table-break"><p>For more information on using fedlets, see <a href="../dev-guide/index.html#chap-fedlet-java" class="link"><em class="citetitle">Using Fedlets in
   Java Web Applications</em></a> and <a href="../dev-guide/index.html#chap-fedlet-dotnet" class="link"><em class="citetitle">Using Fedlets in
   .NET Applications</em></a> in the <em class="citetitle">Developer's
   Guide</em>.</p><p>The following procedure describes how to create a Java Fedlet.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you have not done so already, set up your identity provider.</p></li><li class="step" title="Step 2"><p>Enter the URL where the service provider will deploy the fedlet you
    create, and name the fedlet. If you create multiple fedlets, use the URL
    as a unique name that shows who has deployed the fedlet.</p></li><li class="step" title="Step 3"><p>For the attributes you share, map service provider attribute names
    (Name in Assertion), to user profile names from your identity repository
    (Local Attribute Name).</p></li><li class="step" title="Step 4"><p>Click Create to generate the <code class="filename">Fedlet.zip</code>
    file under the OpenAM configuration directory, such as
    <code class="filename">$HOME/openam/myfedlets/httpwwwexamplecom80myapp/Fedlet.zip</code>.</p></li><li class="step" title="Step 5"><p>Give the <code class="filename">Fedlet.zip</code> file to the service
    provider for deployment.</p></li></ol></div><div class="section" title="12.2.1.&nbsp;Deploying the Identity Provider Discovery Service"><div class="titlepage"><div><div><h3 class="title"><a name="deploy-idp-discovery"></a>12.2.1.&nbsp;Deploying the Identity Provider Discovery Service</h3></div></div></div><p>When your circle of trust includes multiple identity providers, then
   service providers must discover which identity provider corresponds to a
   request. You can deploy the identity provider discovery service for this
   purpose as a separate web application.</p><p>Browsers only send cookies for the originating domain. Therefore
   when a browser accesses the service provider in the <code class="literal">www.sp.example</code>
   domain, the service provider has no way of knowing whether the user has
   perhaps already authenticated at <code class="literal">www.this-idp.example</code> or at
   <code class="literal">www.that-idp.example</code>. The providers therefore host an identity
   provider discovery service in a common domain, such as
   <code class="literal">www.disco.example</code>, and use that service to discover where
   the user logged in. The identity provider discover service essentially
   writes and reads cookies from the common domain. The providers configure
   their circle of trust to use the identity provider discovery service
   as part of SAML 2.0 federation.</p><p>Deploying the identity provider discovery service involves the
   following stages.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Deploy the .war file into your web application container.</p></li><li class="listitem"><p>Configure the discovery service.</p></li><li class="listitem"><p>Add the identity provider discovery service endpoints for writing
     cookies to and reading cookies from the common domain to the circle of
     trust configurations for the providers.</p></li><li class="listitem"><p>Share metadata between identity providers and the service
     provider.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.6.&nbsp;To Deploy the Discovery Service on Tomcat"><a name="deploy-idpdisco-on-tomcat"></a><div class="procedure-title">Procedure&nbsp;12.6.&nbsp;To Deploy the Discovery Service on Tomcat</div><p>How you deploy the discovery service .war file depends on your web
    application container. The procedure in this section shows how to deploy
    on Apache Tomcat.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Copy the <code class="filename">IDPDiscovery-11.0.0.war</code> file to
     the <code class="filename">webapps/</code> directory.</p><div class="screen"><pre class="brush: plain;">$ cp ~/Downloads/openam/IDPDiscovery-11.0.0.war /path/to/tomcat/webapps/disco.war</pre></div></li><li class="step" title="Step 2"><p>Access the configuration screen through your browser.</p><p>In this example, Apache Tomcat listens for HTTP requests on
     <code class="literal">www.disco.example:8080</code>, and Tomcat has unpacked the
     application under <code class="literal">/disco</code>, so the URL is
     <code class="literal">http://www.disco.example:8080/disco</code>, which redirects to
     <code class="filename">Configurator.jsp</code>.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.7.&nbsp;To Configure the Discovery Service"><a name="configure-idpdisco-deployed"></a><div class="procedure-title">Procedure&nbsp;12.7.&nbsp;To Configure the Discovery Service</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Configure the identity provider discovery service.</p><div class="mediaobject" title="Completed discovery service configuration screen"><a name="figure-idp-disco-config"></a><img src="images/idp-disco-config.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-idp-disco-config.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-idp-disco-config.html" target="longdesc">D</a>]</span></div></div><p>Hints for discovery service configuration parameters follow.</p><div class="variablelist"><dl><dt><span class="term">Debug Directory</span></dt><dd><p>The discovery service logs to flat files in this directory.</p></dd><dt><span class="term">Debug Level</span></dt><dd><p>Default is <code class="literal">error</code>. Other options include
        <code class="literal">error</code>, <code class="literal">warning</code>,
        <code class="literal">message</code>, and <code class="literal">off</code>.</p><p>Set this to <code class="literal">message</code> in order to see the
        service working when you run your initial tests.</p></dd><dt><span class="term">Cookie Type</span></dt><dd><p>Set to PERSISTENT if you have configured OpenAM to use persistent
        cookies, meaning single sign on cookies that can continue to be valid
        after the browser is closed.</p></dd><dt><span class="term">Cookie Domain</span></dt><dd><p>The cookie domain is the common cookie domain used in your circle
        of trust for identity provider discovery, in this case
        <code class="literal">.disco.example</code>.</p></dd><dt><span class="term">Secure Cookie</span></dt><dd><p>Set this to true if clients should only return cookies when
        a secure connection is used.</p></dd><dt><span class="term">Encode Cookie</span></dt><dd><p>Leave this true unless your OpenAM installation requires that you
        do not encode cookies. Normally cookies are encoded such that cookies
        remain valid in HTTP.</p></dd><dt><span class="term">HTTP-Only Cookie</span></dt><dd><p>Set to true to use HTTPOnly cookies if needed to help prevent
        third-party programs and scripts from accessing the cookies.</p></dd></dl></div></li><li class="step" title="Step 2"><p>Restrict permissions to the discovery service configuration file in
     <code class="filename">$HOME/libIDPDiscoveryConfig.properties</code>, where $HOME
     corresponds to the user who runs the web container where you deployed the
     service.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.8.&nbsp;To Add the Discovery Service to Your Circles of Trust"><a name="add-idpdisco-to-circle-of-trust"></a><div class="procedure-title">Procedure&nbsp;12.8.&nbsp;To Add the Discovery Service to Your Circles of Trust</div><p>Each provider has a circle of trust including itself. You configure
    each of these circles of trust to use the identity provider discovery
    service as described in the following steps.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the service provider console, login as OpenAM
     Administrator.</p></li><li class="step" title="Step 2"><p>On the service provider console, under Federation &gt; Circle of
     Trust &gt; <em class="replaceable"><code>Circle of Trust Name</code></em>
     add SAML2 Writer and Reader Service URLs for the identity provider
     discovery service endpoints, and Save your work.</p><p>In this example, the writer URL is
     <code class="literal">http://www.disco.example:8080/disco/saml2writer</code>, and the
     reader URL is
     <code class="literal">http://www.disco.example:8080/disco/saml2reader</code>.</p></li><li class="step" title="Step 3"><p>On each identity provider console, login as OpenAM
     Administrator.</p></li><li class="step" title="Step 4"><p>On the identity provider console, under Federation &gt; Circle of
     Trust Configuration &gt; <em class="replaceable"><code>Circle of Trust Name</code></em>
     also add SAML2 Writer and Reader Service URLs for the identity provider
     discovery service endpoints, and Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.9.&nbsp;To Share Identity &amp; Service Provider Metadata"><a name="share-idpdisco-sp-metadata"></a><div class="procedure-title">Procedure&nbsp;12.9.&nbsp;To Share Identity &amp; Service Provider Metadata</div><p>Before performing these steps, install the administration tools
    for each provider as described in <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
    Administration Tools</em></a>. The administration tools include
    the <span class="command"><strong>ssoadm</strong></span> tool that you need to export metadata.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On each identity provider console, register the service provider as
     a remote service provider adding to the circle of trust you configured
     to use the identity provider discovery service.</p><p>The URL to the service provider metadata is something like
     <code class="literal">http://www.sp.example:8080/openam/saml2/jsp/exportmetadata.jsp</code>.</p></li><li class="step" title="Step 2"><p>Obtain metadata for each identity provider.</p><div class="screen"><pre class="brush: plain;">$ ssh www.this-idp.example
$ cd /path/to/openam-tools/admin/openam/bin
$ ./ssoadm create-metadata-templ -y "http://www.this-idp.example:8080/openam"
 -u amadmin -f /tmp/pwd.txt -i /idp -m this-standard.xml -x this-extended.xml
Hosted entity configuration was written to this-extended.xml.
Hosted entity descriptor was written to this-standard.xml.

$ ssh www.that-idp.example
$ cd /path/to/openam-tools/admin/openam/bin
$ ./ssoadm create-metadata-templ -y "http://www.that-idp.example:8080/openam"
 -u amadmin -f /tmp/pwd.txt -i /idp -m that-standard.xml -x that-extended.xml

Hosted entity configuration was written to that-extended.xml.
Hosted entity descriptor was written to that-standard.xml.</pre></div></li><li class="step" title="Step 3"><p>For each identity provider extended metadata file, change the value
     of the <code class="literal">hosted</code> attribute to <code class="literal">0</code>,
     meaning the identity provider is remote.</p></li><li class="step" title="Step 4"><p>On the service provider, add the identity providers to the circle of
     trust using the identity provider metadata.</p><div class="screen"><pre class="brush: plain;">$ ssh www.sp.example
$ cd /path/to/openam-tools/admin/openam/bin
$ ./ssoadm import-entity -t discocot -m ~/Downloads/this-standard.xml
 -x ~/Downloads/this-extended.xml -u amadmin -f /tmp/pwd.txt

Import file, /Users/mark/Downloads/this-standard.xml.
Import file, /Users/mark/Downloads/this-extended.xml.
$ ./ssoadm import-entity -t discocot -m ~/Downloads/that-standard.xml
 -x ~/Downloads/that-extended.xml -u amadmin -f /tmp/pwd.txt

Import file, /Users/mark/Downloads/that-standard.xml.
Import file, /Users/mark/Downloads/that-extended.xml.</pre></div></li><li class="step" title="Step 5"><p>Test your work by using the Federation Connectivity Test that
     you start from the service provider console under Common Tasks &gt;
     Test Federation Connectivity.</p><p>When the test is done, you can see messages from the
     <code class="literal">CookieWriterServlet</code> in the
     <code class="filename">libIDPDiscovery</code> log file where you set up
     logging when you configured the identity provider discovery
     service, such as <code class="filename">/tmp/debug/libIDPDiscovery</code>.
     Output generated during a test follows, with some lines folded to fit
     on the printed page.</p><div class="screen"><pre class="brush: plain;">08/08/2012 11:43:38:341 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieUtils.init : idpDiscoveryOnlyWar=true
08/08/2012 11:43:38:341 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet Initializing...
08/08/2012 11:43:38:341 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Preferred Cookie Name is _saml_idp
08/08/2012 11:43:38:341 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: URL Scheme is null, set to https.
08/08/2012 11:43:38:341 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Preferred IDP Cookie Not found
08/08/2012 11:43:38:342 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Cookie Type is PERSISTENT
08/08/2012 11:43:38:342 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Cookie value is
 aHR0cDovL3d3dy50aGF0LWlkcC5jb206ODA4MC9vcGVuYW0=
08/08/2012 11:43:38:342 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Preferred Cookie Name _saml_idp
08/08/2012 11:43:38:343 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Redirect to
 http://www.that-idp.example:8080/openam/SSORedirect/metaAlias/idp?resInfoID=
 s28bc4db004f1365d78d07d69846c54a3c850fe801
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Preferred Cookie Name is _saml_idp
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieUtils:cookieValue=aHR0cDovL3d3dy50aGF0LWlkcC5jb206ODA4MC9vcGVuYW0=,
 result=aHR0cDovL3d3dy50aGF0LWlkcC5jb206ODA4MC9vcGVuYW0=
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Cookie Type is PERSISTENT
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Cookie value is
 aHR0cDovL3d3dy50aGF0LWlkcC5jb206ODA4MC9vcGVuYW0=
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Preferred Cookie Name _saml_idp
08/08/2012 11:43:46:957 AM CEST: Thread[http-bio-8080-exec-4,5,main]
CookieWriterServlet.doGetPost: Redirect to
 http://www.that-idp.example:8080/openam/SSORedirect/metaAlias/idp?resInfoID=
 s2ce9c465cf39c96f31e1dcf009cf9943695d82901</pre></div></li></ol></div></div></div><div class="section" title="12.3.&nbsp;Configuring Identity Providers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-idp"></a>12.3.&nbsp;Configuring Identity Providers</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#idp-assertion-content">12.3.1. Hints for Assertion Content</a></span></dt><dt><span class="section"><a href="#idp-assertion-processing">12.3.2. Hints for Assertion Processing</a></span></dt><dt><span class="section"><a href="#idp-services">12.3.3. Hints for Services</a></span></dt><dt><span class="section"><a href="#idp-advanced">12.3.4. Hints for Advanced Settings</a></span></dt></dl></div><a class="indexterm" name="d16811e14823"></a><p>Once you have set up an identity provider, you can configure it
  through the OpenAM console under Federation &gt; Entity Providers &gt;
  <em class="replaceable"><code>Provider Name</code></em>.</p><div class="section" title="12.3.1.&nbsp;Hints for Assertion Content"><div class="titlepage"><div><div><h3 class="title"><a name="idp-assertion-content"></a>12.3.1.&nbsp;Hints for Assertion Content</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Content
   tab page.</p><div class="variablelist" title="Signing and Encryption"><a name="idp-signing-encryption"></a><div class="variablelist-title">Signing and Encryption</div><dl><dt><span class="term">Request/Response Signing</span></dt><dd><p>Specifies what parts of messages the identity provider requires
      the service provider to sign digitally.</p></dd><dt><span class="term">Encryption</span></dt><dd><p>When selected, the service provider must encrypt NameID
      elements.</p></dd><dt><span class="term">Certificate Aliases</span></dt><dd><p>Specifies aliases for certificates in the OpenAM key store that are
      used to handle digital signatures, and to handle encrypted messages.</p><p>Specify a Key Pass if the private key password is different from
      the key store password, which is stored encrypted in the
      <code class="filename">.keypass</code> file for the server. For instructions
      on working with key pairs, also see <a href="../admin-guide/index.html#change-signing-key" class="link"><em class="citetitle">To Change the
      Signing Key for Federation</em></a>.</p></dd></dl></div><div class="variablelist" title="NameID Format"><a name="idp-nameid-format"></a><div class="variablelist-title">NameID Format</div><dl><dt><span class="term">NameID Format List</span></dt><dd><p>Specifies the supported name identifiers for users that are shared
      between providers for single sign on. If no name identifier is specified
      when initiating single sign on, then the identity provider uses the first
      one in the list.</p></dd><dt><span class="term">NameID Value List</span></dt><dd><p>Maps name identifier formats to user profile attributes. The
      <code class="literal">persistent</code> and <code class="literal">transient</code> name
      identifiers need not be mapped.</p></dd></dl></div><div class="variablelist" title="Authentication Context"><a name="idp-authentication-context"></a><div class="variablelist-title">Authentication Context</div><dl><dt><span class="term">Mapper</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">IDPAuthnContextMapper</code> interface and sets up the
      authentication context.</p></dd><dt><span class="term">Default Authentication Context</span></dt><dd><p>Specifies the authentication context used if no authentication
      context specified in the request.</p></dd><dt><span class="term">Supported Contexts</span></dt><dd><p>Specifies the supported authentication contexts, where the Key
      and Value can specify a corresponding OpenAM authentication method,
      and the Level corresponds to an authentication module authentication
      level.</p></dd></dl></div><div class="variablelist" title="Assertion Time"><a name="idp-assertion-time"></a><div class="variablelist-title">Assertion Time</div><dl><dt><span class="term">Not-Before Time Skew</span></dt><dd><p>Grace period in seconds for the <code class="literal">NotBefore</code> time
      in assertions.</p></dd><dt><span class="term">Effective Time</span></dt><dd><p>Validity in seconds of an assertion.</p></dd></dl></div><div class="variablelist" title="Basic Authentication"><a name="idp-basic-authentication"></a><div class="variablelist-title">Basic Authentication</div><dl><dt><span class="term">Enabled, User Name, Password</span></dt><dd><p>When enabled, authenticate with the specified user name and
      password at SOAP end points.</p></dd></dl></div><div class="variablelist" title="Assertion Cache"><a name="idp-assertion-cache"></a><div class="variablelist-title">Assertion Cache</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, cache assertions.</p></dd></dl></div></div><div class="section" title="12.3.2.&nbsp;Hints for Assertion Processing"><div class="titlepage"><div><div><h3 class="title"><a name="idp-assertion-processing"></a>12.3.2.&nbsp;Hints for Assertion Processing</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Processing
   tab page.</p><div class="variablelist" title="Attribute Mapper"><a name="idp-attribute-mapper"></a><div class="variablelist-title">Attribute Mapper</div><dl><dt><span class="term">Attribute Mapper</span></dt><dd><p>Specifies a class that implements the attribute mapping.</p><p>The default implementation attempts to retrieve the mapped attribute
      values from the user profile first. If the attribute values are not
      present in the user's profile, then it attempts to retrieve them from the
      user's session.</p><p>Default: <code class="literal">com.sun.identity.saml2.plugins.DefaultIDPAttributeMapper</code></p></dd><dt><span class="term">Attribute Map</span></dt><dd><p>Maps SAML attributes to user profile attributes.</p><p>The user profile attributes used here must both be allowed in user
      profiles, and also be specified for the identity repository. See the
      <em class="citetitle">Developer's Guide</em> chapter, <a href="../dev-guide/index.html#chap-custom-attr" class="link"><em class="citetitle">Customizing
      Profile Attributes</em></a>, for instructions on allowing
      additional attributes in user profiles.</p><p>To specify the list of profile attributes for an LDAP identity
      repository, login to OpenAM Console as administrator and browse to
      Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Data Stores, and
      click the data store name to open the configuration page. Scroll down to
      User Configuration, and edit the LDAP User Attributes list, and then
      click Save to keep your work.</p><p>The default IDP mapping implementation allows you to add static values
      in addition to values taken from the user profile. You add a static value
      by enclosing the profile attribute name in double quotes
      (<code class="literal">"</code>), as in the following examples.</p><p>To add a static SAML attribute called <code class="literal">nameID</code>
      with a value of <code class="literal">staticNameIDValue</code> with a name format of
      <code class="literal">urn:oasis:names:tc:SAML:2.0:attrname-format:uri</code>, add
      the following mapping.</p><pre class="literallayout">urn:oasis:names:tc:SAML:2.0:attrname-format:uri|nameID="staticNameIDValue"</pre></dd></dl></div><div class="variablelist" title="Account Mapper"><a name="idp-account-mapper"></a><div class="variablelist-title">Account Mapper</div><dl><dt><span class="term">Account Mapper</span></dt><dd><p>Specifies a class that implements <code class="literal">AccountMapper</code>
      to map remote users to local user profiles.</p></dd></dl></div><div class="variablelist" title="Local Configuration"><a name="idp-local-configuration"></a><div class="variablelist-title">Local Configuration</div><dl><dt><span class="term">Auth URL</span></dt><dd><p>URL where users are redirected to authenticate.</p></dd><dt><span class="term">Reverse Proxy URL</span></dt><dd><p>When a reverse proxy is used for SAML endpoints, it is specified here.</p></dd><dt><span class="term">External Application Logout URL</span></dt><dd><p>URL to which to send an HTTP POST including all cookies when
      receiving a logout request. To add a user session property as a POST
      parameter, include it in the URL query string as a
      <code class="literal">appsessionproperty</code> parameter.</p></dd></dl></div></div><div class="section" title="12.3.3.&nbsp;Hints for Services"><div class="titlepage"><div><div><h3 class="title"><a name="idp-services"></a>12.3.3.&nbsp;Hints for Services</h3></div></div></div><p>Use the following hints to adjust settings on the Services tab
   page.</p><div class="variablelist" title="MetaAlias"><a name="idp-meta-alias"></a><div class="variablelist-title">MetaAlias</div><dl><dt><span class="term">MetaAlias</span></dt><dd><p>Used to locate the providers entity identifier, specified as
      <code class="literal">[/<em class="replaceable"><code>realm-name</code></em>]*/<em class="replaceable"><code>provider-name</code></em></code>, where neither
      <em class="replaceable"><code>realm-name</code></em> nor
      <em class="replaceable"><code>provider-name</code></em> can contain slash characters
      (<code class="literal">/</code>). For example:
      <code class="literal">/realm/sub-realm/idp</code>.</p></dd></dl></div><div class="variablelist" title="IDP Service Attributes"><a name="idp-service-attibutes"></a><div class="variablelist-title">IDP Service Attributes</div><dl><dt><span class="term">Artifact Resolution Service</span></dt><dd><p>Specifies the end point to handle artifact resolution. The Index
      is a unique number identifier for the end point.</p></dd><dt><span class="term">Single Logout Service</span></dt><dd><p>Specifies the end points to handle single logout, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Manage NameID Service</span></dt><dd><p>Specifies the end points to handle name identifiers, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Single SignOn Service</span></dt><dd><p>Specifies the end points to handle single sign on.</p></dd></dl></div><div class="variablelist" title="NameID Mapping"><a name="idp-nameid-mapping"></a><div class="variablelist-title">NameID Mapping</div><dl><dt><span class="term">URL</span></dt><dd><p>Specifies the end point to handle name identifier mapping.</p></dd></dl></div></div><div class="section" title="12.3.4.&nbsp;Hints for Advanced Settings"><div class="titlepage"><div><div><h3 class="title"><a name="idp-advanced"></a>12.3.4.&nbsp;Hints for Advanced Settings</h3></div></div></div><p>Use the following hints to adjust settings on the Advanced tab
   page.</p><div class="variablelist" title="SAE Configuration"><a name="idp-sae-configuration"></a><div class="variablelist-title">SAE Configuration</div><dl><dt><span class="term">IDP URL</span></dt><dd><p>Specifies the end point to handle Secure Attribute Exchange
      requests.</p></dd><dt><span class="term">Application Security Configuration</span></dt><dd><p>Specifies how to handle encryption for Secure Attribute Exchange
      operations.</p></dd></dl></div><div class="variablelist" title="ECP Configuration"><a name="idp-ecp-configuration"></a><div class="variablelist-title">ECP Configuration</div><dl><dt><span class="term">IDP Session Mapper</span></dt><dd><p>Specifies the class that finds a valid session from an HTTP
      servlet request to an identity provider with a SAML Enhanced Client or
      Proxy profile.</p></dd></dl></div><div class="variablelist" title="Session Synchronization"><a name="idp-session-synchronization"></a><div class="variablelist-title">Session Synchronization</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, the identity provider notifies service providers
      to log the user out when a session expires.</p></dd></dl></div><div class="variablelist" title="IDP Finder Implementation"><a name="idp-finder-implementation"></a><div class="variablelist-title">IDP Finder Implementation</div><dl><dt><span class="term">IDP Finder Implementation Class</span></dt><dd><p>Specifies a class that finds the preferred identity provider to
      handle a proxied authentication request.</p></dd><dt><span class="term">IDP Finder JSP</span></dt><dd><p>Specifies a JSP that presents the list of identity providers to
      the user.</p></dd><dt><span class="term">Enable Proxy IDP Finder For All SPs</span></dt><dd><p>When enabled, apply the finder for all remote service
      providers.</p></dd></dl></div><div class="variablelist" title="Relay State URL List"><a name="idp-relay-state-url-list"></a><div class="variablelist-title">Relay State URL List</div><dl><dt><span class="term">Relay State URL List</span></dt><dd><p>List of URLs to which to redirect users after the request has
      been handled. Used if not specified in the service provider extended
      metadata.</p></dd></dl></div><div class="variablelist" title="IDP Adapter"><a name="idp-adapter"></a><div class="variablelist-title">IDP Adapter</div><dl><dt><span class="term">IDP Adapter Class</span></dt><dd><p>Specifies a class to invoke immediately before sending a
      SAML 2.0 response.</p></dd></dl></div></div></div><div class="section" title="12.4.&nbsp;Configuring Service Providers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sp"></a>12.4.&nbsp;Configuring Service Providers</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sp-assertion-content">12.4.1. Hints for Assertion Content</a></span></dt><dt><span class="section"><a href="#sp-assertion-processing">12.4.2. Hints for Assertion Processing</a></span></dt><dt><span class="section"><a href="#sp-services">12.4.3. Hints for Services</a></span></dt><dt><span class="section"><a href="#sp-advanced">12.4.4. Hints for Advanced Settings</a></span></dt></dl></div><a class="indexterm" name="d16811e15193"></a><p>Once you have set up a service provider, you can configure it
  through the OpenAM console under Federation &gt; Entity Providers &gt;
  <em class="replaceable"><code>Provider Name</code></em>.</p><div class="section" title="12.4.1.&nbsp;Hints for Assertion Content"><div class="titlepage"><div><div><h3 class="title"><a name="sp-assertion-content"></a>12.4.1.&nbsp;Hints for Assertion Content</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Content
   tab page.</p><div class="variablelist" title="Signing and Encryption"><a name="sp-signing-encryption"></a><div class="variablelist-title">Signing and Encryption</div><dl><dt><span class="term">Request/Response Signing</span></dt><dd><p>Specifies what parts of messages the service provider requires
      the identity provider to sign digitally.</p></dd><dt><span class="term">Encryption</span></dt><dd><p>The identity provider must encrypt selected elements.</p></dd><dt><span class="term">Certificate Aliases</span></dt><dd><p>Specifies aliases for certificates in the OpenAM key store that are
      used to handle digital signatures, and to handle encrypted messages.</p></dd></dl></div><div class="variablelist" title="NameID Format"><a name="sp-nameid-format"></a><div class="variablelist-title">NameID Format</div><dl><dt><span class="term">NameID Format List</span></dt><dd><p>Specifies the supported name identifiers for users that are shared
      between providers for single sign on. If no name identifier is specified
      when initiating single sign on, then the service provider uses the first
      one in the list supported by the identity provider.</p></dd><dt><span class="term">Disable Federation persistence if NameID Format is unspecified</span></dt><dd><p>When enabled, the NameID Format in the authentication response is
      <code class="literal">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</code>,
      and the Account Mapper has identified the local user, the service provider
      does not persist federation information in the user profile.</p></dd></dl></div><div class="variablelist" title="Authentication Context"><a name="sp-authentication-context"></a><div class="variablelist-title">Authentication Context</div><dl><dt><span class="term">Mapper</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">SPAuthnContextMapper</code> interface and sets up the
      authentication context.</p></dd><dt><span class="term">Default Authentication Context</span></dt><dd><p>Specifies the authentication context used if no authentication
      context specified in the request.</p></dd><dt><span class="term">Supported Contexts</span></dt><dd><p>Specifies the supported authentication contexts. The Level
      corresponds to an authentication module authentication level.</p></dd><dt><span class="term">Comparison Type</span></dt><dd><p>How the authentication context in the assertion response must
      compare to the supported contexts.</p></dd></dl></div><div class="variablelist" title="Assertion Time"><a name="sp-assertion-time"></a><div class="variablelist-title">Assertion Time</div><dl><dt><span class="term">Assertion Time Skew</span></dt><dd><p>Grace period in seconds for the <code class="literal">NotBefore</code> time
      in assertions.</p></dd></dl></div><div class="variablelist" title="Basic Authentication"><a name="sp-basic-authentication"></a><div class="variablelist-title">Basic Authentication</div><dl><dt><span class="term">Enabled, User Name, Password</span></dt><dd><p>When enabled, authenticate with the specified user name and
      password at SOAP end points.</p></dd></dl></div></div><div class="section" title="12.4.2.&nbsp;Hints for Assertion Processing"><div class="titlepage"><div><div><h3 class="title"><a name="sp-assertion-processing"></a>12.4.2.&nbsp;Hints for Assertion Processing</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Processing
   tab page.</p><div class="variablelist" title="Attribute Mapper"><a name="sp-attribute-mapper"></a><div class="variablelist-title">Attribute Mapper</div><dl><dt><span class="term">Attribute Mapper</span></dt><dd><p>Specifies a class that implements the attribute mapping.</p></dd><dt><span class="term">Attribute Map</span></dt><dd><p>Maps SAML attributes to user profile attributes.</p></dd></dl></div><div class="variablelist" title="Auto Federation"><a name="sp-auto-federation"></a><div class="variablelist-title">Auto Federation</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, automatically federate user's accounts at different
      providers based on the specified profile attribute.</p></dd><dt><span class="term">Attribute</span></dt><dd><p>Specifies the user profile attribute to match accounts at different
      providers.</p></dd></dl></div><div class="variablelist" title="Account Mapper"><a name="sp-account-mapper"></a><div class="variablelist-title">Account Mapper</div><dl><dt><span class="term">Account Mapper</span></dt><dd><p>Specifies a class that implements <code class="literal">AccountMapper</code>
      to map remote users to local user profiles.</p></dd><dt><span class="term">Use Name ID as User ID</span></dt><dd><p>When selected, fall back to using the name identifier from the
      assertion to find the user.</p></dd></dl></div><div class="variablelist" title="Artifact Message Encoding"><a name="sp-artifact-message-encoding"></a><div class="variablelist-title">Artifact Message Encoding</div><dl><dt><span class="term">Encoding</span></dt><dd><p>Specifies the message encoding format for artifacts.</p></dd></dl></div><div class="variablelist" title="Transient User"><a name="sp-transient-user"></a><div class="variablelist-title">Transient User</div><dl><dt><span class="term">Transient User</span></dt><dd><p>Specifies the user profile to which to map all identity provider
      users when sending transient name identifiers.</p></dd></dl></div><div class="variablelist" title="URL"><a name="sp-url"></a><div class="variablelist-title">URL</div><dl><dt><span class="term">Local Authentication URL</span></dt><dd><p>Specifies the local login URL.</p></dd><dt><span class="term">Intermediate URL</span></dt><dd><p>Specifies a URL to which the user is redirected after
      authentication but before the original URL requested.</p></dd><dt><span class="term">External Application Logout URL</span></dt><dd><p>Specifies the URL to which to send an HTTP POST including all
      cookies when receiving a logout request. To add a user session property
      as a POST parameter, include it in the URL query string as a
      <code class="literal">appsessionproperty</code> parameter.</p></dd></dl></div><div class="variablelist" title="Default Relay State URL"><a name="sp-default-relay-state-url"></a><div class="variablelist-title">Default Relay State URL</div><dl><dt><span class="term">Default Relay State URL</span></dt><dd><p>Specifies the URL to which to redirect users after the request has
      been handled. Used if not specified in the response.</p></dd></dl></div><div class="variablelist" title="Adapter"><a name="sp-adapter"></a><div class="variablelist-title">Adapter</div><dl><dt><span class="term">Adapter</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">FederationSPAdapter</code> interface and performs application
      specific processing during the federation process.</p></dd><dt><span class="term">Adapter Environment</span></dt><dd><p>Specifies environment variables passed to the adapter class.</p></dd></dl></div></div><div class="section" title="12.4.3.&nbsp;Hints for Services"><div class="titlepage"><div><div><h3 class="title"><a name="sp-services"></a>12.4.3.&nbsp;Hints for Services</h3></div></div></div><p>Use the following hints to adjust settings on the Services tab
   page.</p><div class="variablelist" title="MetaAlias"><a name="sp-meta-alias"></a><div class="variablelist-title">MetaAlias</div><dl><dt><span class="term">MetaAlias</span></dt><dd><p>Used to locate the providers entity identifier, specified as
      <code class="literal">[/<em class="replaceable"><code>realm-name</code></em>]*/<em class="replaceable"><code>provider-name</code></em></code>, where neither
      <em class="replaceable"><code>realm-name</code></em> nor
      <em class="replaceable"><code>provider-name</code></em> can contain slash characters
      (<code class="literal">/</code>). For example:
      <code class="literal">/realm/sub-realm/sp</code>.</p></dd></dl></div><div class="variablelist" title="SP Service Attributes"><a name="sp-service-attibutes"></a><div class="variablelist-title">SP Service Attributes</div><dl><dt><span class="term">Single Logout Service</span></dt><dd><p>Specifies the end points to handle single logout, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Manage NameID Service</span></dt><dd><p>Specifies the end points to handle name identifiers, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Assertion Consumer Service</span></dt><dd><p>Specifies the end points to consume assertions, with Index
      corresponding to the index of the URL in the standard metadata.</p></dd></dl></div></div><div class="section" title="12.4.4.&nbsp;Hints for Advanced Settings"><div class="titlepage"><div><div><h3 class="title"><a name="sp-advanced"></a>12.4.4.&nbsp;Hints for Advanced Settings</h3></div></div></div><p>Use the following hints to adjust settings on the Advanced tab
   page.</p><div class="variablelist" title="SAE Configuration"><a name="sp-sae-configuration"></a><div class="variablelist-title">SAE Configuration</div><dl><dt><span class="term">SP URL</span></dt><dd><p>Specifies the end point to handle Secure Attribute Exchange
      requests.</p></dd><dt><span class="term">SP Logout URL</span></dt><dd><p>Specifies the end point of the service provider that can handle
      global logout requests.</p></dd><dt><span class="term">Application Security Configuration</span></dt><dd><p>Specifies how to handle encryption for Secure Attribute Exchange
      operations.</p></dd></dl></div><div class="variablelist" title="ECP Configuration"><a name="sp-ecp-configuration"></a><div class="variablelist-title">ECP Configuration</div><dl><dt><span class="term">Request IDP List Finder Implementation</span></dt><dd><p>Specifies a class that returns a list of preferred identity
      providers trusted by the SAML Enhanced Client or Proxy profile.</p></dd><dt><span class="term">Request IDP List Get Complete</span></dt><dd><p>Specifies a URI reference used to retrieve the complete identity
      provider list if the <code class="literal">IDPList</code> element is not
      complete.</p></dd><dt><span class="term">Request IDP List</span></dt><dd><p>Specifies a list of identity providers for the SAML Enhanced Client
      or Proxy to contact, used by the default implementation of the IDP
      Finder.</p></dd></dl></div><div class="variablelist" title="IDP Proxy"><a name="sp-idp-proxy"></a><div class="variablelist-title">IDP Proxy</div><dl><dt><span class="term">IDP Proxy</span></dt><dd><p>When enabled, allow proxied authentication for this service
      provider.</p></dd><dt><span class="term">Introduction</span></dt><dd><p>When enabled, use introductions to find the proxy identity
      provider.</p></dd><dt><span class="term">Proxy Count</span></dt><dd><p>Specifies the maximum number of proxy identity providers.</p></dd><dt><span class="term">IDP Proxy List</span></dt><dd><p>Specifies a list of URIs identifying preferred proxy identity
      providers.</p></dd></dl></div><div class="variablelist" title="Session Synchronization"><a name="sp-session-synchronization"></a><div class="variablelist-title">Session Synchronization</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, the service provider notifies identity providers
      to log the user out when a session expires.</p></dd></dl></div><div class="variablelist" title="Relay State URL List"><a name="sp-relay-state-url-list"></a><div class="variablelist-title">Relay State URL List</div><dl><dt><span class="term">Relay State URL List</span></dt><dd><p>List of URLs to which to redirect users after the request has
      been handled. Used if not specified in the service provider extended
      metadata.</p></dd></dl></div></div></div><div class="section" title="12.5.&nbsp;Configuring Circles of Trust"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-cot"></a>12.5.&nbsp;Configuring Circles of Trust</h2></div></div></div><a class="indexterm" name="d16811e15573"></a><p>Once you have set up a circle of trust, you can configure it
  through the OpenAM console under Federation &gt; Circle of Trust &gt;
  <em class="replaceable"><code>Circle of Trust Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Name</span></dt><dd><p>String to refer to the circle of trust.</p></dd><dt><span class="term">Description</span></dt><dd><p>Short description of the circle of trust.</p></dd><dt><span class="term">IDFF Writer Service URL</span></dt><dd><p>Liberty Identity Federation Framework service that writes identity
     provider entity identifiers to Common Domain cookies after successful
     authentication, used in identity provider discovery. Example:
     <code class="literal">http://www.disco.example:8080/openam/idffwriter</code>.</p></dd><dt><span class="term">IDFF Reader Service URL</span></dt><dd><p>Liberty Identity Federation Framework service that reads identity
     provider entity identifiers from Common Domain cookies, used in identity
     provider discovery. Example:
     <code class="literal">http://www.disco.example:8080/openam/transfer</code>.</p></dd><dt><span class="term">SAML2 Writer Service URL</span></dt><dd><p>SAML 2.0 service that writes identity provider entity identifiers
     to Common Domain cookies after successful authentication, used in identity
     provider discovery. Example:
     <code class="literal">http://www.disco.example:8080/openam/saml2writer</code>.</p></dd><dt><span class="term">SAML2 Reader Service URL</span></dt><dd><p>SAML 2.0 service that reads identity provider entity identifiers
     from Common Domain cookies, used in identity provider discovery. Example:
     <code class="literal">http://www.disco.example:8080/openam/saml2reader</code>.</p></dd><dt><span class="term">Status</span></dt><dd><p>Whether this circle of trust is operational.</p></dd><dt><span class="term">Realm</span></dt><dd><p>Name of the realm participating in this circle of trust.</p></dd><dt><span class="term">Entity Providers</span></dt><dd><p>Known hosted and remote identity and service providers participating
     in this circle of trust.</p></dd></dl></div></div><div class="section" title="12.6.&nbsp;Configuring Google Apps as a Remote Service Provider"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="google-apps-as-sp"></a>12.6.&nbsp;Configuring Google Apps as a Remote Service Provider</h2></div></div></div><a class="indexterm" name="d16811e15653"></a><a class="indexterm" name="d16811e15656"></a><p>OpenAM can serve as the identity provider when you use <a class="link" href="http://www.google.com/apps/" target="_blank">Google
  Apps</a> as a service provider, allowing users to have single sign-on
  with their Google Apps account.</p><p>In order to use this service, you must have a Google Apps account for
  at least one of your domains, such as <code class="literal">example.com</code>.</p><div class="procedure" title="Procedure&nbsp;12.10.&nbsp;To Integrate With Google Apps"><a name="integrate-google-apps"></a><div class="procedure-title">Procedure&nbsp;12.10.&nbsp;To Integrate With Google Apps</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you have not yet done so, set up OpenAM as described in
    <a class="xref" href="#create-hosted-idp" title="Procedure&nbsp;12.1.&nbsp;To Create a Hosted Identity Provider">Procedure&nbsp;12.1, &#8220;To Create a Hosted Identity Provider&#8221;</a>, using a signing certificate
    that is needed by Google Apps.</p><p>See the procedure <a href="../admin-guide/index.html#change-signing-key" class="link"><em class="citetitle">To Change the
    Signing Key for Federation</em></a> for details regarding the
    signing certificate.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Configure Google
    Apps.</p></li><li class="step" title="Step 3"><p>On the first Configure Google Apps for Single Sign-On page, add your
    domain name(s) such as <code class="literal">example.com</code> to the list, and then
    click Create.</p></li><li class="step" title="Step 4"><p>On the second Configure Google Apps for Single Sign-On page, save
    the OpenAM verification certificate to a text file, such as
    <code class="filename">OpenAM.pem</code>.</p></li><li class="step" title="Step 5"><p>Follow the instructions under To Enable Access to the Google Apps API
    before clicking Finish.</p><ol type="a" class="substeps"><li class="step" title="Step 5.a"><p>Access the Google Apps administration page for the first of your
      domains in a new browser tab or window.</p></li><li class="step" title="Step 5.b"><p>Login as Google Apps administrator.</p></li><li class="step" title="Step 5.c"><p>Select Enable Single Sign-On.</p></li><li class="step" title="Step 5.d"><p>Copy the URLs from the OpenAM page into the Google Apps setup
      screen.</p></li><li class="step" title="Step 5.e"><p>Upload the certificate file you saved such as
      <code class="filename">OpenAM.pem</code> as the Google Apps Verification
      Certificate.</p></li><li class="step" title="Step 5.f"><p>Select Use a domain specific issuer.</p></li><li class="step" title="Step 5.g"><p>Save changes in Google Apps setup.</p></li><li class="step" title="Step 5.h"><p>Repeat the steps above for each domain you have configured.</p></li><li class="step" title="Step 5.i"><p>Click Finish to complete the process.</p></li></ol></li></ol></div></div><div class="section" title="12.7.&nbsp;Configuring Salesforce CRM as a Remote Service Provider"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="salesforce-as-sp"></a>12.7.&nbsp;Configuring Salesforce CRM as a Remote Service Provider</h2></div></div></div><a class="indexterm" name="d16811e15737"></a><a class="indexterm" name="d16811e15740"></a><p>OpenAM can serve as the identity provider when you use <a class="link" href="http://www.salesforce.com/" target="_blank">Salesforce CRM</a>
  as a service provider, allowing users to have single sign-on with their
  Salesforce CRM account.</p><p>In order to use this service, you must have Salesforce CRM accounts
  for your organization.</p><div class="procedure" title="Procedure&nbsp;12.11.&nbsp;To Integrate With Salesforce CRM"><a name="integrate-salesforce"></a><div class="procedure-title">Procedure&nbsp;12.11.&nbsp;To Integrate With Salesforce CRM</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you have not yet done so, set up OpenAM as described in
    <a class="xref" href="#create-hosted-idp" title="Procedure&nbsp;12.1.&nbsp;To Create a Hosted Identity Provider">Procedure&nbsp;12.1, &#8220;To Create a Hosted Identity Provider&#8221;</a>, using a signing certificate
    that is needed by Salesforce CRM.</p><p>See the procedure <a href="../admin-guide/index.html#change-signing-key" class="link"><em class="citetitle">To Change the
    Signing Key for Federation</em></a> for details regarding the
    signing certificate.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Configure Salesforce
    CRM.</p></li><li class="step" title="Step 3"><p>Enter the EntityID for your Salesforce service provider.</p><p>This ID is used as the persistent EntityDescriptor metadata
              element so that users can have multiple service provider instances.
              This field is used for the EntityDescriptor on the next page.</p></li><li class="step" title="Step 4"><p>On the first Salesforce CRM Single Sign-On Configuration page,
    configure attribute mapping to associate the appropriate attribute
    from Salesforce CRM with the user profile attribute on your IDP.</p><p>For example, add a mapping for <code class="literal">IDPEmail</code> to
    <code class="literal">mail</code>, and then click Create. Make sure the attribute mapper 
    is sending the correct attribute to be used for the federated identity.</p></li><li class="step" title="Step 5"><p>On the second Salesforce CRM Single Sign-On Configuration page, follow
    the instructions below before clicking Finish.</p><ol type="a" class="substeps"><li class="step" title="Step 5.a"><p>In a new browser tab or window, login to <a class="link" href="https://login.salesforce.com/" target="_blank">Salesforce CRM</a> with
      your administrator credentials.</p><p>Create an administrator account if none exists, yet.</p></li><li class="step" title="Step 5.b"><p>If your users go directly to Salesforce to access services, then
      their single sign-on is SP-initiated from the Salesforce side. Salesforce
      provides a "My Domain" feature to facilitate SP-initiated single sign-on
      for desktop and device users.</p><p>When you have completed configuring Salesforce as a service
      provider, users can then browse to your domain at Salesforce, such as
      <code class="literal">https://openam.my.salesforce.com</code>, and be redirected to
      OpenAM to authenticate before being redirected to Salesforce.</p><ol type="i" class="substeps"><li class="step" title="Step 5.b.i"><p>Select Administration Setup &gt; Company Profile &gt; My
        Domain.</p></li><li class="step" title="Step 5.b.ii"><p>Choose the domain name, and then register the domain.</p></li><li class="step" title="Step 5.b.iii"><p>Wait until the domain is ready for testing to proceed.</p></li></ol></li><li class="step" title="Step 5.c"><p>In Salesforce CRM, browse to Setup &gt; Administration Setup &gt;
      Security Controls &gt; Single Sign-On Settings, and then click Edit for
      Single Sign-On Settings.</p></li><li class="step" title="Step 5.d"><p>Select SAML Enabled.</p></li><li class="step" title="Step 5.e"><p>Set the SAML Version to 2.0.</p></li><li class="step" title="Step 5.f"><p>Copy the issuer name from the OpenAM page to the Issuer field on the
      Salesforce CRM page.</p></li><li class="step" title="Step 5.g"><p>Copy or download the OpenAM verification certificate to a text file, such 
      as <code class="filename">OpenAMCert.pem</code> or <code class="filename">OpenAMCert.txt</code>.</p></li><li class="step" title="Step 5.h"><p>Upload the certificate file as Identity Provider Certificate on the
      Salesforce CRM page.</p></li><li class="step" title="Step 5.i"><p>For SAML Identity Type in Salesforce CRM, choose Assertion contains
      the Federation ID from the User object.</p></li><li class="step" title="Step 5.j"><p>For SAML Identity Location in Salesforce CRM, choose Identity is in an
      Attribute element.</p></li><li class="step" title="Step 5.k"><p>If you require specific login or logout pages, enter them in the next
      two fields.</p></li><li class="step" title="Step 5.l"><p>Enter the URL of your page specific error page if you have a page where
      you would like users redirected to when they encounter an error.</p></li><li class="step" title="Step 5.m"><p>Copy the attribute name such as <code class="literal">IDPEmail</code> from
      the OpenAM page to the Attribute Name field on the Salesforce CRM
      page.</p></li><li class="step" title="Step 5.n"><p>Leave the NameID Format field empty.</p></li><li class="step" title="Step 5.o"><p>Select the Entity ID corresponding to the "My Domain" that you set
      up.</p></li><li class="step" title="Step 5.p"><p>Save your work in Salesforce CRM.</p></li><li class="step" title="Step 5.q"><p>Salesforce CRM displays a Salesforce Login URL.</p><p>Copy the Salesforce Login URL to the field provided on the OpenAM
      page.</p></li><li class="step" title="Step 5.r"><p>Salesforce CRM returns to the Single Sign-On Settings form.</p></li><li class="step" title="Step 5.s"><p>Click Download Metadata to download the Salesforce CRM SP
      metadata.</p><p>After you complete the configuration, you must import the
      SP metadata you download in this step.</p></li><li class="step" title="Step 5.t"><p>In Salesforce CRM, browse to Administration Setup &gt; Manage Users,
      and then click Users.</p></li><li class="step" title="Step 5.u"><p>Add users as necessary, making sure the attribute chosen as the
      Federation ID matches the local attribute you mapped to the remote
      attribute in the previous page in OpenAM.</p></li><li class="step" title="Step 5.v"><p>Click Finish to complete the process.</p></li></ol></li><li class="step" title="Step 6"><p>After you finish, import the metadata for Salesforce CRM as SP.</p><ol type="a" class="substeps"><li class="step" title="Step 6.a"><p>Browse in OpenAM console to the Federation tab.</p></li><li class="step" title="Step 6.b"><p>If the remote SP entity for Salesforce CRM is already in the Entity
      Providers list, delete the existing configuration.</p></li><li class="step" title="Step 6.c"><p>Click Import Entity..., and then use the Import Entity Provider
      page to import the Salesforce CRM metadata.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Update the <code class="literal">Realm Name</code> to the appropriate realm.</p></li><li class="listitem"><p>Select the location where the metadata file is.</p></li><li class="listitem"><p>Enter the path for the metadata file.</p></li><li class="listitem"><p>If you have an extended data file, select the location where the file
        is.</p></li><li class="listitem"><p>If you have an extended data file, enter the path for the metadata 
        file.</p></li></ul></div></li></ol><p>At this point, when a user browses to the Salesforce domain you set
    up, they should be redirected to OpenAM for authentication. Upon successful
    authentication, they should be logged in to Salesforce.</p></li></ol></div></div><div class="section" title="12.8.&nbsp;Using SAML 2.0 Single Sign-On &amp; Single Logout"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-saml2-sso-slo"></a>12.8.&nbsp;Using SAML 2.0 Single Sign-On &amp; Single Logout</h2></div></div></div><a class="indexterm" name="d16811e15925"></a><a class="indexterm" name="d16811e15930"></a><p>OpenAM SAML 2.0 Federation provides JSPs where you can direct
  users to do single sign-on (SSO) and single logout (SLO) across providers
  in a circle of trust. OpenAM has two JSPs for SSO and two JSPs for
  SLO, allowing you to initiate both processes either from the identity
  provider side, or from the service provider side.</p><p>SSO lets users sign in once and remain authenticated as they access
  services in the circle of trust.</p><p>SLO attempts to log a user out of all providers in the circle of
  trust.</p><div class="variablelist"><p>The JSP pages are found under the context root where you deployed
   OpenAM, in <code class="filename">saml2/jsp/</code>.</p><dl><dt><span class="term"><code class="filename">spSSOInit.jsp</code></span></dt><dd><p>Used to initiate SSO from the service provider side, so call this
     on the service provider not the identity provider. This is also mapped
     to the endpoint <code class="literal">spssoinit</code> under the
     context root.</p><p>Examples:
     <code class="literal">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp</code>,
     <code class="literal">http://www.sp.example:8080/openam/spssoinit</code></p></dd><dt><span class="term"><code class="filename">idpSSOInit.jsp</code></span></dt><dd><p>Used to initiate SSO from the identity provider side, so call this
     on the identity provider not the service provider. This is also mapped to
     the endpoint <code class="literal">idpssoinit</code> under the
     context root.</p><p>Examples:
     <code class="literal">http://www.idp.example:8080/openam/saml2/jsp/idpSSOInit.jsp</code>,
     <code class="literal">http://www.idp.example:8080/openam/idpssoinit</code></p></dd><dt><span class="term"><code class="filename">spSingleLogoutInit.jsp</code></span></dt><dd><p>Used to initiate SLO from the service provider side, so call this
     on the service provider not the identity provider.</p><p>Example:
     <code class="literal">http://www.sp.example:8080/openam/saml2/jsp/spSingleLogoutInit.jsp</code>,
     <code class="literal">http://www.sp.example:8080/openam/SPSloInit</code></p></dd><dt><span class="term"><code class="filename">idpSingleLogoutInit.jsp</code></span></dt><dd><p>Used to initiate SLO from the identity provider side, so call this
     on the identity provider not the service provider.</p><p>Example:
     <code class="literal">http://www.idp.example:8080/openam/saml2/jsp/idpSingleLogoutInit.jsp</code>,
     <code class="literal">http://www.idp.example:8080/openam/IDPSloInit</code></p></dd></dl></div><p>When you invoke these JSPs, there are several parameters to
   specify. Which parameters you can use depends on the JSP.</p><div class="variablelist" title="idpSSOInit.jsp Parameters"><a name="idpssoinit-parameters"></a><div class="variablelist-title"><code class="filename">idpSSOInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">metaAlias</code></span></dt><dd><p>(Required) Use this parameter to specify the local alias for the
     provider, such as <code class="literal">metaAlias=/myRealm/idp</code>. This
     parameter takes the format
     <code class="literal">/<em class="replaceable"><code>realm-name</code></em>/<em class="replaceable"><code>provider-name</code></em></code> as described in <a class="xref" href="#idp-meta-alias" title="MetaAlias">MetaAlias</a>. You do not repeat the slash for
     the top level realm, for example <code class="literal">metaAlias=/idp</code>.</p></dd><dt><span class="term"><code class="literal">spEntityID</code></span></dt><dd><p>(Required) Use this parameter to indicate the remote service
     provider. Make sure you URL encode the value. For example, specify
     <code class="literal">spEntityID=http://www.sp.example:8080/openam</code> as
     <code class="literal">spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam</code>.</p></dd><dt><span class="term"><code class="literal">affiliationID</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML affiliation
     identifier.</p></dd><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Optional) Use this parameter to indicate what binding to use for the
     operation. For example, specify <code class="literal">binding=HTTP-POST</code> to
     use HTTP POST binding with a self-submitting form. In addition to
     <code class="literal">binding=HTTP-POST</code>, you can also use
     <code class="literal">binding=HTTP-Artifact</code>.</p></dd><dt><span class="term"><code class="literal">NameIDFormat</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML Name Identifier
     format identifier such as
     <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</code>, or
     <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>.</p></dd><dt><span class="term"><code class="literal">RelayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. Make sure you URL encode the value. For
     example, <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>
     takes the user to <code class="literal">http://forgerock.com</code>.</p></dd><dt><span class="term"><code class="literal">RelayStateAlias</code></span></dt><dd><p>(Optional) Use this parameter to specify the parameter to use as the
     <code class="literal">RelayState</code>. For example, if your query string has
     <code class="literal">target=http%3A%2F%2Fforgerock.com&amp;RelayStateAlias=target</code>,
     this is like setting
     <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>.</p></dd></dl></div><div class="variablelist" title="spSSOInit.jsp Parameters"><a name="spssoinit-parameters"></a><div class="variablelist-title"><code class="filename">spSSOInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">idpEntityID</code></span></dt><dd><p>(Required) Use this parameter to indicate the remote identity
     provider. Make sure you URL encode the value. For example, specify
     <code class="literal">idpEntityID=http://www.idp.example:8080/openam</code> as
     <code class="literal">idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam</code>.</p></dd><dt><span class="term"><code class="literal">metaAlias</code></span></dt><dd><p>(Required) Use this parameter to specify the local alias for the
     provider, such as <code class="literal">metaAlias=/myRealm/sp</code>. This parameter
     takes the format <code class="literal">/<em class="replaceable"><code>realm-name</code></em>/<em class="replaceable"><code>provider-name</code></em></code> as described in <a class="xref" href="#sp-meta-alias" title="MetaAlias">MetaAlias</a>. You do not repeat the slash for the
     top level realm, <code class="literal">metaAlias=/sp</code>.</p></dd><dt><span class="term"><code class="literal">affiliationID</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML affiliation
     identifier.</p></dd><dt><span class="term"><code class="literal">AllowCreate</code></span></dt><dd><p>(Optional) Use this parameter to indicate whether the identity
     provider can create a new identifier for the principal if none exists
     (<code class="literal">true</code>) or not (<code class="literal">false</code>).</p></dd><dt><span class="term"><code class="literal">AssertionConsumerServiceIndex</code></span></dt><dd><p>(Optional) Use this parameter to specify an integer that indicates
     the location to which the Response message should be returned to the
     requester.</p></dd><dt><span class="term"><code class="literal">AuthComparison</code></span></dt><dd><p>(Optional) Use this parameter to specify a comparison method to
     evaluate the requested context classes or statements. OpenAM accepts the
     following values: <code class="literal">better</code>, <code class="literal">exact</code>,
     <code class="literal">maximum</code>, and <code class="literal">minimum</code>.</p></dd><dt><span class="term"><code class="literal">AuthnContextClassRef</code></span></dt><dd><p>(Optional) Use this parameter to specify authentication context
     class references. Separate multiple values with pipe characters
     (<code class="literal">|</code>).</p></dd><dt><span class="term"><code class="literal">AuthnContextDeclRef</code></span></dt><dd><p>(Optional) Use this parameter to specify authentication context
     declaration references. Separate multiple values with pipe characters
     (<code class="literal">|</code>).</p></dd><dt><span class="term"><code class="literal">AuthLevel</code></span></dt><dd><p>(Optional) Use this parameter to specify the authentication level
     of the authentication context that OpenAM should use to authenticate the
     user.</p></dd><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Optional) Use this parameter to indicate what binding to use for the
     operation. For example, specify <code class="literal">binding=HTTP-POST</code> to
     use HTTP POST binding with a self-submitting form. In addition to
     <code class="literal">binding=HTTP-POST</code>, you can also use
     <code class="literal">binding=HTTP-Artifact</code>.</p></dd><dt><span class="term"><code class="literal">Destination</code></span></dt><dd><p>(Optional) Use this parameter to specify a URI Reference indicating
     the address to which the request is sent.</p></dd><dt><span class="term"><code class="literal">ForceAuthn</code></span></dt><dd><p>(Optional) Use this parameter to indicate whether the identity
     provider should force authentication (<code class="literal">true</code>) or can
     reuse existing security contexts (<code class="literal">false</code>).</p></dd><dt><span class="term"><code class="literal">isPassive</code></span></dt><dd><p>(Optional) Use this parameter to indicate whether the identity
     provider should authenticate passively (<code class="literal">true</code>) or not
     (<code class="literal">false</code>).</p></dd><dt><span class="term"><code class="literal">NameIDFormat</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML Name Identifier
     format identifier such as
     <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</code>,
     or <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code>.</p></dd><dt><span class="term"><code class="literal">RelayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. Make sure you URL encode the value. For
     example, <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>
     takes the user to <code class="literal">http://forgerock.com</code>.</p></dd><dt><span class="term"><code class="literal">RelayStateAlias</code></span></dt><dd><p>(Optional) Use this parameter to specify the parameter to use as the
     <code class="literal">RelayState</code>. For example, if your query string has
     <code class="literal">target=http%3A%2F%2Fforgerock.com&amp;RelayStateAlias=target</code>,
     this is like setting
     <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>.</p></dd><dt><span class="term"><code class="literal">reqBinding</code></span></dt><dd><p>(Optional) Use this parameter to indicate what binding to use for the
     authentication request. Valid values in include
     <code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect</code>
     (default) and
     <code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</code>.</p></dd><dt><span class="term"><code class="literal">sunamcompositeadvice</code></span></dt><dd><p>(Optional) Use this parameter to specify a URL encoded XML blob that
     specifies the authentication level advice. For example, the following XML
     indicates a requested authentication level of 1. Notice the required
     <code class="literal">:</code> before the 1.</p><pre class="brush: xml;">&lt;Advice&gt;
 &lt;AttributeValuePair&gt;
  &lt;Attribute name="AuthLevelConditionAdvice"/&gt;
  &lt;Value&gt;/:1&lt;/Value&gt;
 &lt;/AttributeValuePair&gt;
&lt;/Advice&gt;</pre></dd></dl></div><div class="variablelist" title="idpSingleLogoutInit.jsp Parameters"><a name="idpsloinit-parameters"></a><div class="variablelist-title"><code class="filename">idpSingleLogoutInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Required) Use this parameter to indicate what binding to use for the
     operation. The full, long name format is required for this parameter to work.</p><div class="itemizedlist"><p>The value must be one of the following.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect</code> (default)</p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</code></p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</code></p></li></ul></div></dd><dt><span class="term"><code class="literal">Consent</code></span></dt><dd><p>(Optional) Use this parameter to specify a URI that is a SAML Consent
     Identifier.</p></dd><dt><span class="term"><code class="literal">Destination</code></span></dt><dd><p>(Optional) Use this parameter to specify a URI Reference indicating
     the address to which the request is sent.</p></dd><dt><span class="term"><code class="literal">Extension</code></span></dt><dd><p>(Optional) Use this parameter to specify a list of Extensions as
     string objects.</p></dd><dt><span class="term"><code class="literal">goto</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. <code class="literal">RelayState</code> takes
     precedence over this parameter.</p></dd><dt><span class="term"><code class="literal">logoutAll</code></span></dt><dd><p>(Optional) Use this parameter to specify that the identity provider
     should send single logout requests to service providers without indicating
     a session index.</p></dd><dt><span class="term"><code class="literal">RelayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. Make sure you URL encode the value. For
     example, <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>
     takes the user to <code class="literal">http://forgerock.com</code>.</p></dd></dl></div><div class="variablelist" title="spSingleLogoutInit.jsp Parameters"><a name="spsloinit-parameters"></a><div class="variablelist-title"><code class="filename">spSingleLogoutInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Required) Use this parameter to indicate what binding to use for the
     operation. The full, long name format is required for this parameter to work.
     For example, specify <code class="literal">binding=urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</code> 
     to use HTTP POST binding with a self-submitting form rather than the default
     HTTP redirect binding. In addition, you can use 
     <code class="literal">binding=urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact</code>.</p></dd><dt><span class="term"><code class="literal">idpEntityID</code></span></dt><dd><p>(Required for Fedlets) Use this parameter to indicate the remote
     identity provider. If the <code class="literal">binding</code> is not set, then
     OpenAM uses this parameter to find the default binding. Make sure you URL
     encode the value. For example, specify
     <code class="literal">idpEntityID=http://www.sp.example:8080/openam</code> as
     <code class="literal">idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam</code>.</p></dd><dt><span class="term"><code class="literal">NameIDValue</code></span></dt><dd><p>(Required for Fedlets) Use this parameter to indicate the SAML Name
     Identifier for the user.</p></dd><dt><span class="term"><code class="literal">SessionIndex</code></span></dt><dd><p>(Required for Fedlets) Use this parameter to indicate the
     <code class="literal">sessionIndex</code> of the user session to terminate.</p></dd><dt><span class="term"><code class="literal">Consent</code></span></dt><dd><p>(Optional) Use this parameter to specify a URI that is a SAML Consent
     Identifier.</p></dd><dt><span class="term"><code class="literal">Destination</code></span></dt><dd><p>(Optional) Use this parameter to specify a URI Reference indicating
     the address to which the request is sent.</p></dd><dt><span class="term"><code class="literal">Extension</code></span></dt><dd><p>(Optional) Use this parameter to specify a list of Extensions as
     string objects.</p></dd><dt><span class="term"><code class="literal">goto</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. <code class="literal">RelayState</code> takes
     precedence over this parameter.</p></dd><dt><span class="term"><code class="literal">RelayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
     when the process is complete. Make sure you URL encode the value. For
     example, <code class="literal">RelayState=http%3A%2F%2Fforgerock.com</code>
     takes the user to <code class="literal">http://forgerock.com</code>.</p></dd><dt><span class="term"><code class="literal">spEntityID</code></span></dt><dd><p>(Optional, for Fedlets) Use this parameter to indicate the Fedlet
     entity ID. When missing, OpenAM uses the first entity ID in the
     metadata.</p></dd></dl></div><div class="example"><a name="example-saml2-sso-slo"></a><div class="example-title">Example&nbsp;12.1.&nbsp;SSO &amp; SLO From the Service Provider</div><div class="example-contents"><p>The following URL takes the user from the service provider side to
   authenticate at the identity provider and then come back to the end user
   profile page at the service provider after successful SSO. Lines are folded
   to show you the query string parameters.</p><pre class="brush: plain;">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp?metaAlias=/sp
&amp;idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
&amp;RelayState=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam%2Fidm%2FEndUser</pre><p>The following URL initiates SLO from the service provider side,
   leaving the user at <code class="literal">http://forgerock.com</code>.</p><pre class="brush: plain;">http://www.sp.example:8080/openam/saml2/jsp/spSingleLogoutInit.jsp?
&amp;idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
&amp;RelayState=http%3A%2F%2Fforgerock.com</pre></div></div><br class="example-break"><div class="procedure" title="Procedure&nbsp;12.12.&nbsp;To Indicate Progress During SSO"><a name="show-saml2-sso-login-progress"></a><div class="procedure-title">Procedure&nbsp;12.12.&nbsp;To Indicate Progress During SSO</div><p>During SSO log in, OpenAM presents users with a self-submitting form
   when access has been validated. This page is otherwise blank. If you want to
   present users with something to indicate that the operation is in progress,
   then customize the necessary templates.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Modify the templates to add a clue that SSO is in progress, such as
    an image.</p><p>Edit the templates found in OpenAM sources, <a class="link" href="http://sources.forgerock.org/browse/openam/trunk/openam/openam-federation/openam-federation-library/src/main/resources/saml2login.template?r=HEAD" target="_blank"><code class="filename">saml2login.template</code></a> and <a class="link" href="http://sources.forgerock.org/browse/openam/trunk/openam/openam-federation/openam-federation-library/src/main/resources/saml2loginwithrelay.template?r=HEAD" target="_blank"><code class="filename">saml2loginwithrelay.template</code></a>.</p><p>When you add an image or other presentation element, make sure that
    you retain the form and JavaScript as is. Also, as the files are templates,
    what you add must be static HTML.</p></li><li class="step" title="Step 2"><p>Unpack OpenAM-11.0.0.war, and add your modified template files
    under <code class="filename">WEB-INF/classes/</code> where you unpacked the .war.</p><p>Also include any images you reference in the page.</p></li><li class="step" title="Step 3"><p>Pack up your custom version of OpenAM, and then deploy it in your
    web container.</p></li></ol></div></div><div class="section" title="12.9.&nbsp;Configuring OpenAM For the ECP Profile"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="saml2-ecp-config"></a>12.9.&nbsp;Configuring OpenAM For the ECP Profile</h2></div></div></div><a class="indexterm" name="d16811e16580"></a><p>The SAML 2.0 Enhanced Client or Proxy (ECP) profile is intended for use
  when accessing services over devices like simple phones, medical devices, and
  set-top boxes that lack the capabilities needed to use the more widely used
  SAML 2.0 Web Browser SSO profile.</p><p>The ECP knows which identity provider to contact for the user, and is
  able to use the reverse SOAP (PAOS) SAML 2.0 binding for the authentication
  request and response. The PAOS binding uses HTTP and SOAP headers to pass
  information about processing SOAP requests and responses, starting with a
  PAOS HTTP header that the ECP sends in its initial request to the server.
  The PAOS messages continue with a SOAP authentication request in the server's
  HTTP response to the ECP's request for a resource, followed by a SOAP
  response in an HTTP request from the ECP.</p><p>An enhanced client, such as a browser with a plugin or an extension,
  can handle these communications on its own. An enhanced proxy is an HTTP
  server such as a WAP gateway that can support the ECP profile on behalf of
  client applications.</p><p>OpenAM supports the SAML 2.0 ECP profile on the server side for
  identity providers and service providers. You must build the ECP.</p><p>By default an OpenAM identity provider uses the
  <code class="literal">com.sun.identity.saml2.plugins.DefaultIDPECPSessionMapper</code>
  class to find a user session for requests to the IDP from the ECP. The
  default session mapper uses OpenAM cookies as it would for any other client
  application. If for some reason you must change the mapping after writing
  and installing your own session mapper, you can change the class under
  Federation &gt; Entity Providers &gt; <em class="replaceable"><code>idp-name</code></em>
  &gt; IDP &gt; Advanced &gt; ECP Configuration.</p><p>By default an OpenAM service provider uses the
  <code class="literal">com.sun.identity.saml2.plugins.ECPIDPFinder</code> class to
  return identity providers from the list under Federation &gt; Entity
  Providers &gt; <em class="replaceable"><code>sp-name</code></em> &gt; SP &gt; Advanced
  &gt; ECP Configuration &gt; Request IDP List. You must populate the list
  with identity provider entity IDs.</p><div class="variablelist"><p>The endpoint for the ECP to contact on the OpenAM service provider is
   <code class="literal">/SPECP</code> as in
   <code class="literal">http://www.sp.example:8080/openam/SPECP</code>. The ECP provides
   two query string parameters to identify the service provider and to specify
   the URL of the resource to access.</p><dl><dt><span class="term"><code class="literal">metaAlias</code></span></dt><dd><p>This specifies the service provider, by default
     <code class="literal">metaAlias=/<em class="replaceable"><code>realm-name</code></em>/sp</code>,
     as described in <a class="xref" href="#sp-meta-alias" title="MetaAlias">MetaAlias</a>.</p></dd><dt><span class="term"><code class="literal">RelayState</code></span></dt><dd><p>This specifies the resource the client aims to access such as
     <code class="literal">RelayState=http%3A%2F%2Fforgerock.org%2Findex.html</code>.</p></dd></dl></div><p>For example, the URL to access the service provider and finally
  the resource at <code class="literal">http://forgerock.org/index.html</code>
  could be
  <code class="literal">http://www.sp.example:8080/openam/SPECP?metaAlias=/sp&amp;RelayState=http%3A%2F%2Fforgerock.org%2Findex.html</code>.</p></div><div class="section" title="12.10.&nbsp;Managing Federated Accounts"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="federation-linking-accounts"></a>12.10.&nbsp;Managing Federated Accounts</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#transient-federation">12.10.1. Using Transient Federation Identifiers</a></span></dt><dt><span class="section"><a href="#persistent-federation">12.10.2. Using Persistent Federation Identifiers</a></span></dt><dt><span class="section"><a href="#change-federation">12.10.3. Changing Federation of Persistently Linked Accounts</a></span></dt><dt><span class="section"><a href="#terminate-federation">12.10.4. Terminating Federation of Persistently Linked Accounts</a></span></dt><dt><span class="section"><a href="#auto-federation">12.10.5. Configuring Auto-Federation</a></span></dt><dt><span class="section"><a href="#bulk-federation">12.10.6. Linking Federated Accounts in Bulk</a></span></dt></dl></div><a class="indexterm" name="d16811e16654"></a><p>Identity providers and service providers must be able to communicate
  about users. Yet in some cases the identity provider can choose to communicate
  a minimum of information about an authenticated user, with no user account
  maintained on the service provider side. In other cases the identity provider
  and service provider can choose to link user accounts in a persistent way, in
  a more permanent way, or even in automatic fashion by using some shared value
  in the user's profiles such as an email address or by dynamically creating
  accounts on the service provider when necessary. OpenAM supports all these
  alternatives.</p><div class="section" title="12.10.1.&nbsp;Using Transient Federation Identifiers"><div class="titlepage"><div><div><h3 class="title"><a name="transient-federation"></a>12.10.1.&nbsp;Using Transient Federation Identifiers</h3></div></div></div><p>OpenAM allows you to link accounts using transient name identifiers,
   where the identity provider shares a temporary identifier with the service
   provider for the duration of the user session. Nothing is written to the
   user profile.</p><p>Transient identifiers are useful where the service is anonymous, and
   all users have similar access on the service provider side.</p><p>To use transient name identifiers, specify the name ID format
   <code class="literal">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code> when
   initiating single sign on.</p><p>The examples below work in an environment where the identity provider
   is <code class="literal">www.idp.example</code> and the service provider is
   <code class="literal">www.sp.example</code>. Both providers have deployed OpenAM on port
   8080 under deployment URI <code class="literal">/openam</code>.</p><p>To initiate single sign on from the service provider, access the
   following URL with at least the query parameters shown.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp?
 idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
 &amp;metaAlias=/sp
 &amp;NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:transient</pre><p>For a complete list of query parameters, see <a class="xref" href="#spssoinit-parameters" title="spSSOInit.jsp Parameters"><code class="filename">spSSOInit.jsp</code> Parameters</a>.</p><p>To initiate single sign on from the identity provider, access the
   following URL with at least the query parameters shown.</p><pre class="literallayout">http://www.idp.example:8080/openam/saml2/jsp/idpSSOInit.jsp?
 spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam
 &amp;metaAlias=/idp
 &amp;NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:transient</pre><p>For a complete list of query parameters, see <a class="xref" href="#idpssoinit-parameters" title="idpSSOInit.jsp Parameters"><code class="filename">idpSSOInit.jsp</code> Parameters</a>.</p><p>The accounts are only linked for the duration of the session. Once the
   user logs out for example the accounts are no longer linked.</p></div><div class="section" title="12.10.2.&nbsp;Using Persistent Federation Identifiers"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-federation"></a>12.10.2.&nbsp;Using Persistent Federation Identifiers</h3></div></div></div><p>OpenAM lets you use persistent pseudonym identifiers to federate user
   identities, linking accounts on the identity provider and service provider
   with a SAML persistent identifier.</p><p>Persistent identifiers are useful for establishing links between
   otherwise unrelated accounts.</p><p>The examples below work in an environment where the identity provider
   is <code class="literal">www.idp.example</code> and the service provider is
   <code class="literal">www.sp.example</code>. Both providers have deployed OpenAM on port
   8080 under deployment URI <code class="literal">/openam</code>.</p><p>To initiate single sign on from the service provider, access the
   following URL with at least the query parameters shown.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp?
 idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
 &amp;metaAlias=/sp
 &amp;NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</pre><p>For a complete list of query parameters, see <a class="xref" href="#spssoinit-parameters" title="spSSOInit.jsp Parameters"><code class="filename">spSSOInit.jsp</code> Parameters</a>.</p><p>To initiate single sign on from the identity provider, access the
   following URL with at least the query parameters shown.</p><pre class="literallayout">http://www.idp.example:8080/openam/saml2/jsp/idpSSOInit.jsp?
 spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam
 &amp;metaAlias=/idp
 &amp;NameIDFormat=urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</pre><p>For a complete list of query parameters, see <a class="xref" href="#idpssoinit-parameters" title="idpSSOInit.jsp Parameters"><code class="filename">idpSSOInit.jsp</code> Parameters</a>.</p><p>On successful login, the accounts are persistently linked, with
   persistent identifiers stored in the user's accounts on the identity provider
   and the service provider.</p></div><div class="section" title="12.10.3.&nbsp;Changing Federation of Persistently Linked Accounts"><div class="titlepage"><div><div><h3 class="title"><a name="change-federation"></a>12.10.3.&nbsp;Changing Federation of Persistently Linked Accounts</h3></div></div></div><p>OpenAM implements the SAML 2.0 Name Identifier Management profile,
   allowing you to change a persistent identifier that has been set to federate
   accounts, and also to terminate federation for an account.</p><p>When user accounts are stored in an LDAP directory server, name
   identifier information is stored on the
   <code class="literal">sun-fm-saml2-nameid-info</code> and
   <code class="literal">sun-fm-saml2-nameid-infokey</code> attributes of a user's
   entry.<sup>[<a name="d16811e16751" href="#ftn.d16811e16751" class="footnote">7</a>]</sup> You can retrieve the name identifier value
   by checking the value of
   <code class="literal">sun-fm-saml2-nameid-infokey</code>.</p><p>For example, if the user's entry in the directory shows
   <code class="literal">sun-fm-saml2-nameid-infokey:
   http://www.idp.example:8080/openam|http://www.sp.example:8080/openam|
   XyfFEsr6Vixbnt0BSqIglLFMGjR2</code>, then the name identifier is
   <code class="literal">XyfFEsr6Vixbnt0BSqIglLFMGjR2</code>.</p><p>You can use this identifier to initiate a change request from the
   service provider as in the following example.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spMNIRequestInit.jsp?
 idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
 &amp;metaAlias=/sp
 &amp;requestType=NewID
 &amp;IDPProvidedID=XyfFEsr6Vixbnt0BSqIglLFMGjR2</pre><p>If desired, you can substitute <code class="literal">openam/SPMniInit</code>
   for <code class="literal">openam/saml2/jsp/spMNIRequestInit.jsp</code></p><p>You can also initiate the change request from the identity provider
   as in the following example.</p><pre class="literallayout">http://www.idp.example:8080/openam/saml2/jsp/idpMNIRequestInit.jsp?
 spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam
 &amp;metaAlias=/idp
 &amp;requestType=NewID
 &amp;SPProvidedID=XyfFEsr6Vixbnt0BSqIglLFMGjR2</pre><p>If desired, you can substitute <code class="literal">openam/IDPMniInit</code>
   for <code class="literal">openam/saml2/jsp/idpMNIRequestInit.jsp</code></p><div class="variablelist" title="idpMNIRequestInit.jsp Parameters"><a name="idpmnirequestinit-parameters"></a><div class="variablelist-title"><code class="filename">idpMNIRequestInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">spEntityID</code></span></dt><dd><p>(Required) Use this parameter to indicate the remote service
      provider. Make sure you URL encode the value. For example, specify
      <code class="literal">spEntityID=http://www.sp.example:8080/openam</code> as
      <code class="literal">spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam</code>.</p></dd><dt><span class="term"><code class="literal">metaAlias</code></span></dt><dd><p>(Required) Use this parameter to specify the local alias for the
      provider, such as <code class="literal">metaAlias=/myRealm/idp</code>. This
      parameter takes the format
      <code class="literal">/<em class="replaceable"><code>realm-name</code></em>/<em class="replaceable"><code>provider-name</code></em></code> as described in <a class="xref" href="#idp-meta-alias" title="MetaAlias">MetaAlias</a>. You do not repeat the slash for
      the top level realm, for example <code class="literal">metaAlias=/idp</code>.</p></dd><dt><span class="term"><code class="literal">requestType</code></span></dt><dd><p>(Required) Type of manage name ID request, either
      <code class="literal">NewID</code> to change the ID, or <code class="literal">Terminate</code>
      to remove the information that links the accounts on the identity provider
      and service provider.</p></dd><dt><span class="term"><code class="literal">SPProvidedID</code></span></dt><dd><p>(Required if <code class="literal">requestType=NewID</code>) Name identifier
      in use as described above.</p></dd><dt><span class="term"><code class="literal">affiliationID</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML affiliation
      identifier.</p></dd><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Optional) Use this parameter to indicate what binding to use for
      the operation. The full, long name format is required for this parameter
      to work.</p><div class="itemizedlist"><p>The value must be one of the following.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</code></p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect</code></p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</code></p></li></ul></div></dd><dt><span class="term"><code class="literal">relayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
      when the process is complete. Make sure you URL encode the value. For
      example, <code class="literal">relayState=http%3A%2F%2Fforgerock.com</code>
      takes the user to <code class="literal">http://forgerock.com</code>.</p></dd></dl></div><div class="variablelist" title="spMNIRequestInit.jsp Parameters"><a name="spmnirequestinit-parameters"></a><div class="variablelist-title"><code class="filename">spMNIRequestInit.jsp</code> Parameters</div><dl><dt><span class="term"><code class="literal">idpEntityID</code></span></dt><dd><p>(Required) Use this parameter to indicate the remote identity
      provider. Make sure you URL encode the value. For example, specify
      <code class="literal">idpEntityID=http://www.idp.example:8080/openam</code> as
      <code class="literal">idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam</code>.</p></dd><dt><span class="term"><code class="literal">metaAlias</code></span></dt><dd><p>(Required) Use this parameter to specify the local alias for the
      provider, such as <code class="literal">metaAlias=/myRealm/sp</code>. This parameter
      takes the format <code class="literal">/<em class="replaceable"><code>realm-name</code></em>/<em class="replaceable"><code>provider-name</code></em></code> as described in <a class="xref" href="#sp-meta-alias" title="MetaAlias">MetaAlias</a>. You do not repeat the slash for the
      top level realm, <code class="literal">metaAlias=/sp</code>.</p></dd><dt><span class="term"><code class="literal">requestType</code></span></dt><dd><p>(Required) Type of manage name ID request, either
      <code class="literal">NewID</code> to change the ID, or <code class="literal">Terminate</code>
      to remove the information that links the accounts on the identity provider
      and service provider.</p></dd><dt><span class="term"><code class="literal">IDPProvidedID</code></span></dt><dd><p>(Required if <code class="literal">requestType=NewID</code>) Name identifier
      in use as described above.</p></dd><dt><span class="term"><code class="literal">affiliationID</code></span></dt><dd><p>(Optional) Use this parameter to specify a SAML affiliation
      identifier.</p></dd><dt><span class="term"><code class="literal">binding</code></span></dt><dd><p>(Optional) Use this parameter to indicate what binding to use for
      the operation. The full, long name format is required for this parameter
      to work.</p><div class="itemizedlist"><p>The value must be one of the following.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</code></p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect</code></p></li><li class="listitem"><p><code class="literal">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</code></p></li></ul></div></dd><dt><span class="term"><code class="literal">relayState</code></span></dt><dd><p>(Optional) Use this parameter to specify where to redirect the user
      when the process is complete. Make sure you URL encode the value. For
      example, <code class="literal">relayState=http%3A%2F%2Fforgerock.com</code>
      takes the user to <code class="literal">http://forgerock.com</code>.</p></dd></dl></div><p>You can terminate federation as described in <a class="xref" href="#terminate-federation" title="12.10.4.&nbsp;Terminating Federation of Persistently Linked Accounts">Section&nbsp;12.10.4, &#8220;Terminating Federation of Persistently Linked Accounts&#8221;</a>.</p></div><div class="section" title="12.10.4.&nbsp;Terminating Federation of Persistently Linked Accounts"><div class="titlepage"><div><div><h3 class="title"><a name="terminate-federation"></a>12.10.4.&nbsp;Terminating Federation of Persistently Linked Accounts</h3></div></div></div><p>OpenAM lets you terminate account federation, where the accounts have
   been linked with a persistent identifier as described in <a class="xref" href="#persistent-federation" title="12.10.2.&nbsp;Using Persistent Federation Identifiers">Section&nbsp;12.10.2, &#8220;Using Persistent Federation Identifiers&#8221;</a>.</p><p>The examples below work in an environment where the identity provider
   is <code class="literal">www.idp.example</code> and the service provider is
   <code class="literal">www.sp.example</code>. Both providers have deployed OpenAM on port
   8080 under deployment URI <code class="literal">/openam</code>.</p><p>To initiate the process of terminating account federation from the
   service provider, access the following URL with at least the query
   parameters shown.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spMNIRequestInit.jsp?
 idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
 &amp;metaAlias=/sp
 &amp;requestType=Terminate</pre><p>To initiate the process of terminating account federation from the
   identity provider, access the following URL with at least the query
   parameters shown.</p><pre class="literallayout">http://www.idp.example:8080/openam/saml2/jsp/idpMNIRequestInit.jsp?
 spEntityID=http%3A%2F%2Fwww.sp.example%3A8080%2Fopenam
 &amp;metaAlias=/idp
 &amp;requestType=Terminate</pre></div><div class="section" title="12.10.5.&nbsp;Configuring Auto-Federation"><div class="titlepage"><div><div><h3 class="title"><a name="auto-federation"></a>12.10.5.&nbsp;Configuring Auto-Federation</h3></div></div></div><p>OpenAM lets you configure the service provider to link an account
   based on an attribute value from the identity provider. When you know
   the user accounts on both the identity provider and the service provider
   share a common attribute value, such as an email address or other unique
   user identifier, you can use this method to link accounts without user
   interaction. See <a class="xref" href="#auto-federate-based-on-attribute" title="Procedure&nbsp;12.13.&nbsp;To Auto-Federate Accounts Based on an Attribute Value">Procedure&nbsp;12.13, &#8220;To Auto-Federate Accounts Based on an Attribute Value&#8221;</a>.</p><p>OpenAM also lets you map users on the identity provider temporarily to
   a single anonymous user account on the service provider, in order to
   exchange attributes about the user without a user-specific account on the
   service provider. This approach can be useful when the service provider
   either needs no user-specific account to provide a service, or when you
   do not want to retain a user profile on the service provider but instead
   you make authorization decisions based on attribute values from the identity
   provider. See <a class="xref" href="#auto-federate-using-anonymous" title="Procedure&nbsp;12.14.&nbsp;To Auto-Federate Using a Single Service Provider Account">Procedure&nbsp;12.14, &#8220;To Auto-Federate Using a Single Service Provider Account&#8221;</a>.</p><p>OpenAM further allows you to use attributes from the identity provider
   to create accounts dynamically on the service provider. When using this
   method, you should inform the user and obtain consent to create the account
   if necessary. See <a class="xref" href="#auto-federate-with-dynamic-creation" title="Procedure&nbsp;12.15.&nbsp;To Auto-Federate With Dynamic Service Provider Account Creation">Procedure&nbsp;12.15, &#8220;To Auto-Federate With Dynamic Service Provider Account Creation&#8221;</a>.</p><div class="procedure" title="Procedure&nbsp;12.13.&nbsp;To Auto-Federate Accounts Based on an Attribute Value"><a name="auto-federate-based-on-attribute"></a><div class="procedure-title">Procedure&nbsp;12.13.&nbsp;To Auto-Federate Accounts Based on an Attribute Value</div><p>The following steps demonstrate how to auto-federate accounts based
    on an attribute value that is the same in both accounts.</p><p>Perform the following steps on the hosted identity provider(s), and
    again on the hosted service provider(s).</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as administrator.</p></li><li class="step" title="Step 2"><p>Browse to Federation &gt; <em class="replaceable"><code>hosted-provider-name</code></em> &gt; Assertion Processing.</p></li><li class="step" title="Step 3"><p>If the attribute to use for auto-federation is not yet in the
     attribute map, add the attribute mapping, and then Save your work.</p></li><li class="step" title="Step 4"><p>On the hosted service provider, under Auto Federation, select
     Enabled and enter the local attribute name in the Attribute field, and
     then Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.14.&nbsp;To Auto-Federate Using a Single Service Provider Account"><a name="auto-federate-using-anonymous"></a><div class="procedure-title">Procedure&nbsp;12.14.&nbsp;To Auto-Federate Using a Single Service Provider Account</div><p>The following steps demonstrate how to auto-federate using a single
    anonymous user account on the service provider.</p><p>Perform the following steps on the hosted identity provider(s), and
    again on the hosted service provider(s).</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as administrator.</p></li><li class="step" title="Step 2"><p>Browse to Federation &gt; <em class="replaceable"><code>hosted-provider-name</code></em> &gt; Assertion Processing.</p></li><li class="step" title="Step 3"><p>If you want to get attributes from the identity provider and the
     attributes are is not yet in the attribute map, add the attribute mapping,
     and then Save your work.</p></li><li class="step" title="Step 4"><p>On the hosted service provider, under Transient User, set the
     single account to which to map all users, such as
     <code class="literal">anonymous</code>, and then Save your work.</p></li><li class="step" title="Step 5"><p>After completing configuration on the providers, use transient
     identifiers to federate as described in <a class="xref" href="#transient-federation" title="12.10.1.&nbsp;Using Transient Federation Identifiers">Section&nbsp;12.10.1, &#8220;Using Transient Federation Identifiers&#8221;</a>.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.15.&nbsp;To Auto-Federate With Dynamic Service Provider Account Creation"><a name="auto-federate-with-dynamic-creation"></a><div class="procedure-title">Procedure&nbsp;12.15.&nbsp;To Auto-Federate With Dynamic Service Provider Account Creation</div><p>The following steps demonstrate how to auto-federate, dynamically
    creating an account on the service provider if necessary.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Set up auto-federation as described in <a class="xref" href="#auto-federate-based-on-attribute" title="Procedure&nbsp;12.13.&nbsp;To Auto-Federate Accounts Based on an Attribute Value">Procedure&nbsp;12.13, &#8220;To Auto-Federate Accounts Based on an Attribute Value&#8221;</a>. The attributes you map
     from the identity provider are those that the service provider sets on
     the dynamically created accounts.</p></li><li class="step" title="Step 2"><p>On the service provider console, browse to Access Control &gt;
     <em class="replaceable"><code>realm-name</code></em> &gt; Authentication &gt; All Core
     Settings..., and Dynamic or Dynamic with User Alias, which are described
     in <a href="../admin-guide/index.html#core-module-conf-hints" class="link"><em class="citetitle">Hints For the
     Core Authentication Module</em></a>, and then Save your
     work.</p></li><li class="step" title="Step 3"><p>To test your work, create a user on the identity provider, log
     out of the console, and initiate SSO logging in as the user you
     created.</p><p>To initiate SSO, browse to one of the OpenAM SAML 2.0 JSPs with the
     appropriate query parameters. The following is an example URL for service
     provider initiated SSO.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp?
 idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
 &amp;metaAlias=/sp</pre><p>On success, check <code class="literal">http://www.sp.example:8080/openam/idm/EndUser</code> to see the new user
     account.</p></li></ol></div></div><div class="section" title="12.10.6.&nbsp;Linking Federated Accounts in Bulk"><div class="titlepage"><div><div><h3 class="title"><a name="bulk-federation"></a>12.10.6.&nbsp;Linking Federated Accounts in Bulk</h3></div></div></div><p>If you manage both the identity provider and service provider, you
   can link accounts out-of-band, in bulk. You make permanent connections for a
   list of identity provider and service provider by using the
   <span class="command"><strong>ssoadm</strong></span> bulk federation commands.</p><p>Before you can run the bulk federation commands, first establish the
   relationship between accounts, set up the providers as described in
   <a class="xref" href="#set-up-federation" title="12.2.&nbsp;Setting Up SAML 2.0 SSO">Section&nbsp;12.2, &#8220;Setting Up SAML 2.0 SSO&#8221;</a>, and install the
   <span class="command"><strong>ssoadm</strong></span> command as described in <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
   Administration Tools</em></a>.</p><p>To understand the relationships between accounts, consider an example
   where the identity provider is at <code class="literal">idp.example.org</code> and the
   service provider is at <code class="literal">sp.example.com</code>. A demo user
   account has the Universal ID,
   <code class="literal">id=demo,ou=user,dc=example,dc=org</code>, on the identity
   provider. That maps to the Universal ID,
   <code class="literal">id=demo,ou=user,dc=example,dc=com</code>, on the service
   provider.</p><p>The <span class="command"><strong>ssoadm</strong></span> command then needs a file that maps
   local user IDs to remote user IDs, one per line, separated by the vertical
   bar character <code class="literal">|</code>. Each line of the file appears as
   follows.</p><pre class="literallayout"><em class="replaceable"><code>local-user-ID</code></em>|<em class="replaceable"><code>remote-user-ID</code></em></pre><p>In the example, starting on the service provider side, the line for
   the demo user reads as follows.</p><pre class="literallayout">id=demo,ou=user,dc=example,dc=com|id=demo,ou=user,dc=example,dc=org</pre><p>All the users&#8217; accounts mapped in your file must exist at the identity
   provider and the service provider when you run the commands to link
   them.</p><div class="orderedlist"><p>Link the accounts using the <span class="command"><strong>ssoadm</strong></span> bulk federation
    commands.</p><ol class="orderedlist" type="1"><li class="listitem"><p>Prepare the data with the
     <span class="command"><strong>ssoadm do-bulk-federation</strong></span> command.</p><p>The following example starts on the service provider side.</p><div class="screen"><pre class="brush: plain;">$ cat /tmp/user-map.txt
id=demo,ou=user,dc=example,dc=com|id=demo,ou=user,dc=example,dc=org
$ ssoadm do-bulk-federation --metaalias /sp
 --remoteentityid http://idp.example.org:8080/openam
 --useridmapping /tmp/user-map.txt
 --nameidmapping /tmp/name-map.txt
 --adminid amadmin --password-file /tmp/pwd.txt
 --spec saml2

Bulk Federation for this host was completed. To complete the
federation, name Id mapping file should be loaded to remote
provider.</pre></div></li><li class="listitem"><p>Copy the name ID mapping output file to the other provider.</p><div class="screen"><pre class="brush: plain;">$ scp /tmp/name-map.txt openam@idp.example.org:/tmp/name-map.txt
openam@idp.example.org's password:
name-map.txt                     100%  177     0.2KB/s   00:00</pre></div></li><li class="listitem"><p>Import the name ID mapping file with the
     <span class="command"><strong>ssoadm import-bulk-fed-data</strong></span> command.</p><p>The following example is performed on the identity provider
     side.</p><div class="screen"><pre class="brush: plain;">$ ssoadm import-bulk-fed-data
 --adminid amadmin --password-file /tmp/pwd.txt
 --metaalias /idp --bulk-data-file /tmp/name-map.txt

Bulk Federation for this host was completed.</pre></div></li></ol></div><p>At this point the accounts are linked.</p></div></div><div class="section" title="12.11.&nbsp;Using SAML 2.0 Artifacts"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-saml2-artifacts"></a>12.11.&nbsp;Using SAML 2.0 Artifacts</h2></div></div></div><p>By default OpenAM transmits SAML messages by value. This makes it
  possible to access the SAML messages in the user agent. You can instead
  request that OpenAM transmit SAML messages by reference using SAML artifacts,
  which are small values that reference a SAML message. Providers then
  communicate directly to resolve artifacts, rather than sending the messages
  through the user agent.</p><p>When initiating single sign-on using <code class="filename">idpSSOInit.jsp</code>
  or <code class="filename">spSSOInit.jsp</code> for example, add
  <code class="literal">binding=HTTP-Artifact</code> to the list of query parameters.
  The following example works in an environment where the identity provider is
  <code class="literal">www.idp.example</code> and the service provider is
  <code class="literal">www.sp.example</code>. Both providers have deployed OpenAM on port
  8080 under deployment URI <code class="literal">/openam</code>.</p><pre class="literallayout">http://www.sp.example:8080/openam/saml2/jsp/spSSOInit.jsp?
   idpEntityID=http%3A%2F%2Fwww.idp.example%3A8080%2Fopenam
   &amp;metaAlias=/sp
   &amp;binding=HTTP-Artifact</pre></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e16751" href="#d16811e16751" class="para">7</a>] </sup>These attribute types are configurable in the OpenAM
   console under Configuration &gt; Global &gt; SAMLv2 Service
   Configuration.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;13.&nbsp;Managing OAuth 2.0 Authorization"><div class="titlepage"><div><div><h2 class="title"><a name="chap-oauth2"></a>Chapter&nbsp;13.&nbsp;Managing OAuth 2.0 Authorization</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-oauth2-support">13.1. About OAuth 2.0 Support in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-oauth2-authz">13.2. Configuring the OAuth 2.0 Authorization Service</a></span></dt><dt><span class="section"><a href="#register-oauth2-client">13.3. Registering OAuth 2.0 Clients With the Authorization Service</a></span></dt><dt><span class="section"><a href="#oauth2-manage-tokens">13.4. Managing OAuth 2.0 Tokens</a></span></dt><dt><span class="section"><a href="#oauth2-client-plus-authz">13.5. Configuring OpenAM as Authorization Server &amp; Client</a></span></dt><dt><span class="section"><a href="#oauth2-sp-and-authz">13.6. Configuring OpenAM as Both SAML 2.0 Service Provider &amp; OAuth 2.0
  Authorization Server</a></span></dt><dt><span class="section"><a href="#oauth2-security-considerations">13.7. Security Considerations</a></span></dt></dl></div><a class="indexterm" name="d16811e17246"></a><a class="indexterm" name="d16811e17251"></a><p>This chapter covers OpenAM support for the OAuth 2.0 authorization
 framework. The chapter begins by showing where OpenAM fits into the OAuth 2.0
 authorization framework, and then shows how to configure the
 functionality.</p><div class="section" title="13.1.&nbsp;About OAuth 2.0 Support in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-oauth2-support"></a>13.1.&nbsp;About OAuth 2.0 Support in OpenAM</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#openam-oauth2-authz-server">13.1.1. OpenAM as OAuth 2.0 Authorization Server</a></span></dt><dt><span class="section"><a href="#openam-oauth2-client">13.1.2. OpenAM as OAuth 2.0 Client &amp; Resource Server Solution</a></span></dt><dt><span class="section"><a href="#oauth2-byo-client">13.1.3. Using Your Own Client &amp; Resource Server</a></span></dt></dl></div><p>RFC 6749, <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank"><em class="citetitle">The OAuth 2.0 Authorization Framework</em></a>,
  provides a standard way for <em class="firstterm">resource owners</em> to grant
  <em class="firstterm">client</em> applications access to the owners' web-based
  resources. The canonical example involves a user (resource owner) granting
  access to a printing service (client) to print photos that the user has
  stored on a photo-sharing server.</p><p>The section describes how OpenAM supports the OAuth 2.0 authorization
  framework in terms of the roles that OpenAM plays.<sup>[<a name="d16811e17273" href="#ftn.d16811e17273" class="footnote">8</a>]</sup> The following sequence diagram indicates the primary roles
  OpenAM can play in the OAuth 2.0 protocol flow.</p><div class="mediaobject" title="OpenAM in OAuth 2.0 protocol flow"><a name="figure-oauth2-flow"></a><img src="images/oauth2-flow.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-flow.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-flow.html" target="longdesc">D</a>]</span></div></div><div class="section" title="13.1.1.&nbsp;OpenAM as OAuth 2.0 Authorization Server"><div class="titlepage"><div><div><h3 class="title"><a name="openam-oauth2-authz-server"></a>13.1.1.&nbsp;OpenAM as OAuth 2.0 Authorization Server</h3></div></div></div><p>OpenAM can function as an OAuth 2.0 <em class="firstterm">authorization
   server</em>. In this role, OpenAM authenticates resource owners and
   obtains their authorization in order to return access tokens to
   clients.</p><p>When using OpenAM as authorization server, you register clients with
   OpenAM by using OAuth 2.0 policy agent profiles. OpenAM supports both
   confidential and public clients.</p><p>OpenAM supports the four main grants for obtaining authorization
   described in RFC 6749: the authorization code grant, the implicit grant,
   the resource owner password credentials grant, and the client credentials
   grant. See RFC 6749 for details on the authorization grant process, and
   for details on how clients should make authorization requests and handle
   authorization responses. OpenAM also supports the <a class="link" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer" target="_blank"><em class="citetitle">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</em></a>,
   described in the Internet-Draft.</p><div class="section" title="13.1.1.1.&nbsp;OAuth 2.0 Authorization Grant"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-authz"></a>13.1.1.1.&nbsp;OAuth 2.0 Authorization Grant</h4></div></div></div><p>The authorization code grant starts with the client, such as a
    web-based service, redirecting the resource owner's user-agent to the OpenAM
    authorization service. After authenticating the resource owner and
    obtaining the resource owner's authorization, OpenAM redirects the resource
    owner's user-agent back to the client with an authorization code that the
    client uses to request the access token. The following sequence diagram
    outlines a successful process from initial client redirection through to the
    client accessing the protected resource.</p><div class="mediaobject" title="OpenAM in OAuth 2.0 Authorization Code Grant process"><a name="figure-oauth2-authz"></a><img src="images/oauth2-authz.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-authz.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-authz.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="13.1.1.2.&nbsp;OAuth 2.0 Implicit Grant"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-implicit"></a>13.1.1.2.&nbsp;OAuth 2.0 Implicit Grant</h4></div></div></div><p>The implicit grant is designed for clients implemented to run inside
    the resource-owner user agent. Instead of providing an authorization code
    that the client must use to retrieve an access token, OpenAM returns the
    access token directly in the fragment portion of the redirect URI. The
    following sequence diagram outlines the successful process.</p><div class="mediaobject" title="OpenAM in OAuth 2.0 Implicit Grant process"><a name="figure-oauth2-implicit"></a><img src="images/oauth2-implicit.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-implicit.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-implicit.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="13.1.1.3.&nbsp;OAuth 2.0 Resource Owner Password Credentials Grant"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-ropc"></a>13.1.1.3.&nbsp;OAuth 2.0 Resource Owner Password Credentials Grant</h4></div></div></div><p>The resource owner password credentials grant lets the client use the
    resource owner's user name and password to get an access token directly.
    Although this grant might seem to conflict with an original OAuth goal of
    not having to share resource owner credentials with the client, it can
    makes sense in a secure context where other authorization grant types are
    not available, such as a client that is part of a device operating system
    using the resource owner credentials once and thereafter using refresh tokens
    to continue accessing resources. The following sequence diagram shows the
    successful process.</p><div class="mediaobject" title="OpenAM in OAuth 2.0 Resource Owner Password Credentials Grant process"><a name="figure-oauth2-ropc"></a><img src="images/oauth2-ropc.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-ropc.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-ropc.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="13.1.1.4.&nbsp;OAuth 2.0 Client Credentials Grant"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-client-cred"></a>13.1.1.4.&nbsp;OAuth 2.0 Client Credentials Grant</h4></div></div></div><p>The client credentials grant uses client credentials as an
    authorization grant. This grant makes sense when the client is also the
    resource owner, for example. The following sequence diagram shows the
    successful process.</p><div class="mediaobject" title="OpenAM in OAuth 2.0 Client Credentials Grant process"><a name="figure-oauth2-client-cred"></a><img src="images/oauth2-client-cred.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-client-cred.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-client-cred.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="13.1.1.5.&nbsp;SAML 2.0 Bearer Assertion Profiles"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-saml2-bearer"></a>13.1.1.5.&nbsp;SAML 2.0 Bearer Assertion Profiles</h4></div></div></div><a class="indexterm" name="d16811e17359"></a><p>The Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-ietf-oauth-saml2-bearer" target="_blank"><em class="citetitle">SAML 2.0 Bearer Assertion Profiles for OAuth 2.0</em></a>,
    describes a means to use SAML 2.0 assertions to request access tokens and
    to authenticate OAuth 2.0 clients.</p><p>At present OpenAM implements the profile to request access
    tokens.</p><p>In both profiles, the issuer must sign the assertion. The client
    communicates the assertion over a channel protected with transport
    layer security, by performing an HTTP POST to the OpenAM's access token
    endpoint. OpenAM as OAuth 2.0 authorization server uses the issuer ID to
    validate the signature on the assertion.</p><p>In the profile to request an access token, the OAuth 2.0 client
    bears a SAML 2.0 assertion that was issued to the resource owner on
    successful authentication. A valid assertion in this case is equivalent
    to an authorization grant by the resource owner to the client. OAuth 2.0
    clients must make it clear to the resource owner that by authenticating to
    the identity provider who issues the assertion, they are granting the client
    permission to access the protected resources.</p><div class="mediaobject" title="SAML 2.0 Bearer Assertion Authorization Grant"><a name="figure-oauth2-saml2-bearer"></a><img src="images/oauth2-saml2-bearer.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-saml2-bearer.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-saml2-bearer.html" target="longdesc">D</a>]</span></div></div><p>The HTTP POST to OpenAM to request an access token looks something
    like this:</p><pre class="brush: http;">POST /openam/oauth2/access_token HTTP/1.1
    Host: openam.example.com
    Content-Type: application/x-www-form-urlencoded

    grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Asaml2-bearer&amp;
    assertion=PHNhbWxwOl...[base64url encoded assertion]...ZT4&amp;
    client_id=[ID registered with OpenAM]</pre><p>If OpenAM is already a SAML 2.0 service provider, you can configure
    OpenAM as OAuth 2.0 authorization server as well, and set an adapter class
    name in the service provider configuration that lets OpenAM POST the
    assertion from the service provider to the authorization server. See
    <a class="xref" href="#oauth2-sp-and-authz" title="13.6.&nbsp;Configuring OpenAM as Both SAML 2.0 Service Provider &amp; OAuth 2.0 Authorization Server">Section&nbsp;13.6, &#8220;Configuring OpenAM as Both SAML 2.0 Service Provider &amp; OAuth 2.0
  Authorization Server&#8221;</a> for details.</p></div><div class="section" title="13.1.1.6.&nbsp;OpenAM OAuth 2.0 Endpoints"><div class="titlepage"><div><div><h4 class="title"><a name="oauth2-endpoints"></a>13.1.1.6.&nbsp;OpenAM OAuth 2.0 Endpoints</h4></div></div></div><div lang="en" class="variablelist"><p>In addition to the standard authorization and token endpoints
 described in RFC 6749, OpenAM also exposes a token information endpoint
 for resource servers to get information about access tokens so they can
 determine how to respond to requests for protected resources. OpenAM as
 authorization server exposes the following endpoints for clients and
 resource servers.</p><dl><dt><span class="term"><code class="literal">/oauth2/authorize</code></span></dt><dd><p>Authorization endpoint defined in RFC 6749, used to obtain an
   authorization grant from the resource owner</p><p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize</code></p></dd><dt><span class="term"><code class="literal">/oauth2/access_token</code></span></dt><dd><p>Token endpoint defined in RFC 6749, used to obtain an access token
   from the authorization server</p><p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/access_token</code></p></dd><dt><span class="term"><code class="literal">/oauth2/tokeninfo</code></span></dt><dd><p>Endpoint not defined in RFC 6749, used to validate tokens, and to
   retrieve information such as scopes</p><p>Given an access token, a resource server can perform an HTTP GET on
   <code class="literal">/oauth2/tokeninfo?access_token=<em class="replaceable"><code>token-id</code></em></code>
   to retrieve a JSON object indicating <code class="literal">token_type</code>,
   <code class="literal">expires_in</code>, <code class="literal">scope</code>, and the
   <code class="literal">access_token</code> ID.</p><p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/tokeninfo</code></p></dd></dl></div><p>For examples, see the <em class="citetitle">Developer's Guide</em> section,
    <a href="../dev-guide/index.html#rest-api-oauth2" class="link"><em class="citetitle">OAuth 2.0
    Authorization</em></a>.</p></div></div><div class="section" title="13.1.2.&nbsp;OpenAM as OAuth 2.0 Client &amp; Resource Server Solution"><div class="titlepage"><div><div><h3 class="title"><a name="openam-oauth2-client"></a>13.1.2.&nbsp;OpenAM as OAuth 2.0 Client &amp; Resource Server Solution</h3></div></div></div><p>OpenAM can function as an OAuth 2.0 client for installations where the
   web resources are protected by OpenAM. To configure OpenAM as an OAuth 2.0
   client, you set up an OpenAM OAuth 2.0 authentication module instance, and
   then integrate the authentication module into your authentication chains as
   necessary.</p><p>When OpenAM functions as an OAuth 2.0 client, OpenAM provides an
   OpenAM SSO session after successfully authenticating the resource owner and
   obtaining authorization. This means the client can then access resources
   protected by policy agents. In this respect the OpenAM OAuth 2.0 client is
   just like any other authentication module, one that relies on an&nbsp;OAuth 2.0
   authorization server to authenticate the resource owner and&nbsp;obtain
   authorization. The following sequence diagram shows how the client gains
   access to protected resources in the scenario where OpenAM functions as both
   authorization server and client for example.</p><div class="mediaobject" title="OpenAM as OAuth 2.0 client and authorization server"><a name="figure-oauth2-openam-client"></a><img src="images/oauth2-openam-client.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-openam-client.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-openam-client.html" target="longdesc">D</a>]</span></div></div><p>As the OAuth 2.0 client functionality is implemented as an OpenAM
   authentication module, you do not need to deploy your own resource server
   implementation when using OpenAM as an OAuth 2.0 client. Instead, use policy
   agents or OpenIG to protect resources.</p><p>To configure OpenAM as an OAuth 2.0 client, see <a href="../admin-guide/index.html#oauth2-module-conf-hints" class="link"><em class="citetitle">Hints For the
   OAuth 2.0 Authentication Module</em></a>.</p></div><div class="section" title="13.1.3.&nbsp;Using Your Own Client &amp; Resource Server"><div class="titlepage"><div><div><h3 class="title"><a name="oauth2-byo-client"></a>13.1.3.&nbsp;Using Your Own Client &amp; Resource Server</h3></div></div></div><p>OpenAM returns bearer tokens as described in RFC 6750, <a class="link" href="http://tools.ietf.org/html/rfc6750" target="_blank"><em class="citetitle">The OAuth 2.0 Authorization Framework: Bearer Token
   Usage</em></a>. Notice in the following example JSON response to
   an access token request that OpenAM returns a refresh token with the access
   token. The client can use the refresh token to get a new access token as
   described in RFC 6749.</p><pre class="brush: javascript;">{
    "expires_in": 599,
    "token_type": "Bearer",
    "refresh_token": "f6dcf133-f00b-4943-a8d4-ee939fc1bf29",
    "access_token": "f9063e26-3a29-41ec-86de-1d0d68aa85e9"
}</pre><p>In addition to implementing your client, the resource server must also
   implement the logic for handling access tokens. The resource server can use
   the <code class="literal">/oauth2/tokeninfo</code> endpoint to determine whether the
   access token is still valid, and to retrieve the scopes associated with the
   access token.</p><p>The default OpenAM implementation of OAuth 2.0 scopes assumes that the
   space-separated (%20 when URL encoded) list of scopes in an access token
   request correspond to names of attributes in the resource owner's
   profile.</p><p>To take a concrete example, consider an access token request where
   <code class="literal">scope=mail%20cn</code> and where the resource owner is the
   default OpenAM demo user. (The demo user has no email address by default, but
   you can add one, such as <code class="literal">demo@example.com</code> to the demo
   user's profile.) When the resource server performs an HTTP GET on the token
   information endpoint, <code class="literal">/oauth2/tokeninfo?access_token=<em class="replaceable"><code>token-id</code></em></code>, OpenAM populates the
   <code class="literal">mail</code> and <code class="literal">cn</code> scopes with the email
   address (<code class="literal">demo@example.com</code>) and common name
   (<code class="literal">demo</code>) from the demo user's profile. The result is a
   something like the following token information response.</p><pre class="brush: javascript;">{
    "mail": "demo@example.com",
    "scope": [
        "mail",
        "cn"
    ],
    "cn": "demo",
    "realm": "/",
    "token_type": "Bearer",
    "expires_in": 577,
    "access_token": "f9063e26-3a29-41ec-86de-1d0d68aa85e9"
}</pre><p>OpenAM is designed to allow you to plug in your own scopes
   implementation if the default implementation does not do what your
   deployment requires. See <a href="../dev-guide/index.html#chap-oauth2-scopes" class="link"><em class="citetitle">Customizing
   OAuth 2.0 Scope Handling</em></a> for an example.</p></div></div><div class="section" title="13.2.&nbsp;Configuring the OAuth 2.0 Authorization Service"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-oauth2-authz"></a>13.2.&nbsp;Configuring the OAuth 2.0 Authorization Service</h2></div></div></div><p>You configure the OAuth 2.0 authorization service for a particular
  realm, starting from the Common Tasks page of the OpenAM console. This
  process also protects the authorization endpoint using a standard
  policy.</p><div class="procedure" title="Procedure&nbsp;13.1.&nbsp;To Set Up the OAuth 2.0 Authorization Service"><a name="common-task-oauth2-authz"></a><div class="procedure-title">Procedure&nbsp;13.1.&nbsp;To Set Up the OAuth 2.0 Authorization Service</div><p>Follow these steps.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, select Common Tasks &gt; Configure
    OAuth2.</p></li><li class="step" title="Step 2"><p>On the Configure OAuth2 page, enter the Realm for the authorization
    service.</p></li><li class="step" title="Step 3"><p>If necessary, adjust the lifetimes for authorization codes
    (10 minutes is the recommended setting in RFC 6749), access tokens, and
    refresh tokens.</p></li><li class="step" title="Step 4"><p>Select Issue Refresh Tokens unless you do not want the authorization
    service to supply a refresh token when returning an access token.</p></li><li class="step" title="Step 5"><p>If you want to use the default scope implementation, whereby
    scopes are taken to be resource owner profile attribute names, then
    keep the default setting.</p><p>If you have a custom scope implementation, put it on the OpenAM
    classpath, and provide the class name as Scope Implementation Class.</p></li><li class="step" title="Step 6"><p>Click Create to complete the process.</p><p>In addition to setting up an OAuth 2.0 authorization server for the
    realm, OpenAM sets up a policy to protect the authorization endpoint.
    The policy appears in the list of policies for the realm. Its name is
    <code class="literal">OAuth2ProviderPolicy</code>.</p></li><li class="step" title="Step 7"><p>If your provider has plugins for custom response types, add the
    custom response types and the corresponding plugin class names to the
    list of Response Type Plugins.</p></li><li class="step" title="Step 8"><p>If resource owners log in with a user name that is not their user ID,
    but instead their mail address or some other profile attribute, then add the
    profile attribute name to the list that can be used for authentication.</p><p>To make the change, browse to Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Services &gt; OAuth2 Provider, add the profile
    attributes to the list titled User Profile Attribute(s) the Resource Owner
    is Authenticated On.</p></li><li class="step" title="Step 9"><p>Set a multi-valued profile attribute where OpenAM can store a resource
    owner's decisions to authorize clients without further interaction in the
    Shared Consent Attribute Name field.</p><p>If no profile attribute is available for this purpose, you can add
    an attribute as described in <a href="../dev-guide/index.html#chap-custom-attr" class="link"><em class="citetitle">Customizing Profile Attributes</em></a> in the <em class="citetitle">Developer's Guide</em>.</p></li><li class="step" title="Step 10"><p>Save your changes.</p></li></ol></div><p>You can further adjust the authorization server configuration after you
  create it in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Services &gt; OAuth2 Provider.</p><p>You can adjust global defaults in the OpenAM console under Configuration
  &gt; Global &gt; OAuth2 Provider.</p></div><div class="section" title="13.3.&nbsp;Registering OAuth 2.0 Clients With the Authorization Service"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="register-oauth2-client"></a>13.3.&nbsp;Registering OAuth 2.0 Clients With the Authorization Service</h2></div></div></div><p>You register an OAuth 2.0 client with the OpenAM OAuth 2.0 authorization
  service by creating and configuring an OAuth 2.0 Client agent profile.</p><p>At minimum you must have the client identifier and client password
  in order to register your OAuth 2.0 client.</p><div class="procedure" title="Procedure&nbsp;13.2.&nbsp;To Create an OAuth 2.0 Client Agent Profile"><a name="create-oauth2-client-profile"></a><div class="procedure-title">Procedure&nbsp;13.2.&nbsp;To Create an OAuth 2.0 Client Agent Profile</div><ul class="procedure"><li class="step" title="Step 1"><p>Use either of these two facilities.</p><ul class="stepalternatives">
     <li class="step" title="Step 1.1"><p>In the OpenAM console, access the client registration endpoint
      at <code class="literal">/oauth2/registerClient.jsp</code>.</p><p>The full URL depends on where you deployed OpenAM. For example,
      <code class="literal">https://openam.example.com:8443/openam/oauth2/registerClient.jsp</code>.</p><p>The Register a Client page lets you quickly create and configure
      an OAuth 2.0 client in a simple web page without inline help.</p></li>
     <li class="step" title="Step 1.2"><p>In the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
      Name</code></em> &gt; Agents &gt; OAuth 2.0 Client &gt; Agent, click
      New, then provide the client identifier and client password, and
      finally click Create to create the profile.</p><p>This page requires that you perform additional configuration
      separately.</p></li>
    </ul></li></ul></div><div class="procedure" title="Procedure&nbsp;13.3.&nbsp;To Configure an OAuth 2.0 Client Agent Profile"><a name="configure-oauth2-client-profile"></a><div class="procedure-title">Procedure&nbsp;13.3.&nbsp;To Configure an OAuth 2.0 Client Agent Profile</div><p>After initially registering or creating a client agent profile as
   necessary.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
    <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; OAuth 2.0 Client
    &gt; Agent &gt; <em class="replaceable"><code>Client Name</code></em> to open the Edit
    <em class="replaceable"><code>Client Name</code></em> page.</p></li><li class="step" title="Step 2"><p>Adjust the configuration as needed using the inline help for hints,
    and also the documentation section <a href="../admin-guide/index.html#configure-oauth2-client" class="link"><em class="citetitle">Configuring
    OAuth 2.0 &amp; OpenID Connect 1.0 Clients</em></a>.</p><p>Examine the client type option. An important decision to make at this
    point is whether your client is a confidential client or a public client.
    This depends on whether your client can keep its credentials confidential,
    or whether its credentials can be exposed to the resource owner or other parties.
    If your client is a web-based application running on a server, such as the OpenAM
    OAuth 2.0 client, then you can keep its credentials confidential. If your client is
    a user-agent based client, such as a JavaScript client running in a browser,
    or a native application installed on a device used by the resource owner,
    then yours is a public client.</p></li><li class="step" title="Step 3"><p>When finished, Save your work.</p></li></ol></div></div><div class="section" title="13.4.&nbsp;Managing OAuth 2.0 Tokens"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="oauth2-manage-tokens"></a>13.4.&nbsp;Managing OAuth 2.0 Tokens</h2></div></div></div><p>OpenAM exposes a RESTful API that lets administrators read, list, and
  delete OAuth 2.0 tokens. OAuth 2.0 clients can also manage their own tokens.
  See the <em class="citetitle">Developer's Guide</em> section on the <a href="../dev-guide/index.html#rest-api-oauth2-token-admin-endpoint" class="link"><em class="citetitle">OAuth 2.0 Token
  Administration Endpoint</em></a> for details.</p></div><div class="section" title="13.5.&nbsp;Configuring OpenAM as Authorization Server &amp; Client"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="oauth2-client-plus-authz"></a>13.5.&nbsp;Configuring OpenAM as Authorization Server &amp; Client</h2></div></div></div><p>This section takes a high-level look at how to set up OpenAM both as an
  OAuth 2.0 authorization server and also as a client in order to protect
  resources by using a policy agent. The high-level steps are as follows.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Set up a policy agent or OpenIG to protect your web resources,
    including the policy used to protect the resources.</p><p>Make sure you can access the resources using an authentication module
    that you already know before working with OAuth 2.0.</p></li><li class="listitem"><p>Configure OpenAM's OAuth 2.0 authorization service as described
    in <a class="xref" href="#configure-oauth2-authz" title="13.2.&nbsp;Configuring the OAuth 2.0 Authorization Service">Section&nbsp;13.2, &#8220;Configuring the OAuth 2.0 Authorization Service&#8221;</a>.</p></li><li class="listitem"><p>Configure an OpenAM OAuth 2.0 authentication module instance using
    the <a href="../admin-guide/index.html#oauth2-module-conf-hints" class="link"><em class="citetitle">Hints For the
    OAuth 2.0 Authentication Module</em></a> with the OpenAM
    authorization service endpoints.</p></li><li class="listitem"><p>Register the OAuth 2.0 authentication module as an OAuth 2.0
    confidential client as described in <a class="xref" href="#register-oauth2-client" title="13.3.&nbsp;Registering OAuth 2.0 Clients With the Authorization Service">Section&nbsp;13.3, &#8220;Registering OAuth 2.0 Clients With the Authorization Service&#8221;</a>.</p></li><li class="listitem"><p>Logout and access the protected resources to see the process in
    action.</p></li></ol></div><div class="example"><a name="protect-web-site-with-oauth2"></a><div class="example-title">Example&nbsp;13.1.&nbsp;Web Site Protected With OAuth 2.0</div><div class="example-contents"><p>This example pulls everything together (except security
   considerations), using OpenAM as an OAuth 2.0 authorization server,
   OAuth 2.0 client, and "resource server" by protecting web resources with
   a policy agent.</p><p>This example uses two hosts, <code class="literal">oauth2.example.com</code>
   where OpenAM is deployed at
   <code class="literal">http://oauth2.example.com:8080/openam</code>, and
   <code class="literal">www.example.com</code> where the resources to protect are
   deployed in Apache Tomcat at
   <code class="literal">http://www.example.com:8080/examples</code>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Set up an OpenAM policy agent and policy in the top-level realm,
     <code class="literal">/</code>, to protect resources. So far this is standard
     OpenAM, unrelated to OAuth 2.0.</p><p>See the <a href="../web-install-guide/index.html#web-install-guide" class="link"><em class="citetitle">OpenAM Web Policy
     Agent 3.3.0 Installation Guide</em></a>
     or <a href="../jee-install-guide/index.html#jee-install-guide" class="link"><em class="citetitle">OpenAM Java EE Policy
     Agent 3.3.0 Installation Guide</em></a>
     for instructions on installing a policy agent. This example relies on the
     Apache Tomcat Java EE policy agent, configured to protect resources in
     Apache Tomcat at <code class="literal">http://www.example.com:8080/</code>.</p><p>The policies for this example protect the Apache Tomcat examples
     under <code class="literal">http://www.example.com:8080/examples/</code>, allowing
     GET and POST operations by all authenticated users. For more information
     on creating policies, see <a href="../admin-guide/index.html#configure-authz-policy" class="link"><em class="citetitle">Configuring
     Policies</em></a>.</p><p>After setting up the policy agent and the policy, you can make sure
     everything is working by attempting to access a protected resource, in this
     case <code class="literal">http://www.example.com:8080/examples/</code>. The policy
     agent should redirect you to OpenAM to authenticate with the default
     authentication module, where you can login as user <code class="literal">demo</code>
     password <code class="literal">changeit</code>. After successful authentication,
     OpenAM redirects your browser back to the protected resource and the
     policy agent lets you get the protected resource, in this case the Tomcat
     examples top page.</p><div class="mediaobject" title="Successfully accessing the Apache Tomcat examples"><a name="figure-oauth2-examples"></a><img src="images/oauth2-examples.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-examples.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-examples.html" target="longdesc">D</a>]</span></div></div></li><li class="listitem"><p>Configure OpenAM's OAuth 2.0 authorization service as described
     in <a class="xref" href="#configure-oauth2-authz" title="13.2.&nbsp;Configuring the OAuth 2.0 Authorization Service">Section&nbsp;13.2, &#8220;Configuring the OAuth 2.0 Authorization Service&#8221;</a>.</p><p>The authorization endpoint to protect in this example is at
     <code class="literal">http://oauth2.example.com:8080/openam/oauth2/authorize</code>.</p></li><li class="listitem"><p>Configure an OpenAM OAuth 2.0 authentication module instance for
     the top-level realm.</p><p>Under Access Control &gt; / (Top-Level Realm) &gt; Authentication
     &gt; Module Instances, click New. Name the module
     <code class="literal">OAuth2</code>, and select the OAuth 2.0 type, then click
     OK to save your work.</p><p>Then click Authentication &gt; Module Instances &gt; OAuth2 to open
     the OAuth 2.0 client configuration page. This page offers numerous options.
     The key settings for this example are the following.</p><div class="variablelist"><dl><dt><span class="term">Client Id</span></dt><dd><p>This is the client identifier used to register your client with
        OpenAM's authorization server, and then used when your client must
        authenticate to OpenAM.</p><p>Set this to <code class="literal">myClientID</code> for this example.</p></dd><dt><span class="term">Client Secret</span></dt><dd><p>This is the client password used to register your client with
        OpenAM's authorization server, and then used when your client must
        authenticate to OpenAM.</p><p>Set this to <code class="literal">password</code> for this example. Make
        sure you use strong passwords when you actually deploy OAuth 2.0.</p></dd><dt><span class="term">Authentication Endpoint URL</span></dt><dd><p>In this example,
        <code class="literal">http://oauth2.example.com:8080/openam/oauth2/authorize</code>.</p><p>This OpenAM endpoint can take additional parameters. In
        particular you must specify the realm if the OpenAM OAuth 2.0
        provider is configured for a subrealm rather than / (Top-Level
        Realm).</p><p>For example, if the OAuth 2.0 provider is configured for the
        realm <code class="literal">/customers</code>, then use the following URL:
        <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize?realm=/customers</code></p><p>The <code class="literal">/oauth2/authorize</code> endpoint can also take
        <code class="literal">module</code> and <code class="literal">service</code> parameters. Use
        either as described in <a href="../admin-guide/index.html#authn-from-browser" class="link"><em class="citetitle">Authenticating To OpenAM</em></a>, where
        <code class="literal">module</code> specifies the authentication module instance
        to use or <code class="literal">service</code> specifies the authentication chain
        to use when authenticating the resource owner.</p></dd><dt><span class="term">Access Token Endpoint URL</span></dt><dd><p>In this example,
        <code class="literal">http://oauth2.example.com:8080/openam/oauth2/access_token</code>.</p><p>This OpenAM endpoint can take additional parameters. In
        particular you must specify the realm if the OpenAM OAuth 2.0
        provider is configured for a subrealm rather than / (Top-Level
        Realm).</p><p>For example, if the OAuth 2.0 provider is configured for the
        realm <code class="literal">/customers</code>, then use the following URL:
        <code class="literal">https://openam.example.com:8443/openam/oauth2/access_token?realm=/customers</code></p></dd><dt><span class="term">User Profile Service URL</span></dt><dd><p>In this example,
        <code class="literal">http://oauth2.example.com:8080/openam/oauth2/tokeninfo</code>.</p></dd><dt><span class="term">Scope</span></dt><dd><p>In this example, <code class="literal">cn</code>.</p><p>The demo user has common name <code class="literal">demo</code> by default,
        so by setting this to <code class="literal">cn|Read your user name</code>, OpenAM
        can get the value of the attribute without the need to create
        additional subjects, or to update existing subjects. The description,
        <code class="literal">Read your user name</code>, is shown to the resource owner
        in the consent page.</p></dd><dt><span class="term">OAuth2 Access Token Profile Service Parameter name</span></dt><dd><p>Identifies the parameter that contains the access token value, which
              in this example is <code class="literal">access_token</code>.</p></dd><dt><span class="term">Proxy URL</span></dt><dd><p>The client redirect URL, which in this example is
        <code class="literal">http://oauth2.example.com:8080/openam/oauth2c/OAuthProxy.jsp</code>.</p></dd><dt><span class="term">Attribute Mapper</span></dt><dd><p>In this example, 
        <code class="literal">org.forgerock.openam.authentication.modules.oauth2.DefaultAccountMapper</code>.</p></dd><dt><span class="term">Account Mapper Configuration</span></dt><dd><p>In this example, <code class="literal">cn=cn</code>.</p></dd><dt><span class="term">Create account if it does not exist</span></dt><dd><p>In this example, disable this functionality.</p><p>OpenAM can create local accounts based on the account information
        returned by the authorization server. For this example, map all users
        to the anonymous account to keep it simple.</p></dd><dt><span class="term">Map to anonymous user</span></dt><dd><p>In this example, enable this functionality.</p></dd></dl></div></li><li class="listitem"><p>Register the OAuth 2.0 authentication module as an OAuth 2.0
     confidential client as described in <a class="xref" href="#register-oauth2-client" title="13.3.&nbsp;Registering OAuth 2.0 Clients With the Authorization Service">Section&nbsp;13.3, &#8220;Registering OAuth 2.0 Clients With the Authorization Service&#8221;</a>.</p><p>Under Access Control &gt; / (Top-Level Realm) &gt; Agents &gt;
     OAuth 2.0 Client &gt; Agents &gt; <code class="literal">myClientID</code>, adjust
     the following settings.</p><div class="variablelist"><dl><dt><span class="term">Client type</span></dt><dd><p>In this example, <code class="literal">confidential</code>. OpenAM protects
        its credentials as an OAuth 2.0 client.</p></dd><dt><span class="term">Redirection URIs</span></dt><dd><p>In this example,
        <code class="literal">http://oauth2.example.com:8080/openam/oauth2c/OAuthProxy.jsp</code>.</p></dd><dt><span class="term">Scopes</span></dt><dd><p>In this example, <code class="literal">cn</code>.</p></dd></dl></div></li><li class="listitem"><p>Before you try it out, you must make the following additional
     change to the configuration.</p><p>Your OpenAM OAuth 2.0 client authentication module is not part
     of the default chain, and therefore OpenAM does not call it unless
     you specifically request the OAuth 2.0 client authentication
     module.</p><p>To cause the policy agent to request your OAuth 2.0 client
     authentication module explicitly, browse in OpenAM console to your
     <span class="emphasis"><em>policy agent profile configuration</em></span>, in this case
     Access Control &gt; / (Top-Level Realm) &gt; Agents &gt; J2EE &gt;
     Agents &gt; <code class="literal">Tomcat</code> &gt; OpenAM Services &gt; OpenAM
     Login URL, and add
     <code class="literal">http://oauth2.example.com:8080/openam/UI/Login?module=OAuth2</code>,
     moving it to the top of the list.</p><p>Save your work.</p><p>This ensures that the policy agent directs the resource owner
     to OpenAM with the instruction to authenticate using the
     <code class="literal">OAuth2</code> authentication module.</p></li><li class="listitem"><p>Try it out.</p><p>First make sure you are logged out of OpenAM, for example by
     browsing to the logout URL, in this case
     <code class="literal">http://oauth2.example.com:8080/openam/UI/Logout</code>.</p><p>Next attempt to access the protected resource, in this case
     <code class="literal">http://www.example.com:8080/examples/</code>.</p><p>If everything is set up properly, the policy agent redirects your
     browser to the login page of OpenAM with <code class="literal">module=OAuth2</code>
     among other query string parameters. After you authenticate, for example
     as user <code class="literal">demo</code>, password <code class="literal">changeit</code>,
     OpenAM presents you with an authorization decision page.</p><div class="mediaobject" title="OpenAM presenting authorization decision page to resource owner"><a name="figure-oauth2-authz-page"></a><img src="images/oauth2-authz-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-authz-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-authz-page.html" target="longdesc">D</a>]</span></div></div><p>When you click Allow, the authorization service creates an SSO
     session, and redirects the client back to the resource, thus allowing
     the client to access the protected resource. If you configured an attribute
     on which to store the saved consent decision, and you choose to save the
     consent decision for this authorization, then OpenAM can use that saved
     decision to avoid prompting you for authorization next time the client
     accesses the resource, but only ensure that you have authenticated and
     have a valid session.</p><div class="mediaobject" title="Successfully accessing the Apache Tomcat examples"><a name="figure-oauth2-examples-again"></a><img src="images/oauth2-examples.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-oauth2-examples-again.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-oauth2-examples-again.html" target="longdesc">D</a>]</span></div></div></li></ol></div></div></div><br class="example-break"></div><div class="section" title="13.6.&nbsp;Configuring OpenAM as Both SAML 2.0 Service Provider &amp; OAuth 2.0 Authorization Server"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="oauth2-sp-and-authz"></a>13.6.&nbsp;Configuring OpenAM as Both SAML 2.0 Service Provider &amp; OAuth 2.0
  Authorization Server</h2></div></div></div><p>As described in <a class="xref" href="#oauth2-saml2-bearer" title="13.1.1.5.&nbsp;SAML 2.0 Bearer Assertion Profiles">Section&nbsp;13.1.1.5, &#8220;SAML 2.0 Bearer Assertion Profiles&#8221;</a>, OpenAM as
  OAuth 2.0 authorization server can handle the profile where a SAML 2.0
  assertion borne by the client functions as an authorization grant to get
  an access token. This lets a client get an access token when a resource owner
  completes SAML 2.0 Web Single Sign-On.</p><p>You can configure OpenAM as both SAML 2.0 service provider and OAuth
  2.0 authorization server, using an built-in adapter class to POST assertions
  returned to the service provider to the access token endpoint of the
  authorization server. This allows clients to send a resource owner to the
  identity provider for SAML 2.0 web SSO, get an assertion at the service
  provider, and retrieve an access token from the authorization server. In other
  words, once this scenario is configured, the client must only direct the
  resource owner to start web SSO as described in <a href="../admin-guide/index.html#using-saml2-sso-slo" class="link"><em class="citetitle">Using SAML 2.0
  Single Sign-On &amp; Single Logout</em></a>, and then retrieve the
  access token on success or handle the error condition on failure.</p><div class="procedure" title="Procedure&nbsp;13.4.&nbsp;To Get an Access Token From SAML 2.0 Web SSO"><a name="configure-oauth2-sp-and-authz"></a><div class="procedure-title">Procedure&nbsp;13.4.&nbsp;To Get an Access Token From SAML 2.0 Web SSO</div><div class="itemizedlist"><p>For this scenario to work, the following conditions must be met.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>The client must make the resource owner understand that by
     authenticating to the SAML 2.0 identity provider the resource owner grants
     the client access to the protected resources. OpenAM does not present the
     resource owner with an authorization decision.</p></li><li class="listitem"><p>The SAML 2.0 identity provider issuing the assertion must sign the
     assertion, and must correctly handle the name ID for the subject.</p></li><li class="listitem"><p>OpenAM as relying party must request that assertions are signed, must
     verify the signatures on assertions, must correctly handle name IDs
     from the issuer, and must use the built-in
     <code class="literal">org.forgerock.restlet.ext.oauth2.flow.OAuth2Saml2GrantSPAdapter</code>
     adapter class in the service provider configuration to POST assertions
     to the OAuth 2.0 authorization service.</p></li><li class="listitem"><p>The OAuth 2.0 authorization service and SAML 2.0 service provider
     must be configured together on the same OpenAM server.</p></li><li class="listitem"><p>An OAuth 2.0 client configuration on OpenAM with the same name as
     the service provider entity ID must be set up on OpenAM.</p></li><li class="listitem"><p>The OAuth 2.0 client initiating the process must be able to consume
     the access token and to handle errors if necessary.</p></li></ul></div><p>Follow these steps. The test configuration hints in this procedure let
   you prepare configuration to test with the demo user created in OpenAM by
   default.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Make sure the SAML 2.0 identity provider signs assertions and that
    name IDs are correctly configured to map resource owner accounts.</p><p>When configuring OpenAM as a hosted identity provider follow these
    steps.</p><ol type="a" class="substeps"><li class="step" title="Step 1.a"><p>Make sure the Signing Key is properly configured on setup.</p><p>For a test configuration, select the <code class="literal">test</code>
      certificate shown in the Common Tasks &gt; Create Hosted Service Provider
      wizard.</p></li><li class="step" title="Step 1.b"><p>Make sure name IDs are properly configured.</p><p>For a test configuration, in the OpenAM console under Federation
      &gt; Entity Providers &gt; <em class="replaceable"><code>IDP name</code></em> &gt;
      NameID Value Map, add
      <code class="literal">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified=cn</code>
      and then Save your work.</p></li></ol><p>For more detail on configuring OpenAM as a SAML 2.0 identity provider,
    see <a href="../admin-guide/index.html#configure-idp" class="link"><em class="citetitle">Configuring
    Identity Providers</em></a>.</p></li><li class="step" title="Step 2"><p>Configure OpenAM as service provider.</p><ol type="a" class="substeps"><li class="step" title="Step 2.a"><p>Set up a hosted service provider in OpenAM console under
      Common Tasks &gt; Create Hosted Service Provider, keeping track of
      the name, such as <code class="literal">https://www.sp.example:8443/openam</code>,
      and selecting Use default attribute mapping from Identity Provider.</p><p>For details on configuring OpenAM as a SAML 2.0 service provider,
      see <a href="../admin-guide/index.html#configure-sp" class="link"><em class="citetitle">Configuring
      Service Providers</em></a>.</p></li><li class="step" title="Step 2.b"><p>Under Federation &gt; Entity Providers &gt; <em class="replaceable"><code>SP
      name</code></em> &gt; Assertion Content &gt; Request/Response Signing,
      check Assertions Signed.</p></li><li class="step" title="Step 2.c"><p>For a test configuration, in Federation &gt; Entity Providers &gt;
      <em class="replaceable"><code>SP name</code></em> &gt; Assertion Content &gt; NameID
      Format List, remove all but
      <code class="literal">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</code>,
      and then Save your work.</p></li><li class="step" title="Step 2.d"><p>In Federation &gt; Entity Providers &gt; <em class="replaceable"><code>SP
      name</code></em> &gt; Assertion Processing &gt; Adapter, add
      <code class="literal">org.forgerock.restlet.ext.oauth2.flow.OAuth2Saml2GrantSPAdapter</code>,
      and then Save your work.</p><p>This is the adapter class that POSTs the SAML 2.0 assertion to
      the OAuth 2.0 access token endpoint.</p></li><li class="step" title="Step 2.e"><p>Use the wizard under Common Tasks &gt; Register Remote Identity
      Provider to import the identity provider metadata.</p></li></ol></li><li class="step" title="Step 3"><p>Make sure the identity provider imports the metadata for your
    service provider.</p><p>If your service provider is at
    <code class="literal">https://www.sp.example:8443/openam</code>, then the metadata
    can be accessed at
    <code class="literal">https://www.sp.example:8443/openam/saml2/jsp/exportmetadata.jsp</code>.</p></li><li class="step" title="Step 4"><p>On the service provider OpenAM server, set up the OAuth 2.0
    authorization server as described in
    <a class="xref" href="#configure-oauth2-authz" title="13.2.&nbsp;Configuring the OAuth 2.0 Authorization Service">Section&nbsp;13.2, &#8220;Configuring the OAuth 2.0 Authorization Service&#8221;</a>.</p><p>For a test configuration, set the realm to <code class="literal">/</code>, and
    accept the defaults.</p></li><li class="step" title="Step 5"><p>On the service provider and authorization server OpenAM server, set
    up an OAuth 2.0 client profile with the same name as the service
    provider under Access Control &gt; <em class="replaceable"><code>realm</code></em> &gt;
    Agents &gt; OAuth 2.0 Client &gt; New...</p><p>For example, if the service provider name is
    <code class="literal">https://www.sp.example:8443/openam</code>, then that is also
    the name of the OAuth 2.0 client profile.</p><p>You can make additional changes to the client profile if necessary.
    See <a class="xref" href="#register-oauth2-client" title="13.3.&nbsp;Registering OAuth 2.0 Clients With the Authorization Service">Section&nbsp;13.3, &#8220;Registering OAuth 2.0 Clients With the Authorization Service&#8221;</a> for details.</p></li><li class="step" title="Step 6"><p>Test your configuration.</p><ol type="a" class="substeps"><li class="step" title="Step 6.a"><p>Logout of all OpenAM servers.</p></li><li class="step" title="Step 6.b"><p>Initiate SAML 2.0 Web SSO.</p><p>For example, if your identity provider is at
      <code class="literal">https://www.idp.example:8443/openam</code> with meta alias
      <code class="literal">/idp</code> and your service provider is at
      <code class="literal">https://www.sp.example:8443/openam</code>, then browse to the
      following URL (without line breaks or spaces).</p><pre class="brush: plain;">http://www.idp.example:8443/openam/saml2/jsp/idpSSOInit.jsp
 ?metaAlias=/idp&amp;spEntityID=http://www.sp.example:8443/openam</pre><p>For other configurations, see <a href="../admin-guide/index.html#using-saml2-sso-slo" class="link"><em class="citetitle">Using SAML 2.0
      Single Sign-On &amp; Single Logout</em></a>.</p></li><li class="step" title="Step 6.c"><p>Login to the identity provider.</p><p>For OpenAM, login with user name <code class="literal">demo</code> and
      password <code class="literal">changeit</code>.</p></li><li class="step" title="Step 6.d"><p>Login to the service provider.</p><p>For OpenAM, login with user name <code class="literal">demo</code> and
      password <code class="literal">changeit</code>.</p></li><li class="step" title="Step 6.e"><p>See the resulting access token on successful login.</p><p>The result looks something like this, all on one line.</p><pre class="brush: javascript;">{
    "expires_in": 59,
    "token_type": "Bearer",
    "access_token": "f0f731e0-6013-47e3-9c07-da598157a85f"
}</pre></li></ol></li></ol></div></div><div class="section" title="13.7.&nbsp;Security Considerations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="oauth2-security-considerations"></a>13.7.&nbsp;Security Considerations</h2></div></div></div><p>OAuth 2.0 messages involve credentials and access tokens that allow
  the bearer to retrieve protected resources. Therefore, do not let an attacker
  capture requests or responses. Protect the messages going across the
  network.</p><p>RFC 6749 includes a number of <a class="link" href="http://tools.ietf.org/html/rfc6749#section-10" target="_blank">Security
  Considerations</a>, and also requires Transport Layer Security (TLS)
  to protect sensitive messages. Make sure you read the section covering
  <em class="citetitle">Security Considerations</em>, and that you can implement
  them in your deployment.</p><p>Also, especially when deploying a mix of other clients and resource
  servers, take into account the points covered in the Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-ietf-oauth-v2-threatmodel" target="_blank"><em class="citetitle">OAuth 2.0 Threat Model and Security
  Considerations</em></a>, before putting your service into
  production.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e17273" href="#d16811e17273" class="para">8</a>] </sup>Read
  <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank">RFC 6749</a> to understand the authorization framework itself.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;14.&nbsp;Managing OpenID Connect 1.0 Authorization"><div class="titlepage"><div><div><h2 class="title"><a name="chap-openid-connect"></a>Chapter&nbsp;14.&nbsp;Managing OpenID Connect 1.0 Authorization</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-openid-connect-support">14.1. About OpenID Connect 1.0 Support in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-openid-connect-provider">14.2. Configuring OpenAM As an OpenID Connect Provider</a></span></dt><dt><span class="section"><a href="#configure-openid-connect-discovery">14.3. Configuring OpenAM For OpenID Connect Discovery</a></span></dt><dt><span class="section"><a href="#register-openid-connect-clients">14.4. Registering OpenID Connect Clients</a></span></dt><dt><span class="section"><a href="#manage-sessions-openid-connect">14.5. Managing User Sessions</a></span></dt><dt><span class="section"><a href="#openid-connect-examples">14.6. Client Examples</a></span></dt><dt><span class="section"><a href="#openid-connect-security-considerations">14.7. Security Considerations</a></span></dt></dl></div><a class="indexterm" name="d16811e18300"></a><a class="indexterm" name="d16811e18305"></a><p>This chapter covers OpenAM support for OpenID Connect 1.0. <a class="link" href="http://openid.net/connect/" target="_blank">OpenID Connect</a>
 1.0 extends OAuth 2.0 so the client can verify claims about the identity of
 the end user, get profile information about the end user, and log the user out
 at the end of the OpenAM session. OpenID Connect also makes it possible to
 discover the provider for an end user, and to register client applications
 dynamically. OpenID connect services are built on OAuth 2.0, JSON Web Token
 (JWT), WebFinger and Well-Known URIs.</p><div class="section" title="14.1.&nbsp;About OpenID Connect 1.0 Support in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-openid-connect-support"></a>14.1.&nbsp;About OpenID Connect 1.0 Support in OpenAM</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#openam-openid-basic-client-profile">14.1.1. OpenID Connect Basic Client Profile</a></span></dt><dt><span class="section"><a href="#openam-openid-implicit-client-profile">14.1.2. OpenID Connect Implicit Client Profile</a></span></dt><dt><span class="section"><a href="#openam-openid-discovery">14.1.3. OpenID Connect Discovery</a></span></dt><dt><span class="section"><a href="#openam-openid-client-registration">14.1.4. OpenID Connect Client Registration</a></span></dt><dt><span class="section"><a href="#openam-openid-session-management">14.1.5. OpenID Connect Session Management</a></span></dt></dl></div><p>In its role as OpenID Provider, OpenAM lets OpenID Connect clients
  discover its capabilities, handles both dynamic and static registration of
  OpenID Connect clients, responds to client requests with authorization codes,
  access tokens, and user information according to the Basic and Implicit Client
  Profiles of OpenID Connect, and manages sessions.</p><p>This section describes how OpenAM fits into the OpenID Connect picture
  in terms of the roles that it plays in basic and implicit client profiles,
  provider discovery, client registration, and session management.</p><div class="section" title="14.1.1.&nbsp;OpenID Connect Basic Client Profile"><div class="titlepage"><div><div><h3 class="title"><a name="openam-openid-basic-client-profile"></a>14.1.1.&nbsp;OpenID Connect Basic Client Profile</h3></div></div></div><p>The OpenID Connect Basic Client Profile specifies how the client
   application interacts with the provider, in this case OpenAM, based on use
   of the OAuth 2.0 authorization grant. The following sequence diagram shows
   successful processing from the authorization request, through grant of the
   authorization code, access token, and ID token, and optional use of the
   access token to get information about the end user.</p><div class="mediaobject" title="OpenAM in OpenID Connect Basic Client Profile"><a name="figure-openid-connect-basic"></a><img src="images/openid-connect-basic.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-basic.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-basic.html" target="longdesc">D</a>]</span></div></div><p>In addition to what OAuth 2.0 specifies, OpenID Connect uses an ID
   token so the client can validate claims about the end user. It also defines
   how to get user information such as profile, email, address, and phone
   details from the UserInfo endpoint with a valid access token.</p></div><div class="section" title="14.1.2.&nbsp;OpenID Connect Implicit Client Profile"><div class="titlepage"><div><div><h3 class="title"><a name="openam-openid-implicit-client-profile"></a>14.1.2.&nbsp;OpenID Connect Implicit Client Profile</h3></div></div></div><p>The OpenID Connect Implicit Client Profile specifies how the client
   application interacts with the provider, in this case OpenAM, based on
   use of the OAuth 2.0 implicit grant. The following sequence diagram shows
   successful processing from the authorization request, through grant of the
   access and ID tokens, and optional use of the access token to get information
   about the end user.</p><div class="mediaobject" title="OpenAM in OpenID Connect Implicit Client Profile"><a name="figure-openid-connect-implicit"></a><img src="images/openid-connect-implicit.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-implicit.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-implicit.html" target="longdesc">D</a>]</span></div></div><p>As for the Basic Client Profile, the Implicit Client Profile specifies
   an ID token so the client can validate claims about the end user. It also
   defines how to get user information such as profile, email, address, and
   phone details from the UserInfo endpoint with a valid access token.</p></div><div class="section" title="14.1.3.&nbsp;OpenID Connect Discovery"><div class="titlepage"><div><div><h3 class="title"><a name="openam-openid-discovery"></a>14.1.3.&nbsp;OpenID Connect Discovery</h3></div></div></div><p>OpenID Connect defines how a client application can discover the
   OpenID connect provider and corresponding OpenID Connect configuration for
   an end user. The discovery mechanism relies on WebFinger to get the
   information based on the end user's identifier. The server returns the
   information in JSON Resource Descriptor (JRD) format.</p></div><div class="section" title="14.1.4.&nbsp;OpenID Connect Client Registration"><div class="titlepage"><div><div><h3 class="title"><a name="openam-openid-client-registration"></a>14.1.4.&nbsp;OpenID Connect Client Registration</h3></div></div></div><p>OpenID Connect clients can register with OpenAM as a provider both
   statically, as for other OAuth 2.0 clients, and also dynamically as specified
   by OpenID Connect. To allow dynamic registration, you register an initial
   client that other clients can use to get access tokens for registration.</p></div><div class="section" title="14.1.5.&nbsp;OpenID Connect Session Management"><div class="titlepage"><div><div><h3 class="title"><a name="openam-openid-session-management"></a>14.1.5.&nbsp;OpenID Connect Session Management</h3></div></div></div><p>OpenID Connect lets the client track whether the end user is logged in
   at the provider, and also initiate end user logout at the provider. The
   specification has the client application monitor session state using an
   invisible iframe and communicate status using the HTML 5 postMessage
   API.</p></div></div><div class="section" title="14.2.&nbsp;Configuring OpenAM As an OpenID Connect Provider"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-openid-connect-provider"></a>14.2.&nbsp;Configuring OpenAM As an OpenID Connect Provider</h2></div></div></div><p>You can configure OpenAM's OAuth 2.0 authorization service to double
  as an OpenID Connect 1.0 Provider. To do so, make sure that the Response Type
  Plugins list includes at least the default plugin classes.</p><p>See <a href="../admin-guide/index.html#configure-oauth2-authz" class="link"><em class="citetitle">Configuring the OAuth 2.0 Authorization Service</em></a>
  for detailed instructions on configuring the service.</p></div><div class="section" title="14.3.&nbsp;Configuring OpenAM For OpenID Connect Discovery"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-openid-connect-discovery"></a>14.3.&nbsp;Configuring OpenAM For OpenID Connect Discovery</h2></div></div></div><p>In order to allow clients to discover the provider for an end user,
  OpenAM supports OpenID Connect Discovery 1.0. In addition to discovering
  the provider for an end user, the client can also request the OpenID
  Connect Provider configuration.</p><p>OpenAM as OpenID Connect Provider exposes two endpoints for
  discovery:</p><table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">/.well-known/webfinger</code></td></tr><tr><td><code class="literal">/.well-known/openid-configuration</code></td></tr></table><p>A client needs to be able to discover the provider for an end user. In
  this case you should consider redirecting requests to URIs at the server root,
  such as <code class="literal">http://www.example.com/.well-known/webfinger</code>
  and <code class="literal">http://www.example.com/.well-known/openid-configuration</code>,
  to these Well-Known URIs in OpenAM's space.</p><p>Discovery relies on <a class="link" href="http://tools.ietf.org/html/draft-ietf-appsawg-webfinger" target="_blank">WebFinger</a>, a protocol to discover information about people and other
  entities using standard HTTP methods. WebFinger uses <a class="link" href="http://tools.ietf.org/html/rfc5785" target="_blank">Well-Known URIs</a>,
  which defines the path prefix <code class="literal">/.well-known/</code> for the
  URLs defined by OpenID Connect Discovery.</p><p>Unless you deploy OpenAM in the root context of a container listening
  on port 80 on the primary host for your domain, clients need to find
  the right <em class="replaceable"><code>host:port/deployment-uri</code></em> combination
  to locate the well-known endpoints. Therefore you must manage the redirection
  to OpenAM. If you are using WebFinger for something else than OpenID Connect
  Discovery, then you probably also need proxy logic to route the requests.</p><p>To retrieve the provider for an end user, the client needs the
  following.</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">host</code></span></dt><dd><p>The server where the client can access the WebFinger service.</p><p>Notice that this is a host name rather than a URL to the endpoint,
     which is why you might need to redirect clients appropriately as described
     above.</p></dd><dt><span class="term"><code class="literal">resource</code></span></dt><dd><p>Identifies the end user that is the subject of the request.</p><p>The client must percent-encode the resource value when using it in
     the query string of the request, so when using the "acct" URI scheme and
     the resource is <code class="literal">acct:user@example.com</code>, then the value
     to use is <code class="literal">acct%3Auser%40example.com</code>.</p></dd><dt><span class="term"><code class="literal">rel</code></span></dt><dd><p>URI identifying the type of service whose location is requested.</p><p>In this case <code class="literal">http://openid.net/specs/connect/1.0/issuer</code>,
     which is <code class="literal">http%3A%2F%2Fopenid.net%2Fspecs%2Fconnect%2F1.0%2Fissuer</code>.</p></dd></dl></div><p>Ignoring the question of redirection, you can test the endpoint for the
  demo user account (output lines folded to make them easier to read).</p><div class="screen"><pre class="brush: plain;">$ curl "https://openam.example.com:8443/openam/.well-known/webfinger
 ?resource=acct%3Ademo%40example.com
 &amp;rel=http%3A%2F%2Fopenid.net%2Fspecs%2Fconnect%2F1.0%2Fissuer"
{
  "subject": "acct:demo@example.com",
  "links": [
    {
      "rel": "http://openid.net/specs/connect/1.0/issuer",
      "href": "https://openam.example.com:8443/openam"
    }
  ]
}</pre></div><p>This shows that the OpenID Connect Provider for the OpenAM demo user is
  indeed the OpenAM server.</p><p>The client can also discover the provider configuration. Ignoring the
  question of redirection, you can test this (output lines folded to make them
  easier to read).</p><div class="informalexample"><div class="screen"><pre class="brush: plain;">{
    "response_types_supported": [
        "id_token|org.forgerock.restlet.ext.oauth2.flow.responseTypes.IDTokenResponseType",
        "token|org.forgerock.restlet.ext.oauth2.flow.responseTypes.TokenResponseType",
        "code|org.forgerock.restlet.ext.oauth2.flow.responseTypes.CodeResponseType"
    ],
    "registration_endpoint": "https://openam.example.com:8443/openam/oauth2/connect/register",
    "token_endpoint": "https://openam.example.com:8443/openam/oauth2/access_token",
    "end_session_endpoint": "https://openam.example.com:8443/openam/oauth2/connect/endSession",
    "version": "3.0",
    "userinfo_endpoint": "https://openam.example.com:8443/openam/oauth2/userinfo",
    "subject_types_supported": [
        "pairwise",
        "public"
    ],
    "issuer": "https://openam.example.com:8443/openam",
    "jwks_uri": "",
    "id_token_siging_alg_values_supported": [
        "HmacSHA256",
        "HmacSHA512",
        "HmacSHA384"
    ],
    "check_session_iframe": "https://openam.example.com:8443/openam/oauth2/connect/checkSession",
    "claims_supported": [
        "phone",
        "email",
        "address",
        "openid",
        "profile"
    ],
    "authorization_endpoint": "https://openam.example.com:8443/openam/oauth2/authorize"
}</pre></div></div></div><div class="section" title="14.4.&nbsp;Registering OpenID Connect Clients"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="register-openid-connect-clients"></a>14.4.&nbsp;Registering OpenID Connect Clients</h2></div></div></div><p>OpenID Connect Clients can register with OpenAM both statically through
  OpenAM console for example, and also dynamically using OpenID Connect 1.0
  Dynamic Registration.</p><div class="procedure" title="Procedure&nbsp;14.1.&nbsp;To Register a Client With OpenAM Console"><a name="register-openid-connect-client-static"></a><div class="procedure-title">Procedure&nbsp;14.1.&nbsp;To Register a Client With OpenAM Console</div><p>Registering a client by using the OpenAM console consists of first
   creating an OAuth 2.0 Client agent profile, and then editing the profile
   to indicate the client settings pertinent to OpenID Connect 1.0.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Agents &gt; OAuth 2.0 Client &gt; Agent, click
    New..., then provide the client identifier and client password, and
    finally click Create to create the profile.</p></li><li class="step" title="Step 2"><p>Follow the hints in the section, <a href="../admin-guide/index.html#configure-oauth2-client" class="link"><em class="citetitle">Configuring
    OAuth 2.0 &amp; OpenID Connect 1.0 Clients</em></a> to edit
    the profile to match the client configuration.</p><p>In order to read and edit the client configuration dynamically later
    without using OpenAM console, be sure to set an access token in the field
    titled, "The access token used to update the client."</p></li></ol></div><div class="procedure" title="Procedure&nbsp;14.2.&nbsp;To Register a Client Dynamically"><a name="register-openid-connect-client-dynamic"></a><div class="procedure-title">Procedure&nbsp;14.2.&nbsp;To Register a Client Dynamically</div><p>For dynamic registration you need the client configuration metadata,
   and an access token to write the configuration to OpenAM by HTTP POST. To
   obtain the access token, register an initial client statically after creating
   the provider, as described in
   <a class="xref" href="#register-openid-connect-client-static" title="Procedure&nbsp;14.1.&nbsp;To Register a Client With OpenAM Console">Procedure&nbsp;14.1, &#8220;To Register a Client With OpenAM Console&#8221;</a>. Other clients can
   then use that client to obtain the access token needed to perform dynamic
   registration.</p><p>On successful registration, OpenAM responds with information including
   an access token to allow the client subsequently to read and edit its
   profile.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Register an initial OAuth 2.0 client statically with a client ID
    such as <code class="literal">masterClient</code> and client secret such as
    <code class="literal">password</code>.</p></li><li class="step" title="Step 2"><p>Obtain an access token using the client you registered.</p><p>For example, if you created the client as described in the previous
    step, and OpenAM administrator <code class="literal">amadmin</code> has password
    <code class="literal">password</code>, you can use the OAuth 2.0 resource owner
    password grant as in the following example.</p><div class="screen"><pre class="brush: plain;">$ curl
 --request POST
 --user "masterClient:password"
 --data "grant_type=password&amp;username=amadmin&amp;password=password"
 https://openam.example.com:8443/openam/oauth2/access_token
{
    "expires_in": 59,
    "token_type": "Bearer",
    "refresh_token": "26938cd0-6870-4e31-ade9-df31afc37ee1",
    "access_token": "515d6551-4512-4279-98b6-c0ef3f03a722"
}</pre></div></li><li class="step" title="Step 3"><p>HTTP POST the client registration profile to the
    <code class="literal">/oauth2/connect/register</code> endpoint, using bearer token
    authorization with the access token you obtained from OpenAM.</p><p>For an example written in JavaScript, see the registration page in
    the examples <a class="link" href="https://github.com/markcraig/openid/" target="_blank">available online</a>.
    Successful registration shows a response that includes the client ID and
    client secret.</p><pre class="brush: javascript;">{
  "issued_at": 1376916775,
  "expires_at": 0,
  "client_secret": "5a1f50db-ed93-4a9b-bf37-c1cb3c74ca16",
  "com.forgerock.openam.oauth2provider.redirectionURIs": [
    "https://openam.example.com:8443/openid/cb-basic.html",
    "https://openam.example.com:8443/openid/cb-implicit.html"
  ],
  "client_id": "c1e5c60a-9fd4-4780-a283-ec89580b6cc1",
  "registration_client_uri":
    "https://openam.example.com:8443/openam/oauth2/connect/register
     ?client_id=c1e5c60a-9fd4-4780-a283-ec89580b6cc1"
}</pre></li></ol></div></div><div class="section" title="14.5.&nbsp;Managing User Sessions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="manage-sessions-openid-connect"></a>14.5.&nbsp;Managing User Sessions</h2></div></div></div><p>OpenID Connect Session Management 1.0 allows the client to manage
  OpenID Connect sessions, making it possible to know when the end user should
  be logged out.</p><p>As described in the <a class="link" href="http://openid.net/specs/openid-connect-session-1_0.html" target="_blank">OpenID Connect Session Management 1.0</a> specification,
  OpenAM's OpenID Connect provider exposes both a "check_session_iframe" URL
  that allows the client to receive notifications when the end user's session
  state changes at the provider, and also an "end_session_endpoint" URL to
  which to redirect an end user for logout.</p><p>When registering your client that uses session management, you set the
  OAuth 2.0 client agent profile properties Post Logout Redirect URI and
  Client Session URI, described in <a href="../admin-guide/index.html#configure-oauth2-client" class="link"><em class="citetitle">Configuring
  OAuth 2.0 &amp; OpenID Connect 1.0 Clients</em></a>. The Post
  Logout Redirect URI is used to redirect the end user user-agent after logout.
  The Client Session URI is the client URI where OpenAM sends notifications
  when the end user's session state changes.</p></div><div class="section" title="14.6.&nbsp;Client Examples"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openid-connect-examples"></a>14.6.&nbsp;Client Examples</h2></div></div></div><p>OpenID Connect Basic and Implicit Client Profiles define how clients
  interact with the provider to obtain end user authorization and profile
  information. Although you can run the simple example clients mentioned in
  this section without setting up Transport Layer Security, do not deploy
  clients in production without securing the transport.</p><p>Code for the client examples shown here is <a class="link" href="https://github.com/markcraig/openid/" target="_blank">available online</a>.
  Clone the example project to deploy it in the same web container as
  OpenAM. Edit the configuration at the outset of the .js files in the project,
  register a corresponding profile for the example client as described in
  <a class="xref" href="#register-openid-connect-clients" title="14.4.&nbsp;Registering OpenID Connect Clients">Section&nbsp;14.4, &#8220;Registering OpenID Connect Clients&#8221;</a>, and browse the deployment
  URL to see the initial page.</p><div class="mediaobject" title="OpenID Connect Client Profiles Start Page"><a name="figure-openid-connect-example-start-page"></a><img src="images/openid-connect-example-start-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-example-start-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-example-start-page.html" target="longdesc">D</a>]</span></div></div><div class="example"><a name="openid-basic-profile-example"></a><div class="example-title">Example&nbsp;14.1.&nbsp;Basic Client Profile Example</div><div class="example-contents"><p>OpenID Connect Basic Client Profile 1.0 is designed for web-based
   relying parties that use the OAuth 2.0 Authorization Code grant type.
   This grant type makes it possible for the client to get the access code
   by using the authorization code directly, without passing through the end
   user's browser. To protect its client secret (password), part of the
   client must run on the server.</p><p>In the example, the Basic Client Profile Start Page describes the
   prerequisite configuration, which must be part of the client profile stored
   in the OpenAM realm where you set up the OpenID Provider. In OpenAM console,
   check that the OAuth 2.0 agent profile matches the settings described.</p><div class="mediaobject" title="OpenID Connect Basic Client Profile Start Page"><a name="figure-openid-connect-basic-start-page"></a><img src="images/openid-connect-basic-start-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-basic-start-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-basic-start-page.html" target="longdesc">D</a>]</span></div></div><p>Logout of OpenAM, and click the link at the bottom of the page to
   request authorization. The link sends an HTTP GET request asking for
   <code class="literal">openid profile</code> scopes to the OpenID Connect provider
   authorization URI.</p><p>If everything is configured correctly, OpenAM's OpenID Connect provider
   has you authenticate as an end user, such as the demo user with username
   <code class="literal">demo</code> and password <code class="literal">changeit</code>, and
   grant (Allow) the client access to your profile.</p><p>If you successfully authenticate and allow the example client access
   to your profile, OpenAM returns an authorization code to the example client.
   The example client then uses the authorization code to request an access
   token and an ID token. It shows the response to that request, and also
   decodes the ID token to show the content and to perform some validation.
   Finally it uses the access token to request information about the end user
   who authenticated, and displays the result.</p><div class="mediaobject" title="OpenID Connect Basic Client Profile Response Page"><a name="figure-openid-connect-basic-response-page"></a><img src="images/openid-connect-basic-response-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-basic-response-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-basic-response-page.html" target="longdesc">D</a>]</span></div></div><p>Notice that in addition to the standard payload, the ID token indicates
   the end user's OpenAM realm, in this case <code class="literal">"realm": "/"</code>.</p></div></div><br class="example-break"><div class="example"><a name="openid-implicit-profile-example"></a><div class="example-title">Example&nbsp;14.2.&nbsp;Implicit Client Profile Example</div><div class="example-contents"><p>OpenID Connect Implicit Client Profile 1.0 is designed for relying
   parties that use the OAuth 2.0 Implicit grant type. This grant type is
   designed for clients implemented in a browser. Rather than protect a
   client secret, the client profile must register a protected redirect URI
   in advance with the OpenID Provider.</p><p>In the example, the Implicit Client Profile Start Page describes the
   prerequisite configuration, which must be part of the client profile stored
   in the OpenAM realm where you set up the OpenID Provider. In OpenAM console,
   check that the OAuth 2.0 agent profile matches the settings described.
   If you have already configured the agent profile for the Basic Client Profile
   then you still need to add the redirect URI for the Implicit Client
   Profile.</p><div class="mediaobject" title="OpenID Connect Implicit Client Profile Start Page"><a name="figure-openid-connect-implicit-start-page"></a><img src="images/openid-connect-implicit-start-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-implicit-start-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-implicit-start-page.html" target="longdesc">D</a>]</span></div></div><p>Logout of OpenAM, and click the link at the bottom of the page to
   request authorization. The link sends an HTTP GET request asking for
   <code class="literal">id_token token</code> response types and <code class="literal">openid
   profile</code> scopes to the OpenID Connect provider authorization
   URI.</p><p>If everything is configured correctly, OpenAM's OpenID Connect provider
   has you authenticate as an end user, such as the demo user with username
   <code class="literal">demo</code> and password <code class="literal">changeit</code>, and
   grant (Allow) the client access to your profile.</p><p>If you successfully authenticate and allow the example client access
   to your profile, OpenAM returns the access token and ID token directly in
   the fragment (after <code class="literal">#</code>) of the redirect URI. The client
   does not get an authorization code. The client shows the response to the
   request, and also decodes the ID token to show the content and to perform
   some validation (though it does not check the ID token signature). Finally
   the client uses the access token to request information about the end user
   who authenticated, and displays the result.</p><div class="mediaobject" title="OpenID Connect Implicit Client Profile Response Page"><a name="figure-openid-connect-implicit-response-page"></a><img src="images/openid-connect-implicit-response-page.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openid-connect-implicit-response-page.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openid-connect-implicit-response-page.html" target="longdesc">D</a>]</span></div></div><p>As for the Basic Client Profile, the ID Token indicates the end user's
   OpenAM realm in addition to the standard information.</p></div></div><br class="example-break"></div><div class="section" title="14.7.&nbsp;Security Considerations"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openid-connect-security-considerations"></a>14.7.&nbsp;Security Considerations</h2></div></div></div><p>As for other OAuth 2.0 applications, you must protect messages going
  across the network. OpenID Connect 1.0 requires Transport Layer Security
  (TLS). The chapter on <a href="../admin-guide/index.html#chap-certs-keystores" class="link"><em class="citetitle">Managing
  Certificates</em></a> includes some discussion of protecting
  traffic in the container where OpenAM runs. Also see the documentation for
  your web application container.</p><p>Also take into account the points developed in the section on <a class="link" href="http://openid.net/specs/openid-connect-messages-1_0.html#security-considerations" target="_blank"><em class="citetitle">Security Considerations</em></a> in
  the OpenID Connect Messages draft specification.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;15.&nbsp;Backing Up and Restoring OpenAM Configurations"><div class="titlepage"><div><div><h2 class="title"><a name="chap-backup-restore"></a>Chapter&nbsp;15.&nbsp;Backing Up and Restoring OpenAM Configurations</h2></div></div></div><p>This chapter shows how to backup and restore OpenAM configuration
 data. This chapter <span class="emphasis"><em>does not cover backup and restore of user
 data</em></span>, which in a critical production system should be stored
 separately.</p><div class="procedure" title="Procedure&nbsp;15.1.&nbsp;To Back Up OpenAM Configuration"><a name="backup-config-to-xml"></a><div class="procedure-title">Procedure&nbsp;15.1.&nbsp;To Back Up OpenAM Configuration</div><a class="indexterm" name="d16811e18691"></a><p>OpenAM stores service configuration data in a directory. During normal
  production operations, you rely on directory replication to maintain multiple,
  current copies of OpenAM service configuration. For disaster recovery,
  however, you backup to and restore the service configuration from XML, using
  the <span class="command"><strong>ssoadm</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Backup OpenAM service configuration using the
   <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm export-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -o ~/backup-`date -u +%F-%m-%S`.xml

Service Configuration was exported.</pre></div><p>In this example, the secret key for encrypting the password in
   <code class="option">-e fZatIu68OiqccJMXosSRyVjMsWJIx+SA</code> was taken from the
   Password Encryption Key field in the OpenAM console under Configuration &gt;
   Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt;
   Security.</p></li><li class="step" title="Step 2"><p>Stop OpenAM.</p></li><li class="step" title="Step 3"><p>Back up the instance file that points to the configuration
   directory.</p><p>This file is named after the instance location, such as
   <code class="filename">$HOME/.openamcfg/AMConfig_path_to_tomcat_webapps_openam_</code>,
   where $HOME is the home directory of the user running the web container where OpenAM
   is deployed.</p></li><li class="step" title="Step 4"><p>Back up the files in the configuration directory.</p><p>The content of the file you backed up in the previous step is the
   path to the configuration directory, such as
   <code class="filename">$HOME/openam</code>.</p></li><li class="step" title="Step 5"><p>Start OpenAM.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;15.2.&nbsp;To Restore OpenAM Configuration"><a name="restore-config-from-xml"></a><div class="procedure-title">Procedure&nbsp;15.2.&nbsp;To Restore OpenAM Configuration</div><a class="indexterm" name="d16811e18740"></a><p>The following steps restore OpenAM configuration data from
  backup as described in <a class="xref" href="#backup-config-to-xml" title="Procedure&nbsp;15.1.&nbsp;To Back Up OpenAM Configuration">Procedure&nbsp;15.1, &#8220;To Back Up OpenAM Configuration&#8221;</a>.</p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>If using the default OpenAM configuration data store, run
   <span class="command"><strong>ssoadm embedded-status</strong></span> to check the data store status
   to determine whether you must restore the configuration files including
   the embedded data store, or only the service configuration.</p></div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Deploy the OpenAM web application as you did for installation, but
   do not start OpenAM or configure it.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 2"><p>Restore files in the configuration directory as necessary.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 3"><p>Restore the bootstrap files as necessary.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 4"><p>Start OpenAM.</p><p>In a site configuration, perform this step on all servers before
   proceeding.</p></li><li class="step" title="Step 5"><p>Restore OpenAM service configuration using the
   <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm import-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -X ~/backup-2011-09-13-09-00.xml 

Directory Service contains existing data. Do you want to delete it? [y|N] y
Please wait while we import the service configuration...
Service Configuration was imported.</pre></div><p>In a site configuration, you perform this step only once.</p><p>If the password for <code class="literal">amadmin</code> has been changed
   through the OpenAM console, then use the bind password for the root DN of
   the configuration store.</p></li><li class="step" title="Step 6"><p>Restart OpenAM.</p><p>In a site configuration, perform this step on all servers.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;16.&nbsp;Managing Certificates"><div class="titlepage"><div><div><h2 class="title"><a name="chap-certs-keystores"></a>Chapter&nbsp;16.&nbsp;Managing Certificates</h2></div></div></div><a class="indexterm" name="d16811e18797"></a><a class="indexterm" name="d16811e18800"></a><p>This chapter shows you how to handle certificates used to protect
 network communication and for authentication.</p><p>In theory, you should not have to concern yourself with certificates
 when working with OpenAM. OpenAM core services and J2EE policy agents depend
 on the certificates installed for use with the web application container in
 which they run. OpenAM web policy agents depend on the certificates installed
 for use with the web server. Theoretically, each certificate has been signed
 by a well-known Certificate Authority (CA), whose certificate is already
 installed in the Java CA certificates trust store
 (<code class="filename">$JAVA_HOME/jre/lib/security/cacerts</code>, default password
 <code class="literal">changeit</code>) and in browsers, and so is recognized by other
 software used without you having to configure anything.</p><p>In practice, you might not have the budget for CA signed certificates
 in your lab or test environment, where you might constantly be installing
 new configurations, using and throwing away certificates for experiments and
 repeated tests. In the lab, therefore, you set up OpenAM to use self-signed
 certificates that you generate at no cost, but that are not recognized, and
 therefore not trusted out of the box.</p><div class="itemizedlist"><p>How you configure the containers where OpenAM and your applications run
  to use self-signed certificates depends on your web application server or web
  server software. Yet, the basic principles apply.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>First, your container requires its own certificate for setting up
   secure connections.</p></li><li class="listitem"><p>Second, the clients connecting must be able to trust the container
   certificate. Generally this means that clients must recognize the container
   certificate because they have a copy of the public certificate stored
   somewhere the client trusts.</p></li><li class="listitem"><p>Third, if you use certificate authentication in OpenAM, OpenAM must
   also be able to find a copy of the client's public certificate to trust the
   client, most likely by finding a match with the certificate stored in the
   client profile from the identity repository. How you include client
   certificates in their identity repository entries depends on your identity
   repository more than it depends on OpenAM.</p></li></ul></div><p>Some client applications let you trust certificates blindly. This can
 be helpful when working in your lab or test environment with self-signed
 certificates. For example, you might want to use HTTPS with the OpenAM
 RESTful API without having the client recognize the self-signed server
 certificate.</p><div class="screen"><pre class="brush: plain;">$ curl "https://openam.example.com:8443/openam/identity/authenticate?
 username=bjensen&amp;password=hifalutin"
curl: (60) Peer certificate cannot be authenticated with known CA certificates
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
 of Certificate Authority (CA) public keys (CA certs). If the default
 bundle file isn't adequate, you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option.
$ curl --insecure "https://openam.example.com:8443/openam/identity/authenticate?
 username=bjensen&amp;password=hifalutin"
token.id=AQIC5wM2LY4SfczMax8jegpSiaigB96NOWylLilsd0PUMjY.*AAJTSQACMDE.*</pre></div><div class="procedure" title="Procedure&nbsp;16.1.&nbsp;To Set Up OpenAM With HTTPS on Tomcat"><a name="openam-with-https-on-tomcat"></a><div class="procedure-title">Procedure&nbsp;16.1.&nbsp;To Set Up OpenAM With HTTPS on Tomcat</div><p>The container where you install OpenAM requires a certificate in order
  to set up secure connections. The following steps demonstrate one way to set
  up Tomcat with an HTTPS connector, using the Java <span class="command"><strong>keytool</strong></span>
  command to manage the certificate and key stores. Once Tomcat can do HTTPS,
  you deploy OpenAM as you normally would, over HTTPS.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Stop Tomcat.</p></li><li class="step" title="Step 2"><p>Create a certificate and store it in a new key store.</p><div class="screen"><pre class="brush: plain;">$ cd /path/to/tomcat/conf/
$ keytool -genkey -alias openam.example.com -keyalg RSA -keystore keystore.jks
Enter keystore password:  
What is your first and last name?
  [Unknown]:  openam.example.com
What is the name of your organizational unit?
  [Unknown]:  Eng
What is the name of your organization?
  [Unknown]:  ForgeRock.com
What is the name of your City or Locality?
  [Unknown]:  Grenoble
What is the name of your State or Province?
  [Unknown]:  Isere
What is the two-letter country code for this unit?
  [Unknown]:  FR
Is CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR correct?
  [no]:  yes

Enter key password for &lt;openam.example.com&gt;
 (RETURN if same as keystore password):</pre></div></li><li class="step" title="Step 3"><p>Uncomment the SSL connector configuration in Tomcat's
   <code class="filename">conf/server.xml</code>, specifying your key store file
   and password.</p><pre class="brush: xml;">&lt;!-- Define a SSL HTTP/1.1 Connector on port 8443
     This connector uses the JSSE configuration, when using APR, the 
     connector should be using the OpenSSL style configuration
     described in the APR documentation --&gt;
&lt;!--
--&gt;
&lt;Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           keystoreFile="/path/to/tomcat/conf/keystore.jks"
           keystorePass="changeit"
           clientAuth="false" sslProtocol="TLS" /&gt;</pre></li><li class="step" title="Step 4"><p>Start Tomcat.</p></li><li class="step" title="Step 5"><p>Verify that you can connect to Tomcat on port 8443 over HTTPS.</p><p>Your browser does not trust the certificate, because the certificate
   is self-signed, not signed by any of the CAs your browser knows.</p><div class="mediaobject" title="Your browser does not trust your self-signed certificate."><a name="figure-browser-unknown-cert"></a><img src="images/browser-unknown-cert.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-browser-unknown-cert.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-browser-unknown-cert.html" target="longdesc">D</a>]</span></div></div><p>You recognize the Subject and Issuer of your certificate, and so
   can choose to trust the certificate, effectively saving it into your
   browser's trust store.</p></li><li class="step" title="Step 6"><p>Deploy and configure OpenAM as you normally would.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;16.2.&nbsp;To Share Self-Signed Certificates"><a name="share-self-signed-certs"></a><div class="procedure-title">Procedure&nbsp;16.2.&nbsp;To Share Self-Signed Certificates</div><p>When you use a self-signed certificate for your container, clients
  connecting must be able to trust the container certificate. Your browser
  makes this an easy, but manual process. For other client applications, you
  must import the certificate into the trust store used by the client. By
  default, Java applications can use the
  <code class="filename">$JAVA_HOME/jre/lib/security/cacerts</code> store. The default
  password is <code class="literal">changeit</code>.<sup>[<a name="d16811e18890" href="#ftn.d16811e18890" class="footnote">9</a>]</sup> The
  steps that follow demonstrate how to import a self-signed certificate into
  the Java <code class="filename">cacerts</code> store.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Export the certificate from the key store.</p><div class="screen"><pre class="brush: plain;">$ cd /path/to/tomcat/conf/
$ keytool -exportcert -alias openam.example.com -file openam.crt -keystore
 keystore.jks
Enter keystore password:
Certificate stored in file &lt;openam.crt&gt;</pre></div></li><li class="step" title="Step 2"><p>Import the certificate into the trust store.</p><div class="screen"><pre class="brush: plain;">$ keytool -importcert -alias openam.example.com -file openam.crt
 -trustcacerts -keystore $JAVA_HOME/jre/lib/security/cacerts
Enter keystore password:  
Owner: CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR
Issuer: CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR
Serial number: 4e789e40
Valid from: Tue Sep 20 16:08:00 CEST 2011 until: Mon Dec 19 15:08:00 CET 2011
Certificate fingerprints:
  MD5:  31:08:11:3B:15:75:87:C2:12:08:E9:66:00:81:61:8D
  SHA1: AA:90:2F:42:0A:F4:A9:A5:0C:90:A9:FC:69:FD:64:65:D9:78:BA:1D
  Signature algorithm name: SHA1withRSA
  Version: 3
Trust this certificate? [no]:  yes
Certificate was added to keystore</pre></div></li></ol></div><div class="procedure" title="Procedure&nbsp;16.3.&nbsp;To Change the Signing Key for Federation"><a name="change-signing-key"></a><div class="procedure-title">Procedure&nbsp;16.3.&nbsp;To Change the Signing Key for Federation</div><a class="indexterm" name="d16811e18913"></a><p>The following steps cover how to change the signing key for an identity
  provider. This procedure involves creating a self-signed certificate in a new
  key store file, and also preparing encrypted password files so that OpenAM can
  access the key store and the private key.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you do not already have the new signing key in your key store,
   generate a new key and key store.</p><p>The following example starts an interactive <span class="command"><strong>keytool</strong></span>
   session that requests information needed to generate a new key valid for two
   years, and puts it in a key store named <code class="filename">keystore.jks</code>.
   You can perform this step in a temporary location, and then move the files
   generated once you have completed your work.</p><p>Keep track of the passwords you enter here, as you use them in the next
   step.</p><div class="screen"><pre class="brush: plain;">$ cd /tmp
$ keytool -genkeypair -alias newkey -keyalg RSA -keysize 1024 -validity 730
 -storetype JKS -keystore keystore.jks
Enter keystore password:  
Re-enter new password: 
What is your first and last name?
  [Unknown]:  openam.example.com
What is the name of your organizational unit?
  [Unknown]:  Eng
What is the name of your organization?
  [Unknown]:  ForgeRock.com
What is the name of your City or Locality?
  [Unknown]:  Grenoble
What is the name of your State or Province?
  [Unknown]:  Isere
What is the two-letter country code for this unit?
  [Unknown]:  FR
Is CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR correct?
  [no]:  yes

Enter key password for &lt;newkey&gt;
 (RETURN if same as keystore password):
Re-enter new password:</pre></div><p>Self-signed keys are not automatically recognized by other entities.
   You must also share the self-signed key as described in
   <a class="xref" href="#share-self-signed-certs" title="Procedure&nbsp;16.2.&nbsp;To Share Self-Signed Certificates">Procedure&nbsp;16.2, &#8220;To Share Self-Signed Certificates&#8221;</a>.</p></li><li class="step" title="Step 2"><p>Using the passwords you entered in the previous step, prepare the
   password files to encrypt.</p><div class="itemizedlist"><p>Create two files, each containing only a password in clear text. You
    can create the files in the same directory as the key store.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="filename">keypass.cleartext</code> contains the clear text
     key password for the private key you generated.</p></li><li class="listitem"><p><code class="filename">storepass.cleartext</code> contains the clear text
     key store password.</p></li></ul></div></li><li class="step" title="Step 3"><p>If you have not already done so, install the administration tools as
   described in <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
   Administration Tools</em></a>.</p></li><li class="step" title="Step 4"><p>Prepare encrypted password files for use by OpenAM.</p><div class="screen"><pre class="brush: plain;">$ ./ampassword --encrypt keypass.cleartext &gt; .keypass
$ ./ampassword --encrypt storepass.cleartext &gt; .storepass</pre></div><p>Remove the <code class="filename">*.cleartext</code> files after preparing
   the encrypted versions.</p></li><li class="step" title="Step 5"><p>Replace the default OpenAM key store and password files with the
   ones that you have created.</p><p>The following example works with an installation of OpenAM where
   the deployment URI is <code class="literal">/openam</code>.</p><div class="screen"><pre class="brush: plain;">$ cp keystore.jks .keypass .storepass ~/openam/openam/</pre></div></li><li class="step" title="Step 6"><p>Restart OpenAM, or the container where it runs, so that OpenAM can
   use the new key store and encrypted password files.</p></li><li class="step" title="Step 7"><p>Login to OpenAM console as administrator, and then set the new signing
   key in one of two ways.</p><ol type="a" class="substeps"><li class="step" title="Step 7.a"><p>If you have not yet configured your identity provider, select
     Common Tasks &gt; Create Hosted Identity Provider, and then follow the
     instructions, selecting your key from the Signing Key drop-down
     list.</p></li><li class="step" title="Step 7.b"><p>If you have already configured your identity provider, browse to
     Federation &gt; <em class="replaceable"><code>provider-name</code></em> &gt; Assertion
     Content &gt; Signing and Encryption, and then edit the signing key
     certificate alias.</p><p>Save your work.</p></li></ol></li><li class="step" title="Step 8"><p>Share updated metadata with other entities in your circle of trust
   as described in <a href="../admin-guide/index.html#set-up-federation" class="link"><em class="citetitle">Setting Up SAML
   2.0 SSO</em></a>.</p></li></ol></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e18890" href="#d16811e18890" class="para">9</a>] </sup>Alternatively,
  you can specify the trust store for a Java application, such as
  <code class="literal">-Djavax.net.ssl.trustStore=/path/to/truststore.jks
  -Djavax.net.ssl.trustStorePassword=changeit</code>.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;17.&nbsp;Monitoring OpenAM Services"><div class="titlepage"><div><div><h2 class="title"><a name="chap-monitoring"></a>Chapter&nbsp;17.&nbsp;Monitoring OpenAM Services</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#monitoring-interfaces">17.1. Monitoring Interfaces</a></span></dt><dt><span class="section"><a href="#is-openam-alive">17.2. Is OpenAM Running?</a></span></dt><dt><span class="section"><a href="#log-mgmt">17.3. Log Management</a></span></dt><dt><span class="section"><a href="#session-mgmt">17.4. Session Management</a></span></dt></dl></div><p>This chapter covers how to monitor OpenAM services to ensure
 appropriate performance and service availability.</p><div class="section" title="17.1.&nbsp;Monitoring Interfaces"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="monitoring-interfaces"></a>17.1.&nbsp;Monitoring Interfaces</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#monitoring-web-pages">17.1.1. Web Based Monitoring</a></span></dt><dt><span class="section"><a href="#monitoring-jmx">17.1.2. JMX Monitoring</a></span></dt><dt><span class="section"><a href="#monitoring-snmp">17.1.3. SNMP Monitoring</a></span></dt></dl></div><a class="indexterm" name="d16811e19016"></a><p>OpenAM lets you monitor OpenAM over protocol through web pages,
  Java Management Extensions (JMX), or Simple Network Management Protocol
  (SNMP). The services are based on JMX.</p><p>To configure monitoring services, login to OpenAM console as OpenAM
  administrator, and browse to Configuration &gt; System &gt; Monitoring.
  Alternatively you can use the <span class="command"><strong>ssoadm set-attr-defs</strong></span>
  command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-enabled=true</pre></div><p>Restart OpenAM for the changes to take effect. You must also restart
  OpenAM if you disable monitoring.</p><div class="section" title="17.1.1.&nbsp;Web Based Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-web-pages"></a>17.1.1.&nbsp;Web Based Monitoring</h3></div></div></div><p>You can configure OpenAM to allow you to access a web based view of
   OpenAM MBeans on port 8082 where the core server runs, such as
   <code class="literal">http://openam-ter.example.com:8082/</code>. Either use the
   console, or use the <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-http-enabled=true</pre></div><p>The default authentication file allows you to authenticate over HTTP
   as user <code class="literal">demo</code>, password <code class="literal">changeit</code>. The
   user name and password are kept in the file specified, with the password
   encrypted.</p><div class="screen"><pre class="brush: plain;">$ cat openam/openam/openam_mon_auth
demo AQICMBCKlwx6G3vzK3TYYRbtTpNYAagVIPNP</pre></div><p>Or </p><div class="screen"><pre class="brush: plain;">$ cat openam/openam/opensso_mon_auth
demo AQICvSe+tXEg8TUUT8ekzHb8IRzVSvm1Lc2u</pre></div><p>You can encrypt a new password using the <span class="command"><strong>ampassword</strong></span>
   command. After changing the authentication file, you must restart OpenAM
   for the changes to take effect.</p><div class="mediaobject" title="OpenAM MBeans in a browser"><a name="figure-web-based-monitoring"></a><img src="images/web-based-monitoring.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-web-based-monitoring.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-web-based-monitoring.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="17.1.2.&nbsp;JMX Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-jmx"></a>17.1.2.&nbsp;JMX Monitoring</h3></div></div></div><a class="indexterm" name="d16811e19073"></a><p>You can configure OpenAM to allow you to listen for Java Management
   eXtension (JMX) clients, by default on port 9999. Either use the OpenAM
   console page under Configuration &gt; System &gt; Monitoring and make sure
   both Monitoring Status and Monitoring RMI interface status are both set to
   Enabled, or use the <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-enabled=true
 iplanet-am-monitoring-rmi-enabled=true</pre></div><p>A number of tools support JMX, including <span class="command"><strong>jvisualvm</strong></span>
   and <span class="command"><strong>jconsole</strong></span>. When you use <span class="command"><strong>jconsole</strong></span>
   to browse OpenAM MBeans for example, the default URL for the OpenAM running
   on the local system is
   <code class="literal">service:jmx:rmi:///jndi/rmi://localhost:9999/server</code>.</p><div class="screen"><pre class="brush: plain;">$ jconsole service:jmx:rmi:///jndi/rmi://localhost:9999/server &amp;</pre></div><p>You can also browse the MBeans by connecting to your web application
   container, and browsing to the OpenAM MBeans. By default, JMX monitoring for
   your container is likely to be accessible only locally, using the process
   ID.</p><div class="mediaobject" title="Jconsole browsing OpenAM MBeans"><a name="figure-jconsole-to-openam"></a><img src="images/jconsole-to-openam.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-jconsole-to-openam.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-jconsole-to-openam.html" target="longdesc">D</a>]</span></div></div><p>Also see <a class="link" href="http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html" target="_blank">Monitoring and Management Using JMX</a> for instructions on how to
   connect remotely, how to use SSL, and so forth.</p></div><div class="section" title="17.1.3.&nbsp;SNMP Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-snmp"></a>17.1.3.&nbsp;SNMP Monitoring</h3></div></div></div><a class="indexterm" name="d16811e19119"></a><p>You can configure OpenAM to allow you to listen on port 8085 for SNMP
   monitoring. Either use the console, or use the <span class="command"><strong>ssoadm</strong></span>
   command.</p><div class="screen"><pre class="brush: plain;">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-snmp-enabled=true</pre></div></div></div><div class="section" title="17.2.&nbsp;Is OpenAM Running?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="is-openam-alive"></a>17.2.&nbsp;Is OpenAM Running?</h2></div></div></div><a class="indexterm" name="d16811e19134"></a><p>You can check over HTTP whether OpenAM is up, using
  <code class="filename">isAlive.jsp</code>. Point your application to the file
  under the OpenAM URL, such as
  <code class="literal">http://openam.example.com:8080/openam/isAlive.jsp</code>.</p><p>If you get a success code (with <code class="literal">Server is ALIVE:</code> in
  the body of the page returned), then OpenAM is in operation.</p></div><div class="section" title="17.3.&nbsp;Log Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt"></a>17.3.&nbsp;Log Management</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#log-mgmt-core">17.3.1. Logging in OpenAM Core Services</a></span></dt><dt><span class="section"><a href="#log-mgmt-agents">17.3.2. Logging in OpenAM Policy Agents</a></span></dt><dt><span class="section"><a href="#log-debug-selective-capture">17.3.3. Debug Logging by Service</a></span></dt><dt><span class="section"><a href="#log-rotate-debug">17.3.4. Rotating Debug Logs</a></span></dt></dl></div><a class="indexterm" name="d16811e19155"></a><p>OpenAM implements logging as a service. This means remote clients
  such as your OpenAM policy agents can log messages to the central logging
  service.</p><div class="section" title="17.3.1.&nbsp;Logging in OpenAM Core Services"><div class="titlepage"><div><div><h3 class="title"><a name="log-mgmt-core"></a>17.3.1.&nbsp;Logging in OpenAM Core Services</h3></div></div></div><p>By default OpenAM logs to files in the configuration directory for
   the instance, such as <code class="filename">$HOME/openam/log/</code> for log files,
   and <code class="filename">$HOME/openam/debug/</code> for debug files. You can also
   configure OpenAM to log through JDBC to a database such as MySQL or Oracle
   DB.</p><p>OpenAM sends messages to different log files, each named after the
   service logging the message, with two different types log files per service:
   <code class="filename">.access</code> and <code class="filename">.error</code>. Thus the
   current log files for the authentication service are named
   <code class="filename">amAuthentication.access</code> and
   <code class="filename">amAuthentication.error</code>.</p><p>See the <a href="../reference/index.html#chap-log-messages" class="link">Log Messages</a>
   reference for details.</p><p>OpenAM lets you change the log level on the fly. OpenAM also supports
   log rotation, secure logging, and log message buffering.</p><p>To configure OpenAM logging properties overall, login to the OpenAM
   console as OpenAM administrator, and browse to Configuration &gt; System &gt;
   Logging.</p><a class="indexterm" name="d16811e19194"></a><p>To adjust the debug level while OpenAM is running, login to the OpenAM
   console as OpenAM administrator, and browse to Configuration &gt; Servers
   and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; General, and then
   scroll down to Debugging. The default level for debug logging is Error.
   This level is appropriate for normal production operations, in which case
   no debug log messages are expected.</p><p>Setting debug log level to Warning increases the volume of messages.
   Setting debug log level to Message dumps detailed trace messages. Unless
   told to do so by qualified support personnel, do not use Warning and Message
   levels in production.</p><a class="indexterm" name="d16811e19206"></a><p>During development, you might find it useful to log all debug messages
   to a single file. In order to do so, set Merge Debug Files to
   <code class="literal">on</code>.</p><p>After changing this setting, restart OpenAM or the container in which
   it runs for the change to take effect.</p></div><div class="section" title="17.3.2.&nbsp;Logging in OpenAM Policy Agents"><div class="titlepage"><div><div><h3 class="title"><a name="log-mgmt-agents"></a>17.3.2.&nbsp;Logging in OpenAM Policy Agents</h3></div></div></div><p>By default, OpenAM Policy Agents log to local files in their
   configuration directories for debugging. The exact location depends on
   where you installed the agent.</p><p>By default OpenAM policy agents send log messages remotely to OpenAM
   when you log auditing information about URL access attempts. To configure
   audit logging for a centrally managed policy agent, login to the OpenAM
   console as administrator, and browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   <em class="replaceable"><code>Agent Type</code></em> &gt; <em class="replaceable"><code>Agent
   Name</code></em> &gt; Global, and then scroll down to the Audit
   section.</p></div><div class="section" title="17.3.3.&nbsp;Debug Logging by Service"><div class="titlepage"><div><div><h3 class="title"><a name="log-debug-selective-capture"></a>17.3.3.&nbsp;Debug Logging by Service</h3></div></div></div><a class="indexterm" name="d16811e19237"></a><p>OpenAM lets you capture debug log messages selectively for a specific
   service. This can be useful when you must turn on debugging in a production
   system where you want to avoid excessive logging, but must gather messages
   when you reproduce a problem.</p><div class="orderedlist"><p>Perform these steps to capture debug messages for a specific
    service.</p><ol class="orderedlist" type="1"><li class="listitem"><p>Login to OpenAM console as administrator,
     <code class="literal">amadmin</code>.</p></li><li class="listitem"><p>Browse to <code class="filename">Debug.jsp</code>, for example
     <code class="literal">http://openam.example.com:8080/openam/Debug.jsp</code>.</p><p>No links to this page are provided in the console.</p></li><li class="listitem"><p>Select the service to debug and also the level required given the
     hints provided in the <code class="filename">Debug.jsp</code> page.</p><p>The change takes effect immediately.</p></li><li class="listitem"><p>Promptly reproduce the problem you are investigating.</p></li><li class="listitem"><p>After reproducing the problem, immediately return to the
     <code class="filename">Debug.jsp</code> page, and revert to normal log levels
     to avoid filling up the disk where debug logs are stored.</p></li></ol></div></div><div class="section" title="17.3.4.&nbsp;Rotating Debug Logs"><div class="titlepage"><div><div><h3 class="title"><a name="log-rotate-debug"></a>17.3.4.&nbsp;Rotating Debug Logs</h3></div></div></div><a class="indexterm" name="d16811e19284"></a><p>By default OpenAM does not rotate debug logs. To rotate debug logs,
   edit <code class="filename">WEB-INF/classes/debugconfig.properties</code> where
   OpenAM is deployed.</p><div class="variablelist"><p>The <code class="filename">debugconfig.properties</code> file includes
    the following properties.</p><dl><dt><span class="term"><code class="literal">org.forgerock.openam.debug.prefix</code></span></dt><dd><p>This property specifies the debug log file prefix applied when
      OpenAM rotates a debug log file. The property has no default. It takes
      a string as the property value.</p></dd><dt><span class="term"><code class="literal">org.forgerock.openam.debug.suffix</code></span></dt><dd><p>This property specifies the debug log file suffix applied when
      OpenAM rotates a debug log file. The property takes a
      <code class="literal">SimpleDateFormat</code> string. The default is
      <code class="literal">-MM.dd.yyyy-kk.mm</code>.</p></dd><dt><span class="term"><code class="literal">org.forgerock.openam.debug.rotation</code></span></dt><dd><p>This property specifies an interval in minutes between debug
      log rotations. Set this to a value greater than zero to enable debug
      log rotation.</p></dd></dl></div><p>After you edit the <code class="filename">debugconfig.properties</code> file,
   you must restart OpenAM or the web container where it runs for the changes
   to take effect.</p></div></div><div class="section" title="17.4.&nbsp;Session Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="session-mgmt"></a>17.4.&nbsp;Session Management</h2></div></div></div><a class="indexterm" name="d16811e19335"></a><p>OpenAM console lets the administrator view and manage current
  user sessions under the Sessions tab page.</p><div class="mediaobject" title="Session management tab page"><a name="figure-session-management"></a><img src="images/session-management.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-session-management.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-session-management.html" target="longdesc">D</a>]</span></div></div><p>To end a user session manually, select the user's session, and then
  click the Invalidate Session button. As a result, the user has to
  authenticate again.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;18.&nbsp;Tuning OpenAM"><div class="titlepage"><div><div><h2 class="title"><a name="chap-tuning"></a>Chapter&nbsp;18.&nbsp;Tuning OpenAM</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#tuning-openam-server">18.1. OpenAM Server Settings</a></span></dt><dt><span class="section"><a href="#tuning-jvm-for-openam">18.2. Java Virtual Machine Settings</a></span></dt><dt><span class="section"><a href="#caching">18.3. Caching in OpenAM</a></span></dt></dl></div><a class="indexterm" name="d16811e19354"></a><p>This chapter covers key OpenAM tunings to ensure smoothly performing
 access and federation management services, and to maximize throughput while
 minimizing response times.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>The recommendations provided here are guidelines for your testing
  rather than hard and fast rules for every situation. Said another way, the
  fact that a given setting is configurable implies that no one setting is
  right in all circumstances.</p><p>The extent to which performance tuning advice applies depends to a large
  extent on your requirements, on your workload, and on what resources you have
  available. Test suggestions before rolling them out into production.</p></div><p>As a rule of thumb, an OpenAM server in production with a 3 GB heap can
 handle 100,000 sessions. Although you might be tempted to use a larger heap
 with a 64-bit JVM, smaller heaps are easier to manage. Thus, rather than
 scaling single servers up to increase the total number of simultaneous
 sessions, consider scaling out by adding more servers instead. The suggestions
 that follow pertain to production servers.</p><div class="section" title="18.1.&nbsp;OpenAM Server Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tuning-openam-server"></a>18.1.&nbsp;OpenAM Server Settings</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#tuning-general-settings">18.1.1. General Settings</a></span></dt><dt><span class="section"><a href="#tuning-ldap-settings">18.1.2. LDAP Settings</a></span></dt><dt><span class="section"><a href="#tuning-notification-settings">18.1.3. Notification Settings</a></span></dt><dt><span class="section"><a href="#tuning-session-settings">18.1.4. Session Settings</a></span></dt></dl></div><p>OpenAM has a number of settings that can be tuned to increase
  performance.</p><div class="section" title="18.1.1.&nbsp;General Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-general-settings"></a>18.1.1.&nbsp;General Settings</h3></div></div></div><p>The following general points apply.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Set debug level to <code class="literal">error</code>.</p></li><li class="listitem"><p>Disable session failover debugging.</p></li><li class="listitem"><p>Set container-level logging to a low level such as
     <code class="literal">error</code> or <code class="literal">severe</code>.</p></li></ul></div></div><div class="section" title="18.1.2.&nbsp;LDAP Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-ldap-settings"></a>18.1.2.&nbsp;LDAP Settings</h3></div></div></div><p>Tune both your LDAP data stores and also your LDAP authentication
   modules.</p><p>To change LDAP data store settings, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Data Stores &gt;
   <em class="replaceable"><code>Data Store Name</code></em> in the OpenAM console.
   Each data store has its own connection pool and therefore each data store
   needs its own tuning.</p><div class="table"><a name="tuning-ldap-data-store-settings"></a><div class="table-title">Table&nbsp;18.1.&nbsp;LDAP Data Store Settings</div><div class="table-contents"><table summary="LDAP Data Store Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>LDAP Connection Pool Minimum Size</td><td>1</td><td>
        <p>The minimum LDAP connection pool size; a good tuning value
        for this property is 10.</p>
        <p>(<code class="literal">sun-idrepo-ldapv3-config-connection_pool_min_size</code>)</p>
       </td></tr><tr><td>LDAP Connection Pool Maximum Size</td><td>10</td><td>
        <p>The maximum LDAP connection pool size; a high tuning value
        for this property is 65, though you might well be able to reduce this
        for your deployment. Ensure your LDAP server can cope with the maximum
        number of clients across all the OpenAM servers.</p>
        <p>(<code class="literal">sun-idrepo-ldapv3-config-connection_pool_max_size</code>)</p>
       </td></tr></tbody></table></div></div><br class="table-break"><p>To change connection pool settings for the LDAP authentication module,
   browse to Configuration &gt; Authentication &gt; Core in the OpenAM
   console.</p><div class="table"><a name="tuning-ldap-authentication-module-settings"></a><div class="table-title">Table&nbsp;18.2.&nbsp;LDAP Authentication Module Setting</div><div class="table-contents"><table summary="LDAP Authentication Module Setting" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Default LDAP Connection Pool Size</td><td>1:10</td><td>
        <p>The minimum and maximum LDAP connection pool used by the
        LDAP authentication module. This should be tuned to 10:65 for
        production.</p>
        <p>(<code class="literal">iplanet-am-auth-ldap-connection-pool-default-size</code>)</p>
       </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="18.1.3.&nbsp;Notification Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-notification-settings"></a>18.1.3.&nbsp;Notification Settings</h3></div></div></div><p>OpenAM has two thread pools used to send notifications to clients. The
   Service Management Service thread pool can be tuned in OpenAM console under
   Configuration &gt; Servers and Sites &gt; Default Server Settings &gt;
   SDK.</p><div class="table"><a name="tuning-sms-notifications"></a><div class="table-title">Table&nbsp;18.3.&nbsp;SMS Notification Setting</div><div class="table-contents"><table summary="SMS Notification Setting" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Notification Pool Size</td><td>10</td><td>
        <p>This is the size of the thread pool used to send notifications.
        In production this value should be fine unless lots of
        clients are registering for SMS notifications.</p>
        <p>(<code class="literal">com.sun.identity.sm.notification.threadpool.size</code>)</p>
       </td></tr></tbody></table></div></div><br class="table-break"><p>The session service has its own thread pool to send notifications.
   This is configured under Configuration &gt; Servers and Sites &gt; Default
   Server Settings &gt; Session.</p><div class="table"><a name="tuning-session-service-notifications"></a><div class="table-title">Table&nbsp;18.4.&nbsp;Session Service Notification Settings</div><div class="table-contents"><table summary="Session Service Notification Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Notification Pool Size</td><td>10</td><td>
        <p>This is the size of the thread pool used to send notifications.
        In production this should be around 25-30.</p>
        <p>(<code class="literal">com.iplanet.am.notification.threadpool.size</code>)</p>
       </td></tr><tr><td>Notification Thread Pool Threshold</td><td>5000</td><td>
        <p>This is the maximum number of notifications in the queue waiting
        to be sent. The default value should be fine in the majority of
        installations.</p>
        <p>(<code class="literal">com.iplanet.am.notification.threadpool.threshold</code>)</p>
       </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="18.1.4.&nbsp;Session Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-session-settings"></a>18.1.4.&nbsp;Session Settings</h3></div></div></div><p>The session service has additional properties to tune, which are
   configured under Configuration &gt; Servers and Sites &gt; Default
   Server Settings &gt; Session.</p><div class="table"><a name="tuning-session-service-settings"></a><div class="table-title">Table&nbsp;18.5.&nbsp;Session Settings</div><div class="table-contents"><table summary="Session Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Maximum Sessions</td><td>5000</td><td>
        <p>In production this value can safely be set into the 100,000s.
        The maximum session limit is really controlled by the maximum size of
        the JVM heap which must be tuned appropriately to match the expected
        number of concurrent sessions.</p>
        <p>(<code class="literal">com.iplanet.am.session.maxSessions</code>)</p>
       </td></tr><tr><td>Sessions Purge Delay</td><td>0</td><td>
        <p>This should be zero to ensure sessions are purged immediately.</p>
        <p>(<code class="literal">com.iplanet.am.session.purgedelay</code>)</p>
       </td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="18.2.&nbsp;Java Virtual Machine Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tuning-jvm-for-openam"></a>18.2.&nbsp;Java Virtual Machine Settings</h2></div></div></div><p>This section gives some initial guidance on configuring the JVM for
  running OpenAM. These settings provide a strong foundation to the JVM before
  a more detailed garbage collection tuning exercise, or as best practice
  configuration for production.</p><div class="table"><a name="tuning-heap-size"></a><div class="table-title">Table&nbsp;18.6.&nbsp;Heap Size Settings</div><div class="table-contents"><table summary="Heap Size Settings" width="100%" border="0"><colgroup><col width="42%"><col width="29%"><col width="29%"></colgroup><thead><tr><th>JVM Parameters</th><th>Suggested Value</th><th>Description</th></tr></thead><tbody><tr><td><p><code class="literal">-Xms</code> &amp;
      <code class="literal">-Xmx</code></p></td><td><p>At least 1024m (2048m with embedded OpenDJ), in production
      environments at least 2048m to 3072m. This setting depends on the available
      physical memory, and on whether a 32 or 64-bit JVM is used.</p></td><td><p>-</p></td></tr><tr><td><p><code class="literal">-server</code></p></td><td><p>-</p></td><td><p>Ensures the server JVM is used</p></td></tr><tr><td><p><code class="literal">-XX:PermSize</code> &amp;
      <code class="literal">-XX:MaxPermSize</code></p></td><td><p>Set both to 256m</p></td><td><p>Controls the size of the permanent generation in the
      JVM</p></td></tr><tr><td><p><code class="literal">-Dsun.net.client.defaultReadTimeout</code></p></td><td><p>60000</p></td><td><p>Controls the read timeout in the Java HTTP client
      implementation</p>
      <p>This applies only to the Sun/Oracle HotSpot JVM.</p></td></tr><tr><td><p><code class="literal">-Dsun.net.client.defaultConnectTimeout</code></p></td><td>High setting: <p>30000</p> (30 seconds)</td><td><p>Controls the connect timeout in the Java HTTP client
      implementation</p>
      <p>When you have hundreds of incoming requests per second, reduce this
      value to avoid a huge connection queue.</p>
      <p>This applies only to the Sun/Oracle HotSpot JVM.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="tuning-garbage-collection"></a><div class="table-title">Table&nbsp;18.7.&nbsp;Garbage Collection Settings</div><div class="table-contents"><table summary="Garbage Collection Settings" width="100%" border="0"><colgroup><col width="42%"><col width="29%"><col width="29%"></colgroup><thead><tr><th>JVM Parameters</th><th>Suggested Value</th><th>Description</th></tr></thead><tbody><tr><td><p><code class="literal">-verbose:gc</code></p></td><td><p>-</p></td><td><p>Verbose garbage collection reporting</p></td></tr><tr><td><p><code class="literal">-Xloggc:</code></p></td><td><p><code class="filename">$CATALINA_HOME/logs/gc.log</code></p></td><td><p>Location of the verbose garbage collection log
      file</p></td></tr><tr><td><p><code class="literal">-XX:+PrintClassHistogram</code></p></td><td><p>-</p></td><td><p>Prints a heap histogram when a SIGTERM signal is received
      by the JVM</p></td></tr><tr><td><p><code class="literal">-XX:+PrintGCDetails</code></p></td><td><p>-</p></td><td><p>Prints detailed information about garbage collection</p></td></tr><tr><td><p><code class="literal">-XX:+PrintGCTimeStamps</code></p></td><td><p>-</p></td><td><p>Prints detailed garbage collection timings</p></td></tr><tr><td><p><code class="literal">-XX:+HeapDumpOnOutOfMemoryError</code></p></td><td><p>-</p></td><td><p>Out of Memory errors generate a heap dump
      automatically</p></td></tr><tr><td><p><code class="literal">-XX:HeapDumpPath</code></p></td><td><p><code class="filename">$CATALINA_HOME/logs/heapdump.hprof</code></p></td><td><p>Location of the heap dump</p></td></tr><tr><td><p><code class="literal">-XX:+UseConcMarkSweepGC</code></p></td><td><p>-</p></td><td><p>Use the concurrent mark sweep garbage collector</p></td></tr><tr><td><p><code class="literal">-XX:+UseCMSCompactAtFullCollection</code></p></td><td><p>-</p></td><td><p>Aggressive compaction at full collection</p></td></tr><tr><td><p><code class="literal">-XX:+CMSClassUnloadingEnabled</code></p></td><td><p>-</p></td><td><p>Allow class unloading during CMS sweeps</p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="18.3.&nbsp;Caching in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="caching"></a>18.3.&nbsp;Caching in OpenAM</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#caching-server-settings">18.3.1. Overall Server Cache Settings</a></span></dt><dt><span class="section"><a href="#java-ee-policy-agent-and-sdk-caching">18.3.2. Caching Properties For Java EE Policy Agents &amp; SDK Clients</a></span></dt><dt><span class="section"><a href="#caching-properties">18.3.3. Cache Settings</a></span></dt></dl></div><a class="indexterm" name="d16811e19857"></a><p>OpenAM caches data to avoid having to query user and configuration
  data stores each time it needs the information. By default, OpenAM makes use
  of LDAP persistent search to receive notification of changes to cached data.
  For this reason, caching works best when data are stored in a directory
  server that supports LDAP persistent search.</p><p>OpenAM has two kinds of cache on the server side that you can configure,
  one for configuration data and the other for user data. Generally use the
  default settings for configuration data cache. This section mainly covers the
  configuration choices you have for caching user data.</p><p>OpenAM server has two levels of user data caching. The global user data
  cache is dirtied by LDAP persistent search. When the global user data cache is
  enabled (as it is by default), the individual data store caches are not useful
  because all requests for data go through the global cache. The individual data
  store caches are therefore only useful when the global user data cache is
  disabled.</p><p>The following diagram depicts the two kinds of cache, and also the
  two levels of user data caching.</p><div class="mediaobject" title="Caches in OpenAM server"><a name="figure-openam-caches"></a><img src="images/openam-caches.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-openam-caches.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-openam-caches.html" target="longdesc">D</a>]</span></div></div><p>The rest of this section concerns mainly settings for global user data
  cache and for SDK clients. For a look at data store cache settings, see
  <a class="xref" href="#tuning-ldap-data-store-settings" title="Table&nbsp;18.1.&nbsp;LDAP Data Store Settings">Table&nbsp;18.1, &#8220;LDAP Data Store Settings&#8221;</a>.</p><div class="section" title="18.3.1.&nbsp;Overall Server Cache Settings"><div class="titlepage"><div><div><h3 class="title"><a name="caching-server-settings"></a>18.3.1.&nbsp;Overall Server Cache Settings</h3></div></div></div><p>By default OpenAM has caching enabled both for configuration data and
   also for user data. This setting is governed by the server property
   <code class="literal">com.iplanet.am.sdk.caching.enabled</code>, which by default is
   <code class="literal">true</code>. When you set this advanced property to
   <code class="literal">false</code>, then you can enable caching independently for
   configuration data and for user data.</p><div class="procedure" title="Procedure&nbsp;18.1.&nbsp;To Turn Off Global User Data Caching"><a name="turn-off-global-user-data-caching"></a><div class="procedure-title">Procedure&nbsp;18.1.&nbsp;To Turn Off Global User Data Caching</div><p><span class="strong"><strong>Disabling caching can have a severe negative
    impact on performance. This is because, when caching is disabled, OpenAM
    must query a data store each time it needs data.</strong></span></p><p>If, however, you have at least one user data store that does not
    support LDAP persistent search, such as a relational database or an LDAP
    directory server that does not support persistent search, then you must
    disable the <span class="emphasis"><em>global</em></span> cache for user data. Otherwise user
    data caches cannot stay in sync with changes to user data entries.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Configuration &gt; Servers and Sites
     &gt; <em class="replaceable"><code>Server Name</code></em> &gt; Advanced.</p></li><li class="step" title="Step 2"><p>Set <code class="literal">com.iplanet.am.sdk.caching.enabled</code> to
     <code class="literal">false</code> to disable caching overall.</p></li><li class="step" title="Step 3"><p>Set <code class="literal">com.sun.identity.sm.cache.enabled</code> to
     <code class="literal">true</code> to enable configuration data caching.</p><p>All supported configuration data stores support LDAP persistent
     search, so it is safe to enable configuration data caching.</p><p>You must explicitly set this property to <code class="literal">true</code>,
     because setting <code class="literal">com.iplanet.am.sdk.caching.enabled</code> to
     <code class="literal">false</code> in the previous step disables both user and
     configuration data caching.</p></li><li class="step" title="Step 4"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;18.2.&nbsp;To Change the Maximum Size of Global User Data Cache"><a name="change-max-cache-size"></a><div class="procedure-title">Procedure&nbsp;18.2.&nbsp;To Change the Maximum Size of Global User Data Cache</div><p>With a large user data store and active user base, the number of user
    entries in cache can grow large.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Configuration &gt; Servers and Sites
     &gt; Default Server Settings &gt; SDK.</p></li><li class="step" title="Step 2"><p>Change the value of SDK Caching Max. Size, and then Save your
     work.</p><p>There is no corresponding setting for configuration data, as the
     number of configuration entries in a large deployment is not likely to
     grow nearly as large as the number of user entries.</p></li></ol></div></div><div class="section" title="18.3.2.&nbsp;Caching Properties For Java EE Policy Agents &amp; SDK Clients"><div class="titlepage"><div><div><h3 class="title"><a name="java-ee-policy-agent-and-sdk-caching"></a>18.3.2.&nbsp;Caching Properties For Java EE Policy Agents &amp; SDK Clients</h3></div></div></div><p>Policy agents and other OpenAM SDK clients can also cache user data,
   using most of the same properties as OpenAM server as described in
   <a class="xref" href="#table-cache-properties" title="Table&nbsp;18.8.&nbsp;OpenAM Cache Properties">Table&nbsp;18.8, &#8220;OpenAM Cache Properties&#8221;</a> . Clients however can receive
   updates by notification from OpenAM or, if notification fails, by
   polling OpenAM for changes.</p><div class="procedure" title="Procedure&nbsp;18.3.&nbsp;To Enable Notification &amp; Polling For Client Cache Updates"><a name="notify-sdk-cache-updates"></a><div class="procedure-title">Procedure&nbsp;18.3.&nbsp;To Enable Notification &amp; Polling For Client Cache Updates</div><p>This procedure describes how to enable change notification and polling
    for policy agent user data cache updates. When configuring a custom OpenAM
    SDK client using a .properties file, use the same properties as for the
    policy agent configuration.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In OpenAM console, browse to Access Control &gt; <em class="replaceable"><code>Realm
     Name</code></em> &gt; Agents &gt; <em class="replaceable"><code>Agent Type</code></em>
     &gt; <em class="replaceable"><code>Agent Name</code></em> to view and edit the policy
     agent profile.</p></li><li class="step" title="Step 2"><p>On the Global tab page, check that the Agent Notification URL is
     set.</p><p>When notification is enabled, the agent registers a notification
     listener with OpenAM for this URL.</p><p>The corresponding property is
     <code class="literal">com.sun.identity.client.notification.url</code>.</p></li><li class="step" title="Step 3"><p>For any changes you make, Save your work.</p><p>You must restart the policy agent for the changes to take
     effect.</p></li></ol></div></div><div class="section" title="18.3.3.&nbsp;Cache Settings"><div class="titlepage"><div><div><h3 class="title"><a name="caching-properties"></a>18.3.3.&nbsp;Cache Settings</h3></div></div></div><p>The table below provides a quick reference, primarily for user data
   cache settings.</p><p>Notice that many properties for configuration data cache have
   <code class="literal">sm</code> (for Service Management) in their names, whereas those
   for user data have <code class="literal">idm</code> (for Identity Management) in their
   names.</p><div class="table"><a name="table-cache-properties"></a><div class="table-title">Table&nbsp;18.8.&nbsp;OpenAM Cache Properties</div><div class="table-contents"><table summary="OpenAM Cache Properties" width="100%" border="0"><colgroup><col width="37%"><col width="38%"><col width="12%"><col width="13%"></colgroup><thead><tr><th>Property</th><th>Description</th><th>Default</th><th>Applies To</th></tr></thead><tbody><tr><td><p><code class="literal">com.iplanet.am.sdk.cache.maxSize</code></p></td><td><p>Maximum number of user entries cached</p></td><td><p>10000</p></td><td><p>Server &amp; SDK</p></td></tr><tr><td><p><code class="literal">com.iplanet.am.sdk.caching.enabled</code></p></td><td>
        <p>Whether to enable caching for both configuration data and also
        for user data.</p>

        <p>If <code class="literal">true</code>, this setting overrides
        <code class="literal">com.sun.identity.idm.cache.enabled</code> and
        <code class="literal">com.sun.identity.sm.cache.enabled</code>.</p>

        <p>If <code class="literal">false</code>, you can enable caching independently
        for configuration data and for user data using the aforementioned
        properties.</p>
       </td><td><p><code class="literal">true</code></p></td><td><p>Server &amp; SDK</p></td></tr><tr><td><p><code class="literal">com.iplanet.am.sdk.remote.pollingTime</code></p></td><td>
        <p>How often in minutes the SDK client such as a policy agent should
        poll OpenAM for modified user data entries.</p>

        <p>The SDK also uses this value to determine the age of the oldest
        changes requested. The oldest changes requested are 2 minutes older than
        this setting. In other words, by default the SDK polls for entries
        changed in the last 3 minutes.</p>

        <p>Set this to 0 or a negative integer to disable polling.</p>
       </td><td><p>1 (minute)</p></td><td><p>SDK</p></td></tr><tr><td><p><code class="literal">com.sun.am.event.notification.expire.time</code></p></td><td>
        <p>How long OpenAM stores a given change to a cached entry, so that
        clients polling for changes do not miss the change.</p>
       </td><td><p>30 (minutes)</p></td><td><p>Server only</p></td></tr><tr><td><p><code class="literal">com.sun.identity.idm.cache.enabled</code></p></td><td>
        <p>If <code class="literal">com.iplanet.am.sdk.caching.enabled</code> is
        <code class="literal">true</code>, this property is ignored.</p>

        <p>Otherwise, set this to <code class="literal">true</code> to enable caching
        of user data.</p>
       </td><td><p><code class="literal">false</code></p></td><td><p>Server &amp; SDK</p></td></tr><tr><td><p><code class="literal">com.sun.identity.idm.cache.entry.default.expire.time</code></p></td><td>
        <p>How many minutes to store a user data entry in the global user
        data cache</p>
       </td><td><p>30 (minutes)</p></td><td><p>Server &amp; SDK</p></td></tr><tr><td><p><code class="literal">com.sun.identity.idm.cache.entry.expire.enabled</code></p></td><td>
        <p>Whether user data entries in the global user data cache should
        expire over time</p>
       </td><td><p><code class="literal">false</code></p></td><td><p>Server &amp; SDK</p></td></tr><tr><td><p><code class="literal">com.sun.identity.idm.remote.notification.enabled</code></p></td><td>
        <p>Whether the SDK client such as a policy agent should register
        a notification listener for user data changes with the OpenAM
        server.</p>

        <p>The SDK client uses the URL specified by
        <code class="literal">com.sun.identity.client.notification.url</code> to register
        the listener so that OpenAM knows where to send notifications.</p>

        <p>If notifications cannot be enabled for some reason, then the SDK
        client falls back to polling for changes.</p>
       </td><td><p><code class="literal">true</code></p></td><td><p>SDK</p></td></tr><tr><td><p><code class="literal">com.sun.identity.sm.cache.enabled</code></p></td><td>
        <p>If <code class="literal">com.iplanet.am.sdk.caching.enabled</code> is
        <code class="literal">true</code>, this property is ignored.</p>

        <p>Otherwise, set this to <code class="literal">true</code> to enable caching
        of configuration data. It is recommended that you always set this to
        <code class="literal">true</code>.</p>
       </td><td><p><code class="literal">false</code></p></td><td><p>Server &amp; SDK</p></td></tr></tbody></table></div></div><br class="table-break"></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;19.&nbsp;Changing Host Names"><div class="titlepage"><div><div><h2 class="title"><a name="chap-change-hosts"></a>Chapter&nbsp;19.&nbsp;Changing Host Names</h2></div></div></div><p>When you change the OpenAM host name, you must make manual changes
 to the configuration. This chapter describes what to do. If you also must
 move an embedded configuration directory from one host to another, see the
 OpenDJ documentation on <em class="citetitle">Moving Servers</em>.</p><div class="itemizedlist"><p>Changing OpenAM host names involves the following high level
  steps.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Adding the new host name to the Realm/DNS Aliases list</p></li><li class="listitem"><p>Exporting, editing, then importing the configuration</p><p>This step relies on the <span class="command"><strong>ssoadm</strong></span> command, which you
   install separately from OpenAM as described in <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
   Administration Tools</em></a>.</p></li><li class="listitem"><p>Stopping OpenAM and editing configuration files</p></li><li class="listitem"><p>Removing the old host name from the Realm/DNS Aliases list</p></li></ul></div><p>Before you start, make sure you have a current backup of your current
 installation. See <a href="../admin-guide/index.html#chap-backup-restore" class="link"><em class="citetitle">Backing Up and
 Restoring OpenAM Configurations</em></a> for instructions.</p><div class="procedure" title="Procedure&nbsp;19.1.&nbsp;To Add the New Host Name As an Alias"><a name="add-new-alias"></a><div class="procedure-title">Procedure&nbsp;19.1.&nbsp;To Add the New Host Name As an Alias</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to OpenAM console as administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Under Access Control &gt; / (Top Level Realm), add the new host name
   to the Realm/DNS Aliases list, and then save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;19.2.&nbsp;To Export, Edit, &amp; Import the Service Configuration"><a name="change-host-in-service-config"></a><div class="procedure-title">Procedure&nbsp;19.2.&nbsp;To Export, Edit, &amp; Import the Service Configuration</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Export the service configuration.</p><div class="screen"><pre class="brush: plain;">$ ssoadm export-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -o config.xml

Service Configuration was exported.</pre></div><p>In this example, the secret key for encrypting the password in
   <code class="option">-e fZatIu68OiqccJMXosSRyVjMsWJIx+SA</code> was taken from the
   Password Encryption Key field in the OpenAM console under Configuration &gt;
   Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt;
   Security.</p></li><li class="step" title="Step 2"><p>Edit the service configuration file.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Change the fully qualified domain name, such as
     <code class="literal">openam.example.com</code>, throughout the file.</p></li><li class="listitem"><p>If you are changing the deployment descriptor, such as
     <code class="literal">/openam</code>, then change the value of
     <code class="literal">com.iplanet.am.services.deploymentDescriptor</code>.</p><p>Also change the deployment descriptor in the
     <code class="literal">propertiesViewBeanURL="<em class="replaceable"><code>deployment-descriptor</code></em>/auth/ACServiceInstanceList"</code>
     attribute.</p><p>Also change the deployment descriptor in the
     <code class="literal">propertiesViewBeanURL="<em class="replaceable"><code>deployment-descriptor</code></em>/auth/ACModuleList"</code>
     attribute.</p><p>Also change the deployment descriptor in a &lt;Value&gt; element
     that is a child of an &lt;AttributeValuePair&gt; element.</p><p>Also change the deployment descriptor where it occurs throughout
     the file in the full URL to OpenAM, such as
     <code class="literal">http:&amp;#47;&amp;#47;openam.example.com:8080&amp;#47;<em class="replaceable"><code>deployment-descriptor</code></em></code>.</p></li><li class="listitem"><p>If you are changing the port number, then change the value of
     <code class="literal">com.iplanet.am.server.port</code>.</p><p>Also change the port number in <code class="literal"><em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code> combinations throughout the
     file.</p></li><li class="listitem"><p>If you are changing the domain name, then change the cookie domain
     such as <code class="literal">&lt;Value&gt;.example.com&lt;/Value&gt;</code>
     throughout the file.</p></li></ul></div></li><li class="step" title="Step 3"><p>Import the updated service configuration.</p><div class="screen"><pre class="brush: plain;">$ ssoadm import-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -X config.xml

Directory Service contains existing data. Do you want to delete it? [y|N] y
Please wait while we import the service configuration...
Service Configuration was imported.</pre></div></li></ol></div><div class="procedure" title="Procedure&nbsp;19.3.&nbsp;To Edit OpenAM Configuration Files For the New Host Name"><a name="edit-config-files"></a><div class="procedure-title">Procedure&nbsp;19.3.&nbsp;To Edit OpenAM Configuration Files For the New Host Name</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Stop the web container where OpenAM runs.</p></li><li class="step" title="Step 2"><p>Edit the bootstrap file, such as
   <code class="filename">/home/user/openam/bootstrap</code>, changing the FQDN, port,
   and deployment descriptor for OpenAM as necessary.</p></li><li class="step" title="Step 3"><p>If you are changing the deployment descriptor, then move the folder
   containing OpenAM configuration, such as
   <code class="filename">/home/user/openam/</code>, to match the new deployment
   descriptor, such as <code class="filename">/home/user/openam2/</code>.</p></li><li class="step" title="Step 4"><p>If you are changing the location or deployment descriptor, change the
   name of the file in the <code class="filename">/home/user/.openamcfg</code> folder,
   such as <code class="filename">AMConfig_path_to_tomcat_webapps_openam_</code>
   to match the new location and deployment descriptor.</p><p>Also edit the path name in the file to match the change you made when
   moving the folder.</p></li><li class="step" title="Step 5"><p>Restart the web container where OpenAM runs.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;19.4.&nbsp;To Remove the Old Host Name As an Alias"><a name="remove-old-alias"></a><div class="procedure-title">Procedure&nbsp;19.4.&nbsp;To Remove the Old Host Name As an Alias</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to OpenAM console as administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Under Access Control &gt; / (Top Level Realm), remove the old host
   name from the Realm/DNS Aliases list, and then save your work.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;20.&nbsp;Securing OpenAM"><div class="titlepage"><div><div><h2 class="title"><a name="chap-securing"></a>Chapter&nbsp;20.&nbsp;Securing OpenAM</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#avoid-obvious-defaults">20.1. Avoiding Obvious Defaults</a></span></dt><dt><span class="section"><a href="#protect-network-access">20.2. Protecting Network Access</a></span></dt><dt><span class="section"><a href="#secure-openam-administration">20.3. Securing OpenAM Administration</a></span></dt><dt><span class="section"><a href="#secure-communications">20.4. Securing Communications</a></span></dt><dt><span class="section"><a href="#amadmin-changes">20.5. Administering the amadmin Account</a></span></dt></dl></div><a class="indexterm" name="d16811e20425"></a><p>This chapter identifies best practices for securing your OpenAM
 deployment.</p><div class="section" title="20.1.&nbsp;Avoiding Obvious Defaults"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="avoid-obvious-defaults"></a>20.1.&nbsp;Avoiding Obvious Defaults</h2></div></div></div><div class="itemizedlist"><p>OpenAM includes default settings to make it easier for you to
   evaluate the software. Avoid these default settings in production
   deployments.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>When connecting to LDAP, bind with a specific administrative account
    rather than a root DN account if possible.</p></li><li class="listitem"><p>Change the default <code class="literal">iPlanetDirectoryPro</code> cookie name
    both in OpenAM (<code class="literal">com.iplanet.am.cookie.name</code>) and in your
    policy agent profiles (<code class="literal">com.sun.identity.agents.config.cookie.name</code>).</p></li><li class="listitem"><p>When installing OpenAM, do not use <code class="literal">/openam</code> or
    <code class="literal">/opensso</code> as the deployment URI.</p></li><li class="listitem"><p>Set valid goto URL domains for OpenAM in the core authentication
    module configuration. The parameter is described in the section providing
    <a href="../admin-guide/index.html#core-module-conf-hints" class="link"><em class="citetitle">Hints For the
    Core Authentication Module</em></a> (<code class="literal">iplanet-am-auth-valid-goto-domains</code>).</p></li><li class="listitem"><p>Create an administrator in the top-level realm with a different ID
    than the default <code class="literal">amadmin</code>.</p></li><li class="listitem"><p>Create specific administrator users to track better who makes
    configuration changes.</p></li><li class="listitem"><p>Set the OpenAM advanced property
    <code class="literal">openam.auth.soap.rest.generic.authentication.exception</code>
    to <code class="literal">true</code>. This causes OpenAM to return the same exception
    both when the user does not exist, and also when the password is not
    valid.</p></li></ul></div></div><div class="section" title="20.2.&nbsp;Protecting Network Access"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="protect-network-access"></a>20.2.&nbsp;Protecting Network Access</h2></div></div></div><p>Anytime users interact with a web service, there are risks. With OpenAM, you can
   reduce those risks by deploying different parts of OpenAM in appropriate parts of an
   enterprise network.</p><p>To minimize risks, deploy only the core OpenAM server on systems directly connected
        through a firewall. As a start, deploy only the core server (and the protected web application)
        on Internet-facing servers. For instructions, see the following section from the
        OpenAM Installation Guide, <a href="../install-guide/index.html#which-war-to-deploy" class="link"><em class="citetitle">Determine Which
        War File to Deploy</em></a>.</p><p>You can further limit what is exposed through the firewall by using one of two strategies:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Set up a distributed authentication user interface (UI) in a DMZ between firewalls.</p><p>The distributed authentication UI is essentially a small subset of the OpenAM server with
            just enough login logic to receive user authentication requests. Those requests are forwarded
            to the core OpenAM servers.</p><p>See <a href="../install-guide/index.html#chap-install-das" class="link"><em class="citetitle">Installing
                    OpenAM Distributed Authentication</em></a> for installation
                instructions. The following figure shows the recommended architecture.</p><div class="mediaobject" title="Exposing only the Distributed Authentication UI to the Internet"><a name="figure-securing-openam-daui"></a><img src="images/securing-openam-daui.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-securing-openam-daui.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-securing-openam-daui.html" target="longdesc">D</a>]</span></div></div></li><li class="listitem"><p>Alternatively, use a reverse proxy in front of OpenAM to allow access only to
            the necessary URLs. The following figure shows the recommended architecture with a
            reverse proxy.</p><div class="mediaobject" title="Exposing only a reverse proxy to the Internet"><a name="figure-securing-openam-rp"></a><img src="images/securing-openam-rp.png" longdesc="/Users/mark/Downloads/openam-11.x.x/openam/openam-documentation/openam-doc-source/target/docbkx/html/admin-guide/figure-securing-openam-rp.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-securing-openam-rp.html" target="longdesc">D</a>]</span></div></div><p>For access to the console, deploy the full OpenAM application<sup>[<a name="d16811e20534" href="#ftn.d16811e20534" class="footnote">10</a>]</sup> on
                a separate system that is reachable only from internal systems. Do not
                include the full OpenAM server in the load-balanced pool of OpenAM servers
                serving applications.</p></li><li class="listitem"><p>Leave <code class="literal">ssoadm.jsp</code> disabled in production. (Advanced
                property: <code class="literal">ssoadm.disabled=true</code>)</p></li><li class="listitem"><p>If possible in your deployment, control access to OpenAM console by
                network address, such that administrators can only connect from well-known
                systems and networks.</p></li><li class="listitem"><p>Restrict access to URIs that you do not use, and prevent internal
                endpoints such as <code class="literal">/sessionservice</code> from being reachable
                over the Internet.</p><p>For a full list of endpoints, see the OpenAM Reference Guide
            Chapter on <a href="../reference/index.html#chap-endpoints" class="link">
            <em class="citetitle">Service Endpoints</em></a>.</p></li></ul></div></div><div class="section" title="20.3.&nbsp;Securing OpenAM Administration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="secure-openam-administration"></a>20.3.&nbsp;Securing OpenAM Administration</h2></div></div></div><div class="itemizedlist"><p>Keep administration of access management services separate from
   management of the services themselves.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Create realms for your organization(s) and separate administrative
    users from end users. For instructions, see <a href="../admin-guide/index.html#chap-realms" class="link"><em class="citetitle">Configuring
    Realms</em></a>. You must then either:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Use the <code class="literal">realm=<em class="replaceable"><code>realm-name</code></em></code>
      query string parameter when redirecting users to OpenAM, which gives you
      a way to isolate the URLs used by an application.</p></li><li class="listitem"><p>Create fully qualified domain name realm/DNS aliases, and use
      them to control access to the realms.</p></li></ul></div></li><li class="listitem"><p>When customizing <code class="filename">config/auth/default*/Login.jsp</code>,
    make sure that you do not introduce any security vulnerabilities such as
    cross-site scripting due to unvalidated input.</p></li><li class="listitem"><p>Create a policy agent profile for each policy agent. See <a href="../admin-guide/index.html#chap-agents" class="link"><em class="citetitle">Configuring
    Policy Agent Profiles</em></a> for instructions.</p></li></ul></div></div><div class="section" title="20.4.&nbsp;Securing Communications"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="secure-communications"></a>20.4.&nbsp;Securing Communications</h2></div></div></div><div class="itemizedlist"><p>Keep communications secure by using encryption, properly configured
   cookies, and request and response signatures.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Protect network traffic by using HTTPS and LDAPS where
    possible.</p></li><li class="listitem"><p>When using HTTPS, use <a class="link" href="http://en.wikipedia.org/wiki/HTTP_cookie#Secure_and_HttpOnly" target="_blank">secure cookies</a>.</p></li><li class="listitem"><p>Where possible, use subdomain cookies, and control subdomains in
    a specific DNS master.</p></li><li class="listitem"><p>Use cookie hijacking protection with restricted tokens, where each
    policy agent uses different SSO tokens for the same user. See <a href="../admin-guide/index.html#enable-cdsso-cookie-hijacking-protection" class="link"><em class="citetitle">To Protect
    Against CDSSO Cookie Hijacking</em></a> for instructions.</p></li><li class="listitem"><p>When using SAML 2.0:</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>Sign authentication requests, authentication responses, and single
      logout requests.</p></li><li class="listitem"><p>If the other entities in your circle of trust can handle encryption,
      then use encryption as well.</p></li><li class="listitem"><p>Use your own key, not the <code class="literal">test</code> key provided with
      OpenAM.</p></li></ul></div></li></ul></div></div><div class="section" title="20.5.&nbsp;Administering the amadmin Account"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="amadmin-changes"></a>20.5.&nbsp;Administering the amadmin Account</h2></div></div></div><p>You can make changes to the password and user name for the main OpenAM administrative account.</p><p>You can change the user name of the <code class="literal">amadmin</code> administrative account
            to something more obscure, such as superroot. However, the capabilities of that alternative administrative
            account would not be complete, due to some hard-coding of <code class="literal">amadmin</code> in the source files.
            When changing the password for the main OpenAM administrative account, you must make a corresponding change
            to the authentication datastore. That datastore could be OpenDJ. The steps you would take to change
            the OpenAM top-level administrative password and account name are shown in the following sections.</p><div class="procedure" title="Procedure&nbsp;20.1.&nbsp;To Change the Password for the Top-Level Administrator (normally amadmin)"><a name="change-amadmin-password"></a><div class="procedure-title">Procedure&nbsp;20.1.&nbsp;To Change the Password for the Top-Level Administrator (normally <code class="literal">amadmin</code>)</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as the administrator, normally
                    <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Under Access Control &gt; / (Top Level Realm) &gt; Subjects &gt; User, select the name of the
                    current top-level administrative user.</p></li><li class="step" title="Step 3"><p>In the page that appears, navigate to the Password row and click Edit.</p></li><li class="step" title="Step 4"><p>In the window that appears, enter the desired new password in the New Password and
                    Re-Enter Password text boxes.</p></li><li class="step" title="Step 5"><p>Click OK to implement the change. If you want to cancel, click Close or just close the window.</p></li><li class="step" title="Step 6"><p>You'll also need to change the password for the administrator on the directory server. If you are
                    using OpenDJ, refer to the <a class="link" href="http://docs.forgerock.org/en/opendj/2.6.0/admin-guide#troubleshoot-reset-admin-passwords" target="_blank"><em class="citetitle">OpenDJ Administration Guide</em> section on Resetting Administrator
                    Passwords</a>. If you are using a different directory server, you will have to refer to the
                documentation for that server.</p></li></ol></div><p>In the following steps, you will identify the new administrative user by assigning it to the <code class="literal">
            com.sun.identity.authentication.super.user</code> directive. You may also need to create an
            OpenAM account for the new administrative user. Don't forget to make sure that new administrative
            account is configured in the corresponding directory server such as OpenDJ.
        </p><div class="procedure" title="Procedure&nbsp;20.2.&nbsp;To Change the Account Name for the Top-Level Administrator (normally amadmin)"><a name="change-amadmin-uid"></a><div class="procedure-title">Procedure&nbsp;20.2.&nbsp;To Change the Account Name for the Top-Level Administrator (normally <code class="literal">amadmin</code>)</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as the administrator, normally
                    <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Navigate to the page where you can set the properties for different classes. Select
                    Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; Advanced.</p></li><li class="step" title="Step 3"><p>In the Advanced Properties window that appears, click Add.</p></li><li class="step" title="Step 4"><p>You'll see blank entries in the end of the list of Property Names and Property Values. In the
                    empty Property Name text box, enter <code class="literal">com.sun.identity.authentication.super.user</code>.</p></li><li class="step" title="Step 5"><p>In the corresponding Property Values test box, enter appropriate values for the new administrative
                    user in LDAP Data Interchange Format (LDIF). For example, the following entry would set up an
                    administrative user named <code class="literal">superroot</code>, in the organizational unit named <code class="literal">
                        people</code>people, associated with the example.com domain:
                    <code class="literal">uid=superroot,ou=people,dc=example,dc=com</code>.</p></li><li class="step" title="Step 6"><p>Click Save to save the changes that you've made. </p></li><li class="step" title="Step 7"><p>If the account doesn't already exist in OpenAM or on a connected directory server, you'll need to
               create it. To do so, select Access Control &gt; / (Top Level Realm) &gt; Subject &gt; User &gt; New.
               In the New User window that appears, create the new user. Make sure to enter an appropriate password
               and make that user Active. The ID for that new user is the user name.</p></li><li class="step" title="Step 8"><p>As noted earlier, you'll also need to make sure that the corresponding account on the directory server
                has at least CN=Directory Manager  privileges. If you're using OpenDJ, refer to the chapter on
                    <em class="citetitle">Configuring Privileges &amp; Access Control</em> in the
                    <a class="link" href="http://docs.forgerock.org/en/opendj/2.6.0/admin-guide#chap-privileges-acis" target="_blank">
                    <em class="citetitle">OpenDJ Administration Guide</em></a>.</p></li></ol></div><p>If you do change the account name of the top-level administrative account, you should be aware that the
        original <code class="literal">amadmin</code> account is "hard-coded" in the source code of several files.
            The code in these files may affect the functionality of a top-level administrative user
            with a name other than <code class="literal">amadmin</code>.</p><p>One of the improvements that we plan to make to OpenAM is to eliminate these instances of hard-coding.
        Until we make such improvements, the amadmin user would retain privileges related to the LoginState and some
        IDM-related classes.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d16811e20534" href="#d16811e20534" class="para">10</a>] </sup>Console only deployment is no longer supported.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;21.&nbsp;Troubleshooting"><div class="titlepage"><div><div><h2 class="title"><a name="chap-troubleshooting"></a>Chapter&nbsp;21.&nbsp;Troubleshooting</h2></div></div></div><a class="indexterm" name="d16811e20762"></a><p>This chapter covers how to get debugging information and troubleshoot
 issues in OpenAM deployments.</p><div class="qandaset" title="Solutions to Common Issues"><h2 class="title"><a name="solutions-to-common-issues"></a>Solutions to Common Issues</h2><p>This section offers solutions to common problems when working with
  OpenAM.</p><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="troubleshooting-openam-installation"></a>21.1. OpenAM Installation</h3></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="cannot-write-to-config-directory"></a><a name="d16811e20776"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>OpenAM configuration could not write to the configuration directory.
     Where must I change permissions, and what permissions are required?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>If the user running the web container has a $HOME directory, then
     the configuration directory is stored there, and you probably do not have
     this problem. If you do not know the user running the web container, use
     the <span class="command"><strong>ps</strong></span> command to check. In the following example, the
     user is <code class="literal">mark</code>, the web container
     <code class="literal">tomcat</code>.</p><div class="screen"><pre class="brush: plain;">$ ps -ef | grep tomcat
mark      1739     1  0 14:47...</pre></div><p>For a container installed from native packages with a dedicated
     user, $HOME may not be where you think it is. Look at the user's entry in
     <code class="filename">/etc/passwd</code> to locate the home directory.
     The user running the web container where you install OpenAM must
     be able to read from and write in this directory.</p><p>If you cannot change the permissions to the user's home directory,
     you can, as a workaround, unpack <code class="filename">OpenAM-11.0.0.war</code>, 
     set the <code class="literal">configuration.dir</code> property in the
     <code class="filename">WEB-INF/classes/bootstrap.properties</code> to a directory
     with appropriate permissions, and repack <code class="filename">openam.war</code>
     with the adjusted file before deploying that.</p><div class="screen"><pre class="brush: plain;">$ cd ~/Downloads/openam/OpenAM-11.0.0.war
$ mkdir unpacked ; cd unpacked
$ jar xf ../OpenAM-11.0.0.war
$ vi WEB-INF/classes/bootstrap.properties 
$ grep ^config WEB-INF/classes/bootstrap.properties 
configuration.dir=/my/readwrite/config/dir
$ jar cf ../openam.war *</pre></div></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="deploy-failed-lack-of-memory"></a><a name="d16811e20815"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>Deployment failed due to lack of memory. What do I do?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM requires at least a maximum heap size of 1024 MB, with a 256
     MB maximum permanent generation heap size. For the Sun JVM, ensure the
     container starts with <code class="literal">-Xmx1024m -XX:MaxPermSize=256m</code>
     for these settings.</p><p>If you do not know the settings used when the web container was
     started, use the <span class="command"><strong>ps</strong></span> command to check. In the following
     example, the web container is <code class="literal">tomcat</code>.</p><div class="screen"><pre class="brush: plain;">$ ps -ef | grep tomcat | grep Xm
... -Xmx1024m -XX:MaxPermSize=256m ...</pre></div><p>Make sure you have at least 2 GB of RAM on the system where you
     run OpenAM to avoid running out of memory.</p><p>If you make it through deployment and seem to be running out of
     memory later, you can confirm memory errors in OpenAM by searching the
     <code class="filename"><em class="replaceable"><code>config-dir</code></em>/openam/debug/*</code>
     files for <code class="literal">java.lang.OutOfMemoryError</code>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="deploy-failed-invalid-hostname"></a><a name="d16811e20847"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>Deployment failed due to invalid hostname configuration. What do
     I do?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM requires that you use a fully qualified domain name (FQDN)
     that the host can resolve.</p><div class="screen"><pre class="brush: plain;">$ ping openam-ter.example.com
PING openam-ter (192.168.56.2) 56(84) bytes of data.
64 bytes from openam (192.168.56.2): icmp_seq=1 ttl=64 time=0.025 ms
64 bytes from openam (192.168.56.2): icmp_seq=2 ttl=64 time=0.032 ms
64 bytes from openam (192.168.56.2): icmp_seq=3 ttl=64 time=0.030 ms</pre></div><p>For a test deployment (at home, on a laptop), you can use fake FQDNs
     in <code class="filename">/etc/hosts</code> (<code class="filename">%SystemRoot%\system32\drivers\etc\hosts</code> on Windows), depending
     on how your network is configured.</p><div class="screen"><pre class="brush: plain;">$ cat /etc/hosts | grep openam
192.168.56.2 openam openam.example.com
192.168.56.3 openam-bis openam-bis.example.com
192.168.56.5 openam-ter openam-ter.example.com</pre></div></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="who-deleted-my-config"></a><a name="d16811e20866"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I configured OpenAM, and now am seeing the configuration screen
     again. Who deleted my configuration?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM uses a file in <code class="filename">$HOME/.openamcfg/</code> to
     bootstrap and find its configuration. The file is named after the path
     to OpenAM and contains the path to the configuration. The following
     example shows what the file looks like for OpenAM deployed in Apache
     Tomcat under <code class="filename">/path/to/tomcat/webapps/openam</code>, and
     running as user <code class="literal">amuser</code> with <code class="literal">$HOME</code>
     <code class="filename">/home/amuser</code>.</p><div class="screen"><pre class="brush: plain;">$ cat .openamcfg/AMConfig_path_to_tomcat_webapps_openam_ 
/home/amuser/openam</pre></div><p>If OpenAM cannot find its configuration, then it displays the
     configuration screen.</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="troubleshooting-openam-upgrades"></a>21.2. OpenAM Upgrades</h3></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="general-tools-upgrade"></a><a name="d16811e20895"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I have upgraded OpenAM, now my tools are not working properly. What
     happened?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>Every OpenAM component must be upgraded, not just the main
     OpenAM <code class="filename">.war</code> file. If you did not upgrade the tools
     too, they may not work as intended.</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="troubleshooting-openam-administration"></a>21.3. OpenAM Administration</h3></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="cannot-use-ssoadm-jsp"></a><a name="d16811e20908"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I cannot use the browser-based equivalent of
     <span class="command"><strong>ssoadm</strong></span>,
     <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>. Why
     not?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>For security reasons, <code class="literal">ssoadm.jsp</code> is not activated
     by default. To activate it, browse to Configuration &gt; Servers and Sites
     &gt; Servers &gt; <em class="replaceable"><code>ServerName</code></em> &gt; Advanced,
     and then add a property named <code class="literal">ssoadm.disabled</code> with
     value <code class="literal">false</code>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="ssoadm-slow-on-vm"></a><a name="d16811e20933"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>The <span class="command"><strong>ssoadm</strong></span> command is very, very slow on my
     virtual machine (VMWare, VirtualBox, etc.). How can I speed it up?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>Virtual machine random devices do not always produce enough random
     data. The <span class="command"><strong>ssoadm</strong></span> command can hang while reading random
     data from the virtual machine's random device, with the result that you
     can wait a minute or more for a single command to finish.</p><p>To work around this limitation on virtual machines, make sure you
     install something that generates enough random data, such as a <a class="link" href="http://www.vanheusden.com/te/" target="_blank">timer entropy
     daemon</a>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="opendj-missing-schema"></a><a name="d16811e20951"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I added OpenDJ as a data store, and now I cannot add a user. OpenAM
     gives me the following error.</p><div class="literallayout"><p>ERROR:&nbsp;LDAPv3Repo.create&nbsp;failed.&nbsp;errorCode=65&nbsp;Entry<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uid=test,ou=people,dc=example,dc=com&nbsp;violates&nbsp;the&nbsp;Directory&nbsp;Server<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema&nbsp;configuration&nbsp;because&nbsp;it&nbsp;includes&nbsp;attribute&nbsp;inetUserStatus&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;not&nbsp;allowed&nbsp;by&nbsp;any&nbsp;of&nbsp;the&nbsp;objectclasses&nbsp;defined&nbsp;in&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry</p></div></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>When you set up a New Data Store to use OpenDJ as an identity
     repository under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
     &gt; Data Stores &gt; New..., you need to check the Load schema when
     saved box if you want OpenAM to add the schema to OpenDJ. The box is
     not selected by default.</p><p>The full version of OpenAM includes directory server schema in the
     <code class="filename">~/Downloads/openam/ldif/</code> directory. To add the schema
     to OpenDJ afterwards, you can try the following command.</p><div class="screen"><pre class="brush: plain;">$ /path/to/OpenDJ/bin/ldapmodify
 --port 1389
 --bindDN "cn=Directory Manager"
 --bindPassword password
 --filename ~/Downloads/openam/ldif/fam_sds_schema.ldif
Processing MODIFY request for CN=schema
MODIFY operation successful for DN CN=schema</pre></div></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="openam-sfo-time-wait"></a><a name="d16811e20970"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I have session failover configured for an OpenAM site. I see many
     connections in <code class="literal">TIME_WAIT</code> state, and the connections
     seem to be used only for communication between OpenAM servers in that
     site. What should I set to have fewer connections in
     <code class="literal">TIME_WAIT</code>?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>When you have session failover configured for a site, OpenAM servers
     run health checks against other servers in the same site. By default, the
     health checks are run every second (1000 milliseconds) with a timeout of 1
     second (1000 milliseconds).</p><p>If there is network latency between servers in a site, for example
     if you are running your servers in virtual machines, the default settings
     might not be right for your deployment. In that case, consider changing the
     following advanced server properties.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>By lengthening
       <code class="literal">com.iplanet.am.session.failover.cluster.stateCheck.timeout</code>
       and
       <code class="literal">com.iplanet.am.session.failover.cluster.stateCheck.period</code>
       to something longer than the default, you can work around issues with
       network latency.</p></li><li class="listitem"><p>By setting <code class="literal">com.sun.identity.urlchecker.dorequest</code>
       to <code class="literal">true</code> or <code class="literal">false</code>, you can change
       whether OpenAM performs an HTTP GET request or only checks the Socket
       connection of <code class="literal">com.sun.identity.urlchecker.targeturl</code>
       as a health check.</p></li></ul></div><p>To set advanced properties, either use the OpenAM console page under
     Configuration &gt; Servers and Sites &gt; Default Server Settings &gt;
     Advanced, or set the properties using the
     <span class="command"><strong>ssoadm update-server-cfg</strong></span> command as in the following
     example, which updates the default server configuration:</p><div class="screen"><pre class="brush: plain;">$ ./ssoadm update-server-cfg -s default -u amadmin -f /tmp/pwd.txt
 -a com.iplanet.am.session.failover.cluster.stateCheck.timeout=2000</pre></div></td></tr></tbody></table></div></div><div lang="en" class="glossary" title="OpenAM Glossary"><div class="titlepage"><div><div><h2 class="title"><a name="openam-glossary"></a>OpenAM Glossary</h2></div></div></div><dl><dt>Agent administrator</dt><dd><p>User having privileges only to read and write policy agent profile
   configuration information, typically created to delegate policy agent
   profile creation to the user installing a policy agent</p></dd><dt>Authentication</dt><dd><p>The act of confirming the identity of a principal</p></dd><dt>Authentication module</dt><dd><p>OpenAM authentication unit that handles one way of obtaining and
   verifying credentials</p></dd><dt>Authentication chaining</dt><dd><p>A series of authentication modules configured together which a
   principal must negotiate as configured in order to authenticate
   successfully</p></dd><dt>Access control</dt><dd><p>Control to grant or to deny access to a resource</p></dd><dt>Account lockout</dt><dd><p>The act of making an account temporarily or permanently inactive
   after successive authentication failures</p></dd><dt>Agent authenticator</dt><dd><p>Entity with read-only access to multiple agent profiles defined in the
   same realm; allows an agent to read web service profiles</p></dd><dt>Application</dt><dd><p>In the context of OpenAM entitlements, protected resources that share
   a common set of actions and related policies</p></dd><dt>Attribute based access control (ABAC)</dt><dd><p>Access control that is based on attributes of a user, such as how old
   a user is or whether she is a paying customer</p></dd><dt>Authentication level</dt><dd><p>Positive integer associated with an authentication module, usually
   used to require success with more stringent authentication measures when
   requesting resources requiring special protection</p></dd><dt>Authorization</dt><dd><p>The act of determining whether to grant or to deny a principal access
   to a resource</p></dd><dt>Authorization Server</dt><dd><p>In OAuth 2.0, issues access tokens to the client after authenticating
   a resource owner and confirming that the owner authorizes the client to
   access the protected resource. OpenAM can play this role in the OAuth 2.0
   authorization framework.</p></dd><dt>Auto-federation</dt><dd><p>Arrangement to federate a principal's identity automatically based
   on a common attribute value shared across the principal's profiles at
   different providers</p></dd><dt>Bulk federation</dt><dd><p>Batch job permanently federating user profiles between a service
   provider and an identity provider based on a list of matched user
   identifiers that exist on both providers</p></dd><dt>Circle of trust</dt><dd><p>Group of providers, including at least one identity provider, who
   have agreed to trust each other to participate in a SAML 2.0 provider
   federation</p></dd><dt>Client</dt><dd><p>In OAuth 2.0, requests protected web resources on behalf of the
   resource owner given the owner's authorization. OpenAM can play this role
   in the OAuth 2.0 authorization framework.</p></dd><dt>Conditions</dt><dd><p>Optional conditions under which a policy applies</p></dd><dt>Configuration data store</dt><dd><p>LDAP directory service holding OpenAM configuration data</p></dd><dt>Cross-domain single sign on (CDSSO)</dt><dd><p>OpenAM capability allowing single sign on across different DNS
   domains</p></dd><dt>Delegation</dt><dd><p>In the context of OpenAM entitlements, a means of granting specific
   users privileges to manage policies</p></dd><dt>Entitlement</dt><dd><p>XACML-based policy</p></dd><dt>Extended metadata</dt><dd><p>Federation configuration information specific to OpenAM</p></dd><dt>Extensible Access Control Markup Language (XACML)</dt><dd><p>Standard, XML-based access control policy language, including a
   processing model for making authorization decisions based on policies</p></dd><dt>Federation</dt><dd><p>Standardized means for aggregating identities, sharing authentication
   and authorization data information between trusted providers, and allowing
   principals to access services across different providers without
   authenticating repeatedly</p></dd><dt>Fedlet</dt><dd><p>Service provider application capable of participating in a circle of
   trust and allowing federation without installing all of OpenAM on the
   service provider side; OpenAM lets you create both .NET and Java
   Fedlets.</p></dd><dt>Hot swappable</dt><dd><p>Refers to configuration properties for which changes can take effect
   without restarting the container where OpenAM runs</p></dd><dt>Identity</dt><dd><p>Set of data that uniquely describes a person or a thing such as a
   device or an application</p></dd><dt>Identity federation</dt><dd><p>Linking of a principal's identity across multiple providers</p></dd><dt>Identity provider (IdP)</dt><dd><p>Entity that produces assertions about a principal (such as how and
   when a principal authenticated, or that the principal's profile has a
   specified attribute value)</p></dd><dt>Identity repository</dt><dd><p>Data store holding user profiles and group information; different
   identity repositories can be defined for different realms.</p></dd><dt>Java EE policy agent</dt><dd><p>Java web application installed in a web container that acts as a
   policy agent, filtering requests to other applications in the container
   with policies based on application resource URLs</p></dd><dt>Metadata</dt><dd><p>Federation configuration information for a provider</p></dd><dt>Policy</dt><dd><p>Set of rules that define who is granted access to a protected
   resource when, how, and under what conditions</p></dd><dt>Policy administration point (PAP)</dt><dd><p>Entity that manages and stores policy definitions</p></dd><dt>Policy agent</dt><dd><p>Agent that intercepts requests for resources, directs principals to
   OpenAM for authentication, and enforces policy decisions from OpenAM</p></dd><dt>Policy decision point (PDP)</dt><dd><p>Entity that evaluates access rights and then issues authorization
   decisions</p></dd><dt>Policy enforcement point (PEP)</dt><dd><p>Entity that intercepts a request for a resource and then enforces
   policy decisions from a PDP</p></dd><dt>Policy information point</dt><dd><p>Entity that provides extra information such as user profile attributes
   that a PDP needs in order to make a decision</p></dd><dt>Principal</dt><dd><p>Entity that can be authenticated (such as a user, a device, or an
   application)</p></dd><dt>Provider federation</dt><dd><p>Agreement among providers to participate in a circle of trust</p></dd><dt>Realm</dt><dd><p>OpenAM unit for organizing configuration and identity information,
   making it possible to delegate administration for part of OpenAM
   configuration; realms can be used for example when different parts of an
   organization using OpenAM have different policies and different identity
   repositories</p></dd><dt>Referral</dt><dd><p>Means to delegate policy management and decision making for a
   realm</p></dd><dt>Resource</dt><dd><p>Something a principal can access over the network such as a web
   page</p></dd><dt>Resource owner</dt><dd><p>In OAuth 2.0, entity who can authorize access to protected web
   resources, such as an end user</p></dd><dt>Resource server</dt><dd><p>In OAuth 2.0, server hosting protected web resources, capable of
   handling access tokens to respond to requests for such resources</p></dd><dt>Response providers</dt><dd><p>Policy extensions that define additional information to return in an
   authorization decision beyond "allow" or "deny"</p></dd><dt>Role based access control (RBAC)</dt><dd><p>Access control that is based on whether a user has been granted a set
   of permissions (a role)</p></dd><dt>Rules</dt><dd><p>Definitions identifying how a policy matches resources to which access
   is granted or denied</p></dd><dt>Security Assertion Markup Language (SAML)</dt><dd><p>Standard, XML-based language for exchanging authentication and
   authorization data between identity providers and service providers</p></dd><dt>Service provider (SP)</dt><dd><p>Entity that consumes assertions about a principal (and provides a
   service that the principal is trying to access)</p></dd><dt>Session</dt><dd><p>In OpenAM a user session is the interval that starts with the user
   authenticating through OpenAM and ends when the user logs out, or when her
   session is terminated. OpenAM manages user sessions across one or more
   applications by issuing a session token used to identify the session and by
   tracking the session state in order to handle session events like logout and
   timeout, to permit session constraints, and to notify applications involved
   in SSO when a session ends.</p></dd><dt>Session failover</dt><dd><p>Capability to allow another OpenAM server to manage a session when
   the OpenAM server that initially authenticated the principal goes
   offline</p></dd><dt>Session token</dt><dd><p>Unique identifier issued by OpenAM after successful authentication,
   used to track a principal's session</p></dd><dt>Single log out (SLO)</dt><dd><p>Capability allowing a principal to end a session once, thereby ending
   her session across multiple applications</p></dd><dt>Single sign on (SSO)</dt><dd><p>Capability allowing a principal to authenticate once and gain access
   to multiple applications without authenticating again</p></dd><dt>Standard metadata</dt><dd><p>Standard federation configuration information that you can share with
   other access management software</p></dd><dt>Subject</dt><dd><p>Entity that can request access to a resource</p></dd><dt>User data store</dt><dd><p>Data storage service holding principals' profiles; underlying storage
   can be an LDAP directory service, a relational database, or a custom
   <code class="literal">IdRepo</code> implementation</p></dd><dt>Web policy agent</dt><dd><p>Native library installed in a web server that acts as a policy agent
   with policies based on web page URLs</p></dd></dl></div><div lang="en" class="appendix" title="Appendix&nbsp;A.&nbsp;Release Levels &amp; Interface Stability"><div class="titlepage"><div><div><h2 class="title"><a name="appendix-interface-stability"></a>Appendix&nbsp;A.&nbsp;Release Levels &amp; Interface Stability</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#release-levels">A.1. ForgeRock Product Release Levels</a></span></dt><dt><span class="section"><a href="#interface-stability">A.2. ForgeRock Product Interface Stability</a></span></dt></dl></div><p>This appendix includes ForgeRock definitions for product release levels
 and interface stability.</p><div lang="en" class="section" title="A.1.&nbsp;ForgeRock Product Release Levels"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="release-levels"></a>A.1.&nbsp;ForgeRock Product Release Levels</h2></div></div></div><p>ForgeRock defines Major, Minor, and Maintenance product release levels.
  The release level is reflected in the version number. The release level tells
  you what sort of compatibility changes to expect.</p><div class="variablelist"><dl><dt><span class="term">Major (version: x.0.0)</span></dt><dd><p>Major releases bring big new features. Major releases can include
     changes even to stable interfaces. Major releases can remove previously
     deprecated functionality, and in rare cases remove evolving functionality
     that has not been explicitly deprecated. Major releases also include the
     changes present in previous Minor and Maintenance releases.</p></dd><dt><span class="term">Minor (version: x.y.0)</span></dt><dd><p>Minor releases may include new features, backwards-compatible changes
     to stable interfaces in the same Major release, and incompatible changes
     to evolving interfaces. Minor releases can remove previously deprecated
     functionality. Minor releases also include the changes present in
     Maintenance releases.</p></dd><dt><span class="term">Maintenance (version: x.y.z)</span></dt><dd><p>Maintenance releases may include bug fixes and are intended to be
     fully compatible with previous versions from the same Minor release.</p></dd></dl></div></div><div lang="en" class="section" title="A.2.&nbsp;ForgeRock Product Interface Stability"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="interface-stability"></a>A.2.&nbsp;ForgeRock Product Interface Stability</h2></div></div></div><p>ForgeRock products support many protocols, APIs, GUIs, and command-line
  interfaces. Some of these interfaces are standard and very stable. Others
  offer new functionality that is continuing to evolve.</p><p>We realize that you invest in these interfaces, and therefore must know
  when and how ForgeRock expects them to change. For that reason, ForgeRock
  defines interface stability labels and uses these definitions in ForgeRock
  products.</p><div class="variablelist"><dl><dt><span class="term">Stable</span></dt><dd><p>This documented interface is expected to undergo only
     backwards-compatible changes between major releases. Changes are
     announced at least one minor release before they take effect.</p></dd><dt><span class="term">Evolving</span></dt><dd><p>This documented interface is continuing to evolve and so is expected
     to change, potentially in backwards-incompatible ways even in a minor
     release. Changes are documented at the time of product release.</p><p>While new protocols and APIs are still in the process of
     standardization, they are Evolving. This applies for example to
     recent Internet-Draft implementations, and also to newly developed
     functionality.</p></dd><dt><span class="term">Deprecated</span></dt><dd><p>This interface is deprecated and likely to be removed in a future
     release. For previously stable interfaces, the change was likely announced
     in a previous release. Deprecated interfaces will be removed from
     ForgeRock products.</p></dd><dt><span class="term">Removed</span></dt><dd><p>This interface was deprecated in a previous release and has now been
     removed from the product.</p></dd><dt><span class="term">Internal/Undocumented</span></dt><dd><p>Internal and undocumented interfaces can change without notice. If
     you depend on one of these interfaces, contact ForgeRock support or email
     <a class="link" href="mailto:info@forgerock.com" target="_top">info@forgerock.com</a>
     to discuss your needs.</p></dd></dl></div></div></div><div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a name="d16811e21452"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>A</h3><dl><dt>Account lockout, <a class="indexterm" href="#configure-account-lockout">Configuring Account Lockout</a></dt><dt>Authentication, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dd><dl><dt>Active Directory, <a class="indexterm" href="#ad-module-conf-hints">Hints For the Active Directory Authentication Module</a></dt><dt>Adaptive risk, <a class="indexterm" href="#adaptive-auth-module-conf-hints">Hints For the Adaptive Risk Authentication Module</a></dt><dt>Anonymous, <a class="indexterm" href="#anon-module-conf-hints">Hints For the Anonymous Authentication Module</a></dt><dt>Chains, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a>, <a class="indexterm" href="#configure-authn-chains">Configuring Authentication Chains</a></dt><dt>Core, <a class="indexterm" href="#core-module-conf-hints">Hints For the Core Authentication Module</a></dt><dt>Data Store, <a class="indexterm" href="#datastore-module-conf-hints">Hints For the Data Store Authentication Module</a></dt><dt>Federation, <a class="indexterm" href="#federation-module-conf-hints">Hints For the Federation Authentication Module</a></dt><dt>HMAC One-Time Password (HOTP), <a class="indexterm" href="#hotp-module-conf-hints">Hints For the HOTP Authentication Module</a></dt><dt>HTTP Basic, <a class="indexterm" href="#http-module-conf-hints">Hints For the HTTP Basic Authentication Module</a></dt><dt>JDBC, <a class="indexterm" href="#jdbc-module-conf-hints">Hints For the JDBC Authentication Module</a></dt><dt>Kerberos, <a class="indexterm" href="#desktop-module-conf-hints">Hints For the Windows Desktop SSO Authentication Module</a></dt><dt>LDAP, <a class="indexterm" href="#ldap-module-conf-hints">Hints For the LDAP Authentication Module</a></dt><dt>Levels, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dt>Membership (&amp; self-registration), <a class="indexterm" href="#membership-module-conf-hints">Hints For the Membership Authentication Module</a></dt><dt>Modules, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dt>MSISDN, <a class="indexterm" href="#msisdn-module-conf-hints">Hints For the MSISDN Authentication Module</a></dt><dt>OAuth 2.0, <a class="indexterm" href="#oauth2-module-conf-hints">Hints For the OAuth 2.0 Authentication Module</a></dt><dt>Open Authentication (OATH), <a class="indexterm" href="#OATH-module-conf-hints">Hints For the OATH Module</a></dt><dt>RADIUS, <a class="indexterm" href="#radius-module-conf-hints">Hints For the RADIUS Authentication Module</a></dt><dt>Secure Attribute Exchange (SAE), <a class="indexterm" href="#sae-module-conf-hints">Hints For the SAE Authentication Module</a></dt><dt>SecurID, <a class="indexterm" href="#securid-module-conf-hints">Hints For the SecurID Authentication Module</a></dt><dt>Windows Desktop SSO, <a class="indexterm" href="#desktop-module-conf-hints">Hints For the Windows Desktop SSO Authentication Module</a></dt><dt>Windows NT, <a class="indexterm" href="#winnt-module-conf-hints">Hints For the Windows NT Authentication Module</a></dt><dt>WSSAuth, <a class="indexterm" href="#wss-module-conf-hints">Hints For the WSSAuth Authentication Module</a></dt><dt>X509 certificate based, <a class="indexterm" href="#cert-module-conf-hints">Hints For the Certificate Authentication Module</a></dt></dl></dd><dt>Authorization, <a class="indexterm" href="#what-is-authz">About Authorization in OpenAM</a>, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-authz-policy">Configuring Policies</a>, <a class="indexterm" href="#script-policy">Managing Policies Outside the Console</a>, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a>, <a class="indexterm" href="#chap-oauth2">Managing OAuth 2.0 Authorization</a>, <a class="indexterm" href="#chap-openid-connect">Managing OpenID Connect 1.0 Authorization</a></dt><dt>Delegating, <a class="indexterm" href="#delegate-policy">Delegating Policy Management &amp; Decisions</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>Backup, <a class="indexterm" href="#chap-backup-restore">Backing Up and Restoring OpenAM Configurations</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>Caching, <a class="indexterm" href="#caching">Caching in OpenAM</a></dt><dt>Certificates, <a class="indexterm" href="#chap-certs-keystores">Managing Certificates</a></dt><dt>Command line tools overview, <a class="indexterm" href="#openam-cli-overview">OpenAM Command-Line Tools</a></dt><dt>Console overview, <a class="indexterm" href="#openam-console-overview">OpenAM Web-Based Console</a></dt><dt>Cookie</dt><dd><dl><dt>Persistent, <a class="indexterm" href="#persistent-cookie">Hints for the Persistent Cookie Module</a></dt></dl></dd><dt>Cross-domain single sign on (CDSSO), <a class="indexterm" href="#chap-cdsso">Configuring Cross-Domain Single Sign On</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Dashboard service, <a class="indexterm" href="#chap-dashboard">Configuring the Dashboard Service</a>, <a class="indexterm" href="#dashboard-users">Adding Applications to a User's Dashboard</a></dt><dt>Debug logging</dt><dd><dl><dt>Level, <a class="indexterm" href="#log-mgmt-core">Logging in OpenAM Core Services</a></dt><dt>Rotation, <a class="indexterm" href="#log-rotate-debug">Rotating Debug Logs</a></dt><dt>Service selection, <a class="indexterm" href="#log-debug-selective-capture">Debug Logging by Service</a></dt><dt>Single file, <a class="indexterm" href="#log-mgmt-core">Logging in OpenAM Core Services</a></dt></dl></dd><dt>Delegating administration, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt><dt>Device</dt><dd><dl><dt>Fingerprinting, <a class="indexterm" href="#device-print-auth-module-conf-hints">Hints For the Device Print Authentication Module</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>Enabling ssoadm.jsp, <a class="indexterm" href="#openam-ssoadm-jsp-overview">OpenAM ssoadm.jsp</a></dt><dt>Entitlements, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Federation, <a class="indexterm" href="#about-federation">About SAML 2.0 SSO &amp; Federation</a></dt><dd><dl><dt>Changing signing key, <a class="indexterm" href="#chap-certs-keystores">Managing Certificates</a></dt><dt>Configuring, <a class="indexterm" href="#set-up-federation">Setting Up SAML 2.0 SSO</a>, <a class="indexterm" href="#configure-idp">Configuring Identity Providers</a>, <a class="indexterm" href="#configure-sp">Configuring Service Providers</a>, <a class="indexterm" href="#configure-cot">Configuring Circles of Trust</a>, <a class="indexterm" href="#google-apps-as-sp">Configuring Google Apps as a Remote Service Provider</a>, <a class="indexterm" href="#salesforce-as-sp">Configuring Salesforce CRM as a Remote Service Provider</a>, <a class="indexterm" href="#saml2-ecp-config">Configuring OpenAM For the ECP Profile</a></dt><dt>Linking accounts, <a class="indexterm" href="#federation-linking-accounts">Managing Federated Accounts</a></dt><dt>OAuth 2.0, <a class="indexterm" href="#oauth2-saml2-bearer">SAML 2.0 Bearer Assertion Profiles</a></dt><dt>SAML 2.0 Single Logout (SLO), <a class="indexterm" href="#using-saml2-sso-slo">Using SAML 2.0 Single Sign-On &amp; Single Logout</a></dt><dt>SAML 2.0 Single Sign-On (SSO), <a class="indexterm" href="#using-saml2-sso-slo">Using SAML 2.0 Single Sign-On &amp; Single Logout</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>Google Apps, <a class="indexterm" href="#google-apps-as-sp">Configuring Google Apps as a Remote Service Provider</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>Identity Gateway, <a class="indexterm" href="#gateway-or-policy-agent">Identity Gateway or Policy Agent?</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>Logging, <a class="indexterm" href="#log-mgmt">Log Management</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Monitoring, <a class="indexterm" href="#monitoring-interfaces">Monitoring Interfaces</a></dt><dd><dl><dt>Health check, <a class="indexterm" href="#is-openam-alive">Is OpenAM Running?</a></dt><dt>JMX, <a class="indexterm" href="#monitoring-jmx">JMX Monitoring</a></dt><dt>SNMP, <a class="indexterm" href="#monitoring-snmp">SNMP Monitoring</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>O</h3><dl><dt>OAuth 2.0, <a class="indexterm" href="#oauth2-module-conf-hints">Hints For the OAuth 2.0 Authentication Module</a>, <a class="indexterm" href="#configure-oauth2-client">Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</a>, <a class="indexterm" href="#chap-oauth2">Managing OAuth 2.0 Authorization</a></dt><dt>OpenID Connect 1.0, <a class="indexterm" href="#configure-oauth2-client">Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</a>, <a class="indexterm" href="#chap-openid-connect">Managing OpenID Connect 1.0 Authorization</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>Password reset, <a class="indexterm" href="#chap-pwd-reset">Configuring Password Reset</a></dt><dt>Performance, <a class="indexterm" href="#chap-tuning">Tuning OpenAM</a></dt><dt>Policy, <a class="indexterm" href="#what-is-authz">About Authorization in OpenAM</a>, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-authz-policy">Configuring Policies</a>, <a class="indexterm" href="#script-policy">Managing Policies Outside the Console</a>, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a></dt><dt>Delegating, <a class="indexterm" href="#delegate-policy">Delegating Policy Management &amp; Decisions</a>, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt></dl></dd><dt>Policy agents, <a class="indexterm" href="#chap-agents">Configuring Policy Agent Profiles</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-web-policy-agent">Configuring Web Policy Agents</a>, <a class="indexterm" href="#configure-j2ee-policy-agent">Configuring J2EE Policy Agents</a>, <a class="indexterm" href="#configure-wsp-policy-agent">Configuring Web Service Provider Policy Agents</a>, <a class="indexterm" href="#configure-wsc-policy-agent">Configuring Web Service Client Policy Agents</a>, <a class="indexterm" href="#configure-sts-policy-agent">Configuring Security Token Service Client Policy Agents</a>, <a class="indexterm" href="#configure-22-policy-agent">Configuring Version 2.2 Policy Agents</a>, <a class="indexterm" href="#configure-oauth2-client">Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</a>, <a class="indexterm" href="#configure-agent-auth">Configuring Agent Authenticators</a></dt><dt>Creating profiles, <a class="indexterm" href="#create-agent-profiles">Creating Agent Profiles</a>, <a class="indexterm" href="#delegate-agent-profile-creation">Delegating Agent Profile Creation</a></dt><dt>Group inheritance, <a class="indexterm" href="#create-agent-profiles">Creating Agent Profiles</a></dt><dt>Profiles, <a class="indexterm" href="#kinds-of-agent-profiles">Kinds of Agent Profiles</a></dt></dl></dd><dt>Post authentication plugins, <a class="indexterm" href="#authn-post-auth-plugins">Post Authentication Plugins</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Realms, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt><dd><dl><dt>Creating, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt></dl></dd><dt>Restoring, <a class="indexterm" href="#chap-backup-restore">Backing Up and Restoring OpenAM Configurations</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Salesforce CRM, <a class="indexterm" href="#salesforce-as-sp">Configuring Salesforce CRM as a Remote Service Provider</a></dt><dt>Securing OpenAM, <a class="indexterm" href="#chap-securing">Securing OpenAM</a></dt><dt>Session quotas, <a class="indexterm" href="#configure-session-quotas">Configuring Session Quotas</a></dt><dt>Sessions, <a class="indexterm" href="#session-mgmt">Session Management</a></dt><dt>Silent installation, <a class="indexterm" href="#openam-cli-overview">OpenAM Command-Line Tools</a></dt><dt>Single Sign-On (SSO), <a class="indexterm" href="#chap-sso">Configuring Single Sign-On within One Domain</a></dt><dt>SSL, <a class="indexterm" href="#chap-certs-keystores">Managing Certificates</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>Troubleshooting, <a class="indexterm" href="#chap-troubleshooting">Troubleshooting</a></dt></dl></div></div></div></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssue.jspa?pid=10000&components=10007&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>
