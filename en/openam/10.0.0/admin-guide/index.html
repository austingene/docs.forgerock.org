<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>OpenAM 10.0.0 Administration Guide</title><link rel="stylesheet" type="text/css" href="css/coredoc.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="description" content="Guide to configuring and using OpenAM features. OpenAM provides open source Authentication, Authorization, Entitlement and Federation software."><script type="text/javascript">
/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement)cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close();d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)});else if(!c&&b!=null&&typeof b=="object")for(var e in b)ca(a+"["+e+"]",b[e],c,d);else d(a,b)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border")for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}d=bz(a,b,b);if(d<0||d==null)d=a.style[b]||0;d=parseFloat(d)||0;if(c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p;k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div>"+"<table "+n+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b)return f.queue(this[0],a);return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};
f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a))return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))});if(typeof a!="object"&&a!==b)return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a));return f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function()
{for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}else f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k)continue;if(typeof k=="string")if(!_.test(k))k=b.createTextNode(k);else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}var r;if(!f.support.appendChecked)if(k[0]&&typeof (r=k.length)=="number")for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return!a.type||be.test(a.type)};for(j=0;h[j];j++)if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript"))e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b)return this;return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bz)return bz(a,c)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0)return bC(a,b,d);f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=b$(bU,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch)ch[a](0,1)}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(cu("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed")break;c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static")l+=i.offsetTop,m+=i.offsetLeft;f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e)return null;g=cy(e);return g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
</script>
<script type="text/javascript">
/* On double-click, reformat <div class="screen"> for easy copying. */
var minus = "<img alt=\"minus\" class=\"toggle\" width=\"18\" height=\"10\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAADHmlDQ1BJQ0MgUHJvZmlsZQAAeAGFVN9r01AU/tplnbDhizpnEQk+aJFuZFN0Q5y2a1e6zVrqNrchSJumbVyaxiTtfrAH2YtvOsV38Qc++QcM2YNve5INxhRh+KyIIkz2IrOemzRNJ1MDufe73/nuOSfn5F6g+XFa0xQvDxRVU0/FwvzE5BTf8gFeHEMr/GhNi4YWSiZHQA/Tsnnvs/MOHsZsdO5v36v+Y9WalQwR8BwgvpQ1xCLhWaBpXNR0E+DWie+dMTXCzUxzWKcECR9nOG9jgeGMjSOWZjQ1QJoJwgfFQjpLuEA4mGng8w3YzoEU5CcmqZIuizyrRVIv5WRFsgz28B9zg/JfsKiU6Zut5xCNbZoZTtF8it4fOX1wjOYA1cE/Xxi9QbidcFg246M1fkLNJK4RJr3n7nRpmO1lmpdZKRIlHCS8YlSuM2xp5gsDiZrm0+30UJKwnzS/NDNZ8+PtUJUE6zHF9fZLRvS6vdfbkZMH4zU+pynWf0D+vff1corleZLw67QejdX0W5I6Vtvb5M2mI8PEd1E/A0hCgo4cZCjgkUIMYZpjxKr4TBYZIkqk0ml0VHmyONY7KJOW7RxHeMlfDrheFvVbsrj24Pue3SXXjrwVhcW3o9hR7bWB6bqyE5obf3VhpaNu4Te55ZsbbasLCFH+iuWxSF5lyk+CUdd1NuaQU5f8dQvPMpTuJXYSWAy6rPBe+CpsCk+FF8KXv9TIzt6tEcuAcSw+q55TzcbsJdJM0utkuL+K9ULGGPmQMUNanb4kTZyKOfLaUAsnBneC6+biXC/XB567zF3h+rkIrS5yI47CF/VFfCHwvjO+Pl+3b4hhp9u+02TrozFa67vTkbqisXqUj9sn9j2OqhMZsrG+sX5WCCu0omNqSrN0TwADJW1Ol/MFk+8RhAt8iK4tiY+rYleQTysKb5kMXpcMSa9I2S6wO4/tA7ZT1l3maV9zOfMqcOkb/cPrLjdVBl4ZwNFzLhegM3XkCbB8XizrFdsfPJ63gJE722OtPW1huos+VqvbdC5bHgG7D6vVn8+q1d3n5H8LeKP8BqkjCtbCoV8yAAAAUklEQVQoFWO8HyrynwEKFFa9ZoSxiaEfhInC9TKADAICBkowyAwmYmwmRg3VDGLBZtvHPGmE37Eo4J/0FCMsaesibDZicRiKENVcRDWDGKmVIAFsW0aIsyjVzwAAAABJRU5ErkJggg%3D%3D\">";
var plus = "<img alt=\"plus\" class=\"toggle\" width=\"18\" height=\"10\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAADHmlDQ1BJQ0MgUHJvZmlsZQAAeAGFVN9r01AU/tplnbDhizpnEQk+aJFuZFN0Q5y2a1e6zVrqNrchSJumbVyaxiTtfrAH2YtvOsV38Qc++QcM2YNve5INxhRh+KyIIkz2IrOemzRNJ1MDufe73/nuOSfn5F6g+XFa0xQvDxRVU0/FwvzE5BTf8gFeHEMr/GhNi4YWSiZHQA/Tsnnvs/MOHsZsdO5v36v+Y9WalQwR8BwgvpQ1xCLhWaBpXNR0E+DWie+dMTXCzUxzWKcECR9nOG9jgeGMjSOWZjQ1QJoJwgfFQjpLuEA4mGng8w3YzoEU5CcmqZIuizyrRVIv5WRFsgz28B9zg/JfsKiU6Zut5xCNbZoZTtF8it4fOX1wjOYA1cE/Xxi9QbidcFg246M1fkLNJK4RJr3n7nRpmO1lmpdZKRIlHCS8YlSuM2xp5gsDiZrm0+30UJKwnzS/NDNZ8+PtUJUE6zHF9fZLRvS6vdfbkZMH4zU+pynWf0D+vff1corleZLw67QejdX0W5I6Vtvb5M2mI8PEd1E/A0hCgo4cZCjgkUIMYZpjxKr4TBYZIkqk0ml0VHmyONY7KJOW7RxHeMlfDrheFvVbsrj24Pue3SXXjrwVhcW3o9hR7bWB6bqyE5obf3VhpaNu4Te55ZsbbasLCFH+iuWxSF5lyk+CUdd1NuaQU5f8dQvPMpTuJXYSWAy6rPBe+CpsCk+FF8KXv9TIzt6tEcuAcSw+q55TzcbsJdJM0utkuL+K9ULGGPmQMUNanb4kTZyKOfLaUAsnBneC6+biXC/XB567zF3h+rkIrS5yI47CF/VFfCHwvjO+Pl+3b4hhp9u+02TrozFa67vTkbqisXqUj9sn9j2OqhMZsrG+sX5WCCu0omNqSrN0TwADJW1Ol/MFk+8RhAt8iK4tiY+rYleQTysKb5kMXpcMSa9I2S6wO4/tA7ZT1l3maV9zOfMqcOkb/cPrLjdVBl4ZwNFzLhegM3XkCbB8XizrFdsfPJ63gJE722OtPW1huos+VqvbdC5bHgG7D6vVn8+q1d3n5H8LeKP8BqkjCtbCoV8yAAAAYElEQVQoFWO8HyrynwEKFFa9ZoSxiaEfhInC9TKADAICBlz4Q67UfxDGJQ8SB5nBRIzNxKihmkEs2Gz7mCeN8DtUAbIY/6SnGGFJWxch2whzCbIYNl9QzUVUM4iRWgkSAKcsS/O6iJF0AAAAAElFTkSuQmCC\">";

$(document).ready(function() {
  /* Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=116083 */
  if (navigator.userAgent.match(/Firefox/i)) {
    $(".screen").wrap("<pre />");
    $(".programlisting").wrap("<pre />");
  }

  /*
    Include both a wrapped (.screen) and unwrapped (.flat) version of
    each screen element, with [-] image to collapse and [+] image
    to expand content.
   */
  $(".screen").each(function () {
    $(this).replaceWith(
      "<div class=\"screen\" title=\"Click [-] to flatten lines.\">"
        + minus + $(this).html() + "</div>" +
      "<div class=\"flat nodisplay\" title=\"Click [+] to wrap long lines.\">"
        + plus + $(this).html().replace(/(\n|\r\n) /g," ") + "</div>"
    )});
});

/*
  Add class="nodisplay" to parent div; remove from parent's sibling.
  If the current parent is .screen, then next sibling is .flat.
*/
$(".toggle").live("click", function() {
  $(this).parent().toggleClass("nodisplay");
  if ($(this).parent().hasClass("screen")) {
    $(this).parent().next().toggleClass("nodisplay");
  } else {
    $(this).parent().prev().toggleClass("nodisplay");
  }
});
</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div><p class="cornerBanner"><a target="_blank" href="http://docs.forgerock.org/en/openam/11.0.1/">v11.0.1 available</a></p></div><div lang="en" class="book" title="OpenAM 10.0.0 Administration Guide"><div class="titlepage"><div><div><h1 class="title"><a name="admin-guide"></a>OpenAM 10.0.0 Administration Guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Mark</span> <span class="surname">Craig</span></h3></div></div></div><div><p class="copyright">Copyright &copy; 2011-2012 ForgeRock AS</p></div><div><a href="legalnotice.html">Legal Notice</a></div><div><p class="pubdate">Last updated: April&nbsp;14,&nbsp;2012</p></div><div><div class="abstract" title="Abstract"><div class="abstract-title">Abstract</div><p>Guide to configuring and using OpenAM features. OpenAM provides open
   source Authentication, Authorization, Entitlement and Federation
   software.</p></div></div></div><hr></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="preface"><a href="#preface">Preface</a></span></dt><dt><span class="chapter"><a href="#chap-admin-tools">1. Administration Interfaces &amp; Tools</a></span></dt><dt><span class="chapter"><a href="#chap-auth-services">2. Defining Authentication Services</a></span></dt><dt><span class="chapter"><a href="#chap-authz-policy">3. Defining Authorization Policies</a></span></dt><dt><span class="chapter"><a href="#chap-entitlements">4. Defining Entitlements</a></span></dt><dt><span class="chapter"><a href="#chap-realms">5. Configuring Realms</a></span></dt><dt><span class="chapter"><a href="#chap-agents">6. Configuring Policy Agent Profiles</a></span></dt><dt><span class="chapter"><a href="#chap-pwd-reset">7. Configuring Password Reset</a></span></dt><dt><span class="chapter"><a href="#chap-cdsso">8. Configuring Cross-Domain Single Sign On</a></span></dt><dt><span class="chapter"><a href="#chap-federation">9. Managing SAML 2.0 SSO</a></span></dt><dt><span class="chapter"><a href="#chap-backup-restore">10. Backing Up and Restoring OpenAM Configurations</a></span></dt><dt><span class="chapter"><a href="#chap-certs-keystores">11. Managing Certificates</a></span></dt><dt><span class="chapter"><a href="#chap-monitoring">12. Monitoring OpenAM Services</a></span></dt><dt><span class="chapter"><a href="#chap-tuning">13. Tuning OpenAM</a></span></dt><dt><span class="chapter"><a href="#chap-change-hosts">14. Changing Host Names</a></span></dt><dt><span class="chapter"><a href="#chap-troubleshooting">15. Troubleshooting</a></span></dt><dt><span class="index"><a href="#d13107e13227">Index</a></span></dt></dl></div><div lang="en" class="preface" title="Preface"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>Preface</h2></div></div></div><p>This guide shows you how to configure, maintain, and troubleshoot
  OpenAM for single sign on and authorization, password reset, account
  lockout, cross-domain single sign on, and federation.</p><div class="section" title="1.&nbsp;Who Should Use this Guide"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d13107e96"></a>1.&nbsp;Who Should Use this Guide</h2></div></div></div><p>This guide is written for access management designers and
   administrators who build, deploy, and maintain OpenAM services for
   their organizations. This guide covers the tasks you might repeat
   throughout the life cycle of an OpenAM release used in your
   organization.</p><p>This guide starts by introducing the OpenAM administrative
   interfaces and tools, and by showing how to manage OpenAM services.
   This guide continues by showing how to configure the principle
   features of OpenAM. It then demonstrates how to backup, restore,
   monitor, tune, and troubleshoot, OpenAM services.</p><p>You do not need to be an OpenAM wizard to learn something from
   this guide, though a background in access management and maintaining
   web application software can help. You do need some background in
   managing services on your operating systems and in your application
   servers. You can nevertheless get started with this guide, and then
   learn more as you go along.</p></div><div lang="en" class="section" title="2.&nbsp;Formatting Conventions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="formatting-conventions"></a>2.&nbsp;Formatting Conventions</h2></div></div></div><p>Some items are formatted differently from other text, like
 <code class="filename">filenames</code>, <span class="command"><strong>commands</strong></span>, and
 <code class="literal">literal values</code>.</p><div class="screen">$ echo Terminal sessions are formatted with lines folded for easier reading.
 In HTML documents click the [-] image for a flat, copy-paste version. Click
 the [+] image for an expanded, line-wrapped version. &gt; /dev/null</div><p>In many cases, sections pertaining to UNIX, GNU/Linux, Mac OS X, BSD,
 and so forth are marked (UNIX). Sections pertaining to Microsoft Windows
 might be marked (Windows). To avoid repetition, however, file system
 directory names are often given only in UNIX format as in
 <code class="filename">/path/to/OpenAM</code>, even if the text applies to
 <code class="filename">C:\path\to\OpenAM</code> as well.</p><div class="programlisting"><strong class="hl-keyword">class</strong> Test
{
    <strong class="hl-keyword">public</strong> <strong class="hl-keyword">static</strong> <strong class="hl-keyword">void</strong> main(String [] args)
    {
        System.out.println(<strong class="hl-string"><em style="color: #f58220">"This is a program listing."</em></strong>);
    }
}</div></div><div lang="en" class="section" title="3.&nbsp;Accessing OpenAM Documentation Online"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="accessing-doc-online"></a>3.&nbsp;Accessing OpenAM Documentation Online</h2></div></div></div><p>Core documentation, such as what you are now reading, aims to
 be technically accurate and complete with respect to the software
 documented. Core documentation therefore follows a <a class="link" href="https://wikis.forgerock.org/confluence/display/devcom/Review+Process" target="_blank">three-phase review process</a> designed to eliminate errors. The
 review process should slow authors down enough that documentation you get
 with a stable release has had time to bake fully.</p><p>Fully baked core documentation is available at <a class="link" href="http://docs.forgerock.org/" target="_top">docs.forgerock.org</a>.</p><p>The <a class="link" href="https://wikis.forgerock.org/confluence/display/OPENAM/Home" target="_blank">OpenAM Wiki</a> regularly brings you more, fresh content.
 In addition, you are welcome to <a class="link" href="https://idp.forgerock.org/openam/UI/Login?service=register" target="_blank">sign up</a> and then edit the Wiki if you notice an error, or if you
 have something to share.</p></div><div lang="en" class="section" title="4.&nbsp;Joining the OpenAM Community"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="joining-the-community"></a>4.&nbsp;Joining the OpenAM Community</h2></div></div></div><p>After you <a class="link" href="https://idp.forgerock.org/openam/UI/Login?service=register" target="_blank">sign up</a> at ForgeRock, you can also login to the Wiki and the issue
 database to follow what is happening with the project.</p><p>If you have questions regarding OpenAM which are not answered by the
 documentation, there is a mailing list which can be found at
 <a class="link" href="https://lists.forgerock.org/mailman/listinfo/openam" target="_blank">https://lists.forgerock.org/mailman/listinfo/openam</a>
 where you are likely to find an answer.</p><p>The Wiki has information on how to check out OpenAM source code.
 There is also a mailing list for OpenAM development which can be found at
 <a class="link" href="https://lists.forgerock.org/mailman/listinfo/openam-dev" target="_blank">https://lists.forgerock.org/mailman/listinfo/openam-dev</a>
 Should you want to contribute a patch, test, or feature, or want to author
 part of the core documentation, first have a look on the ForgeRock site
 at <a class="link" href="http://www.forgerock.org/get_involved.html" target="_blank">how to get involved</a>.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools"><div class="titlepage"><div><div><h2 class="title"><a name="chap-admin-tools"></a>Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#openam-console-overview">1.1. OpenAM Web-Based Console</a></span></dt><dt><span class="section"><a href="#openam-cli-overview">1.2. OpenAM Command-Line Tools</a></span></dt><dt><span class="section"><a href="#openam-ssoadm-jsp-overview">1.3. OpenAM ssoadm.jsp</a></span></dt></dl></div><p>This chapter provides a brief introduction to the web-based OpenAM
 console. It also lists and describes each CLI administration tool.</p><div class="section" title="1.1.&nbsp;OpenAM Web-Based Console"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-console-overview"></a>1.1.&nbsp;OpenAM Web-Based Console</h2></div></div></div><a class="indexterm" name="d13107e185"></a><p>After you install OpenAM, login to the web-based console as OpenAM
  Administrator, <code class="literal">amadmin</code> with the password you set during
  installation. The URL to visit in your browser is something like
  <code class="literal">http://openam.example.com:8080/openam/console</code>, depending
  on the protocol (HTTP or HTTPS), host name (in this case
  <code class="literal">openam.example.com</code>), port number on which the web
  containers listens (in this case 8080), and deployment URI (in this case
  <code class="literal">/openam</code>).</p><div class="mediaobject" title="How the console looks to amadmin"><a name="figure-console-as-amadmin"></a><img src="images/console-as-amadmin.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-as-amadmin.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-amadmin.html" target="longdesc">D</a>]</span></div></div><p>The OpenAM Administrator has access rights to perform all
  administrative operations. Therefore, when you login as
  <code class="literal">amadmin</code>, you see the complete OpenAM console. In the
  background, OpenAM has set a cookie in your browser that lasts until the
  session expires, you logout, or you close your browser<sup>[<a name="d13107e215" href="#ftn.d13107e215" class="footnote">1</a>]</sup>.</p><p>When you login to the OpenAM console as an end user, a user without
  any access to perform administrative operations, then instead of the OpenAM
  console, you see a page to view and update your account information.</p><div class="mediaobject" title="How the console looks to an end user"><a name="figure-console-as-bjensen"></a><img src="images/console-as-bjensen.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-as-bjensen.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-bjensen.html" target="longdesc">D</a>]</span></div></div><p>If you configure OpenAM to grant administrative capabilities to
  another user, then that user also sees the console after login. For
  instance, the OpenAM Administrator granted Kirsten Vaughan privileges to
  administer the OpenAM Top Level Realm. (This can be done through the console
  under Access Control &gt; / (Top Level Realm) &gt; Privileges. Kirsten
  has authorization to read and write policy properties and configured
  policy agent properties.) When Kirsten logs in, she sees only part of the
  console capabilities.<sup>[<a name="d13107e231" href="#ftn.d13107e231" class="footnote">2</a>]</sup></p><div class="mediaobject" title="How the console looks to an administrator"><a name="figure-console-as-kvaughan"></a><img src="images/console-as-kvaughan.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-as-kvaughan.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-as-kvaughan.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="1.2.&nbsp;OpenAM Command-Line Tools"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-cli-overview"></a>1.2.&nbsp;OpenAM Command-Line Tools</h2></div></div></div><p>The script tools in the following list have <code class="literal">.bat</code>
  versions for use on Microsoft Windows.</p><a class="indexterm" name="d13107e250"></a><a class="indexterm" name="d13107e253"></a><div class="variablelist"><p>You can install the following OpenAM command-line tools.</p><dl><dt><span class="term"><span class="command"><strong>agentadmin</strong></span></span></dt><dd><p>This tool lets you manage OpenAM policy agent installations.</p><p>Unpack this tool as part of policy agent installation.</p></dd><dt><span class="term"><span class="command"><strong>ampassword</strong></span></span></dt><dd><p>This tool lets you change OpenAM Administrator passwords, and
     display encrypted password values.</p><p>Install this from <code class="filename">tools/ssoAdminTools.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>amverifyarchive</strong></span></span></dt><dd><p>This tool checks log archives for tampering.</p><p>Install this from <code class="filename">tools/ssoAdminTools.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>configurator.jar</strong></span></span></dt><dd><p>This executable .jar file lets you perform silent installation,
     configuring a deployed OpenAM server by applying settings from a
     configuration file, as in <span class="command"><strong>java -jar configurator.jar -f
     config.file</strong></span>. The .jar is provided with a sample configuration
     file.</p><p>The <em class="replaceable"><code>config.file</code></em>, based on the
     <code class="filename">sampleconfiguration</code> file provided with the tool,
     must be adapted for your environment.</p><p>Install this from <code class="filename">tools/ssoConfiguratorTools.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>ssoadm</strong></span></span></dt><dd><p>This tool provides a rich command-line interface for configuration
     of OpenAM core services.</p><p>In a test environment you can activate
     <code class="filename">ssoadm.jsp</code> to access the same functionality in your
     browser. To access many features of the <span class="command"><strong>ssoadm</strong></span>
     command through the OpenAM console, visit the
     <code class="filename">ssoadm.jsp</code> page in your browser after activating it
     when you installed OpenAM, for example
     <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>.</p><p>Install this from <code class="filename">tools/ssoAdminTools.zip</code>.</p></dd><dt><span class="term"><span class="command"><strong>ssodtool.sh</strong></span></span></dt><dd><p>This extensible diagnostic tool runs in GUI mode by default, but can
     also be run in command-line mode. The tool helps you check configuration
     settings and verify configuration integrity, test connectivity, and
     generate test reports.</p><p>Install this from <code class="filename">tools/ssoDiagnosticTools.zip</code>.</p></dd></dl></div><p>The commands access the OpenAM configuration over HTTP (or HTTPS).
  When using the administration commands in a site configuration, the
  commands access the configuration through the front end load balancer.</p><div class="itemizedlist"><p>Sometimes a command cannot access the load balancer, because:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Network routing restrictions prevent the tool from accessing
    the load balancer.</p></li><li class="listitem"><p>For testing purposes, the load balancer uses a self-signed
    certificate for HTTPS, and the tool does not have a way of trusting the
    self-signed certificate.</p></li><li class="listitem"><p>The load balancer is temporarily unavailable.</p></li></ul></div><p>In such cases you can work around the problem by adding an option
  such as the following to the <span class="command"><strong>java</strong></span> command in the
  tool's script. (This all belongs on one line with no spaces in the
  script.)</p><div class="programlisting">
-D"com.iplanet.am.naming.map.site.to.server=https://lb.example.com:443/openam=
http://server1.example.com:8080/openam=http://server2.example.com:8080/openam"</div><p>In the above example the load balancer is on the <code class="literal">lb</code>
  host, <code class="literal">https://lb.example.com:443/openam</code> is the site name,
  and the additional OpenAM servers in the site follow with
  <code class="literal">=</code> as the separator character.</p></div><div class="section" title="1.3.&nbsp;OpenAM ssoadm.jsp"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="openam-ssoadm-jsp-overview"></a>1.3.&nbsp;OpenAM ssoadm.jsp</h2></div></div></div><p>You can use the <span class="command"><strong>ssoadm.jsp</strong></span> page to access a large
  subset of the configuration capabilities of the <span class="command"><strong>ssoadm</strong></span>
  command. Yet, <span class="command"><strong>ssoadm.jsp</strong></span> is disabled by default to prevent
  potential misuse.</p><div class="procedure" title="Procedure&nbsp;1.1.&nbsp;To Enable ssoadm.jsp"><a name="enable-ssoadm-jsp"></a><div class="procedure-title">Procedure&nbsp;1.1.&nbsp;To Enable ssoadm.jsp</div><a class="indexterm" name="d13107e402"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login as OpenAM administrator, <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Click Configuration &gt; Servers and Sites tabs, then in the
    Servers list, click the link to configure your server.</p></li><li class="step" title="Step 3"><p>Click the Advanced tab to display the Advanced Properties table,
    and then click Add to include the property that enables
    <span class="command"><strong>ssoadm.jsp</strong></span> before saving your change.</p><div class="variablelist"><dl><dt><span class="term">Property Name</span></dt><dd><p>ssoadm.disabled</p></dd><dt><span class="term">Property Value</span></dt><dd><p>false</p></dd></dl></div></li><li class="step" title="Step 4"><p>Browse to <span class="command"><strong>ssoadm.jsp</strong></span> to check that it is
    enabled.</p><p>The URL is something like
    <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>,
    depending on your installation.</p></li></ol></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d13107e215" href="#d13107e215" class="para">1</a>] </sup>Technically speaking, persistent cookies can remain valid when you
  close your browser. This section reflects OpenAM default behavior before
  you configure additional functionality.</p></div><div class="footnote"><p><sup>[<a id="ftn.d13107e231" href="#d13107e231" class="para">2</a>] </sup>For more on delegated administration,
  see the chapter covering realms.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;2.&nbsp;Defining Authentication Services"><div class="titlepage"><div><div><h2 class="title"><a name="chap-auth-services"></a>Chapter&nbsp;2.&nbsp;Defining Authentication Services</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#what-is-authn">2.1. About Authentication in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-authn-modules">2.2. Configuring Authentication Modules</a></span></dt><dt><span class="section"><a href="#configure-authn-chains">2.3. Configuring Authentication Chains</a></span></dt><dt><span class="section"><a href="#authn-from-browser">2.4. Authenticating To OpenAM</a></span></dt><dt><span class="section"><a href="#configure-account-lockout">2.5. Configuring Account Lockout</a></span></dt></dl></div><p>An <em class="firstterm">authentication</em> service confirms the identity
 of a user or a client application.</p><p>This chapter describes how to configure authentication in OpenAM.</p><div class="section" title="2.1.&nbsp;About Authentication in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-authn"></a>2.1.&nbsp;About Authentication in OpenAM</h2></div></div></div><a class="indexterm" name="d13107e458"></a><p>Access management is about controlling access to resources. OpenAM
  plays a role similar to border control at an international airport. Instead
  of having each and every airline company deal with access to each
  destination, all airlines redirects passengers to border control. Border
  control then determines who each passenger is according to passport
  credentials. Border control also checks whether the identified passenger
  is authorized to fly to the destination corresponding to the ticket, perhaps
  based on visa credentials. Then, at the departure gate, an agent enforces
  the authorization from border control, allowing the passenger to board the
  plane as long as the passenger has not gotten lost, or tried to board the
  wrong plane, or swapped tickets with someone else. Thus, border control
  handles access management at the airport.</p><p>OpenAM is most frequently used to protect web-accessible resources.
  Users browse to a protected web application page. Rather than have the
  web application manage user access itself, an agent in the server where the
  web application runs redirects the user to OpenAM for access management.
  OpenAM determines who the user is, and whether the user has the right to
  access the protected page. OpenAM then redirects the user back to the
  protected page, this time with authorization that the agent can check.
  The agent enforces the authorization from OpenAM, letting through the user
  with the right to access the page. Thus, OpenAM handles access management
  to web resources.</p><p>Notice that OpenAM basically needs to determine two things for
  access management: who the user is; whether the user has access to the
  protected page. <em class="firstterm">Authentication</em> is the term meaning
  the determination of who a user is. This chapter covers how to set up the
  authentication process. <em class="firstterm">Authorization</em> is the term
  meaning determination whether a user has access to a protected resource.
  Authorization is covered later.</p><p>To process authentication, OpenAM obtains credentials from the user or
  client application authenticating, based on the mechanisms defined to
  validate credentials and complete the authentication. In other words, how a
  user authenticates differs depending on the situation. Passengers for
  international flights authenticate with passports and visas. Passengers for
  domestic flights might authenticate with an identity card or a driver's
  license. Customers withdrawing cash from an ATM authenticate with a
  card and a PIN. </p><a class="indexterm" name="d13107e475"></a><a class="indexterm" name="d13107e480"></a><p>As the authentication process depends on the situation, OpenAM allows
  you to configure authentication processes and then configure how they are
  applied depending on the situation. OpenAM uses <em class="firstterm">authentication
  modules</em> to handle different ways of authenticating. Basically,
  each authentication module handles one way of obtaining and verifying
  credentials. When a single set of credentials is not enough, or alternate
  sets of credentials can be used, you can choose to chain modules together.
  In OpenAM, this is called <em class="firstterm">authentication chaining</em>.
  When you chain authentication modules, you can configure each module as
  required, optional, requisite, or sufficient.<sup>[<a name="d13107e493" href="#ftn.d13107e493" class="footnote">3</a>]</sup></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>When a <em class="firstterm">required</em> module fails, the rest of
    the chain is processed, but the authentication fails.</p><p>A required module might be used for login with email and password,
    but then fall through to another module to handle new users who have not
    yet signed up.</p></li><li class="listitem"><p>When an <em class="firstterm">optional</em> module fails,
    authentication continues.</p><p>An optional module might be used to permit a higher level of access
    if the user can present a X.509 certificate for example.</p></li><li class="listitem"><p>When a <em class="firstterm">requisite</em> module fails, authentication
    fails and authentication processing stops.</p><p>A requisite module might be used with exclusive SSO.</p></li><li class="listitem"><p>When a <em class="firstterm">sufficient</em> succeeds, authentication
    is successful and later modules in the chain are skipped.</p><p>You could set Windows Desktop SSO as sufficient, so authenticated
    Windows users are let through, whereas web users have to traverse another
    authentication module such as one requiring an email address and a
    password.</p></li></ul></div><a class="indexterm" name="d13107e529"></a><p>With OpenAM, you can further set <em class="firstterm">authentication
  levels</em> per module, with higher levels being used typically
  to allow access to more restricted resources. The OpenAM SPIs also let you
  develop your own authentication modules, and post-authentication plugins.
  Client applications can specify the authentication level, module, user, and
  authentication service to use among those you have configured. As described
  later in this guide, you can use <em class="firstterm">realms</em> to organize
  which authentication process applies for different applications or different
  domains, perhaps managed by different people.</p><p>OpenAM leaves the authentication process flexible so that you can adapt
  how it works to your situation. Although at first the number of choices
  can seem daunting, now that you understand the basic process, you begin to
  see how choosing authentication modules and arranging them in authentication
  chains lets you use OpenAM to protect access to a wide range of applications
  used in your organization.</p></div><div class="section" title="2.2.&nbsp;Configuring Authentication Modules"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-modules"></a>2.2.&nbsp;Configuring Authentication Modules</h2></div></div></div><p>The OpenAM console provides two places where the OpenAM administrator
  can configure authentication modules.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Under Configuration &gt; Authentication, you configure available
    modules for use throughout OpenAM. What you set up here is inherited
    for use elsewhere.</p></li><li class="listitem"><p>Under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
    Authentication, you configure modules for your realm. What you set up
    at this level inherits from the global configuration, but you can override
    what is inherited. You can also add your own modules if necessary.</p></li></ol></div><p>Individual module configuration depends completely on what the module
  does. Configuring the module that connects to Active Directory over LDAP to
  authenticate a user using user name and password requires connection
  information and details about where to search for users, whereas configuring
  the HOTP module for one-time password authentication requires information
  about the password length and the mail server or SMS gateway for sending the
  password during authentication.</p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>One parameter that all modules have is Authentication Level.
   You change Authentication Level from 0 to a positive integer in order to
   indicate those modules are seen as more secure. Then you configure
   authorization to require a minimum authentication level required to access
   protected resources.</p></div><div class="section" title="2.2.1.&nbsp;Hints For the Active Directory Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="ad-module-conf-hints"></a>2.2.1.&nbsp;Hints For the Active Directory Authentication Module</h3></div></div></div><p>OpenAM connects to Active Directory over Lightweight Directory Access
   Protocol (LDAP). OpenAM provides separate Active Directory and LDAP
   modules to make it easier for you to use both Active Directory and also
   another directory service in an authentication chain.</p><a class="indexterm" name="d13107e569"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthADService</code></p><div class="variablelist"><dl><dt><span class="term">Primary Active Directory Server, </span><span class="term">Secondary Active Directory Server</span></dt><dd><p>The default port for LDAP is 389. If you are connecting to
      Active Directory over SSL, the default port for LDAP/SSL is 636.</p><p>To allow users to change passwords through OpenAM, Active Directory
      requires that you connect over SSL.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to Active Directory Server. Make sure that OpenAM
      can trust the Active Directory certificate when using this option.</p><p>OpenAM first attempts to contact primary servers. If no primary
      server is available, then OpenAM attempts to contact secondaries.</p><p>When authenticating users from a directory server that is remote
      from OpenAM, set both the primary and secondary server values.</p><p><span class="command"><strong>ssoadm</strong></span> attributes: primary is
      <code class="literal">iplanet-am-auth-ldap-server</code>; secondary is
      <code class="literal">iplanet-am-auth-ldap-server2</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better performance.
      When configuring the module for a particular part of the organization,
      you can perhaps start searches from a specific organizational unit such as
      <code class="literal">OU=sales,DC=example,DC=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in Active Directory, for example to
      manage account lockout, or if Active Directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to Active Directory.</p><p>The default is <code class="literal">amldapuser</code>. If the administrator
      authentication chain (default: <code class="literal">ldapService</code>) has been
      configured to include only the Active Directory module, then make sure
      that the password is correct before you logout. If it is incorrect, you
      will be locked out. If you do get locked out, you can login with the
      super user DN, which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> was set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code> and
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes, Filter, Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">CN=Users,DC=example,DC=com</code> with a filter
      <code class="literal">"(MAIL=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">MAIL=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>Should you require a more complex filter for performance, you
      add that to the User Search Filter text box. For example, if you search
      on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the
      resulting search filter
      <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)(objectClass=inetOrgPerson))</code>,
      where <em class="replaceable"><code>address</code></em> is the mail address provided
      by the user.</p><p>Scope OBJECT means search only the entry specified as the DN to
      Start User Search, whereas ONELEVEL means search only the entries
      that are directly children of that object. SUBTREE means search the
      entry specified and every entry under it.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">SSL Access to Active Directory Server</span></dt><dd><p>If you enable SSL, OpenAM must be able to trust Active Directory
      certificates, either because the Active Directory certificates were
      signed by a CA whose certificate is already included in the trust store
      used by the container where OpenAM runs, or because you imported the
      certificates into the trust store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">Return User DN to Authenticate</span></dt><dd><p>When enabled, and OpenAM uses Active Directory as the user store,
      the module returns the DN rather than the User ID, so the bind for
      authentication can be completed without a search to retrieve
      the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">Active Directory Server Check Interval</span></dt><dd><p>Used by the failover mechanism. Specifies the number of minutes
      between checks whether a previously unavailable Active Directory has
      become available again.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-server-check</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>This list lets you map (external) attribute names from Active
      Directory to (internal) attribute names used by OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthADAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.2.&nbsp;Hints For the Adaptive Risk Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="adaptive-auth-module-conf-hints"></a>2.2.2.&nbsp;Hints For the Adaptive Risk Authentication Module</h3></div></div></div><p>The Adaptive Risk module is designed to assess risk during
   authentication so that OpenAM can determine whether to require the
   user to complete further authentication steps. After configuring the
   Adaptive Risk module, insert it in your authentication chain with criteria
   set to sufficient as shown in the following example.</p><div class="mediaobject" title="Including the Adaptive Risk module in an authentication chain"><a name="figure-adaptive-auth-module"></a><img src="images/adaptive-auth-module.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-adaptive-auth-module.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-adaptive-auth-module.html" target="longdesc">D</a>]</span></div></div><p>In the example authentication chain shown, OpenAM has users
   authenticate first using the LDAP module providing a user ID and password
   combination. Upon success, OpenAM calls the Adaptive Risk module. The
   Adaptive Risk module assesses the risk based on your configured parameters.
   If the Adaptive Risk module calculates a total score below the threshold you
   set, the module returns success, and OpenAM finishes authentication
   processing without requiring further credentials. Otherwise the Adaptive
   Risk module evaluates the score to be above the risk threshold, and returns
   failure. OpenAM then calls the HOTP module, requiring the user to
   authenticate with a one-time password delivered to her by email or by SMS
   to her mobile phone.</p><p>When you configure the Adaptive Risk module to save cookies and
   profile attributes after successful authentication, OpenAM performs the
   save as post-authentication processing, only after the entire authentication
   chain returns success. You must set up OpenAM to save the data as part of
   post-authentication processing by editing the authentication chain to add
   <code class="literal">org.forgerock.openam.authentication.modules.adaptive.Adaptive</code>
   to the list of post authentication plugins.</p><a class="indexterm" name="d13107e796"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthAdaptiveService</code></p><div class="variablelist" title="General"><div class="variablelist-title">General</div><dl><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-auth-level</code></p></dd><dt><span class="term">Adaptive Threshold</span></dt><dd><p>Risk threshold score. If the sum of the Scores is greater than the
      threshold, the Adaptive Risk module returns failure.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-auth-threshold</code></p></dd><dt><span class="term">Failed Authentication Check</span></dt><dd><p>When enabled, check the user profile for authentication failures
      since the last successful login. This check therefore requires
      OpenAM to have access to the user profile, and Account Lockout to be
      enabled (otherwise OpenAM does not record authentication
      failures).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-check</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Failed
      Authentication Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Failed Authentication Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-invert</code></p></dd></dl></div><div class="variablelist" title="IP Address Range"><div class="variablelist-title">IP Address Range</div><dl><dt><span class="term">IP Range Check</span></dt><dd><p>When enabled, check whether the client IP address is within one
      of the specified IP Ranges.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-check</code></p></dd><dt><span class="term">IP Range</span></dt><dd><p>Specifies a list of IP ranges either in CIDR-style notation
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>/<em class="replaceable"><code>YY</code></em></code>)
      or as a range from one address to another
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>:<em class="replaceable"><code>y.y.y.y</code></em></code>,
      meaning from <em class="replaceable"><code>x.x.x.x</code></em> to
      <em class="replaceable"><code>y.y.y.y</code></em>). Currently supports only IPv4.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-range</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP Range
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP Range Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-invert</code></p></dd></dl></div><div class="variablelist" title="IP Address History"><div class="variablelist-title">IP Address History</div><dl><dt><span class="term">IP History Check</span></dt><dd><p>When enabled, check whether the client IP address matches one of
      the known values stored on the profile attribute you specify. This check
      therefore requires that OpenAM have access to the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-check</code></p></dd><dt><span class="term">Count to Save</span></dt><dd><p>Specifies how many IP address values to retain on the profile
      attribute you specify. Default: 5</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ip-adaptive-history-count</code></p></dd><dt><span class="term">Profile Attribute Name</span></dt><dd><p>Name of the user profile attribute on which to store known IP
      addresses. Default: <code class="literal">iphistory</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-attribute</code></p></dd><dt><span class="term">Save Successful IP Address</span></dt><dd><p>When enabled, save new client IP addresses to the known IP address
      list following successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP History
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP History Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-invert</code></p></dd></dl></div><div class="variablelist" title="Known Cookie"><div class="variablelist-title">Known Cookie</div><dl><dt><span class="term">Cookie Value Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie and optional cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for which OpenAM checks when
      you enable the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-name</code></p></dd><dt><span class="term">Cookie Value</span></dt><dd><p>Specifies the value of the cookie for which OpenAM checks. If
      no value is specified, OpenAM does not check the cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-value</code></p></dd><dt><span class="term">Save Cookie Value on Successful Login</span></dt><dd><p>When enabled, save the cookie as specified in the client's browser
      following successful authentication. If no Cookie Value is specified,
      the value is set to 1.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if user passes the Cookie Value
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-invert</code></p></dd></dl></div><div class="variablelist" title="Device Cookie"><div class="variablelist-title">Device Cookie</div><dl><dt><span class="term">Device Registration Cookie Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie with the correct device registration identifier as
      the value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for the Device Registration Cookie
      Check. Default: Device</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-name</code></p></dd><dt><span class="term">Save Device Registration on Successful Login</span></dt><dd><p>When enabled, save the specified cookie with a hashed device
      identifier value in the client's browser following successful
      authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Device
      Registration Cookie Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Device Registration Cookie Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-invert</code></p></dd></dl></div><div class="variablelist" title="Time Since Last Login"><div class="variablelist-title">Time Since Last Login</div><dl><dt><span class="term">Time Since Last Login Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie that holds the encrypted last login time, and check
      that the last login time is more recent than a maximum number of days you
      specify.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie holding the encrypted last login
      time value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-cookie-name</code></p></dd><dt><span class="term">Max Time Since Last Login</span></dt><dd><p>Specifies a threshold age of the last login time in days. If the
      client's last login time is more recent than the number of days specified,
      then the client successfully passes the check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-value</code></p></dd><dt><span class="term">Save Time of Successful Login</span></dt><dd><p>When enabled, save the specified cookie with the current time
      encrypted as the last login value in the client's browser following
      successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Time Since
      Last Login Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Time Since Last Login Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-invert</code></p></dd></dl></div><div class="variablelist" title="Profile Attribute"><div class="variablelist-title">Profile Attribute</div><dl><dt><span class="term">Profile Risk Attribute Check</span></dt><dd><p>When enabled, check whether the user profile contains the specified
      attribute and value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-check</code></p></dd><dt><span class="term">Attribute Name</span></dt><dd><p>Specifies the attribute to check on the user profile for the
      specified value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-name</code></p></dd><dt><span class="term">Attribute Value</span></dt><dd><p>Specifies the value to match on the profile attribute. If the
      attribute is multi-valued, a single match is sufficient to pass the
      check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Profile Risk
      Attribute Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Profile Risk Attribute Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-invert</code></p></dd></dl></div><div class="variablelist" title="Geo Location"><div class="variablelist-title">Geo Location</div><dl><dt><span class="term">Geolocation Country Code Check</span></dt><dd><p>When enabled, check whether the client IP address location matches
      a country specified in the Valid Country Codes list.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">forgerock-am-auth-adaptive-geo-location-check</code></p></dd><dt><span class="term">Geolocation Database location</span></dt><dd><p>Path to GeoIP data file used to convert IP addresses to
      country locations. Use the binary .dat file format, rather than
      .csv.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-database</code></p></dd><dt><span class="term">Valid Country Codes</span></dt><dd><p>Specifies the list of country codes to match.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-values</code>. Use
      <code class="literal">|</code> to separate multiple values.</p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Geolocation
      Country Code Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Geolocation Country Code Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-invert</code></p></dd></dl></div><div class="variablelist" title="Request Header"><div class="variablelist-title">Request Header</div><dl><dt><span class="term">Request Header Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified header with the correct value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-check</code></p></dd><dt><span class="term">Request Header Name</span></dt><dd><p>Specifies the name of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-name</code></p></dd><dt><span class="term">Request Header Value</span></dt><dd><p>Specifies the value of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Request
      Header Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Request Header Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-invert</code></p></dd></dl></div></div><div class="section" title="2.2.3.&nbsp;Hints For the Anonymous Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="anon-module-conf-hints"></a>2.2.3.&nbsp;Hints For the Anonymous Authentication Module</h3></div></div></div><p>This module lets you track and manage anonymous users, perhaps
   forcing further authentication later when a user moves to access resources
   that require more protection.</p><a class="indexterm" name="d13107e1427"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthAnonymousService</code></p><div class="variablelist"><dl><dt><span class="term">Valid Anonymous Users</span></dt><dd><p>Specifies valid anonymous user IDs in addition to the default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-users-list</code></p></dd><dt><span class="term">Default Anonymous User Name</span></dt><dd><p>Specifies the user ID assigned by the module if the Valid
      Anonymous Users list is empty. Default: <code class="literal">anonymous</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-default-user-name</code></p></dd><dt><span class="term">Case Sensitive User IDs</span></dt><dd><p>Whether case matters for anonymous user IDs.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-case-sensitive</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-anonymous-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.4.&nbsp;Hints For the Certificate Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="cert-module-conf-hints"></a>2.2.4.&nbsp;Hints For the Certificate Authentication Module</h3></div></div></div><p>X.509 digital certificates can enable secure authentication without
   the need for user names and passwords or other credentials. Certificate
   authentication can be handy to manage authentication by applications.
   If all certificates are signed by a recognized Certficate Authority (CA),
   then you might get away without additional configuration. If you need to
   look up public keys of OpenAM clients, this module can also look up public
   keys in an LDAP directory server.</p><p>When you store certificates and certificate revocation lists (CRL)
   in an LDAP directory service, you must configure both how to access the
   directory service and also how to look up the certificates and CRLs,
   based on the fields in the certificates that OpenAM clients present to
   authenticate.</p><p>Access to the LDAP server and how to search for users is similar
   to LDAP module configuration as in <a class="xref" href="#ldap-module-conf-hints" title="2.2.11.&nbsp;Hints For the LDAP Authentication Module">Section&nbsp;2.2.11, &#8220;Hints For the LDAP Authentication Module&#8221;</a>.
   The primary difference is that, unlike for LDAP configuration, OpenAM
   retrieves the user identifier from a field in the certificate that the
   client application presents, then uses that identifier to search for the
   LDAP directory entry that holds the certificate, which should match the
   certificate presented. For example, if the Subject field of a typical
   certificate has a DN <code class="literal">C=FR, O=Example Corp, CN=Barbara
   Jensen</code>, and Barbara Jensen's entry in the directory has
   <code class="literal">cn=Barbara Jensen</code>, then you can use <code class="literal">CN=Barbara
   Jensen</code> from the Subject DN to search for the entry with
   <code class="literal">cn=Barbara Jensen</code> in the directory.</p><a class="indexterm" name="d13107e1510"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthCertService</code></p><div class="variablelist"><dl><dt><span class="term">Match Certificate in LDAP</span></dt><dd><p>When enabled, OpenAM searches for a match for the user's
      certificate in the LDAP directory. If a match is found and not revoked
      according to a CRL or OCSP validation, then authentication succeeds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-cert-in-ldap</code></p></dd><dt><span class="term">Subject DN Attribute Used to Search LDAP for Certificates</span></dt><dd><p>Indicates which attribute and value in the certificate Subject DN
      is used to find the LDAP entry holding the certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-ldap</code></p></dd><dt><span class="term">Match Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks whether the certificate has been
      revoked according to a CRL in the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-crl</code></p></dd><dt><span class="term">Issuer DN Attribute Used to Search LDAP for CRLs</span></dt><dd><p>Indicates which attribute and value in the certificate Issuer DN
      is used to find the CRL in the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-crl</code></p></dd><dt><span class="term">HTTP Parameters for CRL Update</span></dt><dd><p>Your certificate authority should provide the URL to use here,
      from which OpenAM can get CRL updates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-param-get-crl</code></p></dd><dt><span class="term">Match CA Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks the CRL against the CA certificate to
      ensure it has not been compromised.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMValidateCACert</code></p></dd><dt><span class="term">OCSP Validation</span></dt><dd><p>Enable this to use Online Certificate Status Protocol (OCSP)
      instead of CRLs to check certificates' revocation status.</p><p>If you enable this, you also must configure OSCP for OpenAM
      under Configuration &gt; Server and Sites &gt; Default Server Settings,
      or Configuration &gt; Server and Sites &gt; <em class="replaceable"><code>Server
      Name</code></em> &gt; Security.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-ocsp</code></p></dd><dt><span class="term">LDAP Server Where Certificates are Stored</span></dt><dd><p>The default port for LDAP is 389. If you are connecting to the
      directory service over SSL, the default port for LDAP/SSL is 636.
      When a secure connection, scroll down to enable Use SSL/TLS for LDAP
      Access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-ldap-provider-url</code></p></dd><dt><span class="term">LDAP Search Start DN</span></dt><dd><p>Valid base DN for the LDAP search, such as
      <code class="literal">dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-start-search-loc</code></p></dd><dt><span class="term">LDAP Server Principal User, LDAP Server Principal Password</span></dt><dd><p>If OpenAM stores attributes in the LDAP directory, for example to
      manage account lockout, or if the LDAP directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-cert-principal-user</code>, and
      <code class="literal"> iplanet-am-auth-cert-principal-passwd</code></p></dd><dt><span class="term">Use SSL for LDAP Access</span></dt><dd><p>If you use SSL for LDAP access, OpenAM must be able to trust the
      LDAP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-use-ssl</code></p></dd><dt><span class="term">Certificate Field Used to Access User Profile</span></dt><dd><p>If the user profile is in a different entry from the user
      certificate, then this can be different from subject DN attribute
      used to find the entry with the certificate. When you select other,
      provide an attribute name in the Other Certificate Field Used to Access
      User Profile text box.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-user-profile-mapper</code></p></dd><dt><span class="term">SubjectAltNameExt Value Type to Access User Profile</span></dt><dd><p>Use this if you want to look up the user profile from an RFC 822
      style name, or a User Principal Name as used in Active Directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-cert-user-profile-mapper-ext</code></p></dd><dt><span class="term">Trusted Remote Hosts</span></dt><dd><p>Hosts trusted to send certificates to OpenAM, such as load balancers
      doing SSL termination, or OpenAM distributed authentication UI
      instances.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-gw-cert-auth-enabled</code></p></dd><dt><span class="term">HTTP Header Name for Client Certificate</span></dt><dd><p>If you configure trusted hosts, specify the HTTP header name for
      the client certificate inserted by the trusted host.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMHttpParamName</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-cert-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.5.&nbsp;Hints For the Core Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="core-module-conf-hints"></a>2.2.5.&nbsp;Hints For the Core Authentication Module</h3></div></div></div><p>The Core module is a sort of meta-module.</p><p>The Core module lets you set up the list of modules available,
   and specify what types of client applications can authenticate with which
   modules. It also lets you configure connection pools for access to
   directory servers, and whether to retain objects used during authentication
   for use during logout. Furthermore, the Core module lets you set defaults
   used when configuring authentication in a particular realm.</p><a class="indexterm" name="d13107e1730"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthService</code></p><div class="variablelist"><dl><dt><span class="term">Pluggable Authentication Module Classes</span></dt><dd><p>Add class names for custom authentication modules to this list.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-authenticators</code></p></dd><dt><span class="term">Supported Authentication Modules for Clients</span></dt><dd><p>This list serves to limit what types of authentication modules
      can be used with specify types of client applications. The client type
      is an arbitary string, such as the default <code class="literal">genericHTML</code>,
      which is set by OpenAM when the Client Detection Service is enabled.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-supported-auth-modules</code></p></dd><dt><span class="term">LDAP Connection Pool Size, Default LDAP Connection Pool Size</span></dt><dd><p>Sets a minimum and maximum number of LDAP connections in the pool
      for connecting to a directory server. When tuning for production, start
      with <code class="literal">10:65</code> (10 minimum, 65 maximum). Explicit settings
      for specific servers override the default.</p><p>This attribute is for LDAP and Membership authentication services
      only.</p><p>This connection pool is different than the SDK connection pool
      configured in <code class="filename">serverconfig.xml</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-connection-pool-size </code>, and
      <code class="literal">iplanet-am-auth-ldap-connection-pool-default-size</code></p></dd><dt><span class="term">Remote Auth Security</span></dt><dd><p>Require the authenticating application to send its SSOToken. This
      allows the Authentication Service to obtain the username and password
      associated with the application.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunRemoteAuthSecurityEnabled</code></p></dd><dt><span class="term">Keep Post Process Objects for Logout Processing, Keep Authentication
     Module Objects for Logout Processing</span></dt><dd><p>When enabled, retain objects used to process authentication or
      post authentication operations in the user session until the user
      logs out.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">sunAMAuthKeepPostProcessInstances</code>, and
      <code class="literal">sunAMAuthKeepAuthModuleIntances</code></p></dd><dt><span class="term">User Profile</span></dt><dd><p>Whether a user profile needs to exist in the user data store,
      or should be created on successful authentication.</p><div class="variablelist"><dl><dt><span class="term">Dynamic</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile if one does not already exist.
         OpenAM then issues the SSOToken. OpenAM creates the user profile 
         in the user data store configured for the realm.</p></dd><dt><span class="term">Dynamic with User Alias</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile that contains the User Alias List
         attribute which defines one or more aliases that for mapping a
         user's multiple profiles.</p></dd><dt><span class="term">Ignored</span></dt><dd><p>Specifies that a user profile is not required for the
         Authentication Service to issue an SSOToken after a successful
         authentication.</p></dd><dt><span class="term">Required</span></dt><dd><p>Specifies that on successful authentication the user must have
         a user profile in the user data store configured for the realm in
         order for the Authentication Service to issue an SSOToken.</p></dd></dl></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-dynamic-profile-creation</code></p></dd><dt><span class="term">Administrator Authentication Configuration</span></dt><dd><p>Defines the authentication chain used by administrators when the
      process needs to be different from the authentication chain defined
      for end users. The authentication chain must first be created before
      it is displayed as an option in this attribute's drop down list.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-admin-auth-module</code></p></dd><dt><span class="term">User Profile Dynamic Creation Default Roles</span></dt><dd><p>Specifies the Distinguished Name (DN) of a role to be assigned to
      a new user whose profile is created when either of the Dynamic options
      is selected under the User Profile attribute. There are no default
      values. The role specified must be within the realm for which the
      authentication process is configured.</p><p>This role can be either an OpenAM or Sun DSEE role, but it cannot
      be a filtered role. If you wish to automatically assign specific services
      to the user, you have to configure the Required Services attribute in
      the User Profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-role</code></p></dd><dt><span class="term">Persistent Cookie Mode</span></dt><dd><p>Determines whether users can return to their authenticated session
      after restarting the browser. When enabled, the persistent cookie can be
      used to reauthenticate until the persistent cookie expires (as specified
      by the value of the Persistent Cookie Maximum Time attribute), or until
      the user explicitly logs out. By default, the Authentication Service uses
      only memory cookies (expires when the browser is closed).</p><p>The client must explicitly request a persistent cookie by adding
      <code class="literal">iPSPCookie=yes</code> as a parameter to the login URL. OpenAM
      sets a <code class="literal">DProPCookie</code> as described in
      <a class="xref" href="#authn-from-browser" title="2.4.&nbsp;Authenticating To OpenAM">Section&nbsp;2.4, &#8220;Authenticating To OpenAM&#8221;</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-mode</code></p></dd><dt><span class="term">Persistent Cookie Maximum Time</span></dt><dd><p>Specifies the interval after which a persistent cookie expires.
      The interval begins when the user's session is successfully authenticated.
      The maximum value is 2147483647 (in seconds, so a bit more than 68 years).
      The field accepts any integer value less than the maximum.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-time</code></p></dd><dt><span class="term">Alias Search Attribute Name</span></dt><dd><p>After a user is successfully authenticated, the user's profile is
      retrieved. This field specifies a second LDAP attribute to use in a
      search for the profile if a search using the first LDAP attribute fails
      to locate a matching user profile. Primarily, this attribute is used
      when the user identification returned from an authentication module
      is not the same as that specified in User Naming Attribute. For example,
      a RADIUS server might return abc1234 but the user name is abc. There is
      no default value for this attribute. The field takes any valid
      LDAP attribute.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-alias-attr-name</code></p></dd><dt><span class="term">Default Authentication Locale</span></dt><dd><p>Specifies the default language subtype to be used by the
      Authentication Service. The default value is
      <code class="literal">en_US</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-locale</code></p></dd><dt><span class="term">Organization Authentication Configuration</span></dt><dd><p>Defines the default authentication chain used by the realm's users.
      The authentication chain must first be created before it is displayed as
      an option in this attribute's drop down list.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-org-config</code></p></dd><dt><span class="term">Login Failure Lockout Mode</span></dt><dd><p>Selecting this attribute enables a physical lockout. Physical
      lockout will inactivate an LDAP attribute (defined in the Lockout
      Attribute Name property) in the user's profile. This attribute works in
      conjunction with several other lockout and notification attributes.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-lockout-mode</code></p></dd><dt><span class="term">Login Failure Lockout Count</span></dt><dd><p>Defines the number of attempts that a user has to authenticate,
      within the time interval defined in Login Failure Lockout Interval,
      before being locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-count</code></p></dd><dt><span class="term">Login Failure Lockout Interval</span></dt><dd><p>Defines the time in minutes during which failed login attempts are
      counted. If one failed login attempt is followed by a second failed
      attempt, within this defined lockout interval time, the lockout count
      starts, and the user is locked out if the number of attempts reaches
      the number defined in Login Failure Lockout Count. If an attempt within
      the defined lockout interval time proves successful before the number of
      attempts reaches the number defined in Login Failure Lockout Count, the
      lockout count is reset.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-duration</code></p></dd><dt><span class="term">Email Address to Send Lockout Notification</span></dt><dd><p>Specify one (or more) email address(es) to which notification is
      sent if a user lockout occurs.</p><p>Separate multiple addresses with spaces, and append
      <code class="literal">|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>charset</code></em></code>
      to addresses for recipients in non-English locales.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-email-address</code></p></dd><dt><span class="term">Warn User After N Failures</span></dt><dd><p>The number of authentication failures after which OpenAM displays
      a warning message that the user will be locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-lockout-warn-user</code></p></dd><dt><span class="term">Login Failure Lockout Duration</span></dt><dd><p>Defines how many minutes a user must wait after a lockout before
      attempting to authenticate again. Entering a value greater than 0 enables
      memory lockout and disables physical lockout. Memory lockout means
      the user's account is locked in memory for the number of minutes
      specified. The account is unlocked after the time period has passed.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-duration</code></p></dd><dt><span class="term">Lockout Duration Multiplier</span></dt><dd><p>Defines a value with which to multiply the value of the Login
      Failure Lockout Duration attribute for each successive lockout. For
      example, if Login Failure Lockout Duration is set to 3 minutes, and the
      Lockout Duration Multiplier is set to 2, the user is locked out of the
      account for 6 minutes. Once the 6 minutes has elapsed, if the user again
      provides the wrong credentials, the lockout duration is then 12 minutes.
      With the Lockout Duration Multiplier, the lockout duration is
      incrementally increased based on the number of times the user has been
      locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunLockoutDurationMultiplier</code></p></dd><dt><span class="term">Lockout Attribute Name</span></dt><dd><p>Defines the LDAP attribute used for physical lockout. The default
      value is <code class="literal">inetuserstatus</code>, although the field in the
      OpenAM console is empty. The Lockout Attribute Value field must also
      contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-name</code></p></dd><dt><span class="term">Lockout Attribute Value</span></dt><dd><p>Specifies the action to take on the attribute defined in Lockout
      Attribute Name. The default value is <code class="literal">inactive</code>,
      although the field in the OpenAM console is empty. The Lockout Attribute
      Name field must also contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-value</code></p></dd><dt><span class="term">Invalid Attempts Data Attribute Name</span></dt><dd><p>Specifies the LDAP attribute used to hold the number of failed
      authentication attempts towards Login Failure Lockout Count.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthInvalidAttemptsDataAttrName</code></p></dd><dt><span class="term">Default Success Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after successful authentication. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. The default value is
      <code class="literal">/openam/console</code>. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-success-url</code></p></dd><dt><span class="term">Default Failure Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after authentication has failed. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-url</code></p></dd><dt><span class="term">Authentication Post Processing Classes</span></dt><dd><p>Specifies one or more Java classes used to customize post
      authentication processes for successful or unsuccessful logins.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMPostAuthProcessInterface</code>
      OpenAM interface.</p><p>A .jar containing the post processing class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. For deployment, add the .jar or
      classes into a custom OpenAM .war file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-post-login-process-class</code></p></dd><dt><span class="term">Generate UserID Mode</span></dt><dd><p>When enabled, the Membership module generates a list of alternate
      user identifiers if the one entered by a user during the
      self-registration process is not valid or already exists. The user
      identifiers are generated by the class specified in the Pluggable User
      Name Generator Class property.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-enabled</code></p></dd><dt><span class="term">Pluggable User Name Generator Class</span></dt><dd><p>Specifies the name of the class used to generate alternate user
      identifiers when Generate UserID Mode is enabled. The default value is
      <code class="literal">com.sun.identity.authentication.spi.DefaultUserIDGenerator</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-class</code></p></dd><dt><span class="term">Identity Types</span></dt><dd><p>Lists the type or types of identities for which OpenAM searches.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMIdentityType</code></p></dd><dt><span class="term">Pluggable User Status Event Classes</span></dt><dd><p>Specifies one or more Java classes used to provide a callback
      mechanism for user status changes during the authentication process.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMAuthCallBack</code>
      OpenAM interface. OpenAM supports account lockout and password changes.
      OpenAM supports password changes through the LDAP authentication module,
      and so the feature is only available for the LDAP module.</p><p>A .jar containing the user status event class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. For deployment, add the .jar or
      classes into a custom OpenAM .war file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserStatusCallbackPlugins</code></p></dd><dt><span class="term">Store Invalid Attempts in Data Store</span></dt><dd><p>Enables the storage of information regarding failed authentication
      attempts as the value of the Invalid Attempts Data Attribute Name in
      the user data store. In order to store data in this attribute, the
      OpenAM schema has to be loaded. Information stored includes number of
      invalid attempts, time of last failed attempt, lockout time and lockout
      duration. Storing this information in the identity repository allows it
      to be shared among multiple instances of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunStoreInvalidAttemptsInDS</code></p></dd><dt><span class="term">Module Based Authentication</span></dt><dd><p>Enables users to authenticate using module-based authentication.
      Otherwise, all attempts at authentication using the
      <code class="literal">module=<em class="replaceable"><code>module-name</code></em></code> login
      parameter result in failure.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunEnableModuleBasedAuth</code></p></dd><dt><span class="term">User Attribute Mapping to Session Attribute</span></dt><dd><p>Enables the authenticating user's identity attributes (stored in
      the identity repository) to be set as session properties in the user's
      SSOToken. The value takes the format
      <code class="literal"><em class="replaceable"><code>User-Profile-Attribute</code></em>|<em class="replaceable"><code>Session-Attribute-Name</code></em></code>.
      If <em class="replaceable"><code>Session-Attribute-Name</code></em> is not specified,
      the value of <em class="replaceable"><code>User-Profile-Attribute</code></em> is used.
      All session attributes contain the <code class="literal">am.protected</code> prefix
      to ensure that they cannot be edited by the Client SDK.</p><p>For example, if you define the user profile attribute as mail and
      the user's email address (available in the user session) as
      <code class="literal">user.mail</code>, the entry for this attribute would be
      <code class="literal">mail|user.mail</code>. After a successful authentication,
      the <code class="literal">SSOToken.getProperty(String)</code> method is used to
      retrieve the user profile attribute set in the session. The user's email
      address is retrieved from the user's session using the
      <code class="literal">SSOToken.getProperty("am.protected.user.mail")</code> method
      call.</p><p>Properties that are set in the user session using User Attribute
      Mapping to Session Attributes can not be modified (for example,
      <code class="literal">SSOToken.setProperty(String, String)</code>). This results in
      an <code class="literal">SSOException</code>. Multi-value attributes, such as
      <code class="literal">memberOf</code>, are listed as a single session variable
      with a <code class="literal">|</code> separator.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserAttributesSessionMapping</code></p></dd><dt><span class="term">Valid goto URL domains</span></dt><dd><p>List external domains to which clients can be redirected after
      authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-valid-goto-domains</code></p></dd><dt><span class="term">Default Authentication Level</span></dt><dd><p>The level set here applies when no authentication level has been
      specified in the Authentication Level field for a realm.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.6.&nbsp;Hints For the Data Store Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="datastore-module-conf-hints"></a>2.2.6.&nbsp;Hints For the Data Store Authentication Module</h3></div></div></div><p>The Data Store authentication module allows a login using the Identity
   Repository of the realm to authenticate users. Using the Data Store module
   removes the requirement to write an authentication plug-in module, load,
   and then configure the authentication module if you need to authenticate
   against the same data store repository. Additionally, you do not need to
   write a custom authentication module where flat-file authentication is
   needed for the corresponding repository in that realm.</p><p>Yet, the Data Store module is generic. It does not implement data
   store-specific capabilities such as the password policy and password reset
   features provided by LDAP modules. Therefore the Data Store module returns
   failure when such capabilities are invoked.</p><a class="indexterm" name="d13107e2335"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthDataStoreService</code></p><p><span class="command"><strong>ssoadm</strong></span> attributes:
   <code class="literal">amAuthDataStore</code>, and
   <code class="literal">sunAMAuthDataStoreAuthLevel</code></p></div><div class="section" title="2.2.7.&nbsp;Hints For the Federation Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="federation-module-conf-hints"></a>2.2.7.&nbsp;Hints For the Federation Authentication Module</h3></div></div></div><p>The Federation authentication module is used by a service provider
   to create a user session after validating single sign-on protocol messages.
   This authentication module is used by the SAML, SAMLv2, ID-FF, and
   WS-Federation protocols.</p><a class="indexterm" name="d13107e2360"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthFederationService</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
   <code class="literal">sunAMAuthFederationAuthLevel</code></p></div><div class="section" title="2.2.8.&nbsp;Hints For the HOTP Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="hotp-module-conf-hints"></a>2.2.8.&nbsp;Hints For the HOTP Authentication Module</h3></div></div></div><p>The HMAC One-Time Password authentication module works together with
   the Data Store module to retrieve a user's mail address or telephone number
   to send a one-time password to complete authentication.</p><p>To use HOTP you set up an authentication chain with the Data Store
   module as the <code class="literal">requisite</code> first module, and the HOTP module
   as the second <code class="literal">requisite</code> module. When authentication
   succeeds against the Data Store module, OpenAM passes the Email Address
   and Telephone Number attributes from the user profile to the HOTP module.
   For the HOTP module to use either attribute, the Email Address must contain
   a valid email address, or the Telephone Number must contain a valid
   SMS telephone number such as <code class="literal">18285551212@txt.att.net</code>.</p><a class="indexterm" name="d13107e2393"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthHOTPService</code></p><div class="variablelist"><dl><dt><span class="term">SMS Gateway Implementation Class</span></dt><dd><p>Change this if you must customize the SMS gateway implementation.
      The default class sends an SMS or email, depending on the
      configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMSGatewayImplClassName</code></p></dd><dt><span class="term">SMTP Host Name</span></dt><dd><p>Host name of the mail server supporting Simple Message Transfer
      Protocol for electronic mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostName</code></p></dd><dt><span class="term">SMTP Host Port</span></dt><dd><p>The default SMTP port is 25, 465 (when connecting over SSL).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostPort</code></p></dd><dt><span class="term">SMTP User Name</span></dt><dd><p>User name for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserName</code></p></dd><dt><span class="term">SMTP User Password</span></dt><dd><p>Password for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserPassword</code></p></dd><dt><span class="term">SMTP Connection</span></dt><dd><p>If OpenAM connects to the mail server securely, OpenAM must be able
      to trust the server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPSSLEnabled</code></p></dd><dt><span class="term">Email From Address</span></dt><dd><p>The <code class="literal">From:</code> address when sending a one-time
      password by mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPFromAddress</code></p></dd><dt><span class="term">One Time Password Validity Length (in minutes)</span></dt><dd><p>One-time passwords are valid for 5 minutes after they are generated
      by default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordValidityDuration</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the one-time password to 6 or 8 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordLength</code></p></dd><dt><span class="term">One Time Password Delivery</span></dt><dd><p>Send the one-time password by SMS, by mail, or both.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPasswordDelivery</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.9.&nbsp;Hints For the HTTP Basic Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="http-module-conf-hints"></a>2.2.9.&nbsp;Hints For the HTTP Basic Authentication Module</h3></div></div></div><p>HTTP basic authentication takes a user name and password from HTTP
   authentication and tries authentication against the backend module in OpenAM,
   depending on what you configure as the Backend Module Name.</p><a class="indexterm" name="d13107e2543"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthHTTPBasicService</code></p><div class="variablelist"><dl><dt><span class="term">Backend Module Name</span></dt><dd><p>Specifies the module that checks the user credentials.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-http-basic-module-configured</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-httpbasic-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.10.&nbsp;Hints For the JDBC Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-module-conf-hints"></a>2.2.10.&nbsp;Hints For the JDBC Authentication Module</h3></div></div></div><p>The Java Database Connectivity (JDBC) module lets OpenAM connect to
   a database such as MySQL or Oracle DB to authenticate users.</p><a class="indexterm" name="d13107e2582"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthJDBCService</code></p><div class="variablelist"><dl><dt><span class="term">Connection Type</span></dt><dd><p>Choose Connection pool is retrieved via JNDI to connect using the
      Java Naming and Diretory Interface connection pool supported by the web
      container in which OpenAM runs. Choose Non-persistent JDBC connection to
      connect directly through the JDBC driver.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCConnectionType</code></p></dd><dt><span class="term">Connection Pool JNDI Name</span></dt><dd><p>When using Connection pool is retrieved via JNDI, this specifies
      the pool. How you configure connection pooling depends on the web
      container where you run OpenAM. Refer to the documentation for your
      web container for instructions on setting up connection pooling.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCJndiName</code></p></dd><dt><span class="term">JDBC Driver</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the JDBC
      driver provided by the database.</p><p>The .jar containing the JDBC driver belongs in the
      <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance, and so you should add it to a custom OpenAM .war file that you
      deploy.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDriver</code></p></dd><dt><span class="term">JDBC URL</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the URL
      to connect to the database.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCUrl</code></p></dd><dt><span class="term">Connect This User to Database</span></dt><dd><p>Specify the user name to open the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbuser</code></p></dd><dt><span class="term">Password for Connecting to Database</span></dt><dd><p>Specify the password for the user opening the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbpassword</code></p></dd><dt><span class="term">Password Column String</span></dt><dd><p>Specify the database column name where passwords are stored.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordColumn</code></p></dd><dt><span class="term">Prepared Statement</span></dt><dd><p>Specify the SQL query to return the password corresponding to the
      user to authenticate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCStatement</code></p></dd><dt><span class="term">Class to Transform Password Syntax</span></dt><dd><p>Specify the class that transforms the password retrieved to the
      same format as provided by the user.</p><p>The default class expects the password in clear text. Custom
      classes must implement the
      <code class="literal">JDBCPasswordSyntaxTransform</code> interface.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordSyntaxTransformPlugin</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthJDBCAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.11.&nbsp;Hints For the LDAP Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="ldap-module-conf-hints"></a>2.2.11.&nbsp;Hints For the LDAP Authentication Module</h3></div></div></div><p>OpenAM connects to directory servers using Lightweight Directory
   Access Protocol (LDAP). To build an easy-to-manage, high performance, pure
   Java, open source directory service, try
   <a class="link" href="http://opendj.org" target="_top">OpenDJ</a> directory services.</p><a class="indexterm" name="d13107e2730"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthLDAPService</code></p><div class="variablelist"><dl><dt><span class="term">Primary LDAP Server, </span><span class="term">Secondary LDAP Server</span></dt><dd><p>Directory servers generally use built-in data replication for high
      availability. Thus a directory service likely consists of a pool of
      replicas to which OpenAM can connect to retrieve and update directory
      data. You set up primary and secondary servers in case a replica is down
      due to maintenance or to a problem with a particular server.</p><p>Set one primary and optionally one secondary directory server for
      each OpenAM server. For the current OpenAM server, specify each directory
      server as a
      <code class="literal"><em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>
      combination. For other OpenAM servers in the deployment, you can specify
      each directory server as
      <code class="literal"><em class="replaceable"><code>server-name</code></em>|<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>,
      where <em class="replaceable"><code>server-name</code></em> is the Server Name of the
      OpenAM server from the list under Configuration &gt; Servers and
      Sites, and <em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>
      identifies the directory server.</p><p>When authenticating users from a directory service that is remote
      from OpenAM, set both the primary and secondary server values.</p><p>The default port for LDAP is 389. If you are connecting to
      the directory over SSL, the default port for LDAP/SSL is 636.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP Server. Make sure that OpenAM
      can trust the servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      primary is <code class="literal">iplanet-am-auth-ldap-server</code>,
      secondary is <code class="literal">iplanet-am-auth-ldap-server2</code>, and
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better search
      performance. When configuring the module for a particular part of the
      organization, you can perhaps start searches from a specific
      organizational unit such as
      <code class="literal">ou=sales,dc=example,dc=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in the directory, for example to
      manage account lockout, or if the directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the directory.</p><p>The default is <code class="literal">cn=Directory Manager</code>. Make sure
      that password is correct before you logout. If it is incorrect, you will
      be locked out. If this should occur, you can login with the super user DN,
      which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> you set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code>,
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes, Filter, Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">ou=people,dc=example,dc=com</code> with a filter
      <code class="literal">"(mail=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">mail=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>Should you require a more complex filter for performance, you
      add that to the User Search Filter text box. For example, if you search
      on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the
      resulting search filter
      <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)(objectClass=inetOrgPerson))</code>,
      where <em class="replaceable"><code>address</code></em> is the mail address provided
      by the user.</p><p>Scope OBJECT means search only the entry specified as the DN to
      Start User Search, whereas ONELEVEL means search only the entries
      that are directly children of that object. SUBTREE means search the
      entry specified and every entry under it.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">Return User DN to Authenticate</span></dt><dd><p>When enabled, and OpenAM uses the directory service as the user
      store, the module returns the DN rather than the rather than the User ID,
      so the bind for authentication can be completed without a search to
      retrieve the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">LDAP Server Check Interval</span></dt><dd><p>Specifies the number of minutes between checks that the primary
      LDAP server continues to respond.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-server-check</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>This list lets you map (external) attribute names from Active
      Directory to (internal) attribute names used by OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">Minimum Password Length</span></dt><dd><p>Specify the minimum acceptable password length.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-min-password-length</code></p></dd><dt><span class="term">Trust All Server Certificates</span></dt><dd><p>When enabled, blindly trust server certificates, including
      self-signed test certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-trust-all</code></p></dd><dt><span class="term">LDAP Behera Password Policy Support</span></dt><dd><p>When enabled, support interoperability with servers that implement
      the Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-behera-ldap-password-policy-09" target="_top">Password Policy for LDAP Directories</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-behera-password-policy-enabled</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-ldap-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.12.&nbsp;Hints For the Membership Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="membership-module-conf-hints"></a>2.2.12.&nbsp;Hints For the Membership Authentication Module</h3></div></div></div><p>The Membership module permits self-registration for new users. You
   can then have OpenAM create new user profiles in the identity
   repository.</p><a class="indexterm" name="d13107e2995"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthMembershipService</code></p><div class="variablelist"><dl><dt><span class="term">Minimum Password Length</span></dt><dd><p>Specify the minimum acceptable number of characters in the password
      provided during self-registration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-min-password-length</code></p></dd><dt><span class="term">Default User Roles</span></dt><dd><p>Specifies the Distinguished Name (DN) of a role to be assigned to
      a new user whose profile is created. There are no default values. The
      role specified must be within the realm for which the authentication
      process is configured.</p><p>This role can be either an OpenAM or Sun DSEE role, but it cannot
      be a filtered role. If you wish to automatically assign specific services
      to the user, you have to configure the Required Services attribute in
      the User Profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-default-roles</code></p></dd><dt><span class="term">User Status After Registration</span></dt><dd><p>If you choose Inactive, then the new user has no access to services
      until an administrator activates the account.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-membership-default-user-status</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-membership-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.13.&nbsp;Hints For the MSISDN Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="msisdn-module-conf-hints"></a>2.2.13.&nbsp;Hints For the MSISDN Authentication Module</h3></div></div></div><p>The Mobile Station Integrated Services Digital Network (MSISDN)
   authentication module enables non-interactive authentication using a mobile
   subscriber ISDN associated with a terminal such as a mobile phone.
   The module checks the subscriber ISDN against the value found on a user's
   entry in an LDAP directory service.</p><a class="indexterm" name="d13107e3060"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthMSISDNService</code></p><div class="variablelist"><dl><dt><span class="term">Trusted Gateway IP Address</span></dt><dd><p>Specifies a list of IP addresses of trusted clients that can access
      MSIDSN modules. Either restrict the clients allowed to access the MSISDN
      module by add each IPv4 address here, or leave the list empty to allow
      all clients to access the module. If you specify the value
      <code class="literal">none</code>, no clients are allowed access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNTrustedGatewayList</code></p></dd><dt><span class="term">MSISDN Number Argument</span></dt><dd><p>Specifies a list of parameter names that identify which parameters
      to search in the request header or cookie header for the MSISDN number.
      For example, if you define x-Cookie-Param, AM_NUMBER, and COOKIE-ID,
      the MSISDN authentication service checks those parameters for the
      MSISDN number.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNParameterNameList</code></p></dd><dt><span class="term">LDAP Server and Port</span></dt><dd><p>The default port for LDAP is 389. If you are connecting to
      the directory over SSL, the default port for LDAP/SSL is 636.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP. Make sure that OpenAM can trust the
      servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNLdapProviderUrl</code></p></dd><dt><span class="term">LDAP Start Search DN</span></dt><dd><p>Specify the DN of the entry where the search for the user's MSISDN
      number should start.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNBaseDn</code></p></dd><dt><span class="term">Attribute To Use To Search LDAP</span></dt><dd><p>Specify the name of the attribute in the user's profile that
      contains the MSISDN number to search for the user. The default is
      <code class="literal">sunIdentityMSISDNNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserSearchAttribute</code></p></dd><dt><span class="term">LDAP Server Principal User</span></dt><dd><p>If OpenAM must authenticate to the directory server in order to
      search, then specify the bind DN. The default is
      <code class="literal">cn=amldapuser,ou=DSAME Users,dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalUser</code></p></dd><dt><span class="term">LDAP Server Principal Password</span></dt><dd><p>Specify the password corresponding to the bind DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalPasswd</code></p></dd><dt><span class="term">SSL/TLS for LDAP Access</span></dt><dd><p>If you choose to use SSL or TLS for security, then make sure that
      OpenAM can trust the servers' certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUseSsl</code></p></dd><dt><span class="term">MSISDN Header Search Attribute</span></dt><dd><p>Specify the headers to use for searching the request for the
      MSISDN number.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Cookie Header tells OpenAM to search the cookie.</p></li><li class="listitem"><p>Request Header tells OpenAM to search the request header.</p></li><li class="listitem"><p>Request Parameter tells OpenAM to search the request parameters.</p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNHeaderSearch</code></p></dd><dt><span class="term">LDAP Attribute Used to Retrieve User Profile</span></dt><dd><p>Specify the LDAP attribute that is used during a search to return
      the user profile for MSISDN authentication service. The default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserNamingAttribute</code></p></dd><dt><span class="term">Return User DN to DataStore</span></dt><dd><p>Enable this option only when the OpenAM directory is the same as
      the directory configured for MSISDN searches. When enabled, this option
      allows the authentication module to return the DN instead of the User ID.
      OpenAM thus does not need to perform an additional search with the user
      ID to find the user's entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNReturnUserDN</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthMSISDNAuthLevel</code></p></dd></dl></div></div><div class="section" title="2.2.14.&nbsp;Hints For the OAuth 2.0 Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="oauth2-module-conf-hints"></a>2.2.14.&nbsp;Hints For the OAuth 2.0 Authentication Module</h3></div></div></div><p>The OAuth 2.0 authentication module lets OpenAM authenticate clients
   of OAuth resource servers. References in this section are to the
   Internet-Draft <a class="link" href="http://tools.ietf.org/html/draft-ietf-oauth-v2-22" target="_top">The OAuth 2.0
   Authorization Protocol</a>.</p><a class="indexterm" name="d13107e3246"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthOAuthService</code></p><div class="variablelist"><dl><dt><span class="term">Client ID</span></dt><dd><p>OAuth <code class="literal">client_id</code> as described in section 2.1 of
      the Internet-Draft.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-id</code></p></dd><dt><span class="term">Client Secret</span></dt><dd><p>OAuth <code class="literal">client_secret</code> as described in section 2.1
      of the Internet-Draft.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-secret</code></p></dd><dt><span class="term">Authentication Endpoint URL</span></dt><dd><p>URL to the end point handling OAuth authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-service</code></p></dd><dt><span class="term">Access Token Endpoint URL</span></dt><dd><p>URL to the end point handling access tokens as described in section
      3.2 of the Internet-Draft.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-token-service</code></p></dd><dt><span class="term">User Profile Service URL</span></dt><dd><p>User profile URL that returns profile information in JSON
      format.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-user-profile-service</code></p></dd><dt><span class="term">Scope</span></dt><dd><p>Comma separated list of user profile attributes that the application
      requires.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-scope</code></p></dd><dt><span class="term">Proxy URL</span></dt><dd><p>URL to the <code class="filename">oauthproxy.jsp</code> file, by default
      part of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-sso-proxy-url</code></p></dd><dt><span class="term">Account Mapper</span></dt><dd><p>Class implementing account mapping. Default:
      <code class="literal">org.forgerock.openam.authentication.modules.oauth2.DefaultAccountMapper</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper</code></p></dd><dt><span class="term">Account Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes used to find the
      local profile of the authenticated user, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper-configuration</code></p></dd><dt><span class="term">Attribute Mapper</span></dt><dd><p>Class implementing attribute mapping. Default:
      <code class="literal">org.forgerock.openam.authentication.modules.oauth2.DefaultAttributeMapper</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper</code></p></dd><dt><span class="term">Attribute Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes to local user profile
      attributes, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper-configuration</code></p></dd><dt><span class="term">Save attributes in the session</span></dt><dd><p>When enabled, add the mapped attributes to the session saved.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-save-attributes-to-session-flag</code></p></dd><dt><span class="term">Email attribute in OAuth2 Response</span></dt><dd><p>Specifies the attribute identifying email address in the response
      from the profile service in the OAuth provider. This setting is used to
      send an email address with an activation code for accounts created
      dynamically.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-mail-attribute</code></p></dd><dt><span class="term">Create account if it does not exist</span></dt><dd><p>When enabled, if the user profile does not exist, optionally
      retrieve a password and activation code from the user, and then create
      the profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-createaccount-flag</code></p></dd><dt><span class="term">Prompt for password setting and activation code</span></dt><dd><p>When enabled, the user sets a password, receives an activation code
      by email. The user must correctly set both in order for the account to
      be created.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-prompt-password-flag</code></p></dd><dt><span class="term">Map to anonymous user</span></dt><dd><p>When enabled, map the OAuth authenticated user to the anoymous
      user you specify. No account is created, even if Create account if it
      does not exist is enabled.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-map-to-anonymous-flag</code></p></dd><dt><span class="term">Anonymous User</span></dt><dd><p>Specifies an anonymous user that exists in the current realm.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-anonymous-user</code></p></dd><dt><span class="term">OAuth 2.0 Provider logout service</span></dt><dd><p>Specifies the optional URL of the OAuth Provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-service-url</code></p></dd><dt><span class="term">Logout options</span></dt><dd><p>Specifies whether not to log the user out without prompting from
      the OAuth Provider on logout, to log the user out without prompting, or
      to prompt the user regarding whether to logout from the OAuth
      provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-behaviour</code></p></dd><dt><span class="term">SMTP Gateway Implementation class</span></dt><dd><p>Class to interact with the mail server. Default:
      <code class="literal">org.forgerock. openam.authentication.modules.oauth2.DefaultEmailGatewayImpl</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-email-gwy-impl</code></p></dd><dt><span class="term">SMTP host</span></dt><dd><p>Host name of the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-hostname</code></p></dd><dt><span class="term">SMTP port</span></dt><dd><p>SMTP port number for the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-port</code></p></dd><dt><span class="term">SMTP User Name</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the user name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-username</code></p></dd><dt><span class="term">SMTP User Password</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-password</code></p></dd><dt><span class="term">SMTP SSL Enabled</span></dt><dd><p>When enabled, connect to the mail server over SSL. OpenAM must be
      able to trust the SMTP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-ssl_enabled</code></p></dd><dt><span class="term">SMTP From address</span></dt><dd><p>Specifies the message sender address, such as
      <code class="literal">no-reply@example.com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-email-from</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.15.&nbsp;Hints For the RADIUS Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="radius-module-conf-hints"></a>2.2.15.&nbsp;Hints For the RADIUS Authentication Module</h3></div></div></div><p>The Remote Authentication Dial-In User Service (RADIUS) module lets
   OpenAM authenticate users against RADIUS servers.</p><a class="indexterm" name="d13107e3617"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthRadiusService</code></p><div class="variablelist"><dl><dt><span class="term">Server 1</span></dt><dd><p>Specify the IP address or fully qualified domain name of the
      primary RADIUS server. The default is <code class="literal">127.0.0.1</code>
      (localhost loopback).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-server1</code></p></dd><dt><span class="term">Server 2</span></dt><dd><p>Specify the IP address or fully qualified domain name of the
      secondary RADIUS server. The default is <code class="literal">127.0.0.1</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-server2</code></p></dd><dt><span class="term">Shared Secret</span></dt><dd><p>Specify the shared secret for RADIUS authentication. The shared
      secret should be as secure as a well-chosen password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-secret</code></p></dd><dt><span class="term">Port Number</span></dt><dd><p>Specify the RADIUS server port. Default is 1645.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-server-port</code></p></dd><dt><span class="term">Timeout</span></dt><dd><p>Specify how many seconds to wait for the RADIUS server to respond.
      The default value is 3 seconds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-timeout</code></p></dd><dt><span class="term">Health check interval</span></dt><dd><p>Used for failover. Specify how often OpenAM performs a health check
      on a previously unavailable RADIUS server by sending an invalid
      authentication request. Default: 5 minutes</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-radius-healthcheck-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-radius-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.16.&nbsp;Hints For the SAE Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="sae-module-conf-hints"></a>2.2.16.&nbsp;Hints For the SAE Authentication Module</h3></div></div></div><p>The Secure Attribute Exchange (SAE) module lets OpenAM authenticate
   a user who has already authenticated with an entity that can vouch for
   the user to OpenAM, so that OpenAM creates a session for the user.
   This module is useful in virtual federation, where an existing entity
   instructs the local OpenAM instance to use federation protocols to transfer
   authentication and attribute information to a partner application.</p><a class="indexterm" name="d13107e3722"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthSAEService</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
   <code class="literal">sunAMAuthSAEAuthLevel</code></p></div><div class="section" title="2.2.17.&nbsp;Hints For the SecurID Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="securid-module-conf-hints"></a>2.2.17.&nbsp;Hints For the SecurID Authentication Module</h3></div></div></div><p>The SecurID module lets OpenAM authenticate users with RSA
   Authentication Manager software and RSA SecurID authenticators.</p><a class="indexterm" name="d13107e3744"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthSecurIDService</code></p><div class="variablelist"><dl><dt><span class="term">ACE/Server Configuration Path</span></dt><dd><p>Specify the directory in which the SecurID ACE/Server
      <code class="filename">sdconf.rec</code> file is located, which by default is
      expected under the configuration directory for OpenAM, such as
      <code class="filename">$HOME/openam/openam/auth/ace/data</code>. The directory
      must exist before OpenAM can use SecurID authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-securid-server-config-path</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-securid-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.18.&nbsp;Hints For the Windows Desktop SSO Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="desktop-module-conf-hints"></a>2.2.18.&nbsp;Hints For the Windows Desktop SSO Authentication Module</h3></div></div></div><p>The Windows Desktop SSO module uses Kerberos authentication. The user
   presents a Kerberos token to OpenAM through the Simple and Protected
   GSS-API Negotiation Mechanism (SPNEGO) protocol. The Windows Desktop SSO
   authentication module enables desktop single sign on such that a user who
   has already authenticated with a Kerberos Key Distribution Center can
   authenticate to OpenAM without having to provide the login information
   again. Users might need to set up Integrated Windows Authentication in
   Internet Explorer to benefit from single sign on when logged on to
   a Windows desktop.</p><a class="indexterm" name="d13107e3789"></a><a class="indexterm" name="d13107e3794"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthWindowsDesktopSSOService</code></p><div class="variablelist"><dl><dt><span class="term">Service Principal</span></dt><dd><p>Specify the Kerberos principal for authentication in the following
      format.</p><pre class="literallayout">HTTP/<em class="replaceable"><code>host</code></em>.<em class="replaceable"><code>domain</code></em>@<em class="replaceable"><code>dc-domain-name</code></em></pre><p>Here, <em class="replaceable"><code>host</code></em> and
      <em class="replaceable"><code>domain</code></em> correspond to the host and domain names
      of the OpenAM instance, and <em class="replaceable"><code>dc-domain-name</code></em>
      is the domain name of the Windows Kerberos domain controller server.
      The <em class="replaceable"><code>dc-domain-name</code></em> can differ from the domain
      name for OpenAM.</p><p>You set up the account on the Windows domain controller, creating
      a computer account for OpenAM and associating the new account with a
      service provider name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-principal-name</code></p></dd><dt><span class="term">Keytab File Name</span></dt><dd><p>Specify the full path of the keytab file for the Service Principal.
      You generate the keytab file using the Windows <span class="command"><strong>ktpass</strong></span>
      utility.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-keytab-file</code></p></dd><dt><span class="term">Kerberos Realm</span></dt><dd><p>Specify the Kerberos Key Distribution Center realm. For the
      Windows Kerberos service this is the domain controller server domain
      name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kerberos-realm</code></p></dd><dt><span class="term">Kerberos Server Name</span></dt><dd><p>Specify the fully qualified domain name of the Kerberos Key
      Distribution Center server, such as that of the domain controller
      server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kdc</code></p></dd><dt><span class="term">Return Principal with Domain Name</span></dt><dd><p>When enabled, OpenAM automatically returns the Kerberos principal
      with the domain controller's domain name during authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-returnRealm</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-windowsdesktopsso-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.19.&nbsp;Hints For the Windows NT Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="winnt-module-conf-hints"></a>2.2.19.&nbsp;Hints For the Windows NT Authentication Module</h3></div></div></div><p>The Windows NT module lets OpenAM authenticate against a Microsoft
   Windows NT server.</p><p>This module requires that you install a Samba client in a 
   <code class="filename">bin</code> directory under the OpenAM configuration directory
   such as <code class="filename">$HOME/openam/openam/bin</code>.</p><a class="indexterm" name="d13107e3918"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthNTService</code></p><div class="variablelist"><dl><dt><span class="term">Authentication Domain</span></dt><dd><p>Specify the Windows domain name to which users belong.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-domain</code></p></dd><dt><span class="term">Authentication Host</span></dt><dd><p>Specify the NetBIOS name of the Windows NT host to which to
      authenticate users.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-host</code></p></dd><dt><span class="term">Samba Configuration File Name</span></dt><dd><p>Specify the full path to the Samba configuration file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-samba-config-file-name</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-nt-auth-level</code></p></dd></dl></div></div><div class="section" title="2.2.20.&nbsp;Hints For the WSSAuth Authentication Module"><div class="titlepage"><div><div><h3 class="title"><a name="wss-module-conf-hints"></a>2.2.20.&nbsp;Hints For the WSSAuth Authentication Module</h3></div></div></div><p>The Web Service Security (WSSAuth) module lets OpenAM validate a
   user name, password combination received as an authentication token in
   a request from a Web Service Client to a Web Service Provider.</p><a class="indexterm" name="d13107e3981"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthWSSAuthModuleService</code></p><div class="variablelist"><dl><dt><span class="term">User search attribute</span></dt><dd><p>Specify a user attribute to search for a user. Default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserSearchAttribute</code></p></dd><dt><span class="term">User realm</span></dt><dd><p>Specify the realm to which users belong. For the OpenAM Security
      Token Service, this is <code class="literal">/</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebServicesUserRealm</code></p></dd><dt><span class="term">User password attribute</span></dt><dd><p>Specify the password attribute or that of the password equivalent.
      The default is <code class="literal">userPassword</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserPasswordAttribute</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesAuthenticationLevel</code></p></dd></dl></div></div></div><div class="section" title="2.3.&nbsp;Configuring Authentication Chains"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-chains"></a>2.3.&nbsp;Configuring Authentication Chains</h2></div></div></div><a class="indexterm" name="d13107e4052"></a><p>Once you have configured authentication modules, and added the modules
  to the list of module instances, you can configure authentication chains.
  Authentication chains let you handle situations where alternative modules
  are needed, or where a single set of credentials is not sufficient.</p><div class="procedure" title="Procedure&nbsp;2.1.&nbsp;To Create an Authentication Chain"><a name="create-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.1.&nbsp;To Create an Authentication Chain</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to create the authentication chain.</p></li><li class="step" title="Step 2"><p>On the Authentication tab page for the realm, scroll to the bottom
    of the page, and click the New button in the Authentication Chaining
    table.</p></li><li class="step" title="Step 3"><p>Give the new authentication chain a name, and add instances of the
    modules to use in the chain.</p></li><li class="step" title="Step 4"><p>Assign at least criteria (optional, required, requisite, sufficient)
    as described above in <a class="xref" href="#what-is-authn" title="2.1.&nbsp;About Authentication in OpenAM">Section&nbsp;2.1, &#8220;About Authentication in OpenAM&#8221;</a>. You can also
    configure where OpenAM redirects the user upon successful and failed
    authentication, and plug in your post-authentication processing classes
    as necessary.</p></li><li class="step" title="Step 5"><p>If you need modules in the chain to share user credentials, then set
    options for the module.</p><div class="variablelist"><dl><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>
       to allow subsequent modules in the authentication chain to use
       the credentials, such as user name and password, captured by this
       module. (Default: <code class="literal">true</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-store-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-store-shared-state-enabled=true</code>
       to store the captured credentials. Shared state is cleared when the
       user successfully authenticates, quits the chain, or logs out.
       (Default: <code class="literal">false</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-behavior-pattern</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>
       (the default) to try authenticating with the captured password. If
       authentication fails, then OpenAM prompts the user for the credentials
       again.</p><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=useFirstPass</code>
       to authenticate with the captured password. If authentication fails,
       then the module fails.</p></dd></dl></div><p>For example, consider a chain with two modules sharing credentials
    according to the default settings. The first module in the chain has the
    option <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>, and
    criteria <code class="literal">REQUIRED</code>. The second module in the chain has
    options <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>,
    <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>,
    and criteria <code class="literal">REQUIRED</code>. A successful authentication
    sequence happens as follows. The user enters her credentials for the first
    module, successfully authenticating. The first module shares the
    credentials with the second module, successfully authenticating the user
    without prompting again for her credentials, unless the credentials for
    the first module do not successfully authenticate here to the second
    module.</p></li><li class="step" title="Step 6"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;2.2.&nbsp;To Select the Default Chain"><a name="set-default-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.2.&nbsp;To Select the Default Chain</div><p>Before you select the default chain for users, and especially for
   administrators, test the authentication chain first. For example,
   <code class="literal">http://openam.example.com:8080/openam/UI/Login?service=NewChain</code>.
   If you cannot log in, then go back and fix the authentication chain's
   configuration before making it the default.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to set the default authentication chain.</p></li><li class="step" title="Step 2"><p>If necessary, on the Authentication tab page for the realm, adjust
    the drop-down lists for Organization Authentication Configuration and
    Administrator Authentication Configuration to the appropriate
    authentication chains.</p><p>The Organization Authentication Configuration serves when users
    access <code class="literal">/openam/UI/Login</code>.</p><p>The Administrator Authentication Configuration serves when users
    access <code class="literal">/openam/console</code>.</p><p>You can set these independently to separate administrative login
    from user login. For example, you can change the default user chain, but
    leave the default administrator chain as is to avoid locking yourself
    out as administrator. By default, <code class="literal">amadmin</code> can login at
    <code class="literal">/openam/UI/Login</code>. You can change that for your
    deployment.</p></li><li class="step" title="Step 3"><p>Save your work.</p></li></ol></div></div><div class="section" title="2.4.&nbsp;Authenticating To OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authn-from-browser"></a>2.4.&nbsp;Authenticating To OpenAM</h2></div></div></div><p>This section explains how to connect to OpenAM for user authentication
  by adding parameters to the login URL when testing your configuration.</p><p>The base URL to authenticate to OpenAM points to
  <code class="literal">/UI/Login</code> under the deployment URL, such as
  <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>.
  <sup>[<a name="d13107e4190" href="#ftn.d13107e4190" class="footnote">4</a>]</sup> You can, however, specify parameters in the query string
  of the URL to request a specific authentication configuration. For example,
  <code class="literal">http://openam.example.com:8080/openam/UI/Login?module=LDAP</code>
  requests that OpenAM use the LDAP authentication module.</p><div class="variablelist"><p>OpenAM accepts the following parameters in the query string. With
   the exception of <code class="literal">IDToken</code> parameters, use no more than
   one occurrence of each.</p><dl><dt><span class="term">arg=newsession</span></dt><dd><p>Request that OpenAM end the user's current session and start a
     new session.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?arg=newsession</code></p></dd><dt><span class="term">authlevel</span></dt><dd><p>Request that OpenAM authenticate the user using a module with at
     least the specified authentication level that you have configured.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">module</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?authlevel=1</code></p></dd><dt><span class="term">ForceAuth</span></dt><dd><p>If <code class="literal">ForceAuth=true</code>, request that OpenAM force the
     user to authenticate even if she already has a valid session. On
     successful authentication, OpenAM updates the session token.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?ForceAuth=true</code></p></dd><dt><span class="term">goto</span></dt><dd><p>On successful authentication, or successful logout, request that
     OpenAM redirect the user to the specified location. Values must be
     URL encoded.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?goto=http%3A%2F%2Fwww.example.com%2Fsuccess.html</code></p></dd><dt><span class="term">gotoOnFail</span></dt><dd><p>On authentication failure, request that OpenAM redirect the user to
     the specified location. Values must be URL encoded.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?goto=http%3A%2F%2Fwww.example.com%2Ffailure.html</code></p></dd><dt><span class="term">IDToken1, IDToken2, ..., IDTokenN</span></dt><dd><p>Pass the specified credentials as <code class="literal">IDToken</code>
     parameters in the URL. The <code class="literal">IDToken</code> credentials map
     to the fields in the login page for the authentication module, such as
     <code class="literal">IDToken1</code> as user ID and <code class="literal">IDToken2</code>
     as password for basic user name, password authentication. The order
     depends on the callbacks in login page for the module;
     <code class="literal">IDTokenN</code> represents the N<sup>th</sup>
     callback of the login page.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?IDToken1=bjensen&amp;IDToken2=hifalutin</code></p></dd><dt><span class="term">iPSPCookie=yes</span></dt><dd><p>Request that OpenAM return a persistent cookie that remains in the
     browser after the browser is closed, allowing the user to login again
     without being prompted for credentials. This only works if you have
     configured persistent cookie mode for the realm where the user logs
     in.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?iPSPCookie=yes</code></p><p>OpenAM sets an <code class="literal">DProPCookie</code> that persists until
     expiry. The following screen shot shows an example.</p><div class="mediaobject" title="DProPCookie shown in the browser"><a name="figure-persistent-dpropcookie"></a><img src="images/persistent-dpropcookie.png"></div><p>An alternative persistent cookie mechanism extends the lifetime of
     the normal <code class="literal">iPlanetDirectoryPro</code> using the advanced
     server settings, <code class="literal">openam.session.persist_am_cookie</code>
     or <code class="literal">openam.session.allow_persist_am_cookie</code>, and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code>.</p><p>To set the mechanism globally for the server, browse in the OpenAM
     console to Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
     Name</code></em> &gt; Advanced, and then set
     <code class="literal">openam.session.persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds.</p><p>To allow users to use this mechanism on a per-session basis,
     browse in the OpenAM console to Configuration &gt; Servers and
     Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; Advanced, and then
     set <code class="literal">openam.session.allow_persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds. (If the OpenAM .war deployed does not include the console, set
     these properties in the .properties configuration file.) Also configure
     the session properties either globally under Configuration &gt; Global
     &gt; Session &gt; Dynamic Attributes, or per realm under Access Control
     &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Services &gt; Session.
     Then, to request the cookie, use
     <code class="literal">openam.session.persist_am_cookie=Yes</code> as one of the
     query string parameters in the login URL.</p></dd><dt><span class="term">locale</span></dt><dd><p>Request that OpenAM display the user interface in the specified,
     supported locale. Locale can also be set in the user's profile, in
     the HTTP header from her browser, configured in OpenAM, and so on.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?locale=fr</code></p></dd><dt><span class="term">module</span></dt><dd><p>Request that OpenAM use the authentication module instance as
     configured for the realm where the user is authenticating.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?module=DataStore</code></p></dd><dt><span class="term">realm</span></dt><dd><p>Request that OpenAM authenticate the user to the specified realm.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?realm=sales</code></p></dd><dt><span class="term">service</span></dt><dd><p>Request that OpenAM authenticate the user with the specified
     authentication chain.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">user</code>.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?service=ExternalChain</code></p></dd><dt><span class="term">user</span></dt><dd><p>Request that the user, specified by her OpenAM universal ID,
     authenticate according to the chain specified in her profile.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">service</code>.</p><p>Example: <code class="literal">http://openam.example.com:8080/openam/UI/Login?user=admin</code></p></dd></dl></div></div><div class="section" title="2.5.&nbsp;Configuring Account Lockout"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-account-lockout"></a>2.5.&nbsp;Configuring Account Lockout</h2></div></div></div><a class="indexterm" name="d13107e4453"></a><div class="itemizedlist"><p>OpenAM supports two different approaches to <em class="firstterm">account
   lockout</em>, where OpenAM locks an account after repeated
   authentication failures. Lockout works with modules for which users
   can enter a password incorrectly.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Memory lockout locks the user account, keeping track of the locked
    state only in memory, and then unlocking the account after a specified
    delay. Memory lockout is also released when OpenAM restarts.</p></li><li class="listitem"><p>Persistent (physical) lockout sets the user account status to
    <code class="literal">inactive</code> in the user profile. For persistent lockout,
    OpenAM tracks failed authentication attempts by writing to the user
    repository.</p><p>Persistent account lockout works independently of account lockout
    mechanisms in the underlying directory server that serves as the user
    data store.</p></li></ul></div><div class="itemizedlist"><p>You configure account lockout by editing settings for the <a href="../admin-guide/index.html#core-module-conf-hints" class="link">core authentication
   module</a>. Access the settings in OpenAM console under Access Control
   &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; All
   Core Settings..., and then scroll down to the Account Lockout section.
   The inline help explains the settings in detail.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Enable lockout by checking Login Failure Lockout Mode, setting
    the number of attenpts, and setting the lockout interval and
    duration.</p><p>You can also opt to warn users after several consecutive failures,
    or to multiply the lockout duration on each successive lockout.</p></li><li class="listitem"><p>You can set up email notification upon lockout to an administrator
    if OpenAM is configured to send mail. (Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; General &gt; Mail Server.)</p></li><li class="listitem"><p>For persistent lockout, OpenAM sets the value of the user's
    <code class="literal">inetuserstatus</code> profile attribute to
    <code class="literal">inactive</code>. You can also specify another attribute to
    update on lockout. You can further set a non-default attribute on which
    to store the number of failed authentication attempts. When you do store
    the number of failed attempts in the data store, other OpenAM servers
    accessing the user data store can also see the number.</p></li></ul></div><p>If you need to unlock a user's account, find the user under Access
  Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Subjects &gt; User,
  set the user's User Status to Active, and click Save.</p></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d13107e493" href="#d13107e493" class="para">3</a>] </sup>The four terms,
  required, optional, requisite, and sufficient, come from JAAS, the Java
  standard for authentication and authorization.</p></div><div class="footnote"><p><sup>[<a id="ftn.d13107e4190" href="#d13107e4190" class="para">4</a>] </sup>The base URL to logout is similar, for example
  <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;3.&nbsp;Defining Authorization Policies"><div class="titlepage"><div><div><h2 class="title"><a name="chap-authz-policy"></a>Chapter&nbsp;3.&nbsp;Defining Authorization Policies</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#what-is-authz">3.1. About Authorization in OpenAM</a></span></dt><dt><span class="section"><a href="#configure-authz-policy">3.2. Configuring Policies</a></span></dt><dt><span class="section"><a href="#policy-resolution">3.3. How OpenAM Reaches Policy Decisions</a></span></dt><dt><span class="section"><a href="#script-policy">3.4. Managing Policies Outside the Console</a></span></dt><dt><span class="section"><a href="#delegate-policy">3.5. Delegating Policy Management &amp; Decisions</a></span></dt></dl></div><p><em class="firstterm">Authorization</em> is determining whether to grant or
 deny a user access to a resource. <em class="firstterm">Policies</em> define how
 to determine whether to grant or deny access. This chapter describes how to
 configure authorization policies managed by OpenAM.</p><div class="section" title="3.1.&nbsp;About Authorization in OpenAM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-authz"></a>3.1.&nbsp;About Authorization in OpenAM</h2></div></div></div><a class="indexterm" name="d13107e4521"></a><a class="indexterm" name="d13107e4524"></a><p>Applications rely on OpenAM for access management, which breaks down
  into authentication, or determining who is trying to access a resource,
  and authorization, or determining whether to grant or deny access. This
  is because whether access is granted generally depends on what the rules
  about access are, who is trying to gain access, and perhaps some other
  conditions, such as whether the access itself needs to happen over a
  secure channel or what time of day it is. To return to the international
  airport example, the rule may be that passengers with valid passports and
  visa presenting valid plane tickets are allowed through to the gate where the
  plane is waiting to take off, but only under the condition that the plane
  is going to leave soon. (You cannot expect to get to the gate today with a
  scheduled departure for three months from now.)</p><p>To allow OpenAM to determine whether to grant access, you define
  authorization policies. A policy includes <em class="firstterm">rules</em>
  that match what resources a user aims to access in what way and whether to
  grant or deny that access, <em class="firstterm">subjects</em> to whom the
  policy applies, and potentially <em class="firstterm">conditions</em> under
  which the policy applies. When queried about whether to let a user through
  to a protected resource, OpenAM decides to authorize access or not based on
  the applicable policy. OpenAM then communicates its decision to the
  application using OpenAM for access management, or in the common case to the
  policy agent installed in the server where the application runs. The
  application or the agent then enforces the authorization decision from
  OpenAM.</p><p>For example, consider the case where OpenAM protects a web site
  page that users access to update their profiles. An OpenAM policy agent
  installed in the web server intercepts client requests to enforce policy.
  The policy says that authenticated users can access the page to update their
  profiles as long come in over HTTPS, rather than HTTP.</p><p>When a user browses to the page to update her profile, the OpenAM
  policy agent intercepts the request. The policy agent notices that the
  request is to access a protected resource, but the request is coming from a
  user who has not yet logged in and has no authorization to visit the page.
  The agent therefore redirects the user to OpenAM.</p><p>OpenAM receives the redirected user, serving a login page that
  collects her email and password. With the email and password credentials,
  OpenAM authenticates the user, and gives her a session. OpenAM then redirects
  the user to the policy agent, which gets the policy decision from OpenAM for
  the page she wants to access, and grants access to the page. OpenAM and the
  policy agent use cookies set in the user's browser to reference her session.
  While the user has a valid session with OpenAM, she can go away to another
  page in her browser, come back to the update profile page, and gain access
  without having to enter her email and password again.</p><p>Notice how OpenAM and the policy agent handle the access in the
  example. The web site developer can offer a profile page, but the web site
  developer never has to manage login, nor has to handle who can access a page.
  As OpenAM administrator, you can change authentication and authorization
  independently of updates to the web site. You might need to agree with web
  site developers on how OpenAM identifies users so web developers can find
  their particular profiles, or identify the user by her own name when she logs
  in. Yet your organization is now spared from new web site development
  projects when you want to add external access to your Intranet for roaming
  users, open certain of your sites to partners, only let managers access
  certain pages of your HR web site, or allow users already logged in to their
  desktops to visit protected web sites without having to type their user names
  and passwords again.</p><p>When OpenAM denies a request due to a condition that could be corrected
  by further authentication, OpenAM can send advice to the policy agent, and
  the policy agent can then take remedial action. For instance, suppose a
  user comes to a web site having authenticated with an email address and
  password, which is configured as authentication level 0. Had the user
  authenticated over the VPN which relies on one-time password authentication,
  she would have had authentication level 1 in her session. Yet, because she
  has authentication level 0, she currently cannot access the page she wants,
  which requires authentication level 1. OpenAM can send advice in this case,
  prompting the agent or application to redirect her to authenticate again with
  a one-time password, gaining authentication level 1, and thus having OpenAM
  grant her access to the protected page.</p><p>Policies can include <em class="firstterm">response providers</em>.
  Response providers extend HTTP headers with additional information beyond
  an "allow" or "deny" decision. For example, a response provider can return
  a message about why access was denied.</p></div><div class="section" title="3.2.&nbsp;Configuring Policies"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authz-policy"></a>3.2.&nbsp;Configuring Policies</h2></div></div></div><p>An OpenAM authorization policy defines who can access what, under what
  conditions. The OpenAM agents enforcing policy call upon OpenAM to make
  policy decisions. Decisions from OpenAM can be as simple as "allow" or
  "deny." Decisions from OpenAM can alternatively provide additional
  information required for policy enforcement. OpenAM policies use response
  providers to return such additional information.</p><div class="procedure" title="Procedure&nbsp;3.1.&nbsp;To Create a Policy"><a name="create-policy"></a><div class="procedure-title">Procedure&nbsp;3.1.&nbsp;To Create a Policy</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, select Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Policies, then click New Policy...</p></li><li class="step" title="Step 2"><p>Provide at minimum a name for the policy.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;3.2.&nbsp;To Configure a Policy For a Web Site"><a name="configure-url-policy"></a><div class="procedure-title">Procedure&nbsp;3.2.&nbsp;To Configure a Policy For a Web Site</div><a class="indexterm" name="d13107e4575"></a><a class="indexterm" name="d13107e4580"></a><p>Once a policy is created, you can further specify rules, subjects,
   conditions, and response providers.</p><div class="itemizedlist"><p>OpenAM has, by default, three kinds of resources that you can protect
    with a policy.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>A <em class="firstterm">Discovery Service</em>, used in federated access
     management, locates the web service providing the data needed to complete
     an operation. Your policy protects what clients can look up and what they
     can update.</p></li><li class="listitem"><p>A <em class="firstterm">Liberty Personal Profile Service</em>, used in
     federated access management, provides an identity's basic profile
     information. Your policy protects what clients can query and what they
     can modify.</p></li><li class="listitem"><p>A <em class="firstterm">URL Policy Agent</em> protects resources on a
     specific web site or web application. Your policy protects what URLs
     client applications can access with HTTP GET and POST operations.</p></li></ul></div><p>Follow these steps to configure a policy to protect a web site or web
   application.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, select Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Policies &gt; <em class="replaceable"><code>Policy
    Name</code></em> to display the policy to edit.</p></li><li class="step" title="Step 2"><a name="define-rules"></a><p>In the Rules table, click New... to create a rule, identifying
    a URL to protect.</p><ol type="a" class="substeps"><li class="step" title="Step 2.a"><p>Select URL Policy Agent (with resource name), and click Next.</p></li><li class="step" title="Step 2.b"><p>Name the new rule, add the URL to protect in the Resource Name
      field, and set whether to allow or deny HTTP GET and POST requests
      to the URL.</p><p>The URL can include asterisks as wildcards (<code class="literal">*</code>).
      Wildcard matches for rules work as follows.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A <code class="literal">*</code> matches zero or more characters including
        <code class="literal">/</code>, but</p></li><li class="listitem"><p>A <code class="literal">*</code> at the end of the Resource Name
        immediately following <code class="literal">/</code> matches one or more
        characters including <code class="literal">/</code>.</p></li><li class="listitem"><p>Multiple forward slashes do not match a single forward slash, so
        <code class="literal">mult/*/dirs</code> matches
        <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
        does not match <code class="literal">mult/dirs</code>.</p></li><li class="listitem"><p>Trailing forward slashes are not recognized as part of a Resource
        Name. Therefore <code class="literal">http://www.example.com/images//</code> and
        <code class="literal">http://www.example.com/images</code> are equivalent.</p></li></ul></div></li><li class="step" title="Step 2.c"><p>Click Finish.</p><p>The new rule is not yet saved until you click the Save button
      in the Edit Policy screen.</p></li></ol></li><li class="step" title="Step 3"><p>In the Subjects table, click New... to define a subject, identifying
    the users to whom the policy applies.</p><ol type="a" class="substeps"><li class="step" title="Step 3.a"><p>In the Select Subject Type screen, make your selection,
      and then click next.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Authenticated Users refers to users who have authenticated
        with OpenAM, even if they do not have profiles in the realm where
        you define the policy.</p></li><li class="listitem"><p>OpenAM Identity Subject refers to users or groups you can find
        under Access Control &gt; Realm Name &gt; Subjects.</p></li><li class="listitem"><p>Web Services Clients are for federated access management.</p></li></ul></div></li><li class="step" title="Step 3.b"><p>Name the subject.</p></li><li class="step" title="Step 3.c"><p>If you want to apply the policy to everyone but the subjects
      you identified, then select Exclusive.</p><p>For example</p></li><li class="step" title="Step 3.d"><p>If you selected OpenAM Identity Subject, use the Filter section
      to find and add to your list the subjects to whom to apply the
      policy.</p></li><li class="step" title="Step 3.e"><p>Click Finish.</p></li></ol></li><li class="step" title="Step 4"><p>In the Conditions table, click New... to create a condition,
    constraining the circumstances under which the policy applies.</p><ol type="a" class="substeps"><li class="step" title="Step 4.a"><p>Select the Condition Type from the list.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Active Session Time lets you make the policy depend on how
        long the user's session has been active, and even to terminate the
        session if deemed too old, such that the user must authenticate
        again.</p></li><li class="listitem"><p>Authentication by Module Chain lets you make the policy depend
        on the realm where the user authenticated, and on the authentication
        chain used to authenticate.</p></li><li class="listitem"><p>Authentication by Module Instance lets you make the policy depend
        on the realm where the user authenticated, and on the authentication
        module used to authenticate, as well as setting timeouts for
        application authentication.</p></li><li class="listitem"><p>Authentication Level (greater than or equal to) lets you
        make the policy depend on the realm where the user authenticated,
        and on a minimum acceptable authentication level.</p></li><li class="listitem"><p>Authentication Level (less than or equal to) lets you
        make the policy depend on the realm where the user authenticated,
        and on a maximum acceptable authentication level.</p></li><li class="listitem"><p>Authentication to a Realm lets you make the policy depend on
        the realm where the user authenticated.</p></li><li class="listitem"><p>Current Session Properties lets you make the policy depend on
        attributes set in the user's session.</p></li><li class="listitem"><p>Identity Membership lets you make the policy depend on a list
        of OpenAM subjects that you select, and whether the user belongs to
        the list of users or is a member of a group you selected.</p></li><li class="listitem"><p>IP Address/DNS Name lets you apply the policy to clients in
        specific IP address ranges or coming from a particular DNS
        domain.</p></li><li class="listitem"><p>LDAP Filter Condition lets you make the policy depend on whether
        the user's entry can be found using the LDAP search filter you specify
        in the directory configured for the policy service, which by default
        is the identity repository. See Configuration &gt; Global &gt; Policy
        Configuration &gt; Realm Attributes &gt; Primary LDAP Server.</p><p>Alternatively you can set this for the realm under Access Control
        &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Services &gt; Policy
        Configuration.</p></li><li class="listitem"><p>Resource/Environment/IP Address lets you make the policy apply
        using a complex condition such as whether the user is making a request
        from the localhost and has authenticated with the LDAP authentication
        module.</p></li><li class="listitem"><p>Time (day, date, time, and timezone) lets you make the policy
        depend on when the policy is evaluated.</p></li></ul></div></li><li class="step" title="Step 4.b"><p>Based on the Condition Type you choose, configure the condition,
      and then click Finish.</p></li></ol></li><li class="step" title="Step 5"><p>In the Response Providers table, click New... to set up a response
    provider that adds attributes retrieved from the user entry in the identity
    repository into the headers of the request at policy decision time.</p><ol type="a" class="substeps"><li class="step" title="Step 5.a"><p>Name the provider.</p></li><li class="step" title="Step 5.b"><p>Add static attributes having the form
      <code class="literal"><em class="replaceable"><code>attribute</code></em>=<em class="replaceable"><code>value</code></em></code>.</p></li><li class="step" title="Step 5.c"><p>Add dynamic attributes having the form
      <code class="literal"><em class="replaceable"><code>responseAttr</code></em>=<em class="replaceable"><code>repoAttr</code></em></code>,
      where <em class="replaceable"><code>responseAttr</code></em> is the attribute name
      to be put into the header of the request, and
      <em class="replaceable"><code>repoAttr</code></em> is the attribute name used in the
      identity repository.</p></li><li class="step" title="Step 5.d"><p>Click Finish.</p></li></ol></li><li class="step" title="Step 6"><p>Save your work.</p></li></ol></div></div><div class="section" title="3.3.&nbsp;How OpenAM Reaches Policy Decisions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="policy-resolution"></a>3.3.&nbsp;How OpenAM Reaches Policy Decisions</h2></div></div></div><p>OpenAM has to match policies to resources to take policy decisions.
  For a policy to match, the resource has to match a resources identified in
  a rule. The user making the request has to match a subject. Furthermore, at
  least one condition for each condition type has to be satisfied.</p><p>If more than one policy matches, OpenAM has to reconcile differences.
  When multiple policies match, the order in which OpenAM uses them to make a
  policy decision is not deterministic. However, a deny decision overrides an
  allow decision, and so by default once OpenAM reaches a deny decision its
  stops checking further policies. (If you want OpenAM to continue checking
  despite the deny, see Configuration &gt; Global &gt; Policy Configuration
  &gt; Continue Evaluation on Deny Decision.)</p></div><div class="section" title="3.4.&nbsp;Managing Policies Outside the Console"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="script-policy"></a>3.4.&nbsp;Managing Policies Outside the Console</h2></div></div></div><a class="indexterm" name="d13107e4817"></a><a class="indexterm" name="d13107e4822"></a><p>When you first create policies, the OpenAM console helps you to get
  started quickly. Yet, when you have many policies to manage you might find
  it easier to script operations, starting from policies originally created
  in the console, then exported to XML.</p><div class="procedure" title="Procedure&nbsp;3.3.&nbsp;To Export Policies From the Console"><a name="export-policy-to-xml"></a><div class="procedure-title">Procedure&nbsp;3.3.&nbsp;To Export Policies From the Console</div><p>You can export policies created in the console to an XML Policies
   document.</p><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm list-policies</strong></span> command.</p><div class="screen">$ ssoadm
 list-policies
 --realm "/"
 --adminid amadmin
 --password-file /tmp/pwd.txt 

Policy definitions were returned under realm, /.
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE Policies 
PUBLIC "-//OpenSSO Policy Administration DTD//EN"
"jar://com/sun/identity/policy/policyAdmin.dtd"&gt;

&lt;!-- extracted from realm, / --&gt;
&lt;Policies&gt;
&lt;Policy name="URL Policy" createdby="id=amadmin,ou=user,o=openam"
 lastmodifiedby="id=amadmin,ou=user,o=openam" creationdate="1312553988059"
 lastmodifieddate="1315403023466" referralPolicy="false" active="true" &gt;
&lt;Rule name="Allow GET with parameters"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*?*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Rule name="Allow GET and POST"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="POST" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Subjects name="Subjects:1312553593870WmIuFvI=" description=""&gt;
&lt;Subject name="All Authenticated Users" type="AuthenticatedUsers"
 includeType="inclusive"&gt;
&lt;/Subject&gt;
&lt;/Subjects&gt;
&lt;/Policy&gt;
&lt;/Policies&gt;</div></li></ul></div><div class="procedure" title="Procedure&nbsp;3.4.&nbsp;To Import Policies Using the Command Line"><a name="import-policy-from-xml"></a><div class="procedure-title">Procedure&nbsp;3.4.&nbsp;To Import Policies Using the Command Line</div><p>In a production environment where you manage operations using scripts
   rather than the console, use exported, file-based policies edited for your
   needs, and then import the policies using <span class="command"><strong>ssoadm</strong></span>.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Create your XML policy file.</p><div class="screen">$ cat policy.xml
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE Policies 
PUBLIC "-//OpenSSO Policy Administration DTD//EN"
"jar://com/sun/identity/policy/policyAdmin.dtd"&gt;
&lt;!-- New policy, same as the old policy --&gt;
&lt;Policies&gt;
&lt;Policy name="New Policy" referralPolicy="false" active="true" &gt;
&lt;Rule name="Allow GET with parameters"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*?*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Rule name="Allow GET and POST"&gt;
&lt;ServiceName name="iPlanetAMWebAgentService" /&gt;
&lt;ResourceName name="http://www.example.com/ching/*" /&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="POST" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;AttributeValuePair&gt;
&lt;Attribute name="GET" /&gt;
&lt;Value&gt;allow&lt;/Value&gt;
&lt;/AttributeValuePair&gt;
&lt;/Rule&gt;
&lt;Subjects name="Subjects" description="Everybody authenticated"&gt;
&lt;Subject name="All Authenticated Users" type="AuthenticatedUsers"
 includeType="inclusive"&gt;
&lt;/Subject&gt;
&lt;/Subjects&gt;
&lt;/Policy&gt;
&lt;/Policies&gt;</div></li><li class="step" title="Step 2"><p>Use the <span class="command"><strong>ssoadm create-policies</strong></span> command.</p><div class="screen">$ ssoadm
 create-policies
 --realm "/"
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --xmlfile policy.xml

Policies were created under realm, /.</div></li></ol></div></div><div class="section" title="3.5.&nbsp;Delegating Policy Management &amp; Decisions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="delegate-policy"></a>3.5.&nbsp;Delegating Policy Management &amp; Decisions</h2></div></div></div><a class="indexterm" name="d13107e4866"></a><a class="indexterm" name="d13107e4871"></a><p>You use a <em class="firstterm">referral</em> to delegate policy
  management, and to delegate policy decision making.</p><p>Referrals are covered in the <a href="../admin-guide/index.html#chap-realms" class="link">chapter on
  Realms</a>.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;4.&nbsp;Defining Entitlements"><div class="titlepage"><div><div><h2 class="title"><a name="chap-entitlements"></a>Chapter&nbsp;4.&nbsp;Defining Entitlements</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-entitlements">4.1. About Entitlements</a></span></dt><dt><span class="section"><a href="#managing-entitlements-cli">4.2. Managing Entitlements on the Command Line</a></span></dt></dl></div><p>This chapter covers how to define entitlements for fine-grained
 authorization to access particular resources.</p><div class="section" title="4.1.&nbsp;About Entitlements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-entitlements"></a>4.1.&nbsp;About Entitlements</h2></div></div></div><a class="indexterm" name="d13107e4895"></a><a class="indexterm" name="d13107e4898"></a><a class="indexterm" name="d13107e4901"></a><p>OpenAM <em class="firstterm">entitlements</em> serve much the same purpose
  as OpenAM policies, defining who has access to what, under what conditions.
  You can define entitlements through the OpenAM console, and OpenAM stores and
  manages policies centrally using the standard eXtensible Access Control
  Markup Language (XACML). You can access OpenAM entitlements and policy
  decisions using the RESTful web interface, for even lighter weight policy
  enforcement than with OpenAM policy agents.</p><div class="itemizedlist"><p>The OpenAM entitlements service uses XACML terminology to refer to
   the different points dealing with policy.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>OpenAM serves as a <em class="firstterm">policy administration point</em>
    (PAP) where you define, store, and manage policies. OpenAM uses the
    configuration directory to store entitlements, whereas profiles are stored
    in the identity repository (user data store).</p></li><li class="listitem"><p>OpenAM also serves as a <em class="firstterm">policy decision point</em>
    (PDP), evaluating policies and issuing authorization decisions, and as a
    <em class="firstterm">policy information point</em>, providing the information
    needed for authorization decisions.</p></li><li class="listitem"><p>OpenAM policy agents act as <em class="firstterm">policy enforcement
    points</em>, obtaining decisions from PDPs to protect access to
    resources.</p></li></ul></div><p>Entitlement policies define who has who has access to what, under what
  conditions, in the same way that other OpenAM policies define policy.
  Entitlement policies do let you define virtual subjects and subjects based on
  attribute lookup to determine who has access to the resources.</p><p>Entitlements apply for <em class="firstterm">applications</em>, which in
  this context mean protected resources that share a common set of actions
  and related policies. For example, the web agent application protects web
  resources accessed through HTTP GET and POST actions using a web policy
  agent to enforce decisions to allow or deny access. You can also define more
  specific applications as demonstrated by the examples delivered with
  OpenAM.</p><p><em class="firstterm">Delegations</em> grant specific users privileges
  to manage policies.</p></div><div class="section" title="4.2.&nbsp;Managing Entitlements on the Command Line"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="managing-entitlements-cli"></a>4.2.&nbsp;Managing Entitlements on the Command Line</h2></div></div></div><a class="indexterm" name="d13107e4947"></a><a class="indexterm" name="d13107e4952"></a><a class="indexterm" name="d13107e4957"></a><p>To manage entitlements, you can use the <span class="command"><strong>ssoadm</strong></span>
  command. The <span class="command"><strong>ssoadm</strong></span> command provides several other
  subcommands for managing entitlements in addition to those shown here.</p><div class="procedure" title="Procedure&nbsp;4.1.&nbsp;To Export Policies"><a name="export-entitlements-policy-cli"></a><div class="procedure-title">Procedure&nbsp;4.1.&nbsp;To Export Policies</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm list-xacml</strong></span> command to export
    policies.</p><div class="screen">$ ssoadm list-xacml --realm / --adminid amadmin --password-file /tmp/pwd.txt

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;PolicySet PolicyCombiningAlgId="urn:oasis:names:tc:xacml:3.0:
 rule-combining-algorithm:deny-overrides" Version="2011.10.07.12.22.04.705"
 PolicySetId="/:2011.10.07.12.22.04.704" xmlns="urn:oasis:names:tc:xacml:3.0:
 core:schema:cd-1"&gt;
    &lt;Target/&gt;
... other policies ...
    &lt;Policy RuleCombiningAlgId="urn:oasis:names:tc:xacml:3.0:
 rule-combining-algorithm:deny-overrides" Version="2011.10.07.11.51.27.444"
 PolicyId="New Policy"&gt;
... policy content here ...
    &lt;/Policy&gt;
&lt;/PolicySet&gt;</div></li></ul></div><div class="procedure" title="Procedure&nbsp;4.2.&nbsp;To Import an Entitlements Policy"><a name="import-entitlements-policy-cli"></a><div class="procedure-title">Procedure&nbsp;4.2.&nbsp;To Import an Entitlements Policy</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm create-xacml</strong></span> command to import
    a policy.</p><div class="screen">$ ssoadm
 create-xacml
 --realm /
 --xmlfile policy.xml
 --adminid amadmin
 --password-file /tmp/pwd.txt</div></li></ul></div><div class="procedure" title="Procedure&nbsp;4.3.&nbsp;To Create an Application"><a name="create-entitlements-application-cli"></a><div class="procedure-title">Procedure&nbsp;4.3.&nbsp;To Create an Application</div><ul class="procedure"><li class="step" title="Step 1"><p>Use the <span class="command"><strong>ssoadm create-appl</strong></span> command to create an
    application type.</p><div class="screen">$ cat application.txt
resources=http://myapp.example.com:80/*
subjects=com.sun.identity.admin.model.IdRepoUserViewSubject
subjects=com.sun.identity.admin.model.VirtualViewSubject
subjects=com.sun.identity.admin.model.OrViewSubject
subjects=com.sun.identity.admin.model.AndViewSubject
conditions=com.sun.identity.admin.model.DateRangeCondition
conditions=com.sun.identity.admin.model.DaysOfWeekCondition
conditions=com.sun.identity.admin.model.IpRangeViewCondition
conditions=com.sun.identity.admin.model.DnsNameViewCondition
conditions=com.sun.identity.admin.model.TimeRangeCondition
conditions=com.sun.identity.admin.model.TimezoneCondition
conditions=com.sun.identity.admin.model.OrViewCondition
conditions=com.sun.identity.admin.model.AndViewCondition
conditions=com.sun.identity.admin.model.NotViewCondition
entitlementCombiner=com.sun.identity.entitlement.DenyOverride
$ ssoadm
 create-appl
 --realm /
 --applicationtype iPlanetAMWebAgentService
 --name myApp
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --datafile application.txt

myApp was created.</div></li></ul></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;5.&nbsp;Configuring Realms"><div class="titlepage"><div><div><h2 class="title"><a name="chap-realms"></a>Chapter&nbsp;5.&nbsp;Configuring Realms</h2></div></div></div><a class="indexterm" name="d13107e5007"></a><p>This chapter shows how to configure OpenAM <em class="firstterm">realms</em>,
 which are used to group configuration and identities together. For example,
 you might have one realm for OpenAM administrators and agents, and another
 realm for users. In this two-realm setup, the OpenAM administrator can
 login to the administrative realm to manage the services, but cannot
 authenticate as OpenAM administrator to the realm that protects web sites
 with HR and financial information.</p><p>OpenAM associates a realm with at least one identity repository and
 authentication process. OpenAM also associates the realm with authorization
 policies and entitlements for users, and privileges for administrators. Each
 realm can have its own configuration for services.</p><p>When you first configure OpenAM, OpenAM sets up the default
 <code class="literal">/ (Top Level Realm)</code>, containing OpenAM configuration
 data, and allowing authentication using the identity repository you choose
 during initial configuration. The top level realm might hold the overall
 configuration for Example.com for instance.</p><p>You create new realms to subdivide authentication, and authorization,
 and to delegate management of sub-realms. For example, your organization
 might require separate realms for payroll, human resources, and IT management
 domains and their applications.</p><div class="procedure" title="Procedure&nbsp;5.1.&nbsp;To Create a New Realm"><a name="create-new-realm"></a><div class="procedure-title">Procedure&nbsp;5.1.&nbsp;To Create a New Realm</div><a class="indexterm" name="d13107e5027"></a><p>You can create a new realm through the OpenAM console as described
  below, or by using the <span class="command"><strong>ssoadm create-realm</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to the OpenAM console as OpenAM Administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>On the Access Control tab &gt; Realms table, click New... to open
   the New Realm page, where you configure the realm.</p><p>If you configure the realm to be inactive, then users cannot use
   it to authenticate or be granted access to protected resources.</p><p>Realm/DNS aliases must be meaningful in DNS terms, such as
   <code class="literal">.hr.example.com</code> or
   <code class="literal">pay.example.com</code>.</p></li><li class="step" title="Step 3"><p>Save your work after defining the configuration for the new realm.</p></li></ol></div><p>You configure a realm through the console starting from the Access
 Control tab &gt; Realms table. By default the new realm inherits configuration
 from the global configuration. The default identity repository is the one you
 choose when configuring OpenAM after deployment. The default authentication
 mechanism corresponds to that identity repository as well. You can, however,
 constrain authentication to rely on different data stores, and set policy
 for agents to define authorization in the realm.</p><div class="procedure" title="Procedure&nbsp;5.2.&nbsp;To Delegate Administration"><a name="delegate-realm-administration"></a><div class="procedure-title">Procedure&nbsp;5.2.&nbsp;To Delegate Administration</div><a class="indexterm" name="d13107e5064"></a><p>You can delegate administration in a realm. OpenAM grants
  administrative capabilities to members of groups having administrative
  privileges.</p><p>You can grant privileges through the OpenAM console as described
  below, or by using the <span class="command"><strong>ssoadm add-privileges</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab &gt; Realms table, click the realm
   for which you want to delegate administration to view the realm
   configuration.</p></li><li class="step" title="Step 2"><p>On the Privileges tab, click the name of the group to whom you intend
   to grant access.</p></li><li class="step" title="Step 3"><p>Select the administrative privileges to delegate for the realm,
   and then save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;5.3.&nbsp;To Delegate Policy Management"><a name="delegate-policy-to-realm"></a><div class="procedure-title">Procedure&nbsp;5.3.&nbsp;To Delegate Policy Management</div><a class="indexterm" name="d13107e5086"></a><p>When you delegate access management for a realm, you might want to
  delegate policy management. You can delegate policy management by creating a
  referral.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Policies, where
   <em class="replaceable"><code>Realm Name</code></em> is the realm <span class="emphasis"><em>from
   which</em></span> you intend to delegate policy.</p></li><li class="step" title="Step 2"><p>Click the New Referral... button in the Policies table.</p></li><li class="step" title="Step 3"><p>In the New Referral screen, provide at minimum a name for the
   referral.</p></li><li class="step" title="Step 4"><p>Set up rules to identify the resources to which the referral
   applies.</p><p>You specify only a rule Name, and a Resource Name for the resource to
   manage, so that the realm administrator has access to set up the policy
   for the specified resource.</p></li><li class="step" title="Step 5"><p>Set up referrals to identify the realms <span class="emphasis"><em>to which</em></span>
   to delegate policy management.</p><p>You can delegate to peer realms or sub realms (child realms), but
   not to parent realms.</p></li><li class="step" title="Step 6"><p>Save your work.</p><p>At this point you can let the realm administrator know that she
   can create policies in her realm for the resources you specified in the
   rules of the referral.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;5.4.&nbsp;To Configure a Data Store for a Realm"><a name="realm-data-store"></a><div class="procedure-title">Procedure&nbsp;5.4.&nbsp;To Configure a Data Store for a Realm</div><p>When you first set up a realm, the new realm inherits the data store
  from the parent realm. Yet, if your administrators are in one realm and
  your users in another, your new child realm might retrieve users from
  a different data store.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Data Store.</p></li><li class="step" title="Step 2"><p>Click New... in the Data Stores table to create a data store
   profile, and to provide the information needed to connect to the
   data store.</p></li><li class="step" title="Step 3"><p>In the first screen, name the data store and select the type
   of data store to use.</p><p>Most data stores are directory services, though the Database
   Repository lets you connect to an SQL database through JDBC.</p></li><li class="step" title="Step 4"><p>In the second screen, provide information on how to connect
   to your data store, and then click Finish to save your work.</p><p>See the <a href="../admin-guide/index.html#chap-auth-services" class="link">chapter on
   authentication</a> for hints on connecting to
   <a href="../admin-guide/index.html#ad-module-conf-hints" class="link">Active Directory</a>,
   <a href="../admin-guide/index.html#ldap-module-conf-hints" class="link">LDAP directory</a>, and
   <a href="../admin-guide/index.html#jdbc-module-conf-hints" class="link">JDBC</a> data
   sources.</p></li><li class="step" title="Step 5"><p>Click the Subjects tab, and make sure the connection to your
   new data store is working, by searching for a known identity.</p><p>By default the Subjects list only retrieves 100 entries from the
   data store. Narrow your search if you do not see the identity you are
   looking for in the list.</p></li><li class="step" title="Step 6"><p>If you no longer need the connection to the inherited data store
   <span class="emphasis"><em>in this realm</em></span>, then you can delete its entry in the
   Data Stores table.</p><p>Also, once you change the data store for a realm, you might
   opt to change the <a href="../admin-guide/index.html#configure-authn-modules" class="link">authentication module
   configuration</a> as described in the chapter on authentication to use
   your realm data store, rather than the inherited settings.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;5.5.&nbsp;To Configure a Web or J2EE Agent For Login to a Realm"><a name="agent-redirect-login-to-realm"></a><div class="procedure-title">Procedure&nbsp;5.5.&nbsp;To Configure a Web or J2EE Agent For Login to a Realm</div><p>You might choose to configure your agent in one realm, yet
  have your real users authenticate through another realm. In this case,
  you want your agents to redirect users to authenticate to their realm,
  rather than the agent realm.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; <em class="replaceable"><code>Web
   or J2EE Agent Type</code></em> &gt; <em class="replaceable"><code>Agent Name</code></em>
   &gt; OpenAM Services.</p></li><li class="step" title="Step 2"><p>Add login and logout URLs, including the realm in the query
   string.</p><div class="itemizedlist"><p>For example, if your <em class="replaceable"><code>Realm Name</code></em> is
    <code class="literal">hr</code>, and you access OpenAM at
    <code class="literal">http://openam.example.com:8080/openam</code>:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Login URL:
     <code class="literal">http://openam.example.com:8080/openam/UI/Login?realm=hr</code></p></li><li class="listitem"><p>Logout URL:
     <code class="literal">http://openam.example.com:8080/openam/UI/Logout?realm=hr</code></p></li></ul></div></li><li class="step" title="Step 3"><p>Save your work.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;6.&nbsp;Configuring Policy Agent Profiles"><div class="titlepage"><div><div><h2 class="title"><a name="chap-agents"></a>Chapter&nbsp;6.&nbsp;Configuring Policy Agent Profiles</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#gateway-or-policy-agent">6.1. Identity Gateway or Policy Agent?</a></span></dt><dt><span class="section"><a href="#kinds-of-agent-profiles">6.2. Kinds of Agent Profiles</a></span></dt><dt><span class="section"><a href="#create-agent-profiles">6.3. Creating Agent Profiles</a></span></dt><dt><span class="section"><a href="#configure-web-policy-agent">6.4. Configuring Web Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-j2ee-policy-agent">6.5. Configuring J2EE Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-wsp-policy-agent">6.6. Configuring Web Service Provider Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-wsc-policy-agent">6.7. Configuring Web Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-disco-policy-agent">6.8. Configuring Discovery Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-sts-policy-agent">6.9. Configuring Security Token Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-22-policy-agent">6.10. Configuring Version 2.2 Policy Agents</a></span></dt><dt><span class="section"><a href="#configure-agent-auth">6.11. Configuring Agent Authenticators</a></span></dt></dl></div><a class="indexterm" name="d13107e5230"></a><p>You install policy agents in web servers and web application containers
 to enforce access policies OpenAM applies to protected web sites and web
 applications. Policy agents depend on OpenAM for all authentication and
 authorization decisions. Their primary responsibility consists in enforcing
 what OpenAM decides in a way that is unobtrusive to the user. In organizations
 with many servers, you might well install many policy agents.</p><p>Policy agents can have local configurations where they are installed,
 but usually you store all policy agent configuration information in the
 OpenAM configuration store, defining policy agent profiles for each, and then
 you let the policy agents access their profiles through OpenAM such that you
 manage all agent configuration changes centrally. This chapter describes how
 to set up policy agent profiles in OpenAM for centralized configuration.</p><div class="section" title="6.1.&nbsp;Identity Gateway or Policy Agent?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gateway-or-policy-agent"></a>6.1.&nbsp;Identity Gateway or Policy Agent?</h2></div></div></div><a class="indexterm" name="d13107e5240"></a><p>OpenAM includes both the <a class="link" href="http://resources.apexidentity.com/projects/docs/wiki" target="_top">Identity
  Gateway</a> and also a variety of policy agents. Both the Identity Gateway
  and also the policy agents enforce policy, redirecting users to authenticate
  when necessary, and controlling access to protected resources. Yet, the
  Identity Gateway runs as a self-contained reverse proxy located between the
  users and the protected applications. Policy agents are installed into the
  servers where applications run, intercepting requests in that context.</p><p>The Identity Gateway works well with applications where you
  want to protect access, but you cannot install a policy agent.
  For example, you might have a web application running in a server for
  which no policy agent has been developed. Or you might be protecting an
  application where you simply cannot install a policy agent.</p><p>Policy agents have the advantage, where you can install them,
  of sitting within your existing server infrastructure. Once you have
  agents installed into the servers with web applications or sites to protect,
  then you can manage their configurations centrally from OpenAM.</p><p>Of course, for organizations with both servers where you can install
  policy agents and also applications that you must protect without touching
  the server, you can use policy agents on the former and the Identity
  Gateway for the latter.</p></div><div class="section" title="6.2.&nbsp;Kinds of Agent Profiles"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="kinds-of-agent-profiles"></a>6.2.&nbsp;Kinds of Agent Profiles</h2></div></div></div><p>When you open the OpenAM console to configure agents for the top level
  realm, you see a number of different kinds to choose. Web and J2EE policy
  agents are the most common, requiring the least integration effort.</p><a class="indexterm" name="d13107e5259"></a><div class="variablelist"><dl><dt><span class="term">Web</span></dt><dd><p>You install web agents in web servers to protect web sites.</p></dd><dt><span class="term">J2EE</span></dt><dd><p>You install J2EE agents in web application containers to protect
     web applications.</p></dd><dt><span class="term">Web Service Provider</span></dt><dd><p>WSP agents are for use with Web Services Security.</p></dd><dt><span class="term">Web Service Client</span></dt><dd><p>WSC agents are for use with Web Services Security.</p></dd><dt><span class="term">Discovery</span></dt><dd><p>The Discovery Service agent has the trust authority configuration
     that OpenAM uses to communicate with a Liberty Discovery Service.</p></dd><dt><span class="term">STS Client</span></dt><dd><p>The Security Token Service client agent is for securing
     requests to the Security Token Service.</p></dd><dt><span class="term">2.2 Agents</span></dt><dd><p>Version 2.2 web and J2EE policy agents hold their configuration
     locally, connecting to OpenAM with a user name, password combination.
     This kind of agent is provided for backwards compatibility.</p></dd><dt><span class="term">Agent Authenticator</span></dt><dd><p>The agent authenticator can read agent profiles by connecting
     to OpenAM with a user name, password combination, but unlike the
     agent profile administrator, cannot change agent configuration.</p></dd></dl></div></div><div class="section" title="6.3.&nbsp;Creating Agent Profiles"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create-agent-profiles"></a>6.3.&nbsp;Creating Agent Profiles</h2></div></div></div><p>This section concerns creating agent profiles, and creating groups
  that let agents inherit settings when you have many agents with nearly
  the same profile settings.</p><div class="procedure" title="Procedure&nbsp;6.1.&nbsp;To Create an Agent Profile"><a name="create-agent-profile"></a><div class="procedure-title">Procedure&nbsp;6.1.&nbsp;To Create an Agent Profile</div><p>To create a new web or J2EE policy agent profile, you need a name and
   password for the agent, and the URLs to OpenAM and the application to
   protect.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step" title="Step 2"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Agent table.</p></li><li class="step" title="Step 3"><p>Provide a name for the agent, and also the URLs to OpenAM and to
    the application to protect, then click Create.</p><div class="mediaobject" title="Creating a new web agent profile"><a name="figure-create-agent"></a><img src="images/create-agent.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-create-agent.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-create-agent.html" target="longdesc">D</a>]</span></div></div></li><li class="step" title="Step 4"><p>After creating the agent profile, you can click the link to the
    new profile to adjust and export the configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;6.2.&nbsp;To Create an Agent Profile Group &amp; Inherit Settings"><a name="create-agent-group"></a><div class="procedure-title">Procedure&nbsp;6.2.&nbsp;To Create an Agent Profile Group &amp; Inherit Settings</div><a class="indexterm" name="d13107e5346"></a><p>Agent profile groups let you set up multiple agents to inherit
   settings from the group. To create a new web or J2EE agent profile group,
   you need a name and the URL to the OpenAM server in which you store the
   profile.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step" title="Step 2"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Group table.</p><p>After creating the group profile, you can click the link to the new
    group profile to fine-tune or export the configuration.</p></li><li class="step" title="Step 3"><p>Inherit group settings by selecting your agent profile, and then
    selecting the group name in the Group drop-down list near the top of
    the profile page.</p><p>You can then adjust inheritance by clicking Inheritance Settings
    on the agent profile page.</p></li></ol></div></div><div class="section" title="6.4.&nbsp;Configuring Web Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-web-policy-agent"></a>6.4.&nbsp;Configuring Web Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e5369"></a><p>When you create a web policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.<sup>[<a name="d13107e5376" href="#ftn.d13107e5376" class="footnote">5</a>]</sup></p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the agent for the changes to take effect.</p><div class="section" title="6.4.1.&nbsp;Configuring Web Policy Agent Global Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-global-props"></a>6.4.1.&nbsp;Configuring Web Policy Agent Global Properties</h3></div></div></div><p>This section covers global web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist" title="Profile properties"><a name="web-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured web agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notfication messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Enable Notifications</span></dt><dd><p>If enabled, the agent receives policy updates from the OpenAM
      notification mechanism to maintain its internal cache. If disabled, the
      agent must poll OpenAM for changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notification.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Deployment URI Prefix</span></dt><dd><p>The default value is
      <code class="literal"><em class="replaceable"><code>agent-root-URL</code></em>/amagent</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code></p><p>Hot swap: no</p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in minutes to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 60.</p><p>Property: <code class="literal">com.sun.identity.agents.config.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Configuration Cleanup Interval</span></dt><dd><p>Interval in minutes to cleanup old agent configuration entries
      unless they are referenced by current requests. Default: 30.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cleanup.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p></dd></dl></div><div class="variablelist" title="General properties"><a name="web-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">SSO Only Mode</span></dt><dd><p>When enabled, agent only enforces authentication (SSO), but no
      policies for authorization.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.only</code></p></dd><dt><span class="term">Resources Access Denied URL</span></dt><dd><p>The URL of the customized access denied page. If no value is
      specified (default), then the agent returns an HTTP status of 403
      (Forbidden).</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.url</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> or even <code class="literal">All</code> for
      fine-grained detail.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.level</code></p><p>You can set the level in the configuration file by module using
      the format
      <code class="literal"><em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>][,<em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>]]*</code>,
      where <em class="replaceable"><code>module</code></em> is one of
      <code class="literal">AuthService</code>, <code class="literal">NamingService</code>,
      <code class="literal">PolicyService</code>, <code class="literal">SessionService</code>,
      <code class="literal">PolicyEngine</code>, <code class="literal">ServiceEngine</code>,
      <code class="literal">Notification</code>, <code class="literal">PolicyAgent</code>,
      <code class="literal">RemoteLog</code>, or <code class="literal">all</code>,
      and <em class="replaceable"><code>level</code></em> is one of the following.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">0</code>: Disable logging from specified module</p><p>At this level the agent nevertheless logs messages having the
        level value <code class="literal">always</code>.</p></li><li class="listitem"><p><code class="literal">1</code>: Log error messages</p></li><li class="listitem"><p><code class="literal">2</code>: Log warning and error messages</p></li><li class="listitem"><p><code class="literal">3</code>: Log info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">4</code>: Log debug, info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">5</code>: Like level 4, but with even more debugging messages</p></li></ul></div><p>When you omit <em class="replaceable"><code>level</code></em>, the agent uses the
      default level, which is the level associated with the
      <code class="literal">all</code> module.</p></dd><dt><span class="term">Agent Debug File Rotation</span></dt><dd><p>When enabled, rotate the debug file when specified file size is
      reached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.rotate</code></p></dd><dt><span class="term">Agent Debug File Size</span></dt><dd><p>Debug file size in bytes beyond which the log file is rotated. The
      minimum is 3000 bytes, and lower values are reset to 3000 bytes. Default:
      10 MB.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.size</code></p></dd></dl></div><div class="variablelist" title="Audit properties"><a name="web-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Remote Audit Log Interval</span></dt><dd><p>Periodic interval in minutes in which audit log messages are sent
      to the remote log file.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.log.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p></dd></dl></div><div class="variablelist" title="Fully Qualified Domain Name Checking properties"><a name="web-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources. Without this value, the web server can fail to
      start, thus you set the property on agent installation, and only change
      it when absolutely necessary.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.com</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.com</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.com</code>.</p><p>Invalid FQDN values can cause the web server to become unusable
      or render resources inaccessible.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section" title="6.4.2.&nbsp;Configuring Web Policy Agent Application Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-application-props"></a>6.4.2.&nbsp;Configuring Web Policy Agent Application Properties</h3></div></div></div><p>This section covers application web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist" title="Not Enforced URL Processing properties"><a name="web-agent-not-enforced-url-properties"></a><div class="variablelist-title">Not Enforced URL Processing properties</div><dl><dt><span class="term">Ignore Path Info for Not Enforced URLs</span></dt><dd><p>When enabled, the path info and query are stripped from the
      request URL before being compared with the URLs of the not enforced list
      for those URLs containing a wildcard character. This prevents a user
      from accessing <code class="literal">http://host/index.html</code> by requesting
      <code class="literal">http://host/index.html/hack.gif</code> when the not enforced
      list includes <code class="literal">http://host/*.gif</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info.for.not.enforced.list</code></p></dd><dt><span class="term">Not Enforced URLs</span></dt><dd><p>List of URLs for which no authentication is required. You can use
      wildcards to define a pattern for a URL.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URL. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URL.</p><p>Do not mix <code class="literal">*</code> and <code class="literal">-*-</code> in the
      same URL.</p><p>Examples include
      <code class="literal">http://www.example.com/logout.html</code>,
      <code class="literal">http://www.example.com/images/*</code>,
      <code class="literal">http://www.example.com/css/*-*</code>, and
      <code class="literal">http://www.example.com/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">http://www.example.com/images//</code> and
      <code class="literal">http://www.example.com/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url</code></p></dd><dt><span class="term">Invert Not Enforced URLs</span></dt><dd><p>Only enforce not enforced list of URLs. In other words, enforce
      policy only for those URLs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.invert</code></p></dd><dt><span class="term">Fetch Attributes for Not Enforced URLs</span></dt><dd><p>When enabled, the agent fetches profile attributes for not
      enforced URLs by doing policy evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.attributes.enable</code></p></dd></dl></div><div class="variablelist" title="Not Enforced IP Processing properties"><a name="web-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing properties</div><dl><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p></dd><dt><span class="term">CIDR Client IP Specification (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, web policy agents with this property set to
      <code class="literal">cidr</code> can use IPv4 netmasks and IP ranges instead of
      wildcards as values for Not Enforced Client IP addresses.</p><p>When the parameter is defined, wildcards are ignored in Not
      Enforced Client IP settings. Instead, you can use settings such as
      those shown in the following examples.</p><div class="variablelist"><dl><dt><span class="term">Netmask Example</span></dt><dd><p>To disable policy agent enforcement for addresses in
         192.168.1.0 to 192.168.1.255, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.0/24</pre><p>Currently the policy agent stops evaluating properties after
         reaching an invalid netmask in the list.</p></dd><dt><span class="term">IP Range Example</span></dt><dd><p>To disable policy agent enforcement for addresses between
         192.168.1.10 to 192.168.1.127 inclusive, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.10-192.168.1.127</pre></dd></dl></div><p><code class="literal">com.forgerock.agents.config.notenforced.ip.handler</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client IP Validation</span></dt><dd><p>When enabled, validate that the subsequent browser requests come
      from the same IP address that the SSO token is initially issued
      against.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.validation.enable</code></p></dd></dl></div><div class="variablelist" title="Profile Attributes Processing properties"><a name="web-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are LDAP attribute names, and Map Values
      are HTTP header names.</p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Response Attributes Processing properties"><a name="web-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Session Attributes Processing properties"><a name="web-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken] =CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Common Attributes Fetching Processing properties"><a name="web-agent-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl><dt><span class="term">Attribute Multi Value Separator</span></dt><dd><p>Specifies separator for multiple values. Applies to all types of
      attributes such as profile, session and response attributes. Default:
      <code class="literal">|</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.multi.value.separator</code></p></dd></dl></div></div><div class="section" title="6.4.3.&nbsp;Configuring Web Policy Agent SSO Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-sso-props"></a>6.4.3.&nbsp;Configuring Web Policy Agent SSO Properties</h3></div></div></div><p>This section covers SSO web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist" title="Cookie properties"><a name="web-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.name</code></p><p>Hot swap: no</p></dd><dt><span class="term">Cookie Security</span></dt><dd><p>When enabled, the agent marks cookies secure, sending them only
      if the communication channel is secure.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.secure</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTPOnly Cookies (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.5, web policy agents with this property set to
      <code class="literal">true</code> mark cookies as HTTPOnly, to prevent scripts
      and third-party programs from accessing the cookies.</p><p>Property: <code class="literal">com.sun.identity.cookie.httponly</code></p></dd></dl></div><div class="variablelist" title="Cross Domain SSO properties"><a name="web-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservelet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">Cookies Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO. If this property is left blank, then
      the fully qualified domain name of the cookie for the agent server
      is used to set the cookie domain, meaning that a host cookie rather than
      a domain cookie is set.</p><p>To set the list to <code class="literal">.example.com</code>, and
      <code class="literal">.example.net</code> using the configuration file property,
      include the following.</p><pre class="literallayout">com.sun.identity.agents.config.cdsso.cookie.domain[0]=.example.com 
com.sun.identity.agents.config.cdsso.cookie.domain[1]=.example.net</pre><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.domain</code></p></dd></dl></div><div class="variablelist" title="Cookie Reset properties"><a name="web-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies in the format
      <code class="literal"><em class="replaceable"><code>name</code></em>[=<em class="replaceable"><code>value</code></em>][;Domain=<em class="replaceable"><code>value</code></em>]</code>.</p><p>Concrete examples include the following with two list items
      configured.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">LtpaToken</code>, corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[0]=LtpaToken</code>.
        The default domain is taken from FQDN Default.</p></li><li class="listitem"><p><code class="literal">token=value;Domain=subdomain.domain.com</code>,
        corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[1]= token=value;Domain=subdomain.domain.com</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset</code></p></dd></dl></div></div><div class="section" title="6.4.4.&nbsp;Configuring Web Policy Agent OpenAM Services Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-services-props"></a>6.4.4.&nbsp;Configuring Web Policy Agent OpenAM Services Properties</h3></div></div></div><p>This section covers OpenAM services web agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist" title="Login URL properties"><a name="web-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so then can authenticate.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">OpenAM Conditional Login URL (Not yet in OpenAM console)</span></dt><dd><p>This takes the incoming request URL to match, a comma, and then a
      comma-separated list of URLs to which to redirect incoming users.</p><p>Property: <code class="literal">com.forgerock.agents.conditional.login.url</code></p></dd><dt><span class="term">Agent Connection Timeout</span></dt><dd><p>Timeout period in seconds for an agent connection with OpenAM auth
      server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.connection.timeout</code></p></dd><dt><span class="term">Polling Period for Primary Server</span></dt><dd><p>Interval in minutes, agent polls to check the primary server is up
      and running. Default: 5.</p><p>Property: <code class="literal">com.sun.identity.agents.config.poll.primary.server</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Logout URL properties"><a name="web-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd></dl></div><div class="variablelist" title="Agent Logout URL properties"><a name="web-agent-agent-logout-url-properties"></a><div class="variablelist-title">Agent Logout URL properties</div><dl><dt><span class="term">Logout URL List</span></dt><dd><p>List of application logout URLs, such as
      <code class="literal">http://www.example.com/logout.html</code>.
      The user is logged out of the OpenAM session when these URLs are accessed.
      When using this property, specify a value for the Logout Redirect URL
      property.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.logout.url</code></p></dd><dt><span class="term">Logout Cookies List for Reset</span></dt><dd><p>Cookies to be reset upon logout in the same format as the cookie
      reset list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.cookie.reset</code></p></dd><dt><span class="term">Logout Cookies List for Reset</span></dt><dd><p>User gets redirected to this URL after logout. Specify this
      property alongside a Logout URL List.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.redirect.url</code></p></dd></dl></div><div class="variablelist" title="Policy Client Service properties"><a name="web-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl><dt><span class="term">Policy Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">SSO Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an SSO entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">User ID Parameter</span></dt><dd><p>Agent sets this value for User Id passed in the session from
      OpenAM to the REMOTE_USER server variable. Default: UserToken.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param</code></p></dd><dt><span class="term">User ID Parameter Type</span></dt><dd><p>User ID can be fetched from either SESSION and LDAP attributes.
      Default: <code class="literal">SESSION</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param.type</code></p></dd><dt><span class="term">Fetch Policies from Root Resource</span></dt><dd><p>When enabled, the agent caches the policy decision of the
      resource and all resources from the root of the resource down. For
      example, if the resource is <code class="literal">http://host/a/b/c</code>, then
      the root of the resource is <code class="literal">http://host/</code>. This setting
      can be useful when a client is expect to access multiple resources on the
      same path. Yet, caching can be expensive if very many policies are
      defined for the root resource.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fetch.from.root.resource</code></p><p>Hot swap: no</p></dd><dt><span class="term">Retrieve Client Hostname</span></dt><dd><p>When enabled, get the client hostname through DNS reverse lookup
      for use in policy evaluation. This setting can impact performance.</p><p>Property: <code class="literal">com.sun.identity.agents.config.get.client.host.name</code></p></dd><dt><span class="term">Policy Clock Skew</span></dt><dd><p>Time in seconds used adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Use this property to adjust for small time differences encountered
      despite use of a time synchronization service. When this property is
      not set and agent time is greater than OpenAM server time, the agent
      can make policy calls to the OpenAM server before the policy subject
      cache has expired, or you can see infinite redirection occur.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.clock.skew</code></p><p>Hot swap: no</p></dd></dl></div></div><div class="section" title="6.4.5.&nbsp;Configuring Web Policy Agent Miscellaneous Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-misc-props"></a>6.4.5.&nbsp;Configuring Web Policy Agent Miscellaneous Properties</h3></div></div></div><p>This section covers miscellaneous web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist" title="Advice Handling properties"><a name="web-agent-advice-handling-properties"></a><div class="variablelist-title">Advice Handling properties</div><dl><dt><span class="term">Composite Advice Handling (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, when set to <code class="literal">true</code>, the agent
      sends composite advice in the query (GET request) instead of sending it
      through a POST request.</p><p>Property: <code class="literal">com.sun.am.use_redirect_for_advice</code></p></dd></dl></div><div class="variablelist" title="Locale properties"><a name="web-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl><dt><span class="term">Agent Locale</span></dt><dd><p>The default locale for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Anonymous user properties"><a name="web-agent-anonymous-user-properties"></a><div class="variablelist-title">Anonymous user properties</div><dl><dt><span class="term">Anonymous User</span></dt><dd><p>Enable or disable REMOTE_USER processing for anonymous users.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.enable</code></p></dd></dl></div><div class="variablelist" title="Cookie Processing properties"><a name="web-agent-cookie-processing-properties"></a><div class="variablelist-title">Cookie Processing properties</div><dl><dt><span class="term">Encode special chars in Cookies</span></dt><dd><p>When enabled, encode special chars in cookie by URL encoding.
      This is useful when profile, session, and response attributes contain
      special characters, and the attributes fetch mode is set to
      <code class="literal">HTTP_COOKIE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.cookie.special.chars.enable</code></p></dd><dt><span class="term">Profile Attributes Cookie Prefix</span></dt><dd><p>Sets cookie prefix in the attributes headers. Default:
      <code class="literal">HTTP_</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.prefix</code></p></dd><dt><span class="term">Profile Attributes Cookie Maxage</span></dt><dd><p>Maximum age in seconds of custom cookie headers. Default:
      300.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.maxage</code></p></dd></dl></div><div class="variablelist" title="URL Handling properties"><a name="web-agent-url-handling-properties"></a><div class="variablelist-title">URL Handling properties</div><dl><dt><span class="term">URL Comparison Case Sensitivity Check</span></dt><dd><p>When enabled, enforce case sensitivity in both policy and
      not enforced URL evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.url.comparison.case.ignore</code></p></dd><dt><span class="term">Encode URL's Special Characters</span></dt><dd><p>When enabled, encodes the URL which has special characters before
      doing policy evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.url.special.chars.enable</code></p></dd></dl></div><div class="variablelist" title="Ignore Naming URL properties"><a name="web-agent-ignore-naming-url-properties"></a><div class="variablelist-title">Ignore Naming URL properties</div><dl><dt><span class="term">Ignore Preferred Naming URL in Naming Request</span></dt><dd><p>When enabled, do not send a preferred naming URL in the naming request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.preferred.naming.url</code></p></dd></dl></div><div class="variablelist" title="Ignore Server Check properties"><a name="web-agent-ignore-server-check-properties"></a><div class="variablelist-title">Ignore Server Check properties</div><dl><dt><span class="term">Ignore Server Check</span></dt><dd><p>When enabled, do not check whether OpenAM is up before doing a
      302 redirect.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.server.check</code></p></dd></dl></div><div class="variablelist" title="Ignore Path Info properties"><a name="web-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><p>For example, if the not enforced list includes
      <code class="literal">http://host/*.gif</code>, then stripping path info from the
      request URI prevents access to <code class="literal">http://host/index.html</code>
      by using <code class="literal">http://host/index.html?hack.gif</code>.</p><p>However, when a web server is configured as a reverse proxy for a
      J2EE application server, the path info is interpreted to map a resource
      on the proxy server rather than the application server. This prevents the
      not enforced list or the policy from being applied to the part of the URI
      below the application server path if a wildcard character is used.</p><p>For example, if the not enforced list includes
      <code class="literal">http://host/webapp/servcontext/*</code> and the request URL is
      <code class="literal">http://host/webapp/servcontext/example.jsp</code>, the path
      info is <code class="literal">/servcontext/example.jsp</code> and the resulting
      request URL with path info stripped is
      <code class="literal">http://host/webapp/</code>, which does not match the
      not enforced list. Thus when this property is enabled, path info is
      not stripped from teh request URL even if there is a wildcard in the not
      enforced list or policy.</p><p>Make sure therefore when this property is enabled that there is
      nothing following the wildcard in the not enforced list or policy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist" title="Multi-byte Enable properties"><a name="web-agent-multi-byte-properties"></a><div class="variablelist-title">Multi-byte Enable properties</div><dl><dt><span class="term">Native Encoding of Profile Attributes</span></dt><dd><p>When enabled, the agent encodes the LDAP header values in the
      default encoding of operating system locale. When disabled, the agent
      uses UTF-8.</p><p>Property: <code class="literal">com.sun.identity.agents.config.convert.mbyte.enable</code></p></dd></dl></div><div class="variablelist" title="Goto Parameter Name properties"><a name="web-agent-goto-parameter-name-properties"></a><div class="variablelist-title">Goto Parameter Name properties</div><dl><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
      = http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcserlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd></dl></div><div class="variablelist" title="Deprecated Agent properties"><a name="web-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Agent properties</div><dl><dt><span class="term">Anonymous User Default Value</span></dt><dd><p>User ID of unauthenticated users. Default:
      <code class="literal">anonymous</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.id</code></p></dd></dl></div></div><div class="section" title="6.4.6.&nbsp;Configuring Web Policy Agent Advanced Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-advanced-props"></a>6.4.6.&nbsp;Configuring Web Policy Agent Advanced Properties</h3></div></div></div><p>This section covers advanced web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist" title="Client Identification properties"><a name="web-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies are load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist" title="Load Balancer properties"><a name="web-agent-lb-properties"></a><div class="variablelist-title">Load Balancer properties</div><dl><dt><span class="term">Load Balancer Setup</span></dt><dd><p>Enable if a load balancer is used for OpenAM services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.balancer.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Override Request URL Protocol</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.protocol</code></p></dd><dt><span class="term">Override Request URL Host</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.host</code></p></dd><dt><span class="term">Override Request URL Port</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.port</code></p></dd><dt><span class="term">Override Notification URL</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.notification.url</code></p></dd></dl></div><div class="variablelist" title="Post Data Preservation properties"><a name="web-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation. This feature is available in
      the Apache 2.2, Microsoft IIS 6, Microsoft IIS 7, and Sun Java System
      Web Server web policy agents as of version 3.0.3.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">POST Data Entries Cache Period</span></dt><dd><p>POST cache entry lifetime in minutes. Default: 10.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postcache.entry.lifetime</code></p></dd><dt><span class="term">POST Data Preservation Cookie Name (Not yet in OpenAM Console)</span></dt><dd><p>When HTTP POST data preservation is enabled, override properties
      are set to true, and the agent is behind a load balancer, then this
      property sets the name and value of the sticky cookie to use.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.lbcookie</code></p></dd></dl></div><div class="variablelist" title="Sun Java System Proxy Server properties"><a name="web-agent-sjsws-properties"></a><div class="variablelist-title">Sun Java System Proxy Server properties</div><dl><dt><span class="term">Override Proxy Server's Host and Port</span></dt><dd><p>When enabled ignore the host and port settings.</p><p>Property: <code class="literal">com.sun.identity.agents.config.proxy.override.host.port</code></p></dd></dl></div><div class="variablelist" title="Microsoft IIS Server properties"><a name="web-agent-iis-properties"></a><div class="variablelist-title">Microsoft IIS Server properties</div><dl><dt><span class="term">Authentication Type</span></dt><dd><p>The agent should normally perform authentication, so this is not
      required. If necessary, set to <code class="literal">none</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.auth.type</code></p><p>Hot swap: no</p></dd><dt><span class="term">Replay Password Key</span></dt><dd><p>DES key for decrypting the basic authentication password in the
      session.</p><p>Property: <code class="literal">com.sun.identity.agents.config.replaypasswd.key</code></p></dd><dt><span class="term">Filter Priority</span></dt><dd><p>The loading priority of filter, DEFAULT, HIGH, LOW, or MEDIUM.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.filter.priority</code></p></dd><dt><span class="term">Filter configured with OWA</span></dt><dd><p>Enable if the IIS agent filter is configured for OWA.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable</code></p></dd><dt><span class="term">Change URL Protocol to https</span></dt><dd><p>Enable to avoid IE6 security pop-ups.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.change.protocol</code></p></dd><dt><span class="term">Idle Session Timeout Page URL</span></dt><dd><p>URL of the local idle session timeout page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.session.timeout.url</code></p></dd></dl></div><div class="variablelist" title="IBM Lotus Domino Server properties"><a name="web-agent-domino-properties"></a><div class="variablelist-title">IBM Lotus Domino Server properties</div><dl><dt><span class="term">Check User in Domino Database</span></dt><dd><p>When enabled, the agent checks whether the user exists in the
      Domino name database.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.check.name.database</code></p></dd><dt><span class="term">Use LTPA token</span></dt><dd><p>Enable if the agent needs to use LTPA Token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.enable</code></p></dd><dt><span class="term">LTPA Token Cookie Name</span></dt><dd><p>The name of the cookie that contains the LTPA token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.cookie.name</code></p></dd><dt><span class="term">LTPA Token Configuration Name</span></dt><dd><p>The configuration name that the agent uses in order to employ the
      LTPA token mechanism.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.config.name</code></p></dd><dt><span class="term">LTPA Token Organization Name</span></dt><dd><p>The organization name to which the LTPA token belongs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.org.name</code></p></dd></dl></div><div class="variablelist" title="Custom properties"><a name="web-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div class="section" title="6.5.&nbsp;Configuring J2EE Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-j2ee-policy-agent"></a>6.5.&nbsp;Configuring J2EE Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e7126"></a><p>When you create a J2EE policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.<sup>[<a name="d13107e7133" href="#ftn.d13107e7133" class="footnote">6</a>]</sup></p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the agent.</p><div class="section" title="6.5.1.&nbsp;Configuring J2EE Policy Agent Global Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-global-props"></a>6.5.1.&nbsp;Configuring J2EE Policy Agent Global Properties</h3></div></div></div><p>This section covers global web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist" title="Profile properties"><a name="j2ee-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured web agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in seconds to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 3600 (1 hour).</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.interval</code></p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notfication messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p></dd></dl></div><div class="variablelist" title="General properties"><a name="j2ee-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Agent Filter Mode</span></dt><dd><p>Specifies how the agent filters requests to protected web
      applications. The global value functions as a default, and applies for
      protected applications that do not have their own filter settings.
      Valid settings include the following.</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">ALL</code></span></dt><dd><p>Enforce both the J2EE policy defined for the web container where
         the protected application runs, and also OpenAM policies.</p><p>When setting the filter mode to <code class="literal">ALL</code>, set the
         Map Key, but do not set any Corresponding Map Value.</p></dd><dt><span class="term"><code class="literal">J2EE_POLICY</code></span></dt><dd><p>Enforce only the J2EE policy defined for the web container where
         the protected application runs.</p></dd><dt><span class="term"><code class="literal">NONE</code></span></dt><dd><p>Do not enforce policies to protect resources. In other words,
         turn off access management. Not for use in production.</p></dd><dt><span class="term"><code class="literal">SSO_ONLY</code></span></dt><dd><p>Enforce only authentication, not policies.</p></dd><dt><span class="term"><code class="literal">URL_POLICY</code></span></dt><dd><p>Enforce only OpenAM, URL resource based policies.</p><p>When setting the filter mode to <code class="literal">URL_POLICY</code>,
         set the Map Key to the application name and the Corresponding Map
         Value to <code class="literal">URL_POLICY</code>.</p></dd></dl></div><p>Property: <code class="literal">com.sun.identity.agents.config.filter.mode</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTP Session Binding</span></dt><dd><p>When enabled the agent invalidates the HTTP session upon login
      failure, when the user has no SSO session, or when the principal user
      name does not match the SSO user name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.httpsession.binding</code></p></dd><dt><span class="term">Login Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum
      number of failed login attempts allowed during a single browser session,
      after which the agent blocks requests from the user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.attempt.limit</code></p></dd><dt><span class="term">Custom Response Header</span></dt><dd><p>Specifies the custom headers the agent sets for the client. The
      key is the header name. The value is the header value.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.header</code></p><p>For example,
      <code class="literal">com.sun.identity.agents.config.response.header[Cache-Control]=no-cache</code>.</p></dd><dt><span class="term">Redirect Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum number
      of redirects allowed for a single browser session, after which the agent
      blocks the request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.attempt.limit</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> or even <code class="literal">All</code> for
      fine-grained detail.</p><p>Property: <code class="literal">com.iplanet.services.debug.level</code></p></dd></dl></div><div class="variablelist" title="User Mapping properties"><a name="j2ee-user-mapping-properties"></a><div class="variablelist-title">User Mapping properties</div><dl><dt><span class="term">User Mapping Mode</span></dt><dd><p>Specifies the mechanism used to determine the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.mapping.mode</code></p></dd><dt><span class="term">User Attribute Name</span></dt><dd><p>Specifies the data store attribute that contains the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.attribute.name</code></p></dd><dt><span class="term">User Principal Flag</span></dt><dd><p>When enabled, OpenAM uses both the principal user name and also the
      user ID for authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.principal</code></p></dd><dt><span class="term">User Token Name</span></dt><dd><p>Specifies the session property name for the authenticated user's
      ID. Default: <code class="literal">UserToken</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.token</code></p></dd></dl></div><div class="variablelist" title="Audit properties"><a name="j2ee-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p></dd></dl></div><div class="variablelist" title="Fully Qualified Domain Name Checking properties"><a name="j2ee-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.com</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.com</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.com</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section" title="6.5.2.&nbsp;Configuring J2EE Policy Agent Application Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-application-props"></a>6.5.2.&nbsp;Configuring J2EE Policy Agent Application Properties</h3></div></div></div><p>This section covers application web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist" title="Login Processing properties"><a name="j2ee-agent-login-processing-properties"></a><div class="variablelist-title">Login Processing properties</div><dl><dt><span class="term">Login Form URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-login-page</code> element, such as
      <code class="literal">/myApp/jsp/login.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.form</code></p></dd><dt><span class="term">Login Error URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-error-page</code> element, such as
      <code class="literal">/myApp/jsp/error.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.error.uri</code></p></dd><dt><span class="term">Use Internal Login</span></dt><dd><p>When enabled, the agent uses the internal default content file
      for the login.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.use.internal</code></p></dd><dt><span class="term">Login Content File Name</span></dt><dd><p>Full path name to the file containing custom login content when
      Use Internal Login is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.content.file</code></p></dd></dl></div><div class="variablelist" title="Logout Processing properties"><a name="j2ee-agent-logout-processing-properties"></a><div class="variablelist-title">Logout Processing properties</div><dl><dt><span class="term">Application Logout Handler</span></dt><dd><p>Specifies how logout handlers map to specific applications. The key
      is the web application name. The value is the logout handler class.</p><p>To set a global logout handler for applications without other
      logout handlers defined, leave the key empty and set the value to the
      global logout handler class name,
      <code class="literal">GlobalApplicationLogoutHandler</code>.</p><p>To set a logout handler for a specific application, set the key
      to the name of the application, and the value to the logout handler class
      name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.application.handler</code></p></dd><dt><span class="term">Application Logout URI</span></dt><dd><p>Specifies request URIs that indicate logout events. The key is the
      web application name. The value is the application logout URI.</p><p>To set a global logout URI for applications without other logout
      URIs defined, leave the key empty and set the value to the global logout
      URI, <code class="literal">/logout.jsp</code>.</p><p>To set a logout URI for a specific application, set the key to the
      name of the application, and the value to the application logout
      page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.uri</code></p></dd><dt><span class="term">Logout Request Parameter</span></dt><dd><p>Specifies parameters in the HTTP request that indicate logout
      events. The key is the web application name. The value is the logout
      request parameter.</p><p>To set a global logout request parameter for applications without
      other logout request parameters defined, leave the key empty and set the
      value to the global logout request parameter,
      <code class="literal">logoutparam</code>.</p><p>To set a logout request parameter for a specific application, set
      the key to the name of the application, and the value to the application
      logout request parameter, such as <code class="literal">logoutparam</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.request.param</code></p></dd><dt><span class="term">Logout Introspect Enabled</span></dt><dd><p>When enabled, the agent checks the HTTP request body to locate the
      Logout Request Parameter you set.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.introspect.enabled</code></p></dd><dt><span class="term">Logout Entry URI</span></dt><dd><p>Specifies the URIs to return after successful logout and subsequent
      authentication. The key is the web application name. The value is the
      URI to return.</p><p>To set a global logout entry URI for applications without other
      logout entry URIs defined, leave the key empty and set the value to the
      global logout entry URI, <code class="literal">/welcome.html</code>.</p><p>To set a logout entry URI for a specific application, set the key
      to the name of the application, and the value to the application
      logout entry URI, such as <code class="literal">/myApp/welcome.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.entry.uri</code></p></dd></dl></div><div class="variablelist" title="Access Denied URI Processing properties"><a name="j2ee-agent-access-denied-uri-processing-properties"></a><div class="variablelist-title">Access Denied URI Processing properties</div><dl><dt><span class="term">Resource Access Denied URI</span></dt><dd><p>Specifies the URIs of custom pages to return when access is denied.
      The key is the web application name. The value is the custom URI.</p><p>To set a global custom access denied URI for applications without
      other custom access denied URIs defined, leave the key empty and set the
      value to the global custom access denied URI,
      <code class="literal">/sample/accessdenied.html</code>.</p><p>To set a custom access denied URI for a specific application, set
      the key to the name of the application, and the value to the application
      access denied URI, such as <code class="literal">/myApp/accessdenied.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.uri</code></p></dd></dl></div><div class="variablelist" title="Not Enforced URI Processing properties"><a name="j2ee-agent-not-enforced-uri-properties"></a><div class="variablelist-title">Not Enforced URI Processing properties</div><dl><dt><span class="term">Not Enforced URIs</span></dt><dd><p>List of URIs for which no authentication is required, and the agent
      does not protect access. You can use wildcards to define a pattern for a
      URI.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URI. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URI.</p><p>Do not mix <code class="literal">*</code> and <code class="literal">-*-</code> in the
      same URI.</p><p>Examples include <code class="literal">/logout.html</code>,
      <code class="literal">/images/*</code>, <code class="literal">/css/*-*</code>, and
      <code class="literal">/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">/images//</code> and
      <code class="literal">/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri</code></p></dd><dt><span class="term">Invert Not Enforced URLs</span></dt><dd><p>Only enforce not enforced list of URLs. In other words, enforce
      policy only for those URLs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.invert</code></p></dd><dt><span class="term">Not Enforced URIs Cache Enabled</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced URI
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.enable</code></p></dd><dt><span class="term">Not Enforced URIs Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      URIs cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.size</code></p></dd><dt><span class="term">Refresh Session Idle Time</span></dt><dd><p>When enabled, the agent reset the session idle time when granting
      access to a not enforced URI, prolonging the time before the user must
      authenticate again.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.refresh.session.idletime</code></p></dd></dl></div><div class="variablelist" title="Not Enforced IP Processing properties"><a name="j2ee-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing properties</div><dl><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p></dd><dt><span class="term">Not Enforced IP Invert List</span></dt><dd><p>Only enforce the not enforced list of IP addresses. In other words,
      enforce policy only for those client addresses and patterns specified in
      the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.invert</code></p></dd><dt><span class="term">Not Enforced IP Cache Flag</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced IP
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.enable</code></p></dd><dt><span class="term">Not Enforced IP Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      addresses cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.size</code></p></dd></dl></div><div class="variablelist" title="Profile Attributes Processing properties"><a name="j2ee-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, profile attributes are part
      of the HTTP request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are LDAP attribute names, and Map Values
      are HTTP header names.</p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Response Attributes Processing properties"><a name="j2ee-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, response attributes are part
      of the HTTP response.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Common Attributes Fetching Processing properties"><a name="j2ee-agent-common-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl><dt><span class="term">Cookie Separator Character</span></dt><dd><p>Specifies the separator for multiple values of the same attribute
      when it is set as a cookie. Default: <code class="literal">|</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.separator</code></p></dd><dt><span class="term">Fetch Attribute Date Format</span></dt><dd><p>Specifies the <code class="literal">java.text.SimpleDateFormat</code> of date
      attribute values used when an attribute is set in an HTTP header. Default:
      <code class="literal">EEE, d MMM yyyy hh:mm:ss z</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.date.format</code></p></dd><dt><span class="term">Attribute Cookie Encode</span></dt><dd><p>When enabled, attribute values are URL encoded before being set as
      a cookie.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.encode</code></p></dd></dl></div><div class="variablelist" title="Session Attributes Processing properties"><a name="j2ee-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, session attributes are part
      of the HTTP response.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken]=CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist" title="Privilege Attributes Processing properties"><a name="j2ee-agent-privilege-attributes-properties"></a><div class="variablelist-title">Privilege Attributes Processing properties</div><dl><dt><span class="term">Default Privileged Attribute</span></dt><dd><p>Specifies the list of privileged attributes granted to all users
      with a valid OpenAM session, such as
      <code class="literal">AUTHENTICATED_USERS</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.default.privileged.attribute</code></p></dd><dt><span class="term">Default Privileged Attribute</span></dt><dd><p>Specifies the list of privileged attributes granted to all users
      with a valid OpenAM session, such as
      <code class="literal">AUTHENTICATED_USERS</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.default.privileged.attribute</code></p></dd><dt><span class="term">Privileged Attribute Type</span></dt><dd><p>Specifies the list of privileged attribute types fetched for each
      user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.type</code></p></dd><dt><span class="term">Privileged Attributes To Lower Case</span></dt><dd><p>Specifies how privileged attribute types should be converted to
      lower case.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.tolowercase</code></p></dd><dt><span class="term">Privileged Session Attribute</span></dt><dd><p>Specifies the list of session property names, such as
      <code class="literal">UserToken</code>m which hold privileged attributes for
      authenticated users.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.session.attribute</code></p></dd><dt><span class="term">Enable Privileged Attribute Mapping</span></dt><dd><p>When enabled, lets you use Privileged Attribute Mapping.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.mapping.enable</code></p></dd><dt><span class="term">Privileged Attribute Mapping</span></dt><dd><p>OpenAM allows original attribute values to be mapped to other
      values. For example, you can map UUIDs to principal names in roles
      specified in a web application's deployment descriptor. For example, to
      map the UUID <code class="literal">id=employee,ou=group,o=openam</code> to the
      principal name <code class="literal">am_employee_role</code> in the deployment
      descriptor, set the key to
      <code class="literal">id=employee,ou=group,o=openam</code>, and the value to
      <code class="literal">am_employee_role</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.session.attribute</code></p></dd></dl></div><div class="variablelist" title="Custom Authentication Processing properties"><a name="j2ee-agent-custom-authentication-properties"></a><div class="variablelist-title">Custom Authentication Processing properties</div><dl><dt><span class="term">Custom Authentication Handler</span></dt><dd><p>Specifies custom authentication handler classes for users
      authenticated with the application server. The key is the web application
      name and the value is the authentication handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.handler</code></p></dd><dt><span class="term">Custom Logout Handler</span></dt><dd><p>Specifies custom logout handler classes to log users out of the
      application server. The key is the web application name and the value is
      the logout handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.handler</code></p></dd><dt><span class="term">Custom Verification Handler</span></dt><dd><p>Specifies custom verification classes to validate user credentials
      with the local user repository. The key is the web application name and
      the value is the validation handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.verification.handler</code></p></dd></dl></div></div><div class="section" title="6.5.3.&nbsp;Configuring J2EE Policy Agent SSO Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-sso-props"></a>6.5.3.&nbsp;Configuring J2EE Policy Agent SSO Properties</h3></div></div></div><p>This section covers SSO web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist" title="Cookie properties"><a name="j2ee-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.iplanet.am.cookie.name</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Caching properties"><a name="j2ee-agent-caching-properties"></a><div class="variablelist-title">Caching properties</div><dl><dt><span class="term">SSO Cache Enable</span></dt><dd><p>When enabled, the agent exposes SSO Cache through the agent SDK
      APIs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.amsso.cache.enable</code></p></dd></dl></div><div class="variablelist" title="Cross Domain SSO properties"><a name="j2ee-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to process CDSSO requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.redirect.uri</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservelet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">CDSSO Clock Skew</span></dt><dd><p>When set to a value other than zero, specifies the clock skew in
      seconds that the agent accepts when determining the validity of the CDSSO
      authentication response assertion.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.clock.skew</code></p></dd><dt><span class="term">CDSSO Trusted ID Provider</span></dt><dd><p>Specifies the list of OpenAM servers or identity providers the
      agent trusts when evaluating CDC Liberty Responses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.trusted.id.provider</code></p></dd><dt><span class="term">CDSSO Secure Enable</span></dt><dd><p>When enabled, the agent marks the SSO Token cookie as secure, thus
      the cookie is only transmitted over secure connections.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.secure.enable</code></p></dd><dt><span class="term">CDSSO Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.domain</code></p></dd></dl></div><div class="variablelist" title="Cookie Reset properties"><a name="j2ee-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies to reset if Cookie Reset is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.name</code></p></dd><dt><span class="term">Cookie Reset Domain Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie domain values when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.domain</code></p></dd><dt><span class="term">Cookie Reset Path Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie paths when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.path</code></p></dd></dl></div></div><div class="section" title="6.5.4.&nbsp;Configuring J2EE Policy Agent OpenAM Services Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-services-props"></a>6.5.4.&nbsp;Configuring J2EE Policy Agent OpenAM Services Properties</h3></div></div></div><p>This section covers OpenAM services web agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist" title="Login URL properties"><a name="j2ee-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so then can authenticate.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">Login URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Login
      URL list as the priority for Login and CDSSO URLs when handling
      failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.prioritized</code></p></dd><dt><span class="term">Login URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Login URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.enabled</code></p></dd><dt><span class="term">Login URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Login URLs when Login URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.timeout</code></p></dd></dl></div><div class="variablelist" title="Logout URL properties"><a name="j2ee-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URLs, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>. The
      user is logged out of the OpenAM session when accessing these URLs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd><dt><span class="term">Logout URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Logout
      URL list as the priority for Logout URLs when handling failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.prioritized</code></p></dd><dt><span class="term">Logout URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Logout URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.enabled</code></p></dd><dt><span class="term">Logout URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Logout URLs when Logout URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.timeout</code></p></dd></dl></div><div class="variablelist" title="Authentication Service properties"><a name="j2ee-agent-agent-authn-service-properties"></a><div class="variablelist-title">Authentication Service properties</div><dl><dt><span class="term">OpenAM Authentication Service Protocol</span></dt><dd><p>Specifies the protocol used by the OpenAM authentication
      service.</p><p>Property: <code class="literal">com.iplanet.am.server.protocol</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Host Name</span></dt><dd><p>Specifies the OpenAM authentication service host name.</p><p>Property: <code class="literal">com.iplanet.am.server.host</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Port</span></dt><dd><p>Specifies the OpenAM authentication service port number.</p><p>Property: <code class="literal">com.iplanet.am.server.port</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Policy Client Service properties"><a name="j2ee-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl><dt><span class="term">Enable Policy Notifications</span></dt><dd><p>When enabled, OpenAM sends notification about changes to policy.</p><p>Property: <code class="literal">com.sun.identity.agents.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Polling Interval</span></dt><dd><p>Specifies the time in minutes after which the policy cache is
      refreshed.</p><p>Property: <code class="literal">com.sun.identity.agents.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Cache Mode</span></dt><dd><p>Set to cache mode subtree when only a small number of policy rules
      are defined. For large numbers of policy rules, set to self.</p><p>Property: <code class="literal">com.sun.identity.policy.client.cacheMode</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Boolean Action Values</span></dt><dd><p>Specifies the values, such as <code class="literal">allow</code> and
      <code class="literal">deny</code>, that are associated with boolean policy
      decisions.</p><p>Default: <code class="literal">iPlanetAMWebAgentService|GET|allow|deny:iPlanetAMWebAgentService|POST|allow|deny</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.booleanActionValues</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Resource Comparators</span></dt><dd><p>Specifies the comparators used for service names in policy.</p><p>Default: <code class="literal">serviceType=iPlanetAMWebAgentService|
      class=com.sun.identity.policy.plugins.HttpURLResourceName|wildcard=*|
      delimiter=/|caseSensitive=false</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.resourceComparators</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Clock Skew</span></dt><dd><p>Time in seconds used adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Default: 10.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.clock.skew</code></p><p>Hot swap: no</p></dd><dt><span class="term">URL Policy Env GET Parameters</span></dt><dd><p>Specifies the list of HTTP GET request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.get.param</code></p></dd><dt><span class="term">URL Policy Env POST Parameters</span></dt><dd><p>Specifies the list of HTTP POST request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.post.param</code></p></dd><dt><span class="term">URL Policy Env jsession Parameters</span></dt><dd><p>Specifies the list of HTTP session attributes whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.jsession.param</code></p></dd></dl></div><div class="variablelist" title="User Data Cache Service properties"><a name="j2ee-agent-user-data-cache-service-properties"></a><div class="variablelist-title">User Data Cache Service properties</div><dl><dt><span class="term">Enable Notification of User Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update user
      management data caches.</p><p>Property: <code class="literal">com.sun.identity.idm.remote.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">User Data Cache Polling Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached user management data.</p><p>Property: <code class="literal">com.iplanet.am.sdk.remote.pollingTime</code></p><p>Hot swap: no</p></dd><dt><span class="term">Enable Notification of Service Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update service
      configuration data caches.</p><p>Property: <code class="literal">com.sun.identity.sm.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Service Data Cache Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached service configuration data.</p><p>Property: <code class="literal">com.sun.identity.sm.cacheTime</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Session Client Service properties"><a name="j2ee-agent-session-client-service-properties"></a><div class="variablelist-title">Session Client Service properties</div><dl><dt><span class="term">Enable Client Polling</span></dt><dd><p>When enabled, the session client polls to update the session cache
      rather than relying on notifications from OpenAM.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client Polling Period</span></dt><dd><p>Specifies the time in seconds after which the session client
      requests an update from OpenAM for cached session information.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.period</code></p><p>Hot swap: no</p></dd></dl></div></div><div class="section" title="6.5.5.&nbsp;Configuring J2EE Policy Agent Miscellaneous Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-misc-props"></a>6.5.5.&nbsp;Configuring J2EE Policy Agent Miscellaneous Properties</h3></div></div></div><p>This section covers miscellaneous web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist" title="Locale properties"><a name="j2ee-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl><dt><span class="term">Locale Language</span></dt><dd><p>The default language for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.language</code></p><p>Hot swap: no</p></dd><dt><span class="term">Locale Country</span></dt><dd><p>The default country for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.country</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Port Check Processing properties"><a name="j2ee-agent-port-check-properties"></a><div class="variablelist-title">Port Check Processing properties</div><dl><dt><span class="term">Port Check Enable</span></dt><dd><p>When enabled, activate port checking, correcting requests on the
      wrong port.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.enable</code></p></dd><dt><span class="term">Port Check File</span></dt><dd><p>Specifies the name of the file containing the content to handle
      requests on the wrong port when port checking is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.file</code></p></dd><dt><span class="term">Port Check Setting</span></dt><dd><p>Specifies which ports correspond to which protocols. The agent uses
      the map when handling requests with invalid port numbers during port
      checking.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.setting</code></p></dd></dl></div><div class="variablelist" title="Bypass Principal List properties"><a name="j2ee-agent-bypass-principal-list-properties"></a><div class="variablelist-title">Bypass Principal List properties</div><dl><dt><span class="term">Bypass Principal List</span></dt><dd><p>Specifies a list of principals the agent bypasses for
      authentication and search purposes, such as <code class="literal">guest</code>
      or <code class="literal">testuser</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.bypass.principal</code></p></dd></dl></div><div class="variablelist" title="Agent Password Encryptor properties"><a name="j2ee-agent-password-encryptor-properties"></a><div class="variablelist-title">Agent Password Encryptor properties</div><dl><dt><span class="term">Encryption Provider</span></dt><dd><p>Specifies the agent's encryption provider class.</p><p>Default: <code class="literal">com.iplanet.services.util.JCEEncryption</code></p><p>Property: <code class="literal">com.iplanet.security.encryptor</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist" title="Ignore Path Info properties"><a name="j2ee-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><p>For example, if the not enforced list includes
      <code class="literal">/*.gif</code>, then stripping path info from the request URL
      prevents access to <code class="literal">http://host/index.html</code> by using
      <code class="literal">http://host/index.html?hack.gif</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist" title="Deprecated Agent Properties properties"><a name="j2ee-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Agent Properties properties</div><dl><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
      = http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcserlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
      http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd><dt><span class="term">Legacy User Agent Support Enable</span></dt><dd><p>When enabled, provide support for legacy browsers.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.support.enable</code></p></dd><dt><span class="term">Legacy User Agent List</span></dt><dd><p>List of header values that identify legacy browsers. Entries can
      use the wildcard character, <code class="literal">*</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.user.agent</code></p></dd><dt><span class="term">Legacy User Agent Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to redirect legacy user agent
      requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.redirect.uri</code></p></dd></dl></div></div><div class="section" title="6.5.6.&nbsp;Configuring J2EE Policy Agent Advanced Properties"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-advanced-props"></a>6.5.6.&nbsp;Configuring J2EE Policy Agent Advanced Properties</h3></div></div></div><p>This section covers advanced web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist" title="Client Identification properties"><a name="j2ee-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies are load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist" title="Web Service Processing properties"><a name="j2ee-agent-web-service-processing-properties"></a><div class="variablelist-title">Web Service Processing properties</div><dl><dt><span class="term">Web Service Enable</span></dt><dd><p>Enable web service processing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.enable</code></p></dd><dt><span class="term">Web Service End Points</span></dt><dd><p>Specifies a list of web application end points that represent web
      services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.endpoint</code></p></dd><dt><span class="term">Web Service Process GET Enable</span></dt><dd><p>When enabled, the agent processes HTTP GET requests for web service
      endpoints.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.process.get.enable</code></p></dd><dt><span class="term">Web Service Authenticator</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceAuthenticator</code>,
      used to authenticate web service requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.responseprocessor</code></p></dd><dt><span class="term">Web Service Response Processor</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceResponseProcessor</code>,
      used to process web service reponses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.responseprocessor</code></p></dd><dt><span class="term">Web Service Internal Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an internal error fault
       for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.internalerror.content</code></p></dd><dt><span class="term">Web Service Authorization Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an authorization error
      fault for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.autherror.content</code></p></dd></dl></div><div class="variablelist" title="Alternate Agent URL properties"><a name="j2ee-agent-alternate-url-properties"></a><div class="variablelist-title">Alternate Agent URL properties</div><dl><dt><span class="term">Alternative Agent Host Name</span></dt><dd><p>Specifies the host name of the agent protected server to show to
      client browsers, rather than the actual host name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.host</code></p></dd><dt><span class="term">Alternative Agent Port Name</span></dt><dd><p>Specifies the port number of the agent protected server to show to
      client browsers, rather than the actual port number.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.port</code></p></dd><dt><span class="term">Alternative Agent Protocol</span></dt><dd><p>Specifies the protocol used to contact the agent from the browser
      client browsers, rather than the actual protocol used by the server.
      Either <code class="literal">http</code> or <code class="literal">https</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.protocol</code></p></dd></dl></div><div class="variablelist" title="JBoss Application Server properties"><a name="web-agent-jboss-properties"></a><div class="variablelist-title">JBoss Application Server properties</div><dl><dt><span class="term">WebAuthentication Available</span></dt><dd><p>When enabled, allow programmatic authentication with the JBoss
      container using the WebAuthentication feature.</p><p>Property: <code class="literal">com.sun.identity.agents.config.jboss.webauth.available</code></p></dd></dl></div><div class="variablelist" title="Post Data Preservation properties"><a name="j2ee-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation, storing POST data before
      redirecting the browser to the login screen, and then autosubmitting
      the same POST after successful authentication to the original URL.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">Missing PDP entry URI</span></dt><dd><p>Specifies a list of application-specific URIs if the referenced
      Post Data Preservation entry cannot be found in the local cache because
      it has exceeded its POST entry TTL. Either the agent redirects to a
      URI in this list, or it shows an HTTP 403 Forbidden error.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preservce.cache.noentry.url</code></p></dd><dt><span class="term">POST entry TTL</span></dt><dd><p>POST data storage lifetime in milliseconds. Default: 300000.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.cache.entry.ttl</code></p></dd><dt><span class="term">PDP Stickysession mode</span></dt><dd><p>Specifies whether to create a cookie, or to append a query string to
      the URL to assist with sticky load balancing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.mode</code></p></dd><dt><span class="term">PDP Stickysession key-value</span></dt><dd><p>Specifies the key-value pair for stickysession mode. For example,
      a setting of <code class="literal">lb=myserver</code> either sets an
      <code class="literal">lb</code> cookie with <code class="literal">myserver</code> value, or
      adds <code class="literal">lb=myserver</code> to the URL query string.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.value</code></p></dd></dl></div><div class="variablelist" title="Custom properties"><a name="j2ee-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div class="section" title="6.6.&nbsp;Configuring Web Service Provider Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsp-policy-agent"></a>6.6.&nbsp;Configuring Web Service Provider Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e9230"></a><p>This section covers Web Service Provider (WSP) properties. WSPs
  both validate incoming web service requests from Web Service Clients (WSC),
  and also secure outgoing responses sent back to WSCs.</p><p>After creating a WSP profile, you access WSP properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Provider &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="wsp-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="wsp-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanisms allowed to validate the web service
     request.</p></dd><dt><span class="term">Authentication Chain</span></dt><dd><p>Specifies which OpenAM authentication chain consumes the credentials
     from the web service request to authenticate the WSC.</p></dd><dt><span class="term">Token Conversion Type</span></dt><dd><p>Specifies how to covert the incoming token before issuing requests
     to other WSPs.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers from the request
     for subsequent processing.</p></dd><dt><span class="term">Detect Message Replay</span></dt><dd><p>Yes means the agent checks whether the request is a replay of
     an earlier request, and if so, rejects the request.</p></dd><dt><span class="term">Detect User Token Replay</span></dt><dd><p>Yes means the agent checks whether the user token is a replay
     from an earlier requests, and if so, rejects the request.</p></dd><dt><span class="term">Private Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to verify the request signature.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the WSP and
     WSC.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials compared with
     the user name security token in a request.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="wsp-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="wsp-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Request Signature Verified</span></dt><dd><p>Yes means verify signatures in requests.</p></dd><dt><span class="term">Is Response Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the response with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign responses is
     referenced in the response.</p></dd><dt><span class="term">Is Request Decrypted</span></dt><dd><p>Yes means do decrypt the specified parts of incoming requests.</p></dd><dt><span class="term">Is Response Encrypted</span></dt><dd><p>Yes means do encrypt the outgoing response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="wsp-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Client</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify request signatures and encrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign responses and decrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="wsp-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="wsp-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Key Tab File</span></dt><dd><p>Specifies the Kerberos keytab file using the form
     <code class="literal"><em class="replaceable"><code>openam-host</code></em>.HTTP.keytab</code>,
     where <em class="replaceable"><code>openam-host</code></em> is the host name for
     OpenAM.</p></dd><dt><span class="term">Verify Kerberos Signature</span></dt><dd><p>Yes means the agent signs the Kerberos token.</p></dd></dl></div></div><div class="section" title="6.7.&nbsp;Configuring Web Service Client Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsc-policy-agent"></a>6.7.&nbsp;Configuring Web Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e9504"></a><p>This section covers Web Service Client (WSC) properties. WSCs
  both secure outgoing requests sent to Web Service Providers (WSP),
  and also validate incoming from WSPs.</p><p>After creating a WSC profile, you access WSC properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="wsc-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="wsc-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure web service requests.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Security Token
     Service.</p></dd><dt><span class="term">Discovery Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Discovery
     Service.</p></dd><dt><span class="term">User Authentication Required</span></dt><dd><p>Yes means users must authenticate to access the WSC's protected
     page.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers in the request
     for subsequent processing.</p></dd><dt><span class="term">User Pass Through Security Token</span></dt><dd><p>Yes means the agent passes along the Security Token from the Subject,
     rather than generating a token or requesting it from the Security Token
     Service.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials shared with the
     WSP and used to generate a Username Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the WSP and
     WSC.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="wsc-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the outgoing request to attribute
     names as retrieved from the SSOToken or the identity repository.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="wsc-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of outgoing requests.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the incoming response.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="wsc-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="wsc-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="wsc-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div class="section" title="6.8.&nbsp;Configuring Discovery Service Client Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-disco-policy-agent"></a>6.8.&nbsp;Configuring Discovery Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e9758"></a><p>This section covers Discover Service Client properties. Discovery
  Service clients get Liberty security tokens from a Liberty Discovery
  Service.</p><p>After creating a Discovery Client profile, you access Discovery agent
  properties in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; STS Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
    order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
    installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the private key used to sign requests and
    decrypt responses.</p></dd><dt><span class="term">Discovery Service End Point</span></dt><dd><p>Specifies the end point with which the trust authority client
    communicates for service registration and service lookups.</p></dd><dt><span class="term">Authentication Web Service End Point</span></dt><dd><p>Specifies the end point with which the web services client
    communicates to get end user SSOTokens and Discover Service resource
    offerings.</p></dd></dl></div></div><div class="section" title="6.9.&nbsp;Configuring Security Token Service Client Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sts-policy-agent"></a>6.9.&nbsp;Configuring Security Token Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e9813"></a><p>This section covers Security Token Service (STS) Client properties. STS
  clients both secure outgoing requests to trust authorities, and also validate
  incoming requests from trust authorities. You can configure STS clients to
  work with OpenAM's Security Token Service and with its Discovery
  Service.</p><p>After creating an STS Client profile, you access STS Client properties
  in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; STS Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist" title="General properties"><a name="sts-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">WS-Trust Version</span></dt><dd><p>Specifies whether to use WS-Trust 1.3 or 1.0.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist" title="Security properties"><a name="sts-agent-security-properties"></a><div class="variablelist-title">Security properties</div><dl><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure the STS request.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the STS Client agent profile to use if the security
     mechanism is STS Security.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers for subsequent
     processing.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials the agent uses
     to generate a Username security token.</p></dd><dt><span class="term">Requested Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to encrypt responses.</p></dd><dt><span class="term">Requested Claims</span></dt><dd><p>Specifies the Uniform Resource Identitiers for the claims to
     be represented in the Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identitier shared by the agent and the
     WSC.</p></dd></dl></div><div class="variablelist" title="SAML Configuration properties"><a name="sts-agent-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist" title="Signing and Encryption properties"><a name="sts-agent-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of requests.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist" title="Key Store properties"><a name="sts-agent-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist" title="End Points properties"><a name="sts-agent-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl><dt><span class="term">Security Token Service End Point</span></dt><dd><p>Specifies the URL to the Security Token Service end point.</p></dd><dt><span class="term">Security Token Service MEX End Point</span></dt><dd><p>Specifies the URL to the Security Token Service message exchange
     end point.</p></dd></dl></div><div class="variablelist" title="Kerberos Configuration properties"><a name="sts-agent-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div class="section" title="6.10.&nbsp;Configuring Version 2.2 Policy Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-22-policy-agent"></a>6.10.&nbsp;Configuring Version 2.2 Policy Agents</h2></div></div></div><a class="indexterm" name="d13107e10064"></a><p>This section covers version 2.2 agent properties. Version 2.2 agents
  store their configurations locally, with a user name, password combination
  used to connect to OpenAM.</p><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; 2.2 Agents &gt; <em class="replaceable"><code>Agent Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Description</span></dt><dd><p>Specifies a short description for the agent.</p></dd><dt><span class="term">Agent Key Value(s)</span></dt><dd><p>Additional key-value pairs that OpenAM uses to receive agent
      requests concerning credential assertions.</p><p>OpenAM currently supports one property,
      <code class="literal">agentRootURL=<em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where the key is case-sensitive.</p></dd></dl></div></div><div class="section" title="6.11.&nbsp;Configuring Agent Authenticators"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-agent-auth"></a>6.11.&nbsp;Configuring Agent Authenticators</h2></div></div></div><a class="indexterm" name="d13107e10121"></a><p>An <em class="firstterm">agent authenticator</em> has read-only access to
  multiple agent profiles defined in the same realm, typically allowing an
  agent to read web service agent profiles.</p><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Agent Authenticator &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Agent Profiles allow to Read</span></dt><dd><p>Specifies which agent profiles in the realm the agent authenticator
     can read.</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>Specifies the list of agent root URLs for CDSSO. The valid value is
     in the format
     <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
     where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
     such as <code class="literal">http</code> or <code class="literal">https</code>,
     <em class="replaceable"><code>hostname</code></em> represents the host name of the
     system where the agent resides, and <em class="replaceable"><code>port</code></em>
     represents the port number on which the agent is installed.
     The slash following the port number is required.</p></dd></dl></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d13107e5376" href="#d13107e5376" class="para">5</a>] </sup>The configuration file syntax is that
  of a standard Java properties file, though backslash escapes can be used only
  to wrap long lines. See
  <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load</a>
  for a description of the format. The value of a property specified multiple
  times is not defined.</p></div><div class="footnote"><p><sup>[<a id="ftn.d13107e7133" href="#d13107e7133" class="para">6</a>] </sup>The configuration file syntax is that
  of a standard Java properties file, though backslash escapes can be used only
  to wrap long lines. See
  <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load</a>
  for a description of the format. The value of a property specified multiple
  times is not defined.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;7.&nbsp;Configuring Password Reset"><div class="titlepage"><div><div><h2 class="title"><a name="chap-pwd-reset"></a>Chapter&nbsp;7.&nbsp;Configuring Password Reset</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-pwd-reset">7.1. About Password Reset</a></span></dt><dt><span class="section"><a href="#forgotten-pwd-reset">7.2. Resetting Forgotten Passwords</a></span></dt></dl></div><a class="indexterm" name="d13107e10194"></a><p>This chapter focuses on how to enable users to reset their own
 passwords in secure fashion.</p><div class="section" title="7.1.&nbsp;About Password Reset"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-pwd-reset"></a>7.1.&nbsp;About Password Reset</h2></div></div></div><p>Users who know their passwords, but must reset them because for example
  the password is going to expire, can reset their passwords by successfully
  authenticating to OpenAM, visiting their end user pages, such as
  <code class="literal">http://openam.example.com:8080/openam/idm/EndUser</code>, and
  clicking Edit next to the Password field to display the change password
  page.</p><div class="mediaobject" title="The OpenAM Change Password page"><a name="figure-console-change-pwd"></a><img src="images/console-change-pwd.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-change-pwd.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-change-pwd.html" target="longdesc">D</a>]</span></div></div><p>You therefore do not need to configure password reset for users
  who can remember their current password. Instead, you point them to the
  <code class="literal">idm/EndUser</code> page to let them do it themselves.</p></div><div class="section" title="7.2.&nbsp;Resetting Forgotten Passwords"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="forgotten-pwd-reset"></a>7.2.&nbsp;Resetting Forgotten Passwords</h2></div></div></div><p>OpenAM can provide self-service password reset for forgotten passwords.
  To enable self-service password reset, you must configure the password
  reset service itself, which consists mainly of setting up secret questions,
  and configuring an SMTP mail server to send reset passwords to the users
  of the service.</p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>Users must be able to access their mail after the service resets
   their passwords, or they will not be able to receive the new password.
   Do not therefore set up the service to reset the password used to access
   the email account specified in the user's profile.</p></div><div class="procedure" title="Procedure&nbsp;7.1.&nbsp;To Set Up the Password Reset Service"><a name="set-up-pwd-reset-service"></a><div class="procedure-title">Procedure&nbsp;7.1.&nbsp;To Set Up the Password Reset Service</div><p>You can configure the password reset service for OpenAM, letting
   each realm inherit the global settings.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you use LDAP as the user repository, set the default
    authentication type for the realm to LDAP rather than the default (Data
    Store) to prevent authentication from failing after user passwords are
    reset.</p><p>You can change the settings through the OpenAM console. Browse to
    Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
    Authentication &gt; Authentication Chaining &gt; ldapService, and then set
    Instance to LDAP and Criteria to REQUIRED.</p></li><li class="step" title="Step 2"><p>In the OpenAM console, browse to Configuration &gt; Global &gt;
    Password Reset in the Global Properties list.</p></li><li class="step" title="Step 3"><p>In the Password Reset page, use the following hints to adjust
    settings, and then save your work.</p><p>In addition to the User Validation and Secret Question values
    provided, you must configure at least the Bind DN and Bind Password
    of the user who can reset passwords in the LDAP data store.</p><div class="variablelist"><dl><dt><span class="term">User Validation</span></dt><dd><p>OpenAM uses this LDAP attribute and the value entered by the
       user to look up the user profile in the data store.</p></dd><dt><span class="term">Secret Question</span></dt><dd><p>This list corresponds to property values held in the file
       <code class="filename">WEB-INF/classes/amPasswordReset.properties</code> under
       the directory where OpenAM is deployed.</p><p>For localized versions of this file, copy
       <code class="filename">WEB-INF/classes/amPasswordReset.properties</code> to
       <code class="filename">WEB-INF/classes/amPasswordReset.properties_<em class="replaceable"><code>locale</code></em></code>,
       and localize only the values of the questions. For example if the
       default properties file contains:</p><pre class="literallayout">favourite-restaurant=What is your favorite restaurant?</pre><p>Then <code class="filename">WEB-INF/classes/amPasswordReset.properties_fr</code>
       ought to contain:</p><pre class="literallayout">favourite-restaurant=Quel est votre restaurant pr&eacute;f&eacute;r&eacute; ?</pre></dd><dt><span class="term">Search Filter</span></dt><dd><p>An additional LDAP search filter you specify here is &amp;-ed
       with the filter constructed for user validation to find the user
       entry in the data store.</p></dd><dt><span class="term">Base DN</span></dt><dd><p>If you specify no base DN for the search, the search for the user
       entry starts from the base DN for the realm.</p></dd><dt><span class="term">Bind DN</span></dt><dd><p>The DN of the user with access to change passwords in the
       LDAP data store.</p></dd><dt><span class="term">Bind Password</span></dt><dd><p>The password of the user with access to change passwords in the
       LDAP data store.</p></dd><dt><span class="term">Password Reset Option</span></dt><dd><p>Classname of a plugin that implements the
       <code class="literal">PasswordGenerator</code> interface.</p></dd><dt><span class="term">Password Change Notification Option</span></dt><dd><p>Classname of a plugin that implements the
       <code class="literal">NotifyPassword</code> interface.</p></dd><dt><span class="term">Password Reset</span></dt><dd><p>Enables the service.</p></dd><dt><span class="term">Personal Question</span></dt><dd><p>When enabled, allows the user to create custom secret
       questions.</p></dd><dt><span class="term">Maximum Number of Questions</span></dt><dd><p>Maximum number of questions to ask during password reset.</p></dd><dt><span class="term">Force Change Password on Next Login</span></dt><dd><p>When enabled, the user must change her password next time she
       logs in after OpenAM resets her password.</p></dd><dt><span class="term">Password Reset Failure Lockout</span></dt><dd><p>When enabled, the user only gets the specified number of tries
       before her account is locked.</p></dd><dt><span class="term">Password Reset Failure Lockout Count</span></dt><dd><p>If Password Reset Failure Lockout is enabled, this specifies the
       maximum number of tries to reset a password within the specified
       interval before the user's account is locked.</p></dd><dt><span class="term">Password Reset Failure Lockout</span></dt><dd><p>If Password Reset Failure Lockout is enabled, this specifies the
       interval during which the user has only Password Reset Failure Lockout
       Count tries to reset her password before her account is locked.</p></dd><dt><span class="term">Email Address to Send Lockout Notification</span></dt><dd><p>This specifies the administrator address(es) which receive(s)
       notification on user account lockout. Each address must be a full
       email address such as <code class="literal">admin@example.com</code>, or
       <code class="literal">admin@host.domain</code>.</p><p>OpenAM must be able to send mail through an SMTP-capable service
       for this to work.</p></dd><dt><span class="term">Warn User After N Failures</span></dt><dd><p>If you configure Password Reset Failure Lockout, set this to
       warn users who are about to use up their count of tries.</p></dd><dt><span class="term">Password Reset Failure Lockout Duration</span></dt><dd><p>If you configure Password Reset Failure Lockout, set this to a
       number of minutes other than <code class="literal">0</code> so that lockout is
       temporary, requiring only that the locked-out user wait to try again
       to reset her password, rather than necessarily require help from
       an administrator.</p></dd><dt><span class="term">Password Reset Lockout Attribute Name</span></dt><dd><p>If you configure Password Reset Failure Lockout, then OpenAM sets
       sets data store attribute to <code class="literal">inactive</code> upon
       lockout.</p></dd><dt><span class="term"></span></dt><dd><p>If set to <code class="literal">inactive</code>, then a user who is locked
       out cannot attempt to reset her password if the Password Reset
       Failure Lockout Duration is <code class="literal">0</code>.</p></dd></dl></div></li></ol></div><div class="procedure" title="Procedure&nbsp;7.2.&nbsp;To Set Up SMTP Mail Notification"><a name="set-up-mail-notification"></a><div class="procedure-title">Procedure&nbsp;7.2.&nbsp;To Set Up SMTP Mail Notification</div><p>By default, OpenAM expects the SMTP service to listen on
   <code class="literal">localhost:25</code>. You can change these settings.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, click the Configuration &gt; Servers and
    Sites &gt; Default Server Settings.</p></li><li class="step" title="Step 2"><p>In the Edit server-default page, scroll down to Mail Server to
    change the Mail Server Host Name or Mail Server Port Number.</p></li><li class="step" title="Step 3"><p>Save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;7.3.&nbsp;To Prepare Users to Reset Passwords"><a name="prepare-users-for-pwd-reset"></a><div class="procedure-title">Procedure&nbsp;7.3.&nbsp;To Prepare Users to Reset Passwords</div><p>Before a user can reset her password, she must choose answers for
   secret questions.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>When her account is first created, direct the user to her
    <code class="literal">idm/EndUser</code> page, such as
    <code class="literal">http://openam.example.com:8080/openam/idm/EndUser</code>,
    where she can provide a valid email address to recover the reset password
    and can edit Password Reset Options.</p><div class="mediaobject" title="The OpenAM end user page"><a name="figure-console-end-user"></a><img src="images/console-end-user.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-end-user.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-end-user.html" target="longdesc">D</a>]</span></div></div><p>By default OpenAM console redirects end users to this page when
    they login.</p></li><li class="step" title="Step 2"><p>After the user updates her secret questions, she can use the
    password reset service when necessary.</p><div class="mediaobject" title="The OpenAM secret question page"><a name="figure-console-secret-questions"></a><img src="images/console-secret-questions.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-secret-questions.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-secret-questions.html" target="longdesc">D</a>]</span></div></div></li></ol></div><div class="procedure" title="Procedure&nbsp;7.4.&nbsp;To Direct Users to Reset Passwords"><a name="redirect-to-reset-pwd"></a><div class="procedure-title">Procedure&nbsp;7.4.&nbsp;To Direct Users to Reset Passwords</div><p>Having setup her email and answers to secret questions, the user
   can use the reset password service.</p><p>Create a test subject and use these steps to validate your
   configuration.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Send the user with a forgotten password to enter her user ID at
    the password reset URL.</p><p>If the user is in the default realm use <code class="literal">password</code>
    at the end of the URL to OpenAM, as in
    <code class="literal">http://openam.example.com:8080/openam/password</code>.</p><p>If the password reset service is enabled only for the user's realm
    and not the parent realm, or the realm to reset the password is different
    from the user's default realm, use <code class="literal">ui/PWResetUserValidation?realm=<em class="replaceable"><code>realm
    name</code></em>, as in</code>
    <code class="literal">http://openam.example.com:8080/openam/ui/PWResetUserValidation?realm=<em class="replaceable"><code>realm
    name</code></em></code>.</p><div class="mediaobject" title="The OpenAM user validation page"><a name="figure-console-user-validation"></a><img src="images/console-user-validation.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-user-validation.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-user-validation.html" target="longdesc">D</a>]</span></div></div></li><li class="step" title="Step 2"><p>The user answers the specified questions, and clicks OK.</p><p>OpenAM resets the password, sending mail to the SMTP service
    you configured.</p><div class="mediaobject" title="The OpenAM user validation page"><a name="figure-console-answer-questions"></a><img src="images/console-answer-questions.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-answer-questions.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-answer-questions.html" target="longdesc">D</a>]</span></div></div><div class="mediaobject" title="The page confirming password reset"><a name="figure-console-reset-confirmation"></a><img src="images/console-reset-confirmation.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-console-reset-confirmation.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-console-reset-confirmation.html" target="longdesc">D</a>]</span></div></div><p>The user receives the email with a line such as the following.</p><pre class="literallayout">Your OpenAM password was changed to:  647bWluw</pre></li><li class="step" title="Step 3"><p>The user logs in using the new password.</p><p>If you configured the system to force a change on password reset,
    then OpenAM requires the user to change her password.</p></li></ol></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;8.&nbsp;Configuring Cross-Domain Single Sign On"><div class="titlepage"><div><div><h2 class="title"><a name="chap-cdsso"></a>Chapter&nbsp;8.&nbsp;Configuring Cross-Domain Single Sign On</h2></div></div></div><p>This chapter shows you how to configure cross-domain single sign on,
 typically used when you have multiple domains in a single organization. For
 single sign on across multiple organizations, typically federation is
 used.</p><a class="indexterm" name="d13107e10544"></a><p><em class="firstterm">Cross-domain single sign on</em> (CDSSO) provides
 a safe mechanism for managing access across multiple different domains that
 you control. CDSSO lets OpenAM set up in <code class="literal">example.org</code>
 manage access for <code class="literal">example.com</code>, and
 <code class="literal">example.net</code>. Single sign on depends on cookies to store
 session information. Yet to avoid cross-site scripting attacks, browsers
 should not let a web site in one domain get a cookie from another domain.
 CDSSO relies on OpenAM essentially to duplicate cookies on domains you control
 so that a session valid in one domain is also valid in the other domains.
 All the cookie duplication work takes place without users having to provide
 new credentials.</p><div class="procedure" title="Procedure&nbsp;8.1.&nbsp;To Enable CDSSO For a Web Policy Agent"><a name="enable-cdsso"></a><div class="procedure-title">Procedure&nbsp;8.1.&nbsp;To Enable CDSSO For a Web Policy Agent</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the OpenAM console, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt; Web &gt;
   <em class="replaceable"><code>Agent Name</code></em> &gt; SSO.</p></li><li class="step" title="Step 2"><p>Enable Cross Domain SSO (configuration file property:
   <code class="literal">com.sun.identity.agents.config.cdsso.enable</code>).</p></li><li class="step" title="Step 3"><p>Set the CDSSO Servlet URL to the Cross Domain Controller location,
   such as <code class="literal">http://openam.example.com:8080/openam/cdcservelet</code>
   (configuration file property:
   <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code>).</p></li><li class="step" title="Step 4"><p>Add the list of domains, such as <code class="literal">.example.com</code> to
   the Cookies Domain List (configuration file property:
   <code class="literal">com.sun.identity.agents.config.cookie.domain</code>).</p></li><li class="step" title="Step 5"><p>Save your work.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;9.&nbsp;Managing SAML 2.0 SSO"><div class="titlepage"><div><div><h2 class="title"><a name="chap-federation"></a>Chapter&nbsp;9.&nbsp;Managing SAML 2.0 SSO</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#about-federation">9.1. About SAML 2.0 SSO &amp; Federation</a></span></dt><dt><span class="section"><a href="#set-up-federation">9.2. Setting Up SAML 2.0 SSO</a></span></dt><dt><span class="section"><a href="#configure-idp">9.3. Configuring Identity Providers</a></span></dt><dt><span class="section"><a href="#configure-sp">9.4. Configuring Service Providers</a></span></dt><dt><span class="section"><a href="#configure-cot">9.5. Configuring Circles of Trust</a></span></dt></dl></div><p>This chapter addresses how to set up and manage SAML 2.0 SSO for
 single sign on and single log out across resources belonging to
 organizations participating in a circle of trust.</p><div class="section" title="9.1.&nbsp;About SAML 2.0 SSO &amp; Federation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="about-federation"></a>9.1.&nbsp;About SAML 2.0 SSO &amp; Federation</h2></div></div></div><a class="indexterm" name="d13107e10608"></a><p>SAML 2.0 SSO is part of federated access management. Federation lets
  access management cross organizational boundaries. Federation helps
  organizations share identities and services without giving away their
  identity information, or the services they provide.</p><p>To bridge heterogenous systems, federation requires interoperability,
  and thus depends on standards for orchestrating interaction and exchanging
  information between providers. OpenAM federation relies on standards such as
  <a class="link" href="http://saml.xml.org/saml-specifications" target="_top">Security Assertion
  Markup Language (SAML) 2.0</a>. SAML 2.0 describes the messages, how they
  are relayed, how they are exchanged, and common use cases.</p><div class="itemizedlist"><p>To achieve SAML 2.0 SSO, OpenAM separates <em class="firstterm">identity
   providers</em> from <em class="firstterm">service providers</em>,
   lets you include them them in a <em class="firstterm">circle of trust</em>, and
   has you configure how the providers in the circle of trust interact.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>An identity provider stores and serves identity profiles, and
    handles authentication.</p></li><li class="listitem"><p>A service provider offers services that access protected
    resources, and handles authorization.</p></li><li class="listitem"><p>A circle of trust groups at least one identity provider and at least
    one service provider who agree to share authentication information, with
    assertions about authenticated users that let service providers make
    authorization decisions.</p><p>Providers in a circle of trust share <em class="firstterm">metadata</em>,
    configuration information that federation partners require to access each
    others' services.</p></li><li class="listitem"><p>SAML 2.0 SSO maps attributes from accounts at the identity provider to
    attributes on accounts at the service provider. The identity provider makes
    assertions to the service provider, for example to attest that a user has
    authenticated with the identity provider. The service provider then
    consumes assertions from the identity provider to make authorization
    decisions, for example to let an authenticated user complete a purchase
    that gets charged to the user's account at the identity provider.</p></li></ul></div><p>In federation deployments where not all providers support SAML 2.0,
  OpenAM can act as a multi-protocol hub, translating for providers who rely
  on other and older standards such as SAML 1.x, Liberty Alliance Project
  frameworks, and WS-Federation (for integration with Active Directory
  Federation Services, for example).</p></div><div class="section" title="9.2.&nbsp;Setting Up SAML 2.0 SSO"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="set-up-federation"></a>9.2.&nbsp;Setting Up SAML 2.0 SSO</h2></div></div></div><div class="itemizedlist"><p>Before you set up SAML 2.0 SSO in OpenAM, you must:</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Know which providers participate in the circle of trust.</p></li><li class="listitem"><p>Know how your OpenAM installations act as identity providers, or
    service providers.</p></li><li class="listitem"><p>Agree with other providers on a synchronized clock or time service
    to share for provider systems.</p><p>Processing messages you exchange requires synchronized time
    keeping.</p></li><li class="listitem"><p>For identity information exchanged with other participants in a
    circle of trust, define how to map user attributes you share. Your user
    profile attribute names map to user profile attribute names at other
    providers.</p><p>For example, if you exchange user identifiers with your partners, and
    you call it <code class="literal">uid</code> whereas another partner calls it
    <code class="literal">userid</code>, then you map your <code class="literal">uid</code> to
    your partner's <code class="literal">userid</code>.</p></li><li class="listitem"><p>Import the keys used to sign assertions into the JKS key store in
    your OpenAM configuration directory. You can use the Java
    <span class="command"><strong>keytool</strong></span> command.</p><p>The OpenAM configuration key store is located at the top level of
    the configuration directory, such as
    <code class="filename">$HOME/openam/keystore.jks</code>. The password,
    stored in <code class="filename">$HOME/openam/.keypass</code>, is
    <code class="literal">changeit</code> by default. Also by default the only key
    available is for a self-signed certificate (alias: test) installed with
    OpenAM.</p></li></ul></div><p>During set up, you must share metadata for providers that you host
  with other providers in the circle of trust. You must also configure
  remote providers, connecting to other providers by importing their
  metadata.</p><p>In OpenAM terms, a hosted provider is one served by the current
   OpenAM server, whereas a remote provider is one hosted elsewhere.</p><div class="procedure" title="Procedure&nbsp;9.1.&nbsp;To Create a Hosted Identity Provider"><a name="create-hosted-idp"></a><div class="procedure-title">Procedure&nbsp;9.1.&nbsp;To Create a Hosted Identity Provider</div><a class="indexterm" name="d13107e10707"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the OpenAM console Common Tasks page, click Create Hosted Identity
    Provider.</p></li><li class="step" title="Step 2"><p>Unless you already have metadata for the provider, accept the
    Name for this identity provider in the field provided, or provide your
    own unique identifier.</p><p>The default name is the URL to the current server which hosts the
    identity provider.</p></li><li class="step" title="Step 3"><p>Select the Signing Key you imported into the OpenAM key store.</p></li><li class="step" title="Step 4"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 5"><p>For the attributes you share, map service provider attribute names
    (Name in Assertion), to user profile names from your identity repository
    (Local Attribute Name).</p></li><li class="step" title="Step 6"><p>Click Configure to save your configuration.</p></li><li class="step" title="Step 7"><p>Export the XML-based metadata from your provider to share
    with other providers in your circle of trust.</p><div class="screen">$ curl -o metadata.xml
 http://idp.example.com:8080/openam/saml2/jsp/exportmetadata.jsp?entityid=
 http://idp.example.com:8080/openam&amp;realm=/<em class="replaceable"><code>realm-name</code></em></div><p>When you have configured only the top-level realm,
    <code class="literal">/</code>, you can omit the query string.</p><p>Alternatively, provide the URL, to other providers so they can load
    the metadata.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.2.&nbsp;To Create a Hosted Service Provider"><a name="create-hosted-sp"></a><div class="procedure-title">Procedure&nbsp;9.2.&nbsp;To Create a Hosted Service Provider</div><a class="indexterm" name="d13107e10749"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the OpenAM console Common Tasks page, click Create Hosted Service
    Provider.</p></li><li class="step" title="Step 2"><p>Unless you already have metadata for the provider, accept the
    Name for this service provider in the field provided, or provide your
    own unique identifier.</p><p>The default name is the URL to the current server which hosts the
    service provider.</p></li><li class="step" title="Step 3"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 4"><p>If the identity provider has not already mapped the attributes you
    share, map identity provider attribute names (Name in Assertion), to user
    profile names from your identity repository (Local Attribute Name).</p></li><li class="step" title="Step 5"><p>Click Configure to save your configuration.</p></li><li class="step" title="Step 6"><p>Export the XML-based metadata from your provider to share
    with other providers in your circle of trust.</p><div class="screen">$ curl -o metadata.xml
 http://sp.example.com:8080/openam/saml2/jsp/exportmetadata.jsp?entityid=
 http://sp.example.com:8080/openam&amp;realm=/<em class="replaceable"><code>realm-name</code></em></div><p>When you have configured only the top-level realm,
    <code class="literal">/</code>, you can omit the query string.</p><p>Alternatively, provide the URL, to other providers so they can load
    the metadata.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.3.&nbsp;To Create a Remote Identity Provider"><a name="create-remote-idp"></a><div class="procedure-title">Procedure&nbsp;9.3.&nbsp;To Create a Remote Identity Provider</div><a class="indexterm" name="d13107e10788"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Obtain the identity provider metadata, or the URL where you can
    obtain it.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Register Remote
    Identity Provider.</p></li><li class="step" title="Step 3"><p>Provide the identity provider metadata or link to obtain
    metadata.</p></li><li class="step" title="Step 4"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 5"><p>Click Configure to save your configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.4.&nbsp;To Create a Remote Service Provider"><a name="create-remote-sp"></a><div class="procedure-title">Procedure&nbsp;9.4.&nbsp;To Create a Remote Service Provider</div><a class="indexterm" name="d13107e10811"></a><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Obtain the service provider metadata, or the URL where you can
    obtain it.</p></li><li class="step" title="Step 2"><p>On the OpenAM console Common Tasks page, click Register Remote Service
    Provider.</p></li><li class="step" title="Step 3"><p>Provide the identity provider metadata or link to obtain
    metadata.</p></li><li class="step" title="Step 4"><p>If the identity provider has not already mapped the attributes you
    share, map identity provider attribute names (Name in Assertion), to user
    profile names from your identity repository (Local Attribute Name).</p></li><li class="step" title="Step 5"><p>Either add the provider to the circle of trust you already created,
    or select Add to new and provide a New Circle of Trust name.</p></li><li class="step" title="Step 6"><p>Click Configure to save your configuration.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.5.&nbsp;To Create a Fedlet for Service Providers"><a name="create-fedlet"></a><div class="procedure-title">Procedure&nbsp;9.5.&nbsp;To Create a Fedlet for Service Providers</div><a class="indexterm" name="d13107e10837"></a><p>When your organization acts as the identity provider, and you want
   quickly to enable service providers to federate their services with yours,
   you can provide them with a <em class="firstterm">fedlet</em>. A fedlet is
   a small web application </p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>If you have not done so already, set up your identity provider.</p></li><li class="step" title="Step 2"><p>Enter the URL where the service provider will deploy the fedlet you
    create, and name the fedlet. If you create multiple fedlets, use the URL
    as a unique name that shows who has deployed the fedlet.</p></li><li class="step" title="Step 3"><p>For the attributes you share, map service provider attribute names
    (Name in Assertion), to user profile names from your identity repository
    (Local Attribute Name).</p></li><li class="step" title="Step 4"><p>Click Create to generate the <code class="filename">Fedlet.zip</code>
    file under the OpenAM configuration directory, such as
    <code class="filename">$HOME/openam/myfedlets/httpwwwexamplecom80myapp/Fedlet.zip</code>.</p></li><li class="step" title="Step 5"><p>Give the <code class="filename">Fedlet.zip</code> file to the service
    provider for deployment.</p></li></ol></div><div class="section" title="9.2.1.&nbsp;Deploying the Identity Provider Discovery Service"><div class="titlepage"><div><div><h3 class="title"><a name="deploy-idp-discovery"></a>9.2.1.&nbsp;Deploying the Identity Provider Discovery Service</h3></div></div></div><p>When your circle of trust includes multiple identity providers, then
   service providers must discover which identity provider corresponds to a
   request. You can deploy the identity provider discovery service for this
   purpose as a separate web application.</p><p>Deploying the identity provider discovery service involves the
   following stages.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create the .war file for the discovery service.</p></li><li class="listitem"><p>Deploy the .war file into your web application container.</p><p>How you deploy the discovery service .war file depends on your web
     application container. The procedure in this section shows how to deploy
     on Apache Tomcat.</p></li><li class="listitem"><p>Configure the discovery service.</p></li><li class="listitem"><p>Add the discovery service to your circle of trust.</p></li><li class="listitem"><p>Share metadata between the identity provider and the service
     provider.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.6.&nbsp;To Create the Discovery Service Web Application"><a name="create-idpdisco-file"></a><div class="procedure-title">Procedure&nbsp;9.6.&nbsp;To Create the Discovery Service Web Application</div><p>Before you start, have access to metadata for the identity and
    service providers in the circle of trust.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Unpack the <code class="filename">opensso.war</code> file into a temporary
     directory.</p><div class="screen">$ mkdir /tmp/ipds; cd /tmp/ipds
$ jar xf /path/to/OpenAM/deployable-war/opensso.war</div></li><li class="step" title="Step 2"><p>Create the <code class="filename">ipds.war</code> file.</p><div class="screen">$ cd /path/to/OpenAM/deployable-war
$ sh createwar.sh --staging /tmp/ipds --type idpdiscovery --warfile ipds.war

WAR file was created.</div></li></ol></div><div class="procedure" title="Procedure&nbsp;9.7.&nbsp;To Deploy the Discovery Service on Tomcat"><a name="deploy-idpdisco-on-tomcat"></a><div class="procedure-title">Procedure&nbsp;9.7.&nbsp;To Deploy the Discovery Service on Tomcat</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Put the <code class="filename">ipds.war</code> you created in the Tomcat
     <code class="filename">webapps/</code> directory.</p><div class="screen">$ mv ipds.war /path/to/tomcat/webapps/</div></li><li class="step" title="Step 2"><p>Access the configuration screen through your browser.</p><p>In this example, Apache Tomcat listens for HTTP requests on
     <code class="literal">openam.example.com:8080</code>, and Tomcat has unpacked the
     application under <code class="literal">/ipds</code>, so the URL is
     <code class="literal">http://openam.example.com:8080/ipds</code>, which redirects to
     <code class="filename">Configurator.jsp</code>.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.8.&nbsp;To Configure the Discovery Service"><a name="configure-idpdisco-deployed"></a><div class="procedure-title">Procedure&nbsp;9.8.&nbsp;To Configure the Discovery Service</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Configure the identity provider discovery service.</p><div class="mediaobject" title="Completed discovery service configuration screen"><a name="figure-ipds-complete-config"></a><img src="images/ipds-complete-config.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-ipds-complete-config.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-ipds-complete-config.html" target="longdesc">D</a>]</span></div></div><p>Hints for discovery service configuration parameters follow.</p><div class="variablelist"><dl><dt><span class="term">Debug Directory</span></dt><dd><p>The discovery service logs to flat files in this directory.</p></dd><dt><span class="term">Debug Level</span></dt><dd><p>Default is <code class="literal">error</code>. Other options include
        <code class="literal">error</code>, <code class="literal">warning</code>,
        <code class="literal">message</code>, and <code class="literal">off</code>.</p></dd><dt><span class="term">Cookie Type</span></dt><dd><p>Set to PERSISTENT if you have configured OpenAM to use persistent
        cookies, meaning single sign on cookies that can continue to be valid
        after the browser is closed.</p></dd><dt><span class="term">Cookie Domain</span></dt><dd><p>The cookie domain depends on the cookie domain configured for
        your circle of trust.</p></dd><dt><span class="term">Secure Cookie</span></dt><dd><p>Set this to true if clients should only return cookies when
        a secure connection is used.</p></dd><dt><span class="term">Encode Cookie</span></dt><dd><p>Leave this true unless your OpenAM installation requires that you
        do not encode cookies. Normally cookies are encoded such that cookies
        remain valid in HTTP.</p></dd><dt><span class="term">HTTP-Only Cookie</span></dt><dd><p>Set to true to use HTTPOnly cookies if needed to help prevent
        third-party programs and scripts from accessing the cookies.</p></dd></dl></div></li><li class="step" title="Step 2"><p>Restrict permissions to the discovery service configuration file in
     <code class="filename">$HOME/libIDPDiscoveryConfig.properties</code>, where $HOME
     corresponds to the user who runs the web container where you deployed the
     service.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.9.&nbsp;To Add the Discovery Service to Your Circle of Trust"><a name="add-idpdisco-to-circle-of-trust"></a><div class="procedure-title">Procedure&nbsp;9.9.&nbsp;To Add the Discovery Service to Your Circle of Trust</div><p>The examples in this procedure expect you have a circle of trust
    configured with at least a service provider and an identity provider.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>On the service provider console, login as OpenAM Administrator.</p></li><li class="step" title="Step 2"><p>On the service provider console, under Federation &gt; Circle of
     Trust Configuration, create a circle of trust, adding URLs for the
     discovery service for the SAMLv2 writer and reader services.</p><p>In this example, the writer URL is
     <code class="literal">http://openam.example.com:8080/ipds/saml2writer</code>, and the
     reader URL is
     <code class="literal">http://openam.example.com:8080/ipds/saml2reader</code>.</p></li><li class="step" title="Step 3"><p>On the identity provider console, login as OpenAM Administrator.</p></li><li class="step" title="Step 4"><p>On the identity provider console, under Federation &gt; Circle of
     Trust Configuration, create a circle of trust, adding URLs for the
     discovery service for the SAMLv2 writer and reader services as for the
     service provider.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;9.10.&nbsp;To Share Identity &amp; Service Provider Metadata"><a name="share-idpdisco-sp-metadata"></a><div class="procedure-title">Procedure&nbsp;9.10.&nbsp;To Share Identity &amp; Service Provider Metadata</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Obtain metadata for both the identity provider and service
     provider.</p><div class="screen">$ ssh idp.example.com
...
$ ssoadm create-metadata-templ -y "http://idp.example.com:8080/openam"
 -u amadmin -f /tmp/pwd.txt -i /idp -m idp-standard.xml -x idp-extended.xml

Hosted entity configuration was written to idp-extended.xml.
Hosted entity descriptor was written to idp-standard.xml.
$ ssh sp.example.com
...
$ ssoadm create-metadata-templ -y "http://sp.example.com:8080/openam"
 -u amadmin -f /tmp/pwd.txt -i /sp -m sp-standard.xml -x sp-extended.xml

Hosted entity configuration was written to idp-extended.xml.
Hosted entity descriptor was written to idp-standard.xml.</div></li><li class="step" title="Step 2"><p>On the identity provider console, create a remote service provider
     in the circle of trust using the service provider metadata.</p></li><li class="step" title="Step 3"><p>Adjust the identity provider metadata.</p></li><li class="step" title="Step 4"><p>On the service provider console, create a remote identity provider
     in the circle of trust using the identity provider metadata.</p></li></ol></div></div></div><div class="section" title="9.3.&nbsp;Configuring Identity Providers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-idp"></a>9.3.&nbsp;Configuring Identity Providers</h2></div></div></div><a class="indexterm" name="d13107e11073"></a><p>Once you have set up an identity provider, you can configure it
  through the OpenAM console under Federation &gt; Entity Providers &gt;
  <em class="replaceable"><code>Provider Name</code></em>.</p><div class="section" title="9.3.1.&nbsp;Hints for Assertion Content"><div class="titlepage"><div><div><h3 class="title"><a name="idp-assertion-content"></a>9.3.1.&nbsp;Hints for Assertion Content</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Content
   tab page.</p><div class="variablelist" title="Signing and Encryption"><a name="idp-signing-encryption"></a><div class="variablelist-title">Signing and Encryption</div><dl><dt><span class="term">Request/Response Signing</span></dt><dd><p>Specifies what parts of messages the identity provider requires
      the service provider to sign digitally.</p></dd><dt><span class="term">Encryption</span></dt><dd><p>When selected, the service provider must encrypt NameID
      elements.</p></dd><dt><span class="term">Certificate Aliases</span></dt><dd><p>Specifies aliases for certificates in the OpenAM key store that are
      used to handle digital signatures, and to handle encrypted messages.</p></dd></dl></div><div class="variablelist" title="NameID Format"><a name="idp-nameid-format"></a><div class="variablelist-title">NameID Format</div><dl><dt><span class="term">NameID Format List</span></dt><dd><p>Specifies the supported name identifiers for users that are shared
      between providers for single sign on. If no name identifier is specified
      when initiating single sign on, then the identity provider uses the first
      one in the list.</p></dd><dt><span class="term">NameID Value List</span></dt><dd><p>Maps name identifier formats to user profile attributes. The
      <code class="literal">persistent</code> and <code class="literal">transient</code> name
      identifiers need not be mapped.</p></dd></dl></div><div class="variablelist" title="Authentication Context"><a name="idp-authentication-context"></a><div class="variablelist-title">Authentication Context</div><dl><dt><span class="term">Mapper</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">IDPAuthnContextMapper</code> interface and sets up the
      authentication context.</p></dd><dt><span class="term">Default Authentication Context</span></dt><dd><p>Specifies the authentication context used if no authentication
      context specified in the request.</p></dd><dt><span class="term">Supported Contexts</span></dt><dd><p>Specifies the supported authentication contexts, where the Key
      and Value can specify a corresponding OpenAM authentication method,
      and the Level corresponds to an authentication module authentication
      level.</p></dd></dl></div><div class="variablelist" title="Assertion Time"><a name="idp-assertion-time"></a><div class="variablelist-title">Assertion Time</div><dl><dt><span class="term">Not-Before Time Skew</span></dt><dd><p>Grace period in seconds for the <code class="literal">NotBefore</code> time
      in assertions.</p></dd><dt><span class="term">Effective Time</span></dt><dd><p>Validity in seconds of an assertion.</p></dd></dl></div><div class="variablelist" title="Basic Authentication"><a name="idp-basic-authentication"></a><div class="variablelist-title">Basic Authentication</div><dl><dt><span class="term">Enabled, User Name, Password</span></dt><dd><p>When enabled, authenticate with the specified user name and
      password at SOAP end points.</p></dd></dl></div><div class="variablelist" title="Assertion Cache"><a name="idp-assertion-cache"></a><div class="variablelist-title">Assertion Cache</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, cache assertions.</p></dd></dl></div><div class="variablelist" title="Bootstrapping"><a name="idp-bootstrapping"></a><div class="variablelist-title">Bootstrapping</div><dl><dt><span class="term">Discovery Bootstrapping</span></dt><dd><p>When enabled, generate a Discovery Service Resource Offering
      during the Liberty-based single sign on.</p></dd></dl></div></div><div class="section" title="9.3.2.&nbsp;Hints for Assertion Processing"><div class="titlepage"><div><div><h3 class="title"><a name="idp-assertion-processing"></a>9.3.2.&nbsp;Hints for Assertion Processing</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Processing
   tab page.</p><div class="variablelist" title="Attribute Mapper"><a name="idp-attribute-mapper"></a><div class="variablelist-title">Attribute Mapper</div><dl><dt><span class="term">Attribute Mapper</span></dt><dd><p>Specifies a class that implements the attribute mapping.</p></dd><dt><span class="term">Attribute Map</span></dt><dd><p>Maps SAML attributes to user profile attributes.</p></dd></dl></div><div class="variablelist" title="Account Mapper"><a name="idp-account-mapper"></a><div class="variablelist-title">Account Mapper</div><dl><dt><span class="term">Account Mapper</span></dt><dd><p>Specifies a class that implements <code class="literal">AccountMapper</code>
      to map remote users to local user profiles.</p></dd></dl></div><div class="variablelist" title="Local Configuration"><a name="idp-local-configuration"></a><div class="variablelist-title">Local Configuration</div><dl><dt><span class="term">Auth URL</span></dt><dd><p>URL where users are redirected to authenticate.</p></dd><dt><span class="term">External Application Logout URL</span></dt><dd><p>URL to which to send an HTTP POST including all cookies when
      receiving a logout request. To add a user session property as a POST
      parameter, include it in the URL query string as a
      <code class="literal">appsessionproperty</code> parameter.</p></dd></dl></div></div><div class="section" title="9.3.3.&nbsp;Hints for Services"><div class="titlepage"><div><div><h3 class="title"><a name="idp-services"></a>9.3.3.&nbsp;Hints for Services</h3></div></div></div><p>Use the following hints to adjust settings on the Services tab
   page.</p><div class="variablelist" title="MetaAlias"><a name="idp-meta-alias"></a><div class="variablelist-title">MetaAlias</div><dl><dt><span class="term">MetaAlias</span></dt><dd><p>Used to locate the providers entity identifier, specified as
      <code class="literal">/<em class="replaceable"><code>realm</code></em>/<em class="replaceable"><code>provider-name</code></em></code>.
      The extra leading <code class="literal">/</code> is omitted for the top-level
      realm.</p></dd></dl></div><div class="variablelist" title="IDP Service Attributes"><a name="idp-service-attibutes"></a><div class="variablelist-title">IDP Service Attributes</div><dl><dt><span class="term">Artifact Resolution Service</span></dt><dd><p>Specifies the end point to handle artifact resolution. The Index
      is a unique number identifier for the end point.</p></dd><dt><span class="term">Single Logout Service</span></dt><dd><p>Specifies the end points to handle single logout, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Manage NameID Service</span></dt><dd><p>Specifies the end points to handle name identifiers, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Single SignOn Service</span></dt><dd><p>Specifies the end points to handle single sign on.</p></dd></dl></div><div class="variablelist" title="NameID Mapping"><a name="idp-nameid-mapping"></a><div class="variablelist-title">NameID Mapping</div><dl><dt><span class="term">URL</span></dt><dd><p>Specifies the end point to handle name identifier mapping.</p></dd></dl></div></div><div class="section" title="9.3.4.&nbsp;Hints for Advanced Settings"><div class="titlepage"><div><div><h3 class="title"><a name="idp-advanced"></a>9.3.4.&nbsp;Hints for Advanced Settings</h3></div></div></div><p>Use the following hints to adjust settings on the Advanced tab
   page.</p><div class="variablelist" title="SAE Configuration"><a name="idp-sae-configuration"></a><div class="variablelist-title">SAE Configuration</div><dl><dt><span class="term">IDP URL</span></dt><dd><p>Specifies the end point to handle Secure Attribute Exchange
      requests.</p></dd><dt><span class="term">Application Security Configuration</span></dt><dd><p>Specifies how to handle encryption for Secure Attribute Exchange
      operations.</p></dd></dl></div><div class="variablelist" title="ECP Configuration"><a name="idp-ecp-configuration"></a><div class="variablelist-title">ECP Configuration</div><dl><dt><span class="term">IDP Session Mapper</span></dt><dd><p>Specifies the class that finds a valid session from an HTTP
      servlet request to an identity provider with a SAML Enhanced Client or
      Proxy profile.</p></dd></dl></div><div class="variablelist" title="Session Synchronization"><a name="idp-session-synchronization"></a><div class="variablelist-title">Session Synchronization</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, the identity provider notifies service providers
      to log the user out when a session expires.</p></dd></dl></div><div class="variablelist" title="IDP Finder Implementation"><a name="idp-finder-implementation"></a><div class="variablelist-title">IDP Finder Implementation</div><dl><dt><span class="term">IDP Finder Implementation Class</span></dt><dd><p>Specifies a class that finds the preferred identity provider to
      handle a proxied authentication request.</p></dd><dt><span class="term">IDP Finder JSP</span></dt><dd><p>Specifies a JSP that presents the list of identity providers to
      the user.</p></dd><dt><span class="term">Enable Proxy IDP Finder For All SPs</span></dt><dd><p>When enabled, apply the finder for all remote service
      providers.</p></dd></dl></div><div class="variablelist" title="Relay State URL List"><a name="idp-relay-state-url-list"></a><div class="variablelist-title">Relay State URL List</div><dl><dt><span class="term">Relay State URL List</span></dt><dd><p>List of URLs to which to redirect users after the request has
      been handled. Used if not specified in the service provider extended
      metadata.</p></dd></dl></div><div class="variablelist" title="IDP Adapter"><a name="idp-adapter"></a><div class="variablelist-title">IDP Adapter</div><dl><dt><span class="term">IDP Adapter Class</span></dt><dd><p>Specifies a class to invoke immediately before sending a
      SAML 2.0 response.</p></dd></dl></div></div></div><div class="section" title="9.4.&nbsp;Configuring Service Providers"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sp"></a>9.4.&nbsp;Configuring Service Providers</h2></div></div></div><a class="indexterm" name="d13107e11390"></a><p>Once you have set up a service provider, you can configure it
  through the OpenAM console under Federation &gt; Entity Providers &gt;
  <em class="replaceable"><code>Provider Name</code></em>.</p><div class="section" title="9.4.1.&nbsp;Hints for Assertion Content"><div class="titlepage"><div><div><h3 class="title"><a name="sp-assertion-content"></a>9.4.1.&nbsp;Hints for Assertion Content</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Content
   tab page.</p><div class="variablelist" title="Signing and Encryption"><a name="sp-signing-encryption"></a><div class="variablelist-title">Signing and Encryption</div><dl><dt><span class="term">Request/Response Signing</span></dt><dd><p>Specifies what parts of messages the service provider requires
      the identity provider to sign digitally.</p></dd><dt><span class="term">Encryption</span></dt><dd><p>The identity provider must encrypt selected elements.</p></dd><dt><span class="term">Certificate Aliases</span></dt><dd><p>Specifies aliases for certificates in the OpenAM key store that are
      used to handle digital signatures, and to handle encrypted messages.</p></dd></dl></div><div class="variablelist" title="NameID Format"><a name="sp-nameid-format"></a><div class="variablelist-title">NameID Format</div><dl><dt><span class="term">NameID Format List</span></dt><dd><p>Specifies the supported name identifiers for users that are shared
      between providers for single sign on. If no name identifier is specified
      when initiating single sign on, then the service provider uses the first
      one in the list supported by the identity provider.</p></dd><dt><span class="term">Disable Federation persistence if NameID Format is unspecified</span></dt><dd><p>When enabled, the NameID Format in the authentication response is
      <code class="literal">urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</code>,
      and the Account Mapper has identified the local user, the service provider
      does not persist federation information in the user profile.</p></dd></dl></div><div class="variablelist" title="Authentication Context"><a name="sp-authentication-context"></a><div class="variablelist-title">Authentication Context</div><dl><dt><span class="term">Mapper</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">SPAuthnContextMapper</code> interface and sets up the
      authentication context.</p></dd><dt><span class="term">Default Authentication Context</span></dt><dd><p>Specifies the authentication context used if no authentication
      context specified in the request.</p></dd><dt><span class="term">Supported Contexts</span></dt><dd><p>Specifies the supported authentication contexts. The Level
      corresponds to an authentication module authentication level.</p></dd><dt><span class="term">Comparison Type</span></dt><dd><p>How the authentication context in the assertion response must
      compare to the supported contexts.</p></dd></dl></div><div class="variablelist" title="Assertion Time"><a name="sp-assertion-time"></a><div class="variablelist-title">Assertion Time</div><dl><dt><span class="term">Assertion Time Skew</span></dt><dd><p>Grace period in seconds for the <code class="literal">NotBefore</code> time
      in assertions.</p></dd></dl></div><div class="variablelist" title="Basic Authentication"><a name="sp-basic-authentication"></a><div class="variablelist-title">Basic Authentication</div><dl><dt><span class="term">Enabled, User Name, Password</span></dt><dd><p>When enabled, authenticate with the specified user name and
      password at SOAP end points.</p></dd></dl></div></div><div class="section" title="9.4.2.&nbsp;Hints for Assertion Processing"><div class="titlepage"><div><div><h3 class="title"><a name="sp-assertion-processing"></a>9.4.2.&nbsp;Hints for Assertion Processing</h3></div></div></div><p>Use the following hints to adjust settings on the Assertion Processing
   tab page.</p><div class="variablelist" title="Attribute Mapper"><a name="sp-attribute-mapper"></a><div class="variablelist-title">Attribute Mapper</div><dl><dt><span class="term">Attribute Mapper</span></dt><dd><p>Specifies a class that implements the attribute mapping.</p></dd><dt><span class="term">Attribute Map</span></dt><dd><p>Maps SAML attributes to user profile attributes.</p></dd></dl></div><div class="variablelist" title="Auto Federation"><a name="sp-auto-federation"></a><div class="variablelist-title">Auto Federation</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, automatically federate user's accounts at different
      providers based on the specified profile attribute.</p></dd><dt><span class="term">Attribute</span></dt><dd><p>Specifies the user profile attribute to match accounts at different
      providers.</p></dd></dl></div><div class="variablelist" title="Account Mapper"><a name="sp-account-mapper"></a><div class="variablelist-title">Account Mapper</div><dl><dt><span class="term">Account Mapper</span></dt><dd><p>Specifies a class that implements <code class="literal">AccountMapper</code>
      to map remote users to local user profiles.</p></dd><dt><span class="term">Use Name ID as User ID</span></dt><dd><p>When selected, fall back to using the name identifier from the
      assertion to find the user.</p></dd></dl></div><div class="variablelist" title="Artifact Message Encoding"><a name="sp-artifact-message-encoding"></a><div class="variablelist-title">Artifact Message Encoding</div><dl><dt><span class="term">Encoding</span></dt><dd><p>Specifies the message encoding format for artifacts.</p></dd></dl></div><div class="variablelist" title="Transient User"><a name="sp-transient-user"></a><div class="variablelist-title">Transient User</div><dl><dt><span class="term">Transient User</span></dt><dd><p>Specifies the user profile to which to map all identity provider
      users when sending transient name identifiers.</p></dd></dl></div><div class="variablelist" title="URL"><a name="sp-url"></a><div class="variablelist-title">URL</div><dl><dt><span class="term">Local Authentication URL</span></dt><dd><p>Specifies the local login URL.</p></dd><dt><span class="term">Intermediate URL</span></dt><dd><p>Specifies a URL to which the user is redirected after
      authentication but before the original URL requested.</p></dd><dt><span class="term">External Application Logout URL</span></dt><dd><p>Specifies the URL to which to send an HTTP POST including all
      cookies when receiving a logout request. To add a user session property
      as a POST parameter, include it in the URL query string as a
      <code class="literal">appsessionproperty</code> parameter.</p></dd></dl></div><div class="variablelist" title="Default Relay State URL"><a name="sp-default-relay-state-url"></a><div class="variablelist-title">Default Relay State URL</div><dl><dt><span class="term">Default Relay State URL</span></dt><dd><p>Specifies the URL to which to redirect users after the request has
      been handled. Used if not specified in the response.</p></dd></dl></div><div class="variablelist" title="Adapter"><a name="sp-adapter"></a><div class="variablelist-title">Adapter</div><dl><dt><span class="term">Adapter</span></dt><dd><p>Specifies a class that implements the
      <code class="literal">FederationSPAdapter</code> interface and performs application
      specific processing during the federation process.</p></dd><dt><span class="term">Adapter Environment</span></dt><dd><p>Specifies environment variables passed to the adapter class.</p></dd></dl></div></div><div class="section" title="9.4.3.&nbsp;Hints for Services"><div class="titlepage"><div><div><h3 class="title"><a name="sp-services"></a>9.4.3.&nbsp;Hints for Services</h3></div></div></div><p>Use the following hints to adjust settings on the Services tab
   page.</p><div class="variablelist" title="MetaAlias"><a name="sp-meta-alias"></a><div class="variablelist-title">MetaAlias</div><dl><dt><span class="term">MetaAlias</span></dt><dd><p>Used to locate the providers entity identifier, specified as
      <code class="literal">/<em class="replaceable"><code>realm</code></em>/<em class="replaceable"><code>provider-name</code></em></code>.
      The extra leading <code class="literal">/</code> is omitted for the top-level
      realm.</p></dd></dl></div><div class="variablelist" title="SP Service Attributes"><a name="sp-service-attibutes"></a><div class="variablelist-title">SP Service Attributes</div><dl><dt><span class="term">Single Logout Service</span></dt><dd><p>Specifies the end points to handle single logout, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Manage NameID Service</span></dt><dd><p>Specifies the end points to handle name identifiers, depending on
      the SAML binding selected.</p></dd><dt><span class="term">Assertion Consumer Service</span></dt><dd><p>Specifies the end points to consume assertions, with Index
      corresponding to the index of the URL in the standard metadata.</p></dd></dl></div></div><div class="section" title="9.4.4.&nbsp;Hints for Advanced Settings"><div class="titlepage"><div><div><h3 class="title"><a name="sp-advanced"></a>9.4.4.&nbsp;Hints for Advanced Settings</h3></div></div></div><p>Use the following hints to adjust settings on the Advanced tab
   page.</p><div class="variablelist" title="SAE Configuration"><a name="sp-sae-configuration"></a><div class="variablelist-title">SAE Configuration</div><dl><dt><span class="term">SP URL</span></dt><dd><p>Specifies the end point to handle Secure Attribute Exchange
      requests.</p></dd><dt><span class="term">SP Logout URL</span></dt><dd><p>Specifies the end point of the service provider that can handle
      global logout requests.</p></dd><dt><span class="term">Application Security Configuration</span></dt><dd><p>Specifies how to handle encryption for Secure Attribute Exchange
      operations.</p></dd></dl></div><div class="variablelist" title="ECP Configuration"><a name="sp-ecp-configuration"></a><div class="variablelist-title">ECP Configuration</div><dl><dt><span class="term">Request IDP List Finder Implementation</span></dt><dd><p>Specifies a class that returns a list of preferred identity
      providers trusted by the SAML Enhanced Client or Proxy profile.</p></dd><dt><span class="term">Request IDP List Get Complete</span></dt><dd><p>Specifies a URI reference used to retrieve the complete identity
      provider list if the <code class="literal">IDPList</code> element is not
      complete.</p></dd><dt><span class="term">Request IDP List</span></dt><dd><p>Specifies a list of identity providers for the SAML Enhanced Client
      or Proxy to contact, used by the default implementation of the IDP
      Finder.</p></dd></dl></div><div class="variablelist" title="IDP Proxy"><a name="sp-idp-proxy"></a><div class="variablelist-title">IDP Proxy</div><dl><dt><span class="term">IDP Proxy</span></dt><dd><p>When enabled, allow proxied authentication for this service
      provider.</p></dd><dt><span class="term">Introduction</span></dt><dd><p>When enabled, use introductions to find the proxy identity
      provider.</p></dd><dt><span class="term">Proxy Count</span></dt><dd><p>Specifies the maximum number of proxy identity providers.</p></dd><dt><span class="term">IDP Proxy List</span></dt><dd><p>Specifies a list of URIs identifying preferred proxy identity
      providers.</p></dd></dl></div><div class="variablelist" title="Session Synchronization"><a name="sp-session-synchronization"></a><div class="variablelist-title">Session Synchronization</div><dl><dt><span class="term">Enabled</span></dt><dd><p>When enabled, the service provider notifies identity providers
      to log the user out when a session expires.</p></dd></dl></div><div class="variablelist" title="Relay State URL List"><a name="sp-relay-state-url-list"></a><div class="variablelist-title">Relay State URL List</div><dl><dt><span class="term">Relay State URL List</span></dt><dd><p>List of URLs to which to redirect users after the request has
      been handled. Used if not specified in the service provider extended
      metadata.</p></dd></dl></div></div></div><div class="section" title="9.5.&nbsp;Configuring Circles of Trust"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-cot"></a>9.5.&nbsp;Configuring Circles of Trust</h2></div></div></div><a class="indexterm" name="d13107e11761"></a><p>Once you have set up a circle of trust, you can configure it
  through the OpenAM console under Federation &gt; Circle of Trust &gt;
  <em class="replaceable"><code>Circle of Trust Name</code></em>.</p><div class="variablelist"><dl><dt><span class="term">Name</span></dt><dd><p>String to refer to the circle of trust.</p></dd><dt><span class="term">Description</span></dt><dd><p>Short description of the circle of trust.</p></dd><dt><span class="term">IDFF Writer Service URL</span></dt><dd><p>Liberty Identity Federation Framework service that writes identity
     provider entity identifiers to Common Domain cookies after successful
     authentication, used in identity provider discovery. Example:
     <code class="literal">http://disco.example.com:8080/openam/idffwriter</code>.</p></dd><dt><span class="term">IDFF Reader Service URL</span></dt><dd><p>Liberty Identity Federation Framework service that reads identity
     provider entity identifiers from Common Domain cookies, used in identity
     provider discovery. Example:
     <code class="literal">http://disco.example.com:8080/openam/transfer</code>.</p></dd><dt><span class="term">SAML2 Writer Service URL</span></dt><dd><p>SAML 2.0 service that writes identity provider entity identifiers
     to Common Domain cookies after successful authentication, used in identity
     provider discovery. Example:
     <code class="literal">http://disco.example.com:8080/openam/saml2writer</code>.</p></dd><dt><span class="term">SAML2 Reader Service URL</span></dt><dd><p>SAML 2.0 service that reads identity provider entity identifiers
     from Common Domain cookies, used in identity provider discovery. Example:
     <code class="literal">http://disco.example.com:8080/openam/saml2reader</code>.</p></dd><dt><span class="term">Status</span></dt><dd><p>Whether this circle of trust is operational.</p></dd><dt><span class="term">Realm</span></dt><dd><p>Name of the realm participating in this circle of trust.</p></dd><dt><span class="term">Entity Providers</span></dt><dd><p>Known hosted and remote identity and service providers participating
     in this circle of trust.</p></dd></dl></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;10.&nbsp;Backing Up and Restoring OpenAM Configurations"><div class="titlepage"><div><div><h2 class="title"><a name="chap-backup-restore"></a>Chapter&nbsp;10.&nbsp;Backing Up and Restoring OpenAM Configurations</h2></div></div></div><p>This chapter shows how to backup and restore OpenAM configuration
 data. This chapter <span class="emphasis"><em>does not cover backup and restore of user
 data</em></span>, which in a critical production system should be stored
 separately.</p><div class="procedure" title="Procedure&nbsp;10.1.&nbsp;To Back Up OpenAM Configuration"><a name="backup-config-to-xml"></a><div class="procedure-title">Procedure&nbsp;10.1.&nbsp;To Back Up OpenAM Configuration</div><a class="indexterm" name="d13107e11850"></a><p>OpenAM stores service configuration data in a directory. During normal
  production operations, you rely on directory replication to maintain multiple,
  current copies of OpenAM service configuration. For disaster recovery,
  however, you backup to and restore the service configuration from XML, using
  the <span class="command"><strong>ssoadm</strong></span> command.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Backup OpenAM service configuration using the
   <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen">$ ssoadm export-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -o ~/backup-`date -u +%F-%m-%S`.xml

Service Configuration was exported.</div><p>In this example, the secret key for encrypting the password in
   <code class="option">-e fZatIu68OiqccJMXosSRyVjMsWJIx+SA</code> was taken from the
   Password Encryption Key field in the OpenAM console under Configuration &gt;
   Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt;
   Security.</p></li><li class="step" title="Step 2"><p>Stop OpenAM.</p></li><li class="step" title="Step 3"><p>Back up the instance file that points to the configuration
   directory.</p><p>This file is named after the instance location, such as
   <code class="filename">$HOME/.openssocfg/AMConfig_path_to_tomcat_webapps_openam_</code>,
   where $HOME is that of the user running the web container where OpenAM
   is deployed.</p></li><li class="step" title="Step 4"><p>Back up the files in the configuration directory.</p><p>The content of the file you backed up in the previous step is the
   path to the configuration directory, such as
   <code class="filename">$HOME/openam</code>.</p></li><li class="step" title="Step 5"><p>Start OpenAM.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;10.2.&nbsp;To Restore OpenAM Configuration"><a name="restore-config-from-xml"></a><div class="procedure-title">Procedure&nbsp;10.2.&nbsp;To Restore OpenAM Configuration</div><a class="indexterm" name="d13107e11899"></a><p>The following steps restore OpenAM configuration data from
  backup as described in <a class="xref" href="#backup-config-to-xml" title="Procedure&nbsp;10.1.&nbsp;To Back Up OpenAM Configuration">Procedure&nbsp;10.1, &#8220;To Back Up OpenAM Configuration&#8221;</a>.</p><div class="tip" title="Tip" style="font-style: italic;"><h3 class="title">Tip</h3><p>If using the default OpenAM configuration data store, run
   <span class="command"><strong>ssoadm embedded-status</strong></span> to check the data store status
   to determine whether you must restore the configuration files including
   the embedded data store, or only the service configuration.</p></div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Deploy the OpenAM web application as you did for installation, but
   do not start OpenAM or configure it.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 2"><p>Restore files in the configuration directory as necessary.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 3"><p>Restore the bootstrap files as necessary.</p><p>In a site configuration, perform this step on all servers.</p></li><li class="step" title="Step 4"><p>Start OpenAM.</p><p>In a site configuration, perform this step on all servers before
   proceeding.</p></li><li class="step" title="Step 5"><p>Restore OpenAM service configuration using the
   <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen">$ ssoadm import-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -X ~/backup-2011-09-13-09-00.xml 

Directory Service contains existing data. Do you want to delete it? [y|N] y
Please wait while we import the service configuration...
Service Configuration was imported.</div><p>In a site configuration, you perform this step only once.</p><p>If the password for <code class="literal">amadmin</code> has been changed
   through the OpenAM console, then use the bind password for the root DN of
   the configuration store.</p></li><li class="step" title="Step 6"><p>Restart OpenAM.</p><p>In a site configuration, perform this step on all servers.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;11.&nbsp;Managing Certificates"><div class="titlepage"><div><div><h2 class="title"><a name="chap-certs-keystores"></a>Chapter&nbsp;11.&nbsp;Managing Certificates</h2></div></div></div><a class="indexterm" name="d13107e11956"></a><a class="indexterm" name="d13107e11959"></a><p>This chapter shows you how to handle certificates used to protect
 network communication and for authentication.</p><p>In theory, you should not have to concern yourself with certificates
 when working with OpenAM. OpenAM core services and J2EE policy agents depend
 on the certificates installed for use with the web application container in
 which they run. OpenAM web policy agents depend on the certificates installed
 for use with the web server. Theoretically, each certificate has been signed
 by a well-known Certificate Authority (CA), whose certificate is already
 installed in the Java CA certificates trust store
 (<code class="filename">$JAVA_HOME/jre/lib/security/cacerts</code>, default password
 <code class="literal">changeit</code>) and in browsers, and so is recognized by other
 software used without you having to configure anything.</p><p>In practice, you might not have the budget for CA signed certificates
 in your lab or test environment, where you might constantly be installing
 new configurations, using and throwing away certificates for experiments and
 repeated tests. In the lab, therefore, you set up OpenAM to use self-signed
 certificates that you generate at no cost, but that are not recognized, and
 therefore not trusted out of the box.</p><div class="itemizedlist"><p>How you configure the containers where OpenAM and your applications run
  to use self-signed certificates depends on your web application server or web
  server software. Yet, the basic principles apply.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>First, your container requires its own certificate for setting up
   secure connections.</p></li><li class="listitem"><p>Second, the clients connecting must be able to trust the container
   certificate. Generally this means that clients must recognize the container
   certificate because they have a copy of the public certificate stored
   somewhere the client trusts.</p></li><li class="listitem"><p>Third, if you use certificate authentication in OpenAM, OpenAM must
   also be able to find a copy of the client's public certificate to trust the
   client, most likely by finding a match with the certificate stored in the
   client profile from the identity repository. How you include client
   certificates in their identity repository entries depends on your identity
   repository more than it depends on OpenAM.</p></li></ul></div><p>Some client applications let you trust certificates blindly. This can
 be helpful when working in your lab or test environment with self-signed
 certificates. For example, you might want to use HTTPS with the OpenAM
 RESTful API without having the client recognize the self-signed server
 certificate.</p><div class="screen">$ curl "https://openam.example.com:8443/openam/identity/authenticate?
 username=bjensen&amp;password=hifalutin"
curl: (60) Peer certificate cannot be authenticated with known CA certificates
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
 of Certificate Authority (CA) public keys (CA certs). If the default
 bundle file isn't adequate, you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option.
$ curl --insecure "https://openam.example.com:8443/openam/identity/authenticate?
 username=bjensen&amp;password=hifalutin"
token.id=AQIC5wM2LY4SfczMax8jegpSiaigB96NOWylLilsd0PUMjY.*AAJTSQACMDE.*</div><div class="procedure" title="Procedure&nbsp;11.1.&nbsp;To Set Up OpenAM With HTTPS on Tomcat"><a name="openam-with-https-on-tomcat"></a><div class="procedure-title">Procedure&nbsp;11.1.&nbsp;To Set Up OpenAM With HTTPS on Tomcat</div><p>The container where you install OpenAM requires a certificate in order
  to set up secure connections. The following steps demonstrate one way to set
  up Tomcat with an HTTPS connector, using the Java <span class="command"><strong>keytool</strong></span>
  command to manage the certificate and key stores. Once Tomcat can do HTTPS,
  you deploy OpenAM as you normally would, over HTTPS.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Stop Tomcat.</p></li><li class="step" title="Step 2"><p>Create a certificate and store it in a new key store.</p><div class="screen">$ cd /path/to/tomcat/conf/
$ keytool -genkey -alias openam.example.com -keyalg RSA -keystore keystore.jks
Enter keystore password:  
What is your first and last name?
  [Unknown]:  openam.example.com
What is the name of your organizational unit?
  [Unknown]:  Eng
What is the name of your organization?
  [Unknown]:  ForgeRock.com
What is the name of your City or Locality?
  [Unknown]:  Grenoble
What is the name of your State or Province?
  [Unknown]:  Isere
What is the two-letter country code for this unit?
  [Unknown]:  FR
Is CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR correct?
  [no]:  yes

Enter key password for &lt;openam.example.com&gt;
 (RETURN if same as keystore password):</div></li><li class="step" title="Step 3"><p>Uncomment the SSL connector configuration in Tomcat's
   <code class="filename">conf/server.xml</code>, specifying your key store file
   and password.</p><div class="programlisting"><em class="hl-comment" style="color: #868686">&lt;!-- Define a SSL HTTP/1.1 Connector on port 8443
     This connector uses the JSSE configuration, when using APR, the 
     connector should be using the OpenSSL style configuration
     described in the APR documentation --&gt;</em>
<em class="hl-comment" style="color: #868686">&lt;!--
--&gt;</em>
<strong class="hl-tag" style="color: #f58220">&lt;Connector</strong> <span class="hl-attribute" style="color: #868686">port</span>=<span class="hl-value" style="color: #333">"8443"</span> <span class="hl-attribute" style="color: #868686">protocol</span>=<span class="hl-value" style="color: #333">"HTTP/1.1"</span> <span class="hl-attribute" style="color: #868686">SSLEnabled</span>=<span class="hl-value" style="color: #333">"true"</span>
           <span class="hl-attribute" style="color: #868686">maxThreads</span>=<span class="hl-value" style="color: #333">"150"</span> <span class="hl-attribute" style="color: #868686">scheme</span>=<span class="hl-value" style="color: #333">"https"</span> <span class="hl-attribute" style="color: #868686">secure</span>=<span class="hl-value" style="color: #333">"true"</span>
           <span class="strong"><strong>keystoreFile="/path/to/tomcat/conf/keystore.jks"
           keystorePass="changeit"</strong></span>
           clientAuth="false" sslProtocol="TLS" /&gt;</div></li><li class="step" title="Step 4"><p>Start Tomcat.</p></li><li class="step" title="Step 5"><p>Verify that you can connect to Tomcat on port 8443 over HTTPS.</p><p>Your browser does not trust the certificate, because the certificate
   is self-signed, not signed by any of the CAs your browser knows.</p><div class="mediaobject" title="Your browser does not trust your self-signed certificate."><a name="figure-browser-unknown-cert"></a><img src="images/browser-unknown-cert.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-browser-unknown-cert.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-browser-unknown-cert.html" target="longdesc">D</a>]</span></div></div><p>You recognize the Subject and Issuer of your certificate, and so
   can choose to trust the certificate, effectively saving it into your
   browser's trust store.</p></li><li class="step" title="Step 6"><p>Deploy and configure OpenAM as you normally would.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;11.2.&nbsp;To Share Self-Signed Certificates"><a name="share-self-signed-certs"></a><div class="procedure-title">Procedure&nbsp;11.2.&nbsp;To Share Self-Signed Certificates</div><p>When you use a self-signed certificate for your container, clients
  connecting must be able to trust the container certificate. Your browser
  makes this an easy, but manual process. For other client applications, you
  must import the certificate into the trust store used by the client. By
  default, Java applications can use the
  <code class="filename">$JAVA_HOME/jre/lib/security/cacerts</code> store. The default
  password is <code class="literal">changeit</code>.<sup>[<a name="d13107e12049" href="#ftn.d13107e12049" class="footnote">7</a>]</sup> The
  steps that follow demonstrate how to import a self-signed certificate into
  the Java <code class="filename">cacerts</code> store.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Export the certificate from the key store.</p><div class="screen">$ cd /path/to/tomcat/conf/
$ keytool -exportcert -alias openam.example.com -file openam.crt -keystore
 keystore.jks
Enter keystore password:
Certificate stored in file &lt;openam.crt&gt;</div></li><li class="step" title="Step 2"><p>Import the certificate into the trust store.</p><div class="screen">$ keytool -importcert -alias openam.example.com -file openam.crt
 -trustcacerts -keystore $JAVA_HOME/jre/lib/security/cacerts
Enter keystore password:  
Owner: CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR
Issuer: CN=openam.example.com, OU=Eng, O=ForgeRock.com, L=Grenoble, ST=Isere,
 C=FR
Serial number: 4e789e40
Valid from: Tue Sep 20 16:08:00 CEST 2011 until: Mon Dec 19 15:08:00 CET 2011
Certificate fingerprints:
  MD5:  31:08:11:3B:15:75:87:C2:12:08:E9:66:00:81:61:8D
  SHA1: AA:90:2F:42:0A:F4:A9:A5:0C:90:A9:FC:69:FD:64:65:D9:78:BA:1D
  Signature algorithm name: SHA1withRSA
  Version: 3
Trust this certificate? [no]:  yes
Certificate was added to keystore</div></li></ol></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d13107e12049" href="#d13107e12049" class="para">7</a>] </sup>Alternatively,
  you can specify the trust store for a Java application, such as
  <code class="literal">-Djavax.net.ssl.trustStore=/path/to/truststore.jks
  -Djavax.net.ssl.trustStorePassword=changeit</code>.</p></div></div></div><div lang="en" class="chapter" title="Chapter&nbsp;12.&nbsp;Monitoring OpenAM Services"><div class="titlepage"><div><div><h2 class="title"><a name="chap-monitoring"></a>Chapter&nbsp;12.&nbsp;Monitoring OpenAM Services</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#monitoring-interfaces">12.1. Monitoring Interfaces</a></span></dt><dt><span class="section"><a href="#is-openam-alive">12.2. Is OpenAM Up?</a></span></dt><dt><span class="section"><a href="#log-mgmt">12.3. Log Management</a></span></dt><dt><span class="section"><a href="#session-mgmt">12.4. Session Management</a></span></dt></dl></div><p>This chapter covers how to monitor OpenAM services to ensure
 appropriate performance and service availability.</p><div class="section" title="12.1.&nbsp;Monitoring Interfaces"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="monitoring-interfaces"></a>12.1.&nbsp;Monitoring Interfaces</h2></div></div></div><a class="indexterm" name="d13107e12078"></a><p>OpenAM lets you monitor OpenAM over protocol through web pages,
  Java Management Extensions (JMX), or Simple Network Management Protocol
  (SNMP). The services are based on JMX.</p><p>To configure monitoring services, login to OpenAM console as OpenAM
  administrator, and browse to Configuration &gt; System &gt; Monitoring.
  Alternatively you can use the <span class="command"><strong>ssoadm set-attr-defs</strong></span>
  command.</p><div class="screen">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-enabled=true</div><p>Restart OpenAM for the changes to take effect. You must also restart
  OpenAM if you disable monitoring.</p><div class="section" title="12.1.1.&nbsp;Web Based Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-web-pages"></a>12.1.1.&nbsp;Web Based Monitoring</h3></div></div></div><p>You can configure OpenAM to allow you to access a web based view of
   OpenAM MBeans on port 8082 where the core server runs, such as
   <code class="literal">http://openam-ter.example.com:8082/</code>. Either use the
   console, or use the <span class="command"><strong>ssoadm</strong></span> command.</p><div class="screen">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-http-enabled=true</div><p>The default authentication file allows you to authenticate over HTTP
   as user <code class="literal">demo</code>, password <code class="literal">changeit</code>. The
   user name and password are kept in the file specified, with the password
   encrypted.</p><div class="screen">$ cat openam/openam/opensso_mon_auth 
demo AQICvSe+tXEg8TUUT8ekzHb8IRzVSvm1Lc2u</div><p>You can encrypt a new password using the <span class="command"><strong>ampassword</strong></span>
   command. After changing the authentication file, you must restart OpenAM
   for the changes to take effect.</p><div class="mediaobject" title="OpenAM MBeans in a browser"><a name="figure-web-based-monitoring"></a><img src="images/web-based-monitoring.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-web-based-monitoring.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-web-based-monitoring.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="12.1.2.&nbsp;JMX Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-jmx"></a>12.1.2.&nbsp;JMX Monitoring</h3></div></div></div><a class="indexterm" name="d13107e12131"></a><p>You can configure OpenAM to allow you to listen on port 9999 for JMX
   monitoring. Either use the console, or use the <span class="command"><strong>ssoadm</strong></span>
   command.</p><div class="screen">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-rmi-enabled=true</div><p>You can then use <span class="command"><strong>jconsole</strong></span> or other JMX-enabled
   tools to browse the MBeans. You can also browse the MBeans by connecting
   to your web application container, and browsing to the OpenAM MBeans.</p><div class="mediaobject" title="Jconsole browsing OpenAM MBeans"><a name="figure-jconsole-to-openam"></a><img src="images/jconsole-to-openam.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-jconsole-to-openam.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-jconsole-to-openam.html" target="longdesc">D</a>]</span></div></div></div><div class="section" title="12.1.3.&nbsp;SNMP Monitoring"><div class="titlepage"><div><div><h3 class="title"><a name="monitoring-snmp"></a>12.1.3.&nbsp;SNMP Monitoring</h3></div></div></div><a class="indexterm" name="d13107e12159"></a><p>You can configure OpenAM to allow you to listen on port 8085 for SNMP
   monitoring. Either use the console, or use the <span class="command"><strong>ssoadm</strong></span>
   command.</p><div class="screen">$ ssoadm
 set-attr-defs
 --servicename iPlanetAMMonitoringService
 --schematype Global
 --adminid amadmin
 --password-file /tmp/pwd.txt
 --attributevalues iplanet-am-monitoring-snmp-enabled=true</div></div></div><div class="section" title="12.2.&nbsp;Is OpenAM Up?"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="is-openam-alive"></a>12.2.&nbsp;Is OpenAM Up?</h2></div></div></div><a class="indexterm" name="d13107e12174"></a><p>You can check over HTTP whether OpenAM is up, using
  <code class="filename">isAlive.jsp</code>. Point your application to the file
  under the OpenAM URL, such as
  <code class="literal">http://openam.example.com:8080/openam/isAlive.jsp</code>.</p><p>If you get a success code (with <code class="literal">Server is ALIVE:</code> in
  the body of the page returned), then OpenAM is up.</p></div><div class="section" title="12.3.&nbsp;Log Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt"></a>12.3.&nbsp;Log Management</h2></div></div></div><a class="indexterm" name="d13107e12195"></a><p>OpenAM implements logging as a service. This means remote clients
  such as your OpenAM policy agents can log messages to the central logging
  service.</p><div class="section" title="12.3.1.&nbsp;Logging in OpenAM Core Services"><div class="titlepage"><div><div><h3 class="title"><a name="log-mgmt-core"></a>12.3.1.&nbsp;Logging in OpenAM Core Services</h3></div></div></div><p>By default OpenAM logs to files in the configuration directory for
   the instance, such as <code class="filename">$HOME/openam/log/</code> for log files,
   and <code class="filename">$HOME/openam/debug/</code> for debug files. You can also
   configure OpenAM to log through JDBC to a database such as MySQL or Oracle
   DB.</p><p>OpenAM sends messages to different log files, each named after the
   service logging the message, with two different types log files per service:
   <code class="filename">.access</code> and <code class="filename">.error</code>. Thus the
   current log files for the authentication service are named
   <code class="filename">amAuthentication.access</code> and
   <code class="filename">amAuthentication.error</code>.</p><p>See the <a href="../reference/index.html#chap-log-messages" class="link">Log Messages</a>
   reference for details.</p><p>OpenAM lets you change the log level on the fly. OpenAM also supports
   log rotation, secure logging, and log message buffering.</p><p>To configure OpenAM logging properties overall, login to the OpenAM
   console as OpenAM administrator, and browse to Configuration &gt; System &gt;
   Logging.</p><a class="indexterm" name="d13107e12234"></a><p>To adjust the debug level while OpenAM is running, login to the OpenAM
   console as OpenAM administrator, and browse to Configuration &gt; Servers
   and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; General, and then
   scroll down to Debugging. The default level for debug logging is Error.
   This level is appropriate for normal production operations, in which case
   no debug log messages are expected.</p><p>Setting debug log level to Warning increases the volume of messages.
   Setting debug log level to Message dumps detailed trace messages. Unless
   told to do so by qualified support personnel, do not use Warning and Message
   levels in production.</p><a class="indexterm" name="d13107e12246"></a><p>During development, you might find it useful to log all debug messages
   to a single file. In order to do so, set Merge Debug Files to
   <code class="literal">on</code>.</p><p>After changing this setting, restart OpenAM or the container in which
   it runs for the change to take effect.</p></div><div class="section" title="12.3.2.&nbsp;Logging in OpenAM Policy Agents"><div class="titlepage"><div><div><h3 class="title"><a name="log-mgmt-agents"></a>12.3.2.&nbsp;Logging in OpenAM Policy Agents</h3></div></div></div><p>By default, OpenAM Policy Agents log to local files in their
   configuration directories for debugging. The exact location depends on
   where you installed the agent.</p><p>By default OpenAM policy agents send log messages remotely to OpenAM
   when you log auditing information about URL access attempts. To configure
   audit logging for a centrally managed policy agent, login to the OpenAM
   console as administrator, and browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   <em class="replaceable"><code>Agent Type</code></em> &gt; <em class="replaceable"><code>Agent
   Name</code></em> &gt; Global, and then scroll down to the Audit
   section.</p></div><div class="section" title="12.3.3.&nbsp;Debug Logging by Service"><div class="titlepage"><div><div><h3 class="title"><a name="log-debug-selective-capture"></a>12.3.3.&nbsp;Debug Logging by Service</h3></div></div></div><a class="indexterm" name="d13107e12277"></a><p>OpenAM lets you capture debug log messages selectively for a specific
   service. This can be useful when you must turn on debugging in a production
   system where you want to avoid excessive logging, but must gather messages
   when you reproduce a problem.</p><div class="orderedlist"><p>Perform these steps to capture debug messages for a specific
    service.</p><ol class="orderedlist" type="1"><li class="listitem"><p>Login to OpenAM console as administrator,
     <code class="literal">amadmin</code>.</p></li><li class="listitem"><p>Browse to <code class="filename">Debug.jsp</code>, for example
     <code class="literal">http://openam.example.com:8080/openam/Debug.jsp</code>.</p><p>No links to this page are provided in the console.</p></li><li class="listitem"><p>Select the service to debug and also the level required given the
     hints provided in the <code class="filename">Debug.jsp</code> page.</p><p>The change takes effect immediately.</p></li><li class="listitem"><p>Promptly reproduce the problem you are investigating.</p></li><li class="listitem"><p>After reproducing the problem, immediately return to the
     <code class="filename">Debug.jsp</code> page, and revert to normal log levels
     to avoid filling up the disk where debug logs are stored.</p></li></ol></div></div><div class="section" title="12.3.4.&nbsp;Rotating Debug Logs"><div class="titlepage"><div><div><h3 class="title"><a name="log-rotate-debug"></a>12.3.4.&nbsp;Rotating Debug Logs</h3></div></div></div><a class="indexterm" name="d13107e12324"></a><p>By default OpenAM does not rotate debug logs. To rotate debug logs,
   edit <code class="filename">WEB-INF/classes/debugconfig.properties</code> where
   OpenAM is deployed.</p><div class="variablelist"><p>The <code class="filename">debugconfig.properties</code> file includes
    the following properties.</p><dl><dt><span class="term"><code class="literal">org.forgerock.openam.debug.prefix</code></span></dt><dd><p>This property specifies the debug log file prefix applied when
      OpenAM rotates a debug log file. The property has no default. It takes
      a string as the property value.</p></dd><dt><span class="term"><code class="literal">org.forgerock.openam.debug.suffix</code></span></dt><dd><p>This property specifies the debug log file suffix applied when
      OpenAM rotates a debug log file. The property takes a
      <code class="literal">SimpleDateFormat</code> string. The default is
      <code class="literal">-MM.dd.yyyy-kk.mm</code>.</p></dd><dt><span class="term"><code class="literal">org.forgerock.openam.debug.rotation</code></span></dt><dd><p>This property specifies an interval in minutes between debug
      log rotations. Set this to a value greater than zero to enable debug
      log rotation.</p></dd></dl></div><p>After you edit the <code class="filename">debugconfig.properties</code> file,
   you must restart OpenAM or the web container where it runs for the changes
   to take effect.</p></div></div><div class="section" title="12.4.&nbsp;Session Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="session-mgmt"></a>12.4.&nbsp;Session Management</h2></div></div></div><a class="indexterm" name="d13107e12375"></a><p>OpenAM console lets the administrator view and manage current
  user sessions under the Sessions tab page.</p><div class="mediaobject" title="Session management tab page"><a name="figure-session-management"></a><img src="images/session-management.png" longdesc="/Users/mark/Documents/workspace/opensso/openam-site/target/docbkx/html/admin-guide/figure-session-management.html"><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-session-management.html" target="longdesc">D</a>]</span></div></div><p>To end a user session manually, select the user's session, and then
  click the Invalidate Session button. As a result, the user has to
  authenticate again.</p></div></div><div lang="en" class="chapter" title="Chapter&nbsp;13.&nbsp;Tuning OpenAM"><div class="titlepage"><div><div><h2 class="title"><a name="chap-tuning"></a>Chapter&nbsp;13.&nbsp;Tuning OpenAM</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="#tuning-openam-server">13.1. OpenAM Server Settings</a></span></dt><dt><span class="section"><a href="#tuning-jvm-for-openam">13.2. Java Virtual Machine Settings</a></span></dt></dl></div><a class="indexterm" name="d13107e12394"></a><p>This chapter covers key OpenAM tunings to ensure smoothly performing
 access and federation management services, and to maximize throughput while
 minimizing response times.</p><div class="note" title="Note" style="font-style: italic;"><h3 class="title">Note</h3><p>The recommendations provided here are guidelines for your testing
  rather than hard and fast rules for every situation. Said another way, the
  fact that a given setting is configurable implies that no one setting is
  right in all circumstances.</p><p>The extent to which performance tuning advice applies depends to a large
  extent on your requirements, on your workload, and on what resources you have
  available. Test suggestions before rolling them out into production.</p></div><p>As a rule of thumb, an OpenAM server in production with a 3 GB heap can
 handle 100,000 sessions. Although you might be tempted to use a larger heap
 with a 64-bit JVM, smaller heaps are easier to manage. Thus, rather than
 scaling single servers up to increase the total number of simultaneous
 sessions, consider scaling out by adding more servers instead. The suggestions
 that follow pertain to production servers.</p><div class="section" title="13.1.&nbsp;OpenAM Server Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tuning-openam-server"></a>13.1.&nbsp;OpenAM Server Settings</h2></div></div></div><p>OpenAM has a number of settings that can be tuned to increase
  performance.</p><div class="section" title="13.1.1.&nbsp;General Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-general-settings"></a>13.1.1.&nbsp;General Settings</h3></div></div></div><p>The following general points apply.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Set debug level to <code class="literal">error</code>.</p></li><li class="listitem"><p>Disable session failover debugging.</p></li><li class="listitem"><p>Set container-level logging to a low level such as
     <code class="literal">error</code> or <code class="literal">severe</code>.</p></li></ul></div></div><div class="section" title="13.1.2.&nbsp;LDAP Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-ldap-settings"></a>13.1.2.&nbsp;LDAP Settings</h3></div></div></div><p>Tune both your LDAP data stores and also your LDAP authentication
   modules.</p><p>To change LDAP data store settings, browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em> &gt; Data Stores &gt;
   <em class="replaceable"><code>Data Store Name</code></em> in the OpenAM console.</p><div class="table"><a name="tuning-ldap-data-store-settings"></a><div class="table-title">Table&nbsp;13.1.&nbsp;LDAP Data Store Settings</div><div class="table-contents"><table summary="LDAP Data Store Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>LDAP Connection Pool Minimum Size</td><td>1</td><td><p>The minimum LDAP connection pool size; a good tuning value
       for this property is 10.</p></td></tr><tr><td>LDAP Connection Pool Maximum Size</td><td>10</td><td><p>The maximum LDAP connection pool size; a high tuning value
       for this property is 65, though you might well be able to reduce this
       for your deployment. Ensure your LDAP server can cope with the maximum
       number of clients across all the OpenAM servers.</p></td></tr></tbody></table></div></div><br class="table-break"><p>To change connection pool settings for the LDAP authentication module,
   browse to Configuration &gt; Authentication &gt; Core in the OpenAM
   console.</p><div class="table"><a name="tuning-ldap-connection-pool-settings"></a><div class="table-title">Table&nbsp;13.2.&nbsp;LDAP Data Store Settings</div><div class="table-contents"><table summary="LDAP Data Store Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Default LDAP Connection Pool Size</td><td>1:10</td><td><p>The minimum and maximum LDAP connection pool used by the
       LDAP authentication module. This should be tuned to 10:65 for
       production.</p></td></tr><tr><td>Caching</td><td>False</td><td><p>Turn on the caching feature in the LDAP data
       store.</p></td></tr><tr><td>Maximum Age of Cached Items</td><td>600</td><td><p>This is 10 minutes and does not normally need
       tuning.</p></td></tr><tr><td>Maximum Size of the Cache</td><td>10240</td><td><p>This is 10k and is very small for a cache. A 1 MB cache
       (1048576) is a better starting point.</p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="13.1.3.&nbsp;Notification Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-notification-settings"></a>13.1.3.&nbsp;Notification Settings</h3></div></div></div><p>OpenAM has two thread pools used to send notifications to clients. The
   Service Management Service thread pool can be tuned in OpenAM console under
   Configuration &gt; Servers and Sites &gt; Default Server Settings &gt;
   SDK.</p><div class="table"><a name="tuning-sms-notifications"></a><div class="table-title">Table&nbsp;13.3.&nbsp;SMS Notification Settings</div><div class="table-contents"><table summary="SMS Notification Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Notification Pool Size</td><td>10</td><td><p>This is the size of the thread pool used to send
       notifications. In production this value should be fine unless lots of
       clients are registering for SMS notifications.</p></td></tr></tbody></table></div></div><br class="table-break"><p>The session service has its own thread pool to send notifications.
   This is configured under Configuration &gt; Servers and Sites &gt; Default
   Server Settings &gt; Session.</p><div class="table"><a name="tuning-session-service-notifications"></a><div class="table-title">Table&nbsp;13.4.&nbsp;Session Service Notification Settings</div><div class="table-contents"><table summary="Session Service Notification Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Notification Pool Size</td><td>10</td><td><p>This is the size of the thread pool used to send
       notifications. In production this should be around 25-30.</p></td></tr><tr><td>Notification Thread Pool Threshold</td><td>5000</td><td><p>This is the maximum number of notifications in the queue
       waiting to be sent. The default value should be fine in the majority of
       installations.</p></td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="13.1.4.&nbsp;Session Settings"><div class="titlepage"><div><div><h3 class="title"><a name="tuning-session-settings"></a>13.1.4.&nbsp;Session Settings</h3></div></div></div><p>The session service has additional properties to tune, which are
   configured under Configuration &gt; Servers and Sites &gt; Default
   Server Settings &gt; Session.</p><div class="table"><a name="tuning-session-service-settings"></a><div class="table-title">Table&nbsp;13.5.&nbsp;Session Settings</div><div class="table-contents"><table summary="Session Settings" width="100%" border="0"><colgroup><col width="33%"><col width="16%"><col width="51%"></colgroup><thead><tr><th>Property</th><th>Default Value</th><th>Suggestions</th></tr></thead><tbody><tr><td>Maximum Sessions</td><td>5000</td><td><p>In production this value can safely be set into the
       100,000's. The maximum session limit is really controlled by the
       maximum size of the JVM heap which must be tuned appropriately to match
       the expected number of concurrent sessions.</p></td></tr><tr><td>Sessions Purge Delay</td><td>0</td><td><p>This should be zero to ensure sessions are purged
       immediately.</p></td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="section" title="13.2.&nbsp;Java Virtual Machine Settings"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tuning-jvm-for-openam"></a>13.2.&nbsp;Java Virtual Machine Settings</h2></div></div></div><p>This section gives some initial guidance on configuring the JVM for
  running OpenAM. These settings provide a strong foundation to the JVM before
  a more detailed garbage collection tuning exercise, or as best practice
  configuration for production.</p><div class="table"><a name="tuning-heap-size"></a><div class="table-title">Table&nbsp;13.6.&nbsp;Heap Size Settings</div><div class="table-contents"><table summary="Heap Size Settings" width="100%" border="0"><colgroup><col width="42%"><col width="29%"><col width="29%"></colgroup><thead><tr><th>JVM Parameters</th><th>Suggested Value</th><th>Description</th></tr></thead><tbody><tr><td><p><code class="literal">-Xms</code> &amp;
      <code class="literal">-Xmx</code></p></td><td><p>At least 1024m, production environments 2048m to 3072m.
      This setting depends on the available physical memory, and on whether a
      32 or 64-bit JVM is used.</p></td><td><p>-</p></td></tr><tr><td><p><code class="literal">-server</code></p></td><td><p>-</p></td><td><p>Ensures the server JVM is used</p></td></tr><tr><td><p><code class="literal">-Xss</code></p></td><td><p>132k</p></td><td><p>The stack size for each thread</p></td></tr><tr><td><p><code class="literal">-XX:PermSize</code> &amp;
      <code class="literal">-XX:MaxPermSize</code></p></td><td><p>Set both to 96m</p></td><td><p>Controls the size of the permanent generation in the
      JVM</p></td></tr><tr><td><p><code class="literal">-Dsun.net.client.defaultReadTimeout</code></p></td><td><p>60000</p></td><td><p>Controls the read timeout in the Java HTTP client
      implementation</p>
      <p>This applies only to the Sun/Oracle HotSpot JVM.</p></td></tr><tr><td><p><code class="literal">-Dsun.net.client.defaultConnectTimeout</code></p></td><td>High setting: <p>30000</p> (30 seconds)</td><td><p>Controls the connect timeout in the Java HTTP client
      implementation</p>
      <p>When you have hundreds of incoming requests per second, reduce this
      value to avoid a huge connection queue.</p>
      <p>This applies only to the Sun/Oracle HotSpot JVM.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="tuning-garbage-collection"></a><div class="table-title">Table&nbsp;13.7.&nbsp;Garbage Collection Settings</div><div class="table-contents"><table summary="Garbage Collection Settings" width="100%" border="0"><colgroup><col width="42%"><col width="29%"><col width="29%"></colgroup><thead><tr><th>JVM Parameters</th><th>Suggested Value</th><th>Description</th></tr></thead><tbody><tr><td><p><code class="literal">-verbose:gc</code></p></td><td><p>-</p></td><td><p>Verbose garbage collection reporting</p></td></tr><tr><td><p><code class="literal">-Xloggc:</code></p></td><td><p><code class="filename">$CATALINA_HOME/logs/gc.log</code></p></td><td><p>Location of the verbose garbage collection log
      file</p></td></tr><tr><td><p><code class="literal">-XX:+PrintClassHistogram</code></p></td><td><p>-</p></td><td><p>Prints a heap histogram when a SIGTERM signal is received
      by the JVM</p></td></tr><tr><td><p><code class="literal">-XX:+PrintGCDetails</code></p></td><td><p>-</p></td><td><p>Prints detailed information about garbage collection</p></td></tr><tr><td><p><code class="literal">-XX:+PrintGCTimeStamps</code></p></td><td><p>-</p></td><td><p>Prints detailed garbage collection timings</p></td></tr><tr><td><p><code class="literal">-XX:+HeapDumpOnOutOfMemoryError</code></p></td><td><p>-</p></td><td><p>Out of Memory errors generate a heap dump
      automatically</p></td></tr><tr><td><p><code class="literal">-XX:HeapDumpPath</code></p></td><td><p><code class="filename">$CATALINA_HOME/logs/heapdump.hprof</code></p></td><td><p>Location of the heap dump</p></td></tr><tr><td><p><code class="literal">-XX:+UseConcMarkSweepGC</code></p></td><td><p>-</p></td><td><p>Use the concurrent mark sweep garbage collector</p></td></tr><tr><td><p><code class="literal">-XX:+UseCMSCompactAtFullCollection</code></p></td><td><p>-</p></td><td><p>Aggressive compaction at full collection</p></td></tr><tr><td><p><code class="literal">-XX:+CMSClassUnloadingEnabled</code></p></td><td><p>-</p></td><td><p>Allow class unloading during CMS sweeps</p></td></tr></tbody></table></div></div><br class="table-break"></div></div><div lang="en" class="chapter" title="Chapter&nbsp;14.&nbsp;Changing Host Names"><div class="titlepage"><div><div><h2 class="title"><a name="chap-change-hosts"></a>Chapter&nbsp;14.&nbsp;Changing Host Names</h2></div></div></div><p>When you change the OpenAM host name, you must make manual changes
 to the configuration. This chapter describes what to do. If you also must
 move an embedded configuration directory from one host to another, see the
 OpenDJ documentation on <em class="citetitle">Moving Servers</em>.</p><div class="itemizedlist"><p>Changing OpenAM host names involves the following high level
  steps.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Adding the new host name to the Realm/DNS Aliases list</p></li><li class="listitem"><p>Exporting, editing, then importing the configuration</p><p>This step relies on the <span class="command"><strong>ssoadm</strong></span> command, which you
   install separately from OpenAM as described in <a href="../install-guide/index.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
   Administration Tools</em></a>.</p></li><li class="listitem"><p>Stopping OpenAM and editing configuration files</p></li><li class="listitem"><p>Removing the old host name from the Realm/DNS Aliases list</p></li></ul></div><p>Before you start, make sure you have a current backup of your current
 installation. See <a href="../admin-guide/index.html#chap-backup-restore" class="link"><em class="citetitle">Backing Up and
 Restoring OpenAM Configurations</em></a> for instructions.</p><div class="procedure" title="Procedure&nbsp;14.1.&nbsp;To Add the New Host Name As an Alias"><a name="add-new-alias"></a><div class="procedure-title">Procedure&nbsp;14.1.&nbsp;To Add the New Host Name As an Alias</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to OpenAM console as administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Under Access Control &gt; / (Top Level Realm), add the new host name
   to the Realm/DNS Aliases list, and then save your work.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;14.2.&nbsp;To Export, Edit, &amp; Import the Service Configuration"><a name="change-host-in-service-config"></a><div class="procedure-title">Procedure&nbsp;14.2.&nbsp;To Export, Edit, &amp; Import the Service Configuration</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Export the service configuration.</p><div class="screen">$ ssoadm export-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -o config.xml

Service Configuration was exported.</div><p>In this example, the secret key for encrypting the password in
   <code class="option">-e fZatIu68OiqccJMXosSRyVjMsWJIx+SA</code> was taken from the
   Password Encryption Key field in the OpenAM console under Configuration &gt;
   Servers and Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt;
   Security.</p></li><li class="step" title="Step 2"><p>Edit the service configuration file.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Change the fully qualified domain name, such as
     <code class="literal">openam.example.com</code>, throughout the file.</p></li><li class="listitem"><p>If you are changing the deployment descriptor, such as
     <code class="literal">/openam</code>, then change the value of
     <code class="literal">com.iplanet.am.services.deploymentDescriptor</code>.</p><p>Also change the deployment descriptor in the
     <code class="literal">propertiesViewBeanURL="<em class="replaceable"><code>deployment-descriptor</code></em>/auth/ACServiceInstanceList"</code>
     attribute.</p><p>Also change the deployment descriptor in the
     <code class="literal">propertiesViewBeanURL="<em class="replaceable"><code>deployment-descriptor</code></em>/auth/ACModuleList"</code>
     attribute.</p><p>Also change the deployment descriptor in a &lt;Value&gt; element
     that is a child of an &lt;AttributeValuePair&gt; element.</p><p>Also change the deployment descriptor where it occurs throughout
     the file in the full URL to OpenAM, such as
     <code class="literal">http:&amp;#47;&amp;#47;openam.example.com:8080&amp;#47;<em class="replaceable"><code>deployment-descriptor</code></em></code>.</p></li><li class="listitem"><p>If you are changing the port number, then change the value of
     <code class="literal">com.iplanet.am.server.port</code>.</p><p>Also change the port number in <code class="literal"><em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code> combinations throughout the
     file.</p></li><li class="listitem"><p>If you are changing the domain name, then change the cookie domain
     such as <code class="literal">&lt;Value&gt;.example.com&lt;/Value&gt;</code>
     throughout the file.</p></li></ul></div></li><li class="step" title="Step 3"><p>Import the updated service configuration.</p><div class="screen">$ ssoadm import-svc-cfg -u amadmin -e fZatIu68OiqccJMXosSRyVjMsWJIx+SA
 -f /tmp/pwd.txt -X config.xml

Directory Service contains existing data. Do you want to delete it? [y|N] y
Please wait while we import the service configuration...
Service Configuration was imported.</div></li></ol></div><div class="procedure" title="Procedure&nbsp;14.3.&nbsp;To Edit OpenAM Configuration Files For the New Host Name"><a name="edit-config-files"></a><div class="procedure-title">Procedure&nbsp;14.3.&nbsp;To Edit OpenAM Configuration Files For the New Host Name</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Stop the web container where OpenAM runs.</p></li><li class="step" title="Step 2"><p>Edit the bootstrap file, such as
   <code class="filename">/home/user/openam/bootstrap</code>, changing the FQDN, port,
   and deployment descriptor for OpenAM as necessary.</p></li><li class="step" title="Step 3"><p>If you are changing the deployment descriptor, then move the folder
   containing OpenAM configuration, such as
   <code class="filename">/home/user/openam/</code>, to match the new deployment
   descriptor, such as <code class="filename">/home/user/openam2/</code>.</p></li><li class="step" title="Step 4"><p>If you are changing the location or deployment descriptor, change the
   name of the file in the <code class="filename">/home/user/.openssocfg</code> folder,
   such as <code class="filename">AMConfig_path_to_tomcat_webapps_openam_</code>
   to match the new location and deployment descriptor.</p><p>Also edit the path name in the file to match the change you made when
   moving the folder.</p></li><li class="step" title="Step 5"><p>Restart the web container where OpenAM runs.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;14.4.&nbsp;To Remove the Old Host Name As an Alias"><a name="remove-old-alias"></a><div class="procedure-title">Procedure&nbsp;14.4.&nbsp;To Remove the Old Host Name As an Alias</div><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Login to OpenAM console as administrator,
   <code class="literal">amadmin</code>.</p></li><li class="step" title="Step 2"><p>Under Access Control &gt; / (Top Level Realm), remove the old host
   name from the Realm/DNS Aliases list, and then save your work.</p></li></ol></div></div><div lang="en" class="chapter" title="Chapter&nbsp;15.&nbsp;Troubleshooting"><div class="titlepage"><div><div><h2 class="title"><a name="chap-troubleshooting"></a>Chapter&nbsp;15.&nbsp;Troubleshooting</h2></div></div></div><a class="indexterm" name="d13107e13051"></a><p>This chapter covers how to get debugging information and troubleshoot
 issues in OpenAM deployments.</p><div class="qandaset" title="Solutions to Common Issues"><h2 class="title"><a name="solutions-to-common-issues"></a>Solutions to Common Issues</h2><p>This section offers solutions to common problems when working with
  OpenAM.</p><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="troubleshooting-openam-installation"></a>15.1. OpenAM Installation</h3></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="cannot-write-to-config-directory"></a><a name="d13107e13065"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>OpenAM configuration could not write to the configuration directory.
     Where must I change permissions, and what permissions are required?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>If the user running the web container has a $HOME directory, then
     the configuration directory is stored there, and you probably do not have
     this problem. If you do not know the user running the web container, use
     the <span class="command"><strong>ps</strong></span> command to check. In the following example, the
     user is <code class="literal">mark</code>, the web container
     <code class="literal">tomcat</code>.</p><div class="screen">$ ps -ef | grep tomcat
mark      1739     1  0 14:47...</div><p>For a container installed from native packages with a dedicated
     user, $HOME may not be where you think it is. Look at the user's entry in
     <code class="filename">/etc/passwd</code> to locate the home directory.
     The user running the web container where you install OpenAM must
     be able to read from and write in this directory.</p><p>If you cannot change the permissions to the user's home directory,
     you can, as a workaround, unpack <code class="filename">opensso.war</code>, set the
     <code class="literal">configuration.dir</code> property in the
     <code class="filename">WEB-INF/classes/bootstrap.properties</code> to a directory
     with appropriate permissions, and repack <code class="filename">opensso.war</code>
     with the adjusted file before deploying that.</p><div class="screen">$ cd /path/to/OpenAM/deployable-war/
$ mkdir unpacked ; cd unpacked
$ jar xf ../opensso.war
$ vi WEB-INF/classes/bootstrap.properties 
$ grep ^config WEB-INF/classes/bootstrap.properties 
configuration.dir=/my/readwrite/config/dir
$ jar cf ../openam.war *</div></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="deploy-failed-lack-of-memory"></a><a name="d13107e13104"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>Deployment failed due to lack of memory. What do I do?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM requires at least a maximum heap size of 1024 MB, with a 256
     MB maximum permanent generation heap size. For the Sun JVM, ensure the
     container starts with <code class="literal">-Xmx1024m -XX:MaxPermSize=256m</code>
     for these settings.</p><p>If you do not know the settings used when the web container was
     started, use the <span class="command"><strong>ps</strong></span> command to check. In the following
     example, the web container is <code class="literal">tomcat</code>.</p><div class="screen">$ ps -ef | grep tomcat | grep Xm
... -Xmx1024m -XX:MaxPermSize=256m ...</div><p>Make sure you have at least 2 GB of RAM on the system where you
     run OpenAM to avoid running out of memory.</p><p>If you make it through deployment and seem to be running out of
     memory later, you can confirm memory errors in OpenAM by searching the
     <code class="filename"><em class="replaceable"><code>config-dir</code></em>/openam/debug/*</code>
     files for <code class="literal">java.lang.OutOfMemoryError</code>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="deploy-failed-invalid-hostname"></a><a name="d13107e13136"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>Deployment failed due to invalid hostname configuration. What do
     I do?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM requires that you use a fully qualified domain name (FQDN)
     that the host can resolve.</p><div class="screen">$ ping openam-ter.example.com
PING openam-ter (192.168.56.2) 56(84) bytes of data.
64 bytes from openam (192.168.56.2): icmp_seq=1 ttl=64 time=0.025 ms
64 bytes from openam (192.168.56.2): icmp_seq=2 ttl=64 time=0.032 ms
64 bytes from openam (192.168.56.2): icmp_seq=3 ttl=64 time=0.030 ms</div><p>For a test deployment (at home, on a laptop), you can use fake FQDNs
     in <code class="filename">/etc/hosts</code> (<code class="filename">%SystemRoot%\system32\drivers\etc\hosts</code> on Windows), depending
     on how your network is configured.</p><div class="screen">$ cat /etc/hosts | grep openam
192.168.56.2 openam openam.example.com
192.168.56.3 openam-bis openam-bis.example.com
192.168.56.5 openam-ter openam-ter.example.com</div></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="who-deleted-my-config"></a><a name="d13107e13155"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I configured OpenAM, and now am seeing the configuration screen
     again. Who deleted my configuration?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>OpenAM uses a file in <code class="filename">$HOME/.openssocfg/</code> to
     bootstrap and find its configuration. The file is named after the path
     to OpenAM and contains the path to the configuration. The following
     example shows what the file looks like for OpenAM deployed in Apache
     Tomcat under <code class="filename">/path/to/tomcat/webapps/openam</code>, and
     running as user <code class="literal">amuser</code> with <code class="literal">$HOME</code>
     <code class="filename">/home/amuser</code>.</p><div class="screen">$ cat .openssocfg/AMConfig_path_to_tomcat_webapps_openam_ 
/home/amuser/openam</div><p>If OpenAM cannot find its configuration, then it displays the
     configuration screen.</p></td></tr><tr class="qandadiv"><td align="left" valign="top" colspan="2"><h3 class="title"><a name="troubleshooting-openam-administration"></a>15.2. OpenAM Administration</h3></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="cannot-use-ssoadm-jsp"></a><a name="d13107e13184"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I cannot use the browser-based equivalent of
     <span class="command"><strong>ssoadm</strong></span>,
     <code class="literal">http://openam.example.com:8080/openam/ssoadm.jsp</code>. Why
     not?</p></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>For security reasons, <code class="literal">ssoadm.jsp</code> is not activated
     by default. To activate it, browse to Configuration &gt; Servers and Sites
     &gt; Servers &gt; <em class="replaceable"><code>ServerName</code></em> &gt; Advanced,
     and then add a property named <code class="literal">ssoadm.disabled</code> with
     value <code class="literal">false</code>.</p></td></tr><tr class="question" title="Q:"><td align="left" valign="top"><a name="opendj-missing-schema"></a><a name="d13107e13209"></a><p><b>Q:</b></p></td><td align="left" valign="top"><p>I added OpenDJ as a data store, and now I cannot add a user. OpenAM
     gives me the following error.</p><div class="literallayout"><p>ERROR:&nbsp;LDAPv3Repo.create&nbsp;failed.&nbsp;errorCode=65&nbsp;Entry<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uid=test,ou=people,dc=example,dc=com&nbsp;violates&nbsp;the&nbsp;Directory&nbsp;Server<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema&nbsp;configuration&nbsp;because&nbsp;it&nbsp;includes&nbsp;attribute&nbsp;inetUserStatus&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;not&nbsp;allowed&nbsp;by&nbsp;any&nbsp;of&nbsp;the&nbsp;objectclasses&nbsp;defined&nbsp;in&nbsp;that<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry</p></div></td></tr><tr class="answer"><td align="left" valign="top"><p><b>A:</b></p></td><td align="left" valign="top"><p>When you set up a New Data Store to use OpenDJ as an identity
     repository under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
     &gt; Data Stores &gt; New..., you need to check the Load schema when
     finished box if you want OpenAM to add the schema to OpenDJ. The box is
     not selected by default.</p><p>The full version of OpenAM includes directory server schema in the
     <code class="filename">/path/to/OpenAM/ldif/</code> directory. To add the schema
     to OpenDJ afterwards, you can try the following command.</p><div class="screen">$ /path/to/OpenDJ/bin/ldapmodify
 --port 1389
 --bindDN "cn=Directory Manager"
 --bindPassword password
 --filename /path/to/OpenAM/ldif/fam_sds_schema.ldif
Processing MODIFY request for CN=schema
MODIFY operation successful for DN CN=schema</div></td></tr></tbody></table></div></div><div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a name="d13107e13227"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>A</h3><dl><dt>Account lockout, <a class="indexterm" href="#configure-account-lockout">Configuring Account Lockout</a></dt><dt>Authentication, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dd><dl><dt>Active Directory, <a class="indexterm" href="#ad-module-conf-hints">Hints For the Active Directory Authentication Module</a></dt><dt>Adaptive risk, <a class="indexterm" href="#adaptive-auth-module-conf-hints">Hints For the Adaptive Risk Authentication Module</a></dt><dt>Anonymous, <a class="indexterm" href="#anon-module-conf-hints">Hints For the Anonymous Authentication Module</a></dt><dt>Chains, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a>, <a class="indexterm" href="#configure-authn-chains">Configuring Authentication Chains</a></dt><dt>Core, <a class="indexterm" href="#core-module-conf-hints">Hints For the Core Authentication Module</a></dt><dt>Data Store, <a class="indexterm" href="#datastore-module-conf-hints">Hints For the Data Store Authentication Module</a></dt><dt>Federation, <a class="indexterm" href="#federation-module-conf-hints">Hints For the Federation Authentication Module</a></dt><dt>HMAC One-Time Password (HOTP), <a class="indexterm" href="#hotp-module-conf-hints">Hints For the HOTP Authentication Module</a></dt><dt>HTTP Basic, <a class="indexterm" href="#http-module-conf-hints">Hints For the HTTP Basic Authentication Module</a></dt><dt>JDBC, <a class="indexterm" href="#jdbc-module-conf-hints">Hints For the JDBC Authentication Module</a></dt><dt>Kerberos, <a class="indexterm" href="#desktop-module-conf-hints">Hints For the Windows Desktop SSO Authentication Module</a></dt><dt>LDAP, <a class="indexterm" href="#ldap-module-conf-hints">Hints For the LDAP Authentication Module</a></dt><dt>Levels, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dt>Membership (&amp; self-registration), <a class="indexterm" href="#membership-module-conf-hints">Hints For the Membership Authentication Module</a></dt><dt>Modules, <a class="indexterm" href="#what-is-authn">About Authentication in OpenAM</a></dt><dt>MSISDN, <a class="indexterm" href="#msisdn-module-conf-hints">Hints For the MSISDN Authentication Module</a></dt><dt>OAuth 2.0, <a class="indexterm" href="#oauth2-module-conf-hints">Hints For the OAuth 2.0 Authentication Module</a></dt><dt>RADIUS, <a class="indexterm" href="#radius-module-conf-hints">Hints For the RADIUS Authentication Module</a></dt><dt>Secure Attribute Exchange (SAE), <a class="indexterm" href="#sae-module-conf-hints">Hints For the SAE Authentication Module</a></dt><dt>SecurID, <a class="indexterm" href="#securid-module-conf-hints">Hints For the SecurID Authentication Module</a></dt><dt>Windows Desktop SSO, <a class="indexterm" href="#desktop-module-conf-hints">Hints For the Windows Desktop SSO Authentication Module</a></dt><dt>Windows NT, <a class="indexterm" href="#winnt-module-conf-hints">Hints For the Windows NT Authentication Module</a></dt><dt>WSSAuth, <a class="indexterm" href="#wss-module-conf-hints">Hints For the WSSAuth Authentication Module</a></dt><dt>X509 certificate based, <a class="indexterm" href="#cert-module-conf-hints">Hints For the Certificate Authentication Module</a></dt></dl></dd><dt>Authorization, <a class="indexterm" href="#what-is-authz">About Authorization in OpenAM</a>, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-authz-policy">Configuring Policies</a>, <a class="indexterm" href="#script-policy">Managing Policies Outside the Console</a>, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a></dt><dt>Delegating, <a class="indexterm" href="#delegate-policy">Delegating Policy Management &amp; Decisions</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>Backup, <a class="indexterm" href="#chap-backup-restore">Backing Up and Restoring OpenAM Configurations</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>Certificates, <a class="indexterm" href="#chap-certs-keystores">Managing Certificates</a></dt><dt>Command line tools overview, <a class="indexterm" href="#openam-cli-overview">OpenAM Command-Line Tools</a></dt><dt>Console overview, <a class="indexterm" href="#openam-console-overview">OpenAM Web-Based Console</a></dt><dt>Cross-domain single sign on (CDSSO), <a class="indexterm" href="#chap-cdsso">Configuring Cross-Domain Single Sign On</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>Debug logging</dt><dd><dl><dt>Level, <a class="indexterm" href="#log-mgmt-core">Logging in OpenAM Core Services</a></dt><dt>Rotation, <a class="indexterm" href="#log-rotate-debug">Rotating Debug Logs</a></dt><dt>Service selection, <a class="indexterm" href="#log-debug-selective-capture">Debug Logging by Service</a></dt><dt>Single file, <a class="indexterm" href="#log-mgmt-core">Logging in OpenAM Core Services</a></dt></dl></dd><dt>Delegating administration, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>Enabling ssoadm.jsp, <a class="indexterm" href="#openam-ssoadm-jsp-overview">OpenAM ssoadm.jsp</a></dt><dt>Entitlements, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>Federation, <a class="indexterm" href="#about-federation">About SAML 2.0 SSO &amp; Federation</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#set-up-federation">Setting Up SAML 2.0 SSO</a>, <a class="indexterm" href="#configure-idp">Configuring Identity Providers</a>, <a class="indexterm" href="#configure-sp">Configuring Service Providers</a>, <a class="indexterm" href="#configure-cot">Configuring Circles of Trust</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>Identity Gateway, <a class="indexterm" href="#gateway-or-policy-agent">Identity Gateway or Policy Agent?</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>Logging, <a class="indexterm" href="#log-mgmt">Log Management</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>Monitoring, <a class="indexterm" href="#monitoring-interfaces">Monitoring Interfaces</a></dt><dd><dl><dt>Health check, <a class="indexterm" href="#is-openam-alive">Is OpenAM Up?</a></dt><dt>JMX, <a class="indexterm" href="#monitoring-jmx">JMX Monitoring</a></dt><dt>SNMP, <a class="indexterm" href="#monitoring-snmp">SNMP Monitoring</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>Password reset, <a class="indexterm" href="#chap-pwd-reset">Configuring Password Reset</a></dt><dt>Performance, <a class="indexterm" href="#chap-tuning">Tuning OpenAM</a></dt><dt>Policy, <a class="indexterm" href="#what-is-authz">About Authorization in OpenAM</a>, <a class="indexterm" href="#about-entitlements">About Entitlements</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-authz-policy">Configuring Policies</a>, <a class="indexterm" href="#script-policy">Managing Policies Outside the Console</a>, <a class="indexterm" href="#managing-entitlements-cli">Managing Entitlements on the Command Line</a></dt><dt>Delegating, <a class="indexterm" href="#delegate-policy">Delegating Policy Management &amp; Decisions</a>, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt></dl></dd><dt>Policy agents, <a class="indexterm" href="#chap-agents">Configuring Policy Agent Profiles</a></dt><dd><dl><dt>Configuring, <a class="indexterm" href="#configure-web-policy-agent">Configuring Web Policy Agents</a>, <a class="indexterm" href="#configure-j2ee-policy-agent">Configuring J2EE Policy Agents</a>, <a class="indexterm" href="#configure-wsp-policy-agent">Configuring Web Service Provider Policy Agents</a>, <a class="indexterm" href="#configure-wsc-policy-agent">Configuring Web Service Client Policy Agents</a>, <a class="indexterm" href="#configure-disco-policy-agent">Configuring Discovery Service Client Policy Agents</a>, <a class="indexterm" href="#configure-sts-policy-agent">Configuring Security Token Service Client Policy Agents</a>, <a class="indexterm" href="#configure-22-policy-agent">Configuring Version 2.2 Policy Agents</a>, <a class="indexterm" href="#configure-agent-auth">Configuring Agent Authenticators</a></dt><dt>Group inheritance, <a class="indexterm" href="#create-agent-profiles">Creating Agent Profiles</a></dt><dt>Profiles, <a class="indexterm" href="#kinds-of-agent-profiles">Kinds of Agent Profiles</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>Realms, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt><dd><dl><dt>Creating, <a class="indexterm" href="#chap-realms">Configuring Realms</a></dt></dl></dd><dt>Restoring, <a class="indexterm" href="#chap-backup-restore">Backing Up and Restoring OpenAM Configurations</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>Sessions, <a class="indexterm" href="#session-mgmt">Session Management</a></dt><dt>Silent installation, <a class="indexterm" href="#openam-cli-overview">OpenAM Command-Line Tools</a></dt><dt>SSL, <a class="indexterm" href="#chap-certs-keystores">Managing Certificates</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>Troubleshooting, <a class="indexterm" href="#chap-troubleshooting">Troubleshooting</a></dt></dl></div></div></div></div><script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>
