<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;6.&nbsp;Configuring Audit Logging</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OpenAM Administration Guide"><link rel="up" href="index.html" title="OpenAM Administration Guide"><link rel="prev" href="chap-agents.html" title="Chapter&nbsp;5.&nbsp;Configuring Policy Agent Profiles"><link rel="next" href="chap-mobile.html" title="Chapter&nbsp;7.&nbsp;Working with Mobile Devices &amp; Applications"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;Configuring Audit Logging</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap-agents.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-mobile.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chap-audit-logging"></a>Chapter&nbsp;6.&nbsp;Configuring Audit Logging</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="chap-audit-logging.html#log-mgmt-global-settings">6.1. Configuring Audit Logging</a></span></dt><dt><span class="section"><a href="chap-audit-logging.html#log-mgmt-core">6.2. Audit Logging to Flat Files</a></span></dt><dt><span class="section"><a href="chap-audit-logging.html#log-mgmt-syslog">6.3. Audit Logging to a Syslog Server</a></span></dt><dt><span class="section"><a href="chap-audit-logging.html#log-mgmt-agents">6.4. Audit Logging in OpenAM Policy Agents</a></span></dt></dl></div><a class="indexterm" name="d0e22532"></a><p>
  OpenAM servers generate two types of log files: audit logs and debug logs.
 </p><p>
  Audit logs capture normal operational information about OpenAM usage.
  Audit file records are structured: they adhere to a consistent, documented
  file format. You can configure OpenAM to write audit logs to flat files,
  relational database tables, or a syslog server.
 </p><p>
  OpenAM policy agents also produce agent audit logs. Agent audit logs
  provide a trail of policy agent activity.
 </p><p>
  OpenAM services can capture a variety of information in debug logs, which you
  can use when troubleshooting OpenAM. For more information about the OpenAM
  debug logs, see
  <a href="../../admin-guide/index/chap-monitoring.html#debug-logging" class="link">
   <em class="citetitle">Debug Logging</em>.
  </a>
 </p><p>
  The OpenAM Logging Service encapsulates the audit logging configuration.
  The Logging Service is an OpenAM system service. There is a single audit
  logging configuration for the entire OpenAM deployment.
 </p><p>
  OpenAM lets you change the log level on the fly. OpenAM also supports
  log rotation, secure logging, and log message buffering.
 </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt-global-settings"></a>6.1.&nbsp;Configuring Audit Logging</h2></div></div></div><p>
  To configure OpenAM logging properties, log in to the OpenAM
  console as OpenAM administrator, and browse to Configuration &gt; System &gt;
  Logging.
 </p><p>For more information on the available settings, see the <a href="../../reference/index/chap-config-ref.html#system-logging" class="link">Audit Logging</a>
   reference.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt-core"></a>6.2.&nbsp;Audit Logging to Flat Files</h2></div></div></div><p>
   By default, OpenAM audit logs are written to files in the
   configuration directory for the instance, such as
   <code class="filename">$HOME/openam/log/</code>.
  </p><p>
   OpenAM sends messages to different log files, each named after the
   service logging the message, with two different types log files per service:
   <code class="filename">.access</code>
   and<code class="filename">.error</code>. Thus the
   current log files for the authentication service are named
   <code class="filename">amAuthentication.access</code>
   and
   <code class="filename">amAuthentication.error</code>.
  </p><p>
   See the
   <a href="../../reference/index/chap-log-messages.html" class="link">
    Log Messages
   </a>
   reference for details.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt-syslog"></a>6.3.&nbsp;Audit Logging to a Syslog Server</h2></div></div></div><p>OpenAM supports sending audit log messages to a syslog server for
   collation.</p><p>You can enable syslog audit logging by using the OpenAM console,
   or the <code class="filename">ssoadm</code> command.</p><div class="procedure"><a name="enable-syslog-audit-logging-console"></a><div class="procedure-title">Procedure&nbsp;6.1.&nbsp;Enabling Syslog Audit Logging by Using the OpenAM Console</div><ol class="procedure" type="1"><li class="step"><p>Login to the OpenAM console as OpenAM administrator.</p></li><li class="step"><p>Browse to Configuration &gt; System &gt; Logging.</p></li><li class="step"><p>Set the <span class="emphasis"><em>Logging Type</em></span> option to
    <code class="literal">Syslog</code>.</p></li><li class="step"><p>Complete the following settings as appropriate for your syslog
     server:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">Syslog server host</code></p></li><li class="listitem"><p><code class="literal">Syslog server port</code></p></li><li class="listitem"><p><code class="literal">Syslog server protocol</code></p></li><li class="listitem"><p><code class="literal">Syslog facility</code></p></li><li class="listitem"><p><code class="literal">Syslog connection timeout</code></p></li></ul></div><p>For information on these settings, see the <a href="../../reference/index/chap-config-ref.html#system-logging" class="link">Audit Logging</a>
     reference.</p></li><li class="step"><p>Save your work.</p></li></ol></div><div class="procedure"><a name="enable-syslog-audit-logging-SSOADM"></a><div class="procedure-title">Procedure&nbsp;6.2.&nbsp;Enabling Syslog Audit Logging by Using SSOADM</div><ol class="procedure" type="1"><li class="step"><p>Create a text file, for example
     <code class="filename">MySyslogServerSettings.txt</code> containing the settings
     used when audit logging to a syslog server, as shown below:</p><div class="screen"><pre>
<strong>iplanet-am-logging-syslog-port=<em><strong>514</strong></em>
iplanet-am-logging-syslog-protocol=<em><strong>UDP</strong></em>
iplanet-am-logging-type=Syslog
iplanet-am-logging-syslog-connection-timeout=<em><strong>30</strong></em>
iplanet-am-logging-syslog-host=<em><strong>localhost</strong></em>
iplanet-am-logging-syslog-facility=<em><strong>local5</strong></em></strong>
</pre></div></li><li class="step"><p>Use the following SSOADM command to configure audit logging to
     a syslog server:</p><div class="screen"><pre>$ <strong>ssoadm \
 set-attr-defs \
 --adminid amadmin \
 --password-file /tmp/pwd.txt \
 --servicename iPlanetAMLoggingService \
 --schematype Global \
 --datafile <em><strong>MySyslogServerSettings.txt</strong></em></strong>

 <em>Schema attribute defaults were set.</em>
</pre></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="log-mgmt-agents"></a>6.4.&nbsp;Audit Logging in OpenAM Policy Agents</h2></div></div></div><p>
   By default, OpenAM Policy Agents log to local files in their
   configuration directories for debugging. The exact location depends on
   where you installed the agent.
  </p><p>
   By default OpenAM policy agents send log messages remotely to OpenAM
   when you log auditing information about URL access attempts. To configure
   audit logging for a centrally managed policy agent, login to the OpenAM
   console as administrator, and browse to Access Control &gt;
   <em class="replaceable"><code>Realm Name</code></em>
   &gt; Agents &gt;
   <em class="replaceable"><code>Agent Type</code></em>
   &gt;
   <em class="replaceable"><code>Agent
    Name
   </code></em>
   &gt; Global, and then scroll down to the Audit
   section.
  </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap-agents.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-mobile.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;Configuring Policy Agent Profiles&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Working with Mobile Devices &amp; Applications</td></tr></table></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10000&components=10007&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>