<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;2.&nbsp;Defining Authentication Services</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OpenAM Administration Guide"><link rel="up" href="index.html" title="OpenAM Administration Guide"><link rel="prev" href="chap-admin-tools.html" title="Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools"><link rel="next" href="chap-authz-policy.html" title="Chapter&nbsp;3.&nbsp;Defining Authorization Policies"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;2.&nbsp;Defining Authentication Services</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap-admin-tools.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-authz-policy.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chap-auth-services"></a>Chapter&nbsp;2.&nbsp;Defining Authentication Services</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="chap-auth-services.html#what-is-authn">2.1. About Authentication in OpenAM</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-social-authn">2.2. Configuring Social Authentication</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-authn-modules">2.3. Configuring Authentication Modules</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-authn-chains">2.4. Configuring Authentication Chains</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#authn-post-auth-plugins">2.5. Post Authentication Plugins</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#authn-from-browser">2.6. Authenticating To OpenAM</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#session-upgrade">2.7. Authentication Levels &amp; Session Upgrade</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-account-lockout">2.8. Configuring Account Lockout</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-session-quotas">2.9. Configuring Session Quotas</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#configure-valid-goto-url-resources">2.10. Configuring Valid goto URL Resources</a></span></dt></dl></div><p>An <em class="firstterm">authentication</em> service confirms the identity
 of a user or a client application.</p><p>This chapter describes how to configure authentication in OpenAM.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="what-is-authn"></a>2.1.&nbsp;About Authentication in OpenAM</h2></div></div></div><a class="indexterm" name="d0e604"></a><p>Access management is about controlling access to resources. OpenAM
  plays a role similar to border control at an international airport. Instead
  of having each and every airline company deal with access to each
  destination, all airlines redirects passengers to border control. Border
  control then determines who each passenger is according to passport
  credentials. Border control also checks whether the identified passenger
  is authorized to fly to the destination corresponding to the ticket, perhaps
  based on visa credentials. Then, at the departure gate, an agent enforces
  the authorization from border control, allowing the passenger to board the
  plane as long as the passenger has not gotten lost, or tried to board the
  wrong plane, or swapped tickets with someone else. Thus, border control
  handles access management at the airport.</p><p>OpenAM is most frequently used to protect web-accessible resources.
  Users browse to a protected web application page. An agent installed on the
  server with the web application redirects the user to OpenAM for access management.
  OpenAM determines who the user is, and whether the user has the right to
  access the protected page. OpenAM then redirects the user back to the
  protected page, with authorization credentials that can be verified by the agent.
  The agent allows OpenAM authorized users access the page.</p><p>Notice that OpenAM basically needs to determine two things for
  access management: the identity of the user, and whether the user has access rights
  to the protected page. <em class="firstterm">Authentication</em> is how OpenAM identifies
  the user. This chapter covers how to set up the
  authentication process. <em class="firstterm">Authorization</em> is how OpenAM determines
  whether a user has access to a protected resource. Authorization is covered later.</p><p>For authentication, OpenAM uses credentials from the user or
  client application. It then uses defined mechanisms to
  validate credentials and complete the authentication. The authentication
  methods can vary. For example, passengers travelling on international flights authenticate
  with passports and visas. In contrast, passengers travelling on domestic flights might
  authenticate with an identity card or a driver's license. Customers withdrawing
  cash from an ATM authenticate with a card and a PIN. </p><a class="indexterm" name="d0e623"></a><a class="indexterm" name="d0e628"></a><p>OpenAM allows you to configure authentication processes and then customize
  how they are applied. OpenAM uses <em class="firstterm">authentication
  modules</em> to handle different ways of authenticating. Basically,
  each authentication module handles one way of obtaining and verifying
  credentials. You can chain different authentication modules together.
  In OpenAM, this is called <em class="firstterm">authentication chaining</em>.
  Each authentication module can be configured to specify the continuation and
  failure semantics with one of the following four flags:
  required, optional, requisite, or sufficient.<a href="#ftn.d0e641" class="footnote" name="d0e641"><sup class="footnote">[3]</sup></a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>When a <em class="firstterm">required</em> module fails, the rest of
    the chain is processed, but the authentication fails.</p><p>A required module might be used for login with email and password,
    but then fall through to another module to handle new users who have not
    yet signed up.</p></li><li class="listitem"><p>When an <em class="firstterm">optional</em> module fails,
    authentication continues.</p><p>An optional module might be used to permit a higher level of access
    if the user can present a X.509 certificate for example.</p></li><li class="listitem"><p>When a <em class="firstterm">requisite</em> module fails, authentication
    fails and authentication processing stops.</p><p>A requisite module might be used with exclusive SSO.</p></li><li class="listitem"><p>When a <em class="firstterm">sufficient</em> succeeds, authentication
    is successful and later modules in the chain are skipped.</p><p>You could set Windows Desktop SSO as sufficient, so authenticated
    Windows users are let through, whereas web users have to traverse another
    authentication module such as one requiring an email address and a
    password.</p></li></ul></div><a class="indexterm" name="d0e677"></a><p>With OpenAM, you can further set <em class="firstterm">authentication
  levels</em> per module, with higher levels being used typically
  to allow access to more restricted resources. The OpenAM SPIs also let you
  develop your own authentication modules, and post-authentication plugins.
  Client applications can specify the authentication level, module, user, and
  authentication service to use among those you have configured. As described
  later in this guide, you can use <em class="firstterm">realms</em> to organize
  which authentication process applies for different applications or different
  domains, perhaps managed by different people.</p><p>When a user successfully authenticates, OpenAM creates a session, which
  allows OpenAM to manage that user's access to resources. In some deployments
  you need to limit how many active sessions a user can have at a given time.
  For example, you might want to prevent a user from using more than two devices
  at once. See <a class="xref" href="chap-auth-services.html#configure-session-quotas" title="2.9.&nbsp;Configuring Session Quotas">Section&nbsp;2.9, &#8220;Configuring Session Quotas&#8221;</a> for
  instructions.</p><p>OpenAM leaves the authentication process flexible so that you can adapt
  how it works to your situation. Although at first the number of choices
  can seem daunting, now that you understand the basic process, you begin to
  see how choosing authentication modules and arranging them in authentication
  chains lets you use OpenAM to protect access to a wide range of applications
  used in your organization.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-social-authn"></a>2.2.&nbsp;Configuring Social Authentication</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-auth-services.html#social-authn-wizard-pre-populated">2.2.1. Configuring Pre-Populated Social Authentication Providers</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#social-authn-wizard-custom">2.2.2. Configuring Custom Social Authentication Providers</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#social-authn-implementations-service">2.2.3. Configuring the Social Authentication Implementations service</a></span></dt></dl></div><a class="indexterm" name="d0e699"></a><a class="indexterm" name="d0e706"></a><p>OpenAM allows delegation of authentication to any third party
   OpenID Connect 1.0 server that implements the <a class="link" href="http://openid.net/specs/openid-connect-discovery-1_0.html" target="_blank"><em class="citetitle">OpenID Connect Discovery 1.0 specification</em></a>.</p><p>The OpenAM console provides wizards for configuring authentication
   with selected third parties: Facebook, Google, or Microsoft. An additional
   wizard provides the ability to configure other third party authentication
   providers.</p><p>The wizards create an Authentication Module
   and an Authentication Chain containing the correct configuration
   needed to authenticate with the third party. The wizard also adds
   configuration data to the realm's <span class="emphasis"><em>Social Authentication Implementations</em></span>
   Service (and provisions the service if it is not already present) that
   enables the display of logos of configured third party authentication
   providers on the OpenAM login screen, as shown below.</p><div class="figure"><a name="figure-login-with-social-logos"></a><div class="figure-title">Figure&nbsp;2.1.&nbsp;Login Screen With Social Authentication Logos</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/login-with-social-authentication.png" align="middle" height="360" alt="Login screen with social authentication logos."></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e727.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="social-authn-wizard-pre-populated"></a>2.2.1.&nbsp;Configuring Pre-Populated Social Authentication Providers</h3></div></div></div><a class="indexterm" name="d0e741"></a><p>OpenAM provides wizards to quickly enable authentication with
    Facebook, Google and Microsoft. Most settings are pre-populated,
    only a <span class="emphasis"><em>Client ID</em></span> and <span class="emphasis"><em>Client
     Secret</em></span> are required.</p><p>To obtain a <span class="emphasis"><em>Client ID</em></span> and <span class="emphasis"><em>Client
    Secret</em></span> you should register an application with the
    third party provider, at the following links:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Facebook</span></dt><dd><p>
      <a class="link" href="https://developers.facebook.com/quickstarts/?platform=web" target="_blank">
       <em class="citetitle">Facebook App Quickstart</em></a></p></dd><dt><span class="term">Google</span></dt><dd><p><a class="link" href="https://console.developers.google.com/project" target="_blank"><em class="citetitle">Google Developers Console</em></a></p><div class="note"><h3 class="title">Note</h3><p>You must enable the Google+ API in order to
       authenticate with Google. To enable the Google+ API,
       login to the Google Developers Console, select your project,
       navigate to APIs &amp; auth &gt; APIs, and then set the status of the
       <code class="literal">Google+ API</code> to <code class="literal">ON</code>.</p></div></dd><dt><span class="term">Microsoft</span></dt><dd><p>
      <a class="link" href="https://account.live.com/developers/applications/index" target="_blank"><em class="citetitle">Microsoft account Developer Center</em></a></p></dd></dl></div><div class="procedure"><a name="howto-social-authn-wizard-pre-populated"></a><div class="procedure-title">Procedure&nbsp;2.1.&nbsp;To Configure Pre-Populated Social Authentication Providers</div><a class="indexterm" name="d0e802"></a><p>Once you have registered an application and obtained credentials from
     the social authentication provider, follow the steps below to configure
     authentication with the provider.</p><ol class="procedure" type="1"><li class="step"><p>On the Common Tasks tab page of the OpenAM console, click the link
      for the social authentication provider you want to configure, either
      <span class="emphasis"><em>Configure Facebook Authentication</em></span>,
      <span class="emphasis"><em>Configure Google Authentication</em></span>, or
      <span class="emphasis"><em>Configure Microsoft Authentication</em></span>.
     </p></li><li class="step"><p>On the configure third party authentication page:</p><ol type="a" class="substeps"><li class="step"><p>Select the realm in which to enable social authentication.</p></li><li class="step"><p>Enter the <span class="emphasis"><em>Client ID</em></span> obtained from
       the third party authentication provider.</p></li><li class="step"><p>Enter the <span class="emphasis"><em>Client Secret</em></span> obtained from
       the third party authentication provider, and repeat it in the
       <code class="literal">Confirm Client Secret</code> field.</p></li><li class="step"><p>Leave the default <code class="literal">Redirect URL</code>,
       unless you are using an external server as a proxy.</p></li><li class="step"><p>Click <code class="literal">Create</code>.</p></li></ol><div class="figure"><a name="figure-google-authn-wizard"></a><div class="figure-title">Figure&nbsp;2.2.&nbsp;The Configure Google Authentication Wizard</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/google-authn-wizard.png" align="middle" height="360" alt="The Configure Google Authentication wizard."></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e860.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><p>On completion, the wizard displays a message confirming
      the successful creation of a new Authentication Module and an
      Authentication Chain for the provider, and either the creation of a new
      Social Authentication Implementations service named
      <code class="literal">socialAuthNService</code>, or an update if it already existed.</p></li></ol></div><p>You can configure the Authentication Module, Authentication Chain,
    and Social Authentication Implementations service that you created by using the
    wizards in the same way as manually created versions. For more information, see
    <a class="xref" href="chap-auth-services.html#configure-authn-modules" title="2.3.&nbsp;Configuring Authentication Modules">Section&nbsp;2.3, &#8220;Configuring Authentication Modules&#8221;</a>,
    <a class="xref" href="chap-auth-services.html#configure-authn-chains" title="2.4.&nbsp;Configuring Authentication Chains">Section&nbsp;2.4, &#8220;Configuring Authentication Chains&#8221;</a>, and
    <a class="xref" href="chap-auth-services.html#social-authn-implementations-service" title="2.2.3.&nbsp;Configuring the Social Authentication Implementations service">Section&nbsp;2.2.3, &#8220;Configuring the Social Authentication Implementations service&#8221;</a>.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="social-authn-wizard-custom"></a>2.2.2.&nbsp;Configuring Custom Social Authentication Providers</h3></div></div></div><a class="indexterm" name="d0e884"></a><p>OpenAM provides a wizard to quickly enable authentication with
    any third party provider that supports the <a class="link" href="http://openid.net/specs/openid-connect-discovery-1_0.html" target="_blank">
     <em class="citetitle">OpenID Connect Discovery 1.0 specification</em></a>.</p><p>You must first register an application with the third party
    provider to obtain a <span class="emphasis"><em>Client ID</em></span>, <span class="emphasis"><em>Client
     Secret</em></span>, and the <span class="emphasis"><em>OpenID Discovery URL</em></span>.</p><div class="procedure"><a name="howto-social-authn-wizard-custom"></a><div class="procedure-title">Procedure&nbsp;2.2.&nbsp;To Configure Custom Social Authentication Providers</div><p>Once you have registered an application and obtained your
     credentials from the social authentication provider,
     follow the steps below to configure authentication with the provider.</p><ol class="procedure" type="1"><li class="step"><p>On the Common Tasks tab page of the OpenAM console, click the
      <code class="literal">Configure Other Authentication</code> link.
     </p></li><li class="step"><p>On the configure social authentication page:</p><ol type="a" class="substeps"><li class="step"><p>Select the realm in which to enable social authentication.</p></li><li class="step"><p>Enter the <span class="emphasis"><em>OpenID Discovery URL</em></span> obtained
       from the third party authentication provider.</p></li><li class="step"><p>Enter a name for the provider in the <code class="literal">Provider
      Name</code> field. OpenAM uses this as a label on the
       login page to identify the provider.</p></li><li class="step"><p>Enter the URL of an image to be used on the login page in the
       <code class="literal">Image URL</code> field. OpenAM places the image on the
       login page, to enable authentication with the provider.</p></li><li class="step"><p>Enter the <span class="emphasis"><em>Client ID</em></span> obtained from
       the third party authentication provider.</p></li><li class="step"><p>Enter the <span class="emphasis"><em>Client Secret</em></span> obtained from
       the third party authentication provider, and repeat it in the
       <code class="literal">Confirm Client Secret</code> field.</p></li><li class="step"><p>Leave the default <code class="literal">Redirect URL</code>,
       unless you are using an external server as a proxy.</p></li><li class="step"><p>Click <code class="literal">Create</code>.</p></li></ol><div class="figure"><a name="figure-social-authn-wizard"></a><div class="figure-title">Figure&nbsp;2.3.&nbsp;The Configure Social Authentication Wizard</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/social-authn-wizard.png" align="middle" height="360" alt="The Configure Social Authentication wizard."></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e975.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><p>On completion, the wizard displays a message confirming
      the successful creation of a new Authentication Module and an
      Authentication Chain for the provider, and either the creation of a new
      Social Authentication Implementations service named
      <code class="literal">socialAuthNService</code>, or an update if it already existed.</p></li></ol></div><p>You can configure the Authentication Module, Authentication Chain,
    and Social Authentication Implementations service that you created by using the
    wizard in the same way as manually created versions. For more information, see
    <a class="xref" href="chap-auth-services.html#configure-authn-modules" title="2.3.&nbsp;Configuring Authentication Modules">Section&nbsp;2.3, &#8220;Configuring Authentication Modules&#8221;</a>,
    <a class="xref" href="chap-auth-services.html#configure-authn-chains" title="2.4.&nbsp;Configuring Authentication Chains">Section&nbsp;2.4, &#8220;Configuring Authentication Chains&#8221;</a>, and
    <a class="xref" href="chap-auth-services.html#social-authn-implementations-service" title="2.2.3.&nbsp;Configuring the Social Authentication Implementations service">Section&nbsp;2.2.3, &#8220;Configuring the Social Authentication Implementations service&#8221;</a>.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="social-authn-implementations-service"></a>2.2.3.&nbsp;Configuring the Social Authentication Implementations service</h3></div></div></div><a class="indexterm" name="d0e999"></a><p>You can add logos to the login page to allow users to authenticate
    using configured social authentication providers.</p><p>Wizards are provided to configure common social authentication
    providers, which also configure the Social Authentication Implementations
    service to add logos to the login page. You can manually add other
    Authentication Chains that contain an OAuth 2.0 / OpenID Connect
    authentication module.</p><p>To add a social authentication provider to the login screen,
    you must first configure an OAuth 2.0 / OpenID Connect Authentication Module
    , and an Authentication Chain that contains it. You can create the by using a
    wizard, see <a class="xref" href="chap-auth-services.html#social-authn-wizard-pre-populated" title="2.2.1.&nbsp;Configuring Pre-Populated Social Authentication Providers">Section&nbsp;2.2.1, &#8220;Configuring Pre-Populated Social Authentication Providers&#8221;</a> and
    <a class="xref" href="chap-auth-services.html#social-authn-wizard-custom" title="2.2.2.&nbsp;Configuring Custom Social Authentication Providers">Section&nbsp;2.2.2, &#8220;Configuring Custom Social Authentication Providers&#8221;</a>
   or created manually, see <a class="xref" href="chap-auth-services.html#configure-authn-modules" title="2.3.&nbsp;Configuring Authentication Modules">Section&nbsp;2.3, &#8220;Configuring Authentication Modules&#8221;</a> and
    <a class="xref" href="chap-auth-services.html#configure-authn-chains" title="2.4.&nbsp;Configuring Authentication Chains">Section&nbsp;2.4, &#8220;Configuring Authentication Chains&#8221;</a>.</p><div class="procedure"><a name="howto-social-authn-implementations"></a><div class="procedure-title">Procedure&nbsp;2.3.&nbsp;To Configure Social Authentication Implementations</div><p>Once you have created an Authentication Chain containing an OAuth
     2.0 / OpenID Connect Authentication Module, follow the steps below to add a logo for the
     authentication provider to the login screen.</p><ol class="procedure" type="1"><li class="step"><p>On the Access Control tab page of the OpenAM console, click the
      realm containing the authentication module and authentication chain to
      be added to the login screen.
     </p></li><li class="step"><p>On the Services tab page for the realm:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the
        <code class="literal">Social Authentication Implementations</code> service
        exists, click on it.</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If the
        <code class="literal">Social Authentication Implementations</code> service
        does not exist, click New, select
        Social Authentication Implementations, and then click
        Next.</p></li></ul></div></li><li class="step"><p>On the Social Authentication Implementations page:</p><ol type="a" class="substeps"><li class="step"><p>In the <span class="emphasis"><em>Display Names</em></span> section, enter a
       Map Key, enter the text to display as ALT text on the logo in
       the Corresponding Map Value field, and then click Add.</p><div class="note"><h3 class="title">Note</h3><p>OpenAM uses the value in the Map Key fields throughout the
       configuration to tie the various implementation settings
       to each other. The value is case-sensitive.</p></div></li><li class="step"><p>In the <span class="emphasis"><em>Authentication Chains</em></span> section,
       re-enter the Map Key used in the previous step, select the Authentication Chain
       from the Corresponding Map Value list, and then click Add.</p></li><li class="step"><p>In the <span class="emphasis"><em>Icons</em></span> section,
       re-enter the  Map Key used in the previous steps, enter the path to a
       logo image to be used on the login screen in the Corresponding Map Value
       list, and then click Add.</p></li><li class="step"><p>In the <span class="emphasis"><em>Enabled Implementations</em></span> section,
       re-enter the  Map Key used in the previous steps, and then click Add.</p><div class="tip"><h3 class="title">Tip</h3><p>Removing a Map Key from the Enabled Implementations
        list removes the associated logo from the login screen. There
        is no need to delete the Display Name, Authentication Chain or
        Icon configuration to remove the logo from the login screen.</p></div></li><li class="step"><p>Click Add or Save.</p></li></ol><div class="figure"><a name="figure-social-authn-implementations"></a><div class="figure-title">Figure&nbsp;2.4.&nbsp;Configuring the Social Authentication Implementations
       service</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/social-authn-implementations.png" align="middle" height="360" alt="Configuring the Social Authentication Implementations service."></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e1085.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"></li></ol></div><p>An icon now appears on the OpenAM login screen,
    allowing users to authenticate with the third party
    authentication provider.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-modules"></a>2.3.&nbsp;Configuring Authentication Modules</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-auth-services.html#ad-module-conf-hints">2.3.1. Hints for the Active Directory Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#adaptive-auth-module-conf-hints">2.3.2. Hints for the Adaptive Risk Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#anon-module-conf-hints">2.3.3. Hints for the Anonymous Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#cert-module-conf-hints">2.3.4. Hints for the Certificate Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#core-module-conf-hints">2.3.5. Hints for the Core Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#datastore-module-conf-hints">2.3.6. Hints for the Data Store Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#device-id-match-hints">2.3.7. Hints for the Device ID (Match) Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#device-id-save-hints">2.3.8. Hints for the Device ID (Save) Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#federation-module-conf-hints">2.3.9. Hints for the Federation Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#hotp-module-conf-hints">2.3.10. Hints for the HOTP Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#http-module-conf-hints">2.3.11. Hints for the HTTP Basic Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#jdbc-module-conf-hints">2.3.12. Hints for the JDBC Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#ldap-module-conf-hints">2.3.13. Hints for the LDAP Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#msisdn-module-conf-hints">2.3.14. Hints for the MSISDN Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#OATH-module-conf-hints">2.3.15. Hints for the OATH Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#oauth2-module-conf-hints">2.3.16. Hints for the OAuth 2.0/OpenID Connect Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#oidc-module-conf-hints">2.3.17. Hints for the OpenID Connect id_token bearer Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#persistent-cookie">2.3.18. Hints for the Persistent Cookie Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#radius-module-conf-hints">2.3.19. Hints for the RADIUS Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#sae-module-conf-hints">2.3.20. Hints for the SAE Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#scripted-module-conf-hints">2.3.21. Hints for Scripted Authentication Modules</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#securid-module-conf-hints">2.3.22. Hints For the SecurID Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#desktop-module-conf-hints">2.3.23. Hints for the Windows Desktop SSO Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#winnt-module-conf-hints">2.3.24. Hints for the Windows NT Authentication Module</a></span></dt><dt><span class="section"><a href="chap-auth-services.html#wss-module-conf-hints">2.3.25. Hints for the WSSAuth Authentication Module</a></span></dt></dl></div><a class="indexterm" name="d0e1098"></a><p>The OpenAM console provides two places where the OpenAM administrator
  can configure authentication modules.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Under Configuration &gt; Authentication, you configure available
    modules for use throughout OpenAM. What you set up here is inherited
    for use elsewhere.</p></li><li class="listitem"><p>Under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
    Authentication, you configure modules for your realm. What you set up
    at this level inherits from the global configuration, but you can override
    what is inherited. You can also add your own modules if necessary.</p></li></ol></div><p>The configuration of individual modules depend on its function.
  The configuration of an Active Directory over LDAP user authentication module
  requires connection information and details about where to search for users.
  In contrast, the configuration of the HOTP module for OTP authentication
  requires data about the password length and the mail server or SMS gateway for
  to send the password during authentication.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ad-module-conf-hints"></a>2.3.1.&nbsp;Hints for the Active Directory Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-ad"></a><a class="indexterm" name="d0e1127"></a><p>OpenAM connects to Active Directory over Lightweight Directory Access
   Protocol (LDAP). OpenAM provides separate Active Directory and LDAP
   modules to support the use of both Active Directory and
   another directory service in an authentication chain.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthADService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Primary Active Directory Server, </span><span class="term">Secondary Active Directory Server</span></dt><dd><p>The default port for LDAP is 389. If you are connecting to
      Active Directory over SSL, the default port for LDAP/SSL is 636.</p><p>To allow users to change passwords through OpenAM, Active Directory
      requires that you connect over SSL.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to Active Directory Server. Make sure that OpenAM
      can trust the Active Directory certificate when using this option.</p><p>OpenAM first attempts to contact primary servers. If no primary
      server is available, then OpenAM attempts to contact secondaries.</p><p>When authenticating users from a directory server that is remote
      from OpenAM, set both the primary and secondary server values.</p><p><span class="command"><strong>ssoadm</strong></span> attributes: primary is
      <code class="literal">iplanet-am-auth-ldap-server</code>; secondary is
      <code class="literal">iplanet-am-auth-ldap-server2</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better performance.
      When configuring the module for a particular part of the organization,
      you can perhaps start searches from a specific organizational unit such as
      <code class="literal">OU=sales,DC=example,DC=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in Active Directory, for example to
      manage account lockout, or if Active Directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to Active Directory.</p><p>The default is <code class="literal">amldapuser</code>. If the administrator
      authentication chain (default: <code class="literal">ldapService</code>) has been
      configured to include only the Active Directory module, then make sure
      that the password is correct before you logout. If it is incorrect, you
      will be locked out. If you do get locked out, you can login with the
      super user DN, which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> was set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code> and
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes Used to Retrieve User Profile, </span><span class="term">Attributes Used to Search for a User to be Authenticated, </span><span class="term">User Search Filter, </span><span class="term">Search Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">CN=Users,DC=example,DC=com</code> with a filter
      <code class="literal">"(MAIL=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">MAIL=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>The User Search Filter text box provides a more complex filter. For example, 
      if you search on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the resulting 
      search filter <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)
      (objectClass=inetOrgPerson))</code>, where <em class="replaceable"><code>address</code></em> 
      is the mail address provided by the user.</p><p>This controls how and the level of the directory that will be searched.
      You can set the search to run at a high level or against a specific area.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>OBJECT will search only for the entry specified as the DN to Start User
         Search.</p></li><li class="listitem"><p>ONELEVEL will search only the entries that are directly children of that
         object.</p></li><li class="listitem"><p>SUBTREE will search the entry specified and every entry under it.</p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">SSL/TLS Access to Active Directory Server</span></dt><dd><p>If you enable SSL/TLS, OpenAM must be able to trust Active Directory
      certificates, either because the Active Directory certificates were
      signed by a CA whose certificate is already included in the trust store
      used by the container where OpenAM runs, or because you imported the
      certificates into the trust store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">Return User DN to DataStore</span></dt><dd><p>When enabled, and OpenAM uses Active Directory as the user store,
      the module returns the DN rather than the User ID, so the bind for
      authentication can be completed without a search to retrieve
      the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>This list lets you map (external) attribute names from Active
      Directory to (internal) attribute names used by OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Interval</span></dt><dd><p>Specifies how often OpenAM should send a heartbeat request to the
      directory server to ensure that the connection does not remain idle. Some
      network administrators configure firewalls and load balancers to drop
      connections that are idle for too long. You can turn this off by setting
      the value to 0 or to a negative number. To set the units for the interval
      use LDAP Connection Heartbeat Time Unit.</p><p>Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Time Unit</span></dt><dd><p>Specifies the time unit corresponding to LDAP Connection Heartbeat
      Interval.</p><p>Default: minute</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthADAuthLevel</code></p></dd></dl></div><a class="indexterm" name="d0e1368"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adaptive-auth-module-conf-hints"></a>2.3.2.&nbsp;Hints for the Adaptive Risk Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-adaptive-risk"></a><a class="indexterm" name="d0e1381"></a><p>The Adaptive Risk module is designed to assess risk during
   authentication so that OpenAM can determine whether to require the
   user to complete further authentication steps. After configuring the
   Adaptive Risk module, insert it in your authentication chain with criteria
   set to sufficient as shown in the following example.</p><div class="mediaobject" align="center"><a name="figure-adaptive-auth-module"></a><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/adaptive-auth-module.png" align="middle" height="360" alt="Including the Adaptive Risk module in an authentication chain"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-adaptive-auth-module.html" target="longdesc">D</a>]</span></div></div><p>In the example authentication chain shown, OpenAM has users
   authenticate first using the LDAP module providing a user ID and password
   combination. Upon success, OpenAM calls the Adaptive Risk module. The
   Adaptive Risk module assesses the risk based on your configured parameters.
   If the Adaptive Risk module calculates a total score below the threshold you
   set, the module returns success, and OpenAM finishes authentication
   processing without requiring further credentials. Otherwise the Adaptive
   Risk module evaluates the score to be above the risk threshold, and returns
   failure. OpenAM then calls the HOTP module, requiring the user to
   authenticate with a one-time password delivered to her by email or by SMS
   to her mobile phone.</p><p>When you configure the Adaptive Risk module to save cookies and
   profile attributes after successful authentication, OpenAM performs the
   save as post-authentication processing, only after the entire authentication
   chain returns success. You must set up OpenAM to save the data as part of
   post-authentication processing by editing the authentication chain to add
   <code class="literal">org.forgerock.openam.authentication.modules.adaptive.Adaptive</code>
   to the list of post authentication plugins.</p><p>
    When the Adaptive Risk module relies on the client IP address,
    and OpenAM lies behind a load balancer or proxy layer,
    configure the load balancer or proxy to send the address
    by using the <code class="literal">X-Forwarded-For</code> header,
    and configure OpenAM to consume and forward the header as necessary.
    For details, see the <em class="citetitle">Installation Guide</em> section,
    <a href="../../install-guide/index/chap-install-multiple.html#handle-request-headers" class="link"><em class="citetitle">Handling HTTP Request Headers</em></a>.
   </p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthAdaptiveService</code></p><div class="variablelist"><div class="variablelist-title">General</div><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-adaptive-auth-level</code></p></dd><dt><span class="term">Risk Threshold</span></dt><dd><p>Risk threshold score. If the sum of the Scores is greater than the
      threshold, the Adaptive Risk module returns failure. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-auth-threshold</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Failed Authentications</div><dl class="variablelist"><dt><span class="term">Failed Authentication Check</span></dt><dd><p>When enabled, check the user profile for authentication failures
      since the last successful login. This check therefore requires
      OpenAM to have access to the user profile, and Account Lockout to be
      enabled (otherwise OpenAM does not record authentication
      failures).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-check</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Failed
      Authentication Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Failed Authentication Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-failure-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">IP Address Range</div><dl class="variablelist"><dt><span class="term">IP Range Check</span></dt><dd><p>When enabled, check whether the client IP address is within one
      of the specified IP Ranges.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-check</code></p></dd><dt><span class="term">IP Range</span></dt><dd><p>For IPv4, specifies a list of IP ranges either in CIDR-style notation
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>/<em class="replaceable"><code>YY</code></em></code>)
      or as a range from one address to another
      (<code class="literal"><em class="replaceable"><code>x.x.x.x</code></em>-<em class="replaceable"><code>y.y.y.y</code></em></code>,
      meaning from <em class="replaceable"><code>x.x.x.x</code></em> to
      <em class="replaceable"><code>y.y.y.y</code></em>).</p><p>For IPv6, specifies a list of IP ranges either in CIDR-style notation
      (<code class="literal"><em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em>/<em class="replaceable"><code>YY</code></em></code>)
      or as a range from one address to another
      (<code class="literal"><em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em>-<em class="replaceable"><code>Y:Y:Y:Y:Y:Y:Y:Y</code></em></code>,
      meaning from <em class="replaceable"><code>X:X:X:X:X:X:X:X</code></em> to
      <em class="replaceable"><code>Y:Y:Y:Y:Y:Y:Y:Y</code></em>).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-range</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP Range
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP Range Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-range-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">IP Address History</div><dl class="variablelist"><dt><span class="term">IP History Check</span></dt><dd><p>When enabled, check whether the client IP address matches one of
      the known values stored on the profile attribute you specify. This check
      therefore requires that OpenAM have access to the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-check</code></p></dd><dt><span class="term">History Size</span></dt><dd><p>Specifies how many IP address values to retain on the profile
      attribute you specify. Default: 5</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ip-adaptive-history-count</code></p></dd><dt><span class="term">Profile Attribute Name</span></dt><dd><p>Name of the user profile attribute on which to store known IP
      addresses. Default: <code class="literal">iphistory</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-attribute</code></p></dd><dt><span class="term">Save Successful IP Address</span></dt><dd><p>When enabled, save new client IP addresses to the known IP address
      list following successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the IP History
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the IP History Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-ip-history-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Known Cookie</div><dl class="variablelist"><dt><span class="term">Cookie Value Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie and optional cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for which OpenAM checks when
      you enable the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-name</code></p></dd><dt><span class="term">Cookie Value</span></dt><dd><p>Specifies the value of the cookie for which OpenAM checks. If
      no value is specified, OpenAM does not check the cookie value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-value</code></p></dd><dt><span class="term">Save Cookie Value on Successful Login</span></dt><dd><p>When enabled, save the cookie as specified in the client's browser
      following successful authentication. If no Cookie Value is specified,
      the value is set to 1.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if user passes the Cookie Value
      Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Cookie Value Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-known-cookie-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Device Cookie</div><dl class="variablelist"><dt><span class="term">Device Registration Cookie Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie with the correct device registration identifier as
      the value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie for the Device Registration Cookie
      Check. Default: Device</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-name</code></p></dd><dt><span class="term">Save Device Registration on Successful Login</span></dt><dd><p>When enabled, save the specified cookie with a hashed device
      identifier value in the client's browser following successful
      authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Device
      Registration Cookie Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Device Registration Cookie Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-device-cookie-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Time Since Last Login</div><dl class="variablelist"><dt><span class="term">Time Since Last Login Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified cookie that holds the encrypted last login time, and check
      that the last login time is more recent than a maximum number of days you
      specify.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-check</code></p></dd><dt><span class="term">Cookie Name</span></dt><dd><p>Specifies the name of the cookie holding the encrypted last login
      time value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-cookie-name</code></p></dd><dt><span class="term">Max Time since Last Login</span></dt><dd><p>Specifies a threshold age of the last login time in days. If the
      client's last login time is more recent than the number of days specified,
      then the client successfully passes the check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-value</code></p></dd><dt><span class="term">Save time of Successful Login</span></dt><dd><p>When enabled, save the specified cookie with the current time
      encrypted as the last login value in the client's browser following
      successful authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-save</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Time Since
      Last Login Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Time Since Last Login Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-time-since-last-login-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Profile Attribute</div><dl class="variablelist"><dt><span class="term">Profile Risk Attribute check</span></dt><dd><p>When enabled, check whether the user profile contains the specified
      attribute and value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-check</code></p></dd><dt><span class="term">Attribute Name</span></dt><dd><p>Specifies the attribute to check on the user profile for the
      specified value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-name</code></p></dd><dt><span class="term">Attribute Value</span></dt><dd><p>Specifies the value to match on the profile attribute. If the
      attribute is multi-valued, a single match is sufficient to pass the
      check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Profile Risk
      Attribute Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Profile Risk Attribute Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-risk-attribute-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Geo Location</div><dl class="variablelist"><dt><span class="term">Geolocation Country Code Check</span></dt><dd><p>When enabled, check whether the client IP address location matches
      a country specified in the Valid Country Codes list. The </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">forgerock-am-auth-adaptive-geo-location-check</code></p></dd><dt><span class="term">Geolocation Database location</span></dt><dd><p>Path to GeoIP data file used to convert IP addresses to
      country locations. The geolocation database is not packaged with OpenAM. 
      You can downloaded the GeoIP Country database from  <a class="link" href="http://www.maxmind.com/en/country" target="_top">MaxMind</a>. Use the binary 
      .dat file format, rather than .csv. You can use the GeoLite Country database
      for testing.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-database</code></p></dd><dt><span class="term">Valid Country Codes</span></dt><dd><p>Specifies the list of country codes to match. Use
      <code class="literal">|</code> to separate multiple values.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-values</code>.</p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Geolocation
      Country Code Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Geolocation Country Code Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-geo-location-invert</code></p></dd></dl></div><div class="variablelist"><div class="variablelist-title">Request Header</div><dl class="variablelist"><dt><span class="term">Request Header Check</span></dt><dd><p>When enabled, check whether the client browser request has the
      specified header with the correct value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-check</code></p></dd><dt><span class="term">Request Header Name</span></dt><dd><p>Specifies the name of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-name</code></p></dd><dt><span class="term">Request Header Value</span></dt><dd><p>Specifies the value of the request header for the Request Header
      Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-value</code></p></dd><dt><span class="term">Score</span></dt><dd><p>Value to add to the total score if the user fails the Request
      Header Check. Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-score</code></p></dd><dt><span class="term">Invert Result</span></dt><dd><p>When selected, add the Score to the total score if the user
      passes the Request Header Check.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-adaptive-req-header-invert</code></p></dd></dl></div><a class="indexterm" name="d0e2064"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="anon-module-conf-hints"></a>2.3.3.&nbsp;Hints for the Anonymous Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-anonymous"></a><a class="indexterm" name="d0e2077"></a><p>This module lets you configure and track anonymous users, who can log in
     to your application or web site without login credentials.
     Typically, you would provide such users with very limited access,
     for example, an anonymous user may have access to public downloads on your site.
     When the user attempts to access resources that require more protection,
     the module can force further authentication for those resources.</p><p>You can configure the Anonymous Authentication Module
      by specifying the <span class="command"><strong>ssoadm</strong></span> service name and Anonymous
      Authentication realm attributes: Valid Anonymous Users, Default User Name,
      Case Sensitive User IDs, and Authentication Level.
     </p><p><span class="command"><strong>ssoadm</strong></span> service name:
          <code class="literal">iPlanetAMAuthAnonymousService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Valid Anonymous Users</span></dt><dd><p>Specifies the list of valid anonymous user IDs that can log in without
       submitting a password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
        <code class="literal">iplanet-am-auth-anonymous-users-list</code></p><p>When user accesses the default module instance login URL, then the
        module prompts the user to enter a valid anonymous user name.</p><p>The default module instance login URL is defined as follows:</p><pre class="literallayout">protocol://hostname:port/deploy_URI/UI/Login?module=Anonymous&amp;org=org_name</pre><p>Next, OpenAM checks that the user ID is a valid anonymous user name.
        If the valid anonymous user ID exists in the list, the user is granted access to
        the application and the session is assigned to the user.
        The valid user can bypass the Login page at the following URL:</p><pre class="literallayout">protocol://hostname:port/deploy_URI/UI/Login?module=Anonymous&amp;org=org_name&amp;
IDToken1=&lt;valid anonymous username&gt;</pre><p>If the valid anonymous user ID does not exist in the list,
       the user will be authenticated as the Default Anonymous User Name (see below).</p></dd><dt><span class="term">Default Anonymous User Name</span></dt><dd><p>Specifies the user ID assigned by the module if the Valid
      Anonymous Users list is empty. The default value is <code class="literal">anonymous</code>.
      Note that the anonymous user must be defined in the realm.</p><pre class="literallayout">protocol://hostname:port/deploy_URI/UI/Login?module=Anonymous&amp;org=orgName
&amp;IDToken1=&lt;Default Anonymous User Name&gt;</pre><p>For example, the user can bypass the Login page by accessing the URL
        as the default anonymous user using the value of <code class="literal">anonymous</code>:</p><pre class="literallayout">http://openam.example.com:8080/openam/UI/Login?module=Anonymous&amp;org=example.com
&amp;IDToken1=anonymous</pre><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-anonymous-default-user-name</code></p></dd><dt><span class="term">Case Sensitive User IDs</span></dt><dd><p>Determines whether case matters for anonymous user IDs.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-anonymous-case-sensitive</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 (default) to any
      positive integer and is set for each authentication method.
      The higher number corresponds to a higher level of authentication.
      If you configured your authentication levels from a 0 to 5 scale, then an
      authentication level of 5 will require the highest level of authentication.</p><p>After a user has authenticated, OpenAM stores the authentication level in
      the session token.
      When the user attempts to access a protected resource, the token is
      presented to the application.
      The application uses the token's value to determine if the user has the
      correct authentication level required to access the resource.
      If the user does not have the required authentication level,
      the application can prompt the user to authenticate with a higher
      authentication level. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-anonymous-auth-level</code></p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>You can configure the Anonymous Authentication Module using the
          OpenAM Console by clicking <code class="literal">Configuration</code> &gt;
          <code class="literal">Authentication</code> &gt; <code class="literal">Anonymous</code>.</p></div><a class="indexterm" name="d0e2180"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="cert-module-conf-hints"></a>2.3.4.&nbsp;Hints for the Certificate Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-cert"></a><a class="indexterm" name="d0e2193"></a><p>X.509 digital certificates can enable secure authentication without
   the need for user names and passwords or other credentials. Certificate
   authentication can be handy to manage authentication by applications.
   If all certificates are signed by a recognized Certificate Authority (CA),
   then you might get away without additional configuration. If you need to
   look up public keys of OpenAM clients, this module can also look up public
   keys in an LDAP directory server.</p><p>When you store certificates and certificate revocation lists (CRL)
   in an LDAP directory service, you must configure both how to access the
   directory service and also how to look up the certificates and CRLs,
   based on the fields in the certificates that OpenAM clients present to
   authenticate.</p><p>Access to the LDAP server and how to search for users is similar
   to LDAP module configuration as in <a class="xref" href="chap-auth-services.html#ldap-module-conf-hints" title="2.3.13.&nbsp;Hints for the LDAP Authentication Module">Section&nbsp;2.3.13, &#8220;Hints for the LDAP Authentication Module&#8221;</a>.
   The primary difference is that, unlike for LDAP configuration, OpenAM
   retrieves the user identifier from a field in the certificate that the
   client application presents, then uses that identifier to search for the
   LDAP directory entry that holds the certificate, which should match the
   certificate presented. For example, if the Subject field of a typical
   certificate has a DN <code class="literal">C=FR, O=Example Corp, CN=Barbara
   Jensen</code>, and Barbara Jensen's entry in the directory has
   <code class="literal">cn=Barbara Jensen</code>, then you can use <code class="literal">CN=Barbara
   Jensen</code> from the Subject DN to search for the entry with
   <code class="literal">cn=Barbara Jensen</code> in the directory.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthCertService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Match Certificate in LDAP</span></dt><dd><p>When enabled, OpenAM searches for a match for the user's
      certificate in the LDAP directory. If a match is found and not revoked
      according to a CRL or OCSP validation, then authentication succeeds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-cert-in-ldap</code></p></dd><dt><span class="term">Subject DN Attribute Used to Search LDAP for Certificates</span></dt><dd><p>Indicates which attribute and value in the certificate Subject DN
      is used to find the LDAP entry holding the certificate.</p><p>Default: CN</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-ldap</code></p></dd><dt><span class="term">Match Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks whether the certificate has been
      revoked according to a CRL in the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-crl</code></p></dd><dt><span class="term">Issuer DN Attribute Used to Search LDAP for CRLs</span></dt><dd><p>Indicates which attribute and value in the certificate Issuer DN
      is used to find the CRL in the LDAP directory.</p><p>Default: CN</p><p>If only one attribute is specified, the LDAP search filter used to
      find the CRL based on the Subject DN of the CA certificate is
      <code class="literal">(<em class="replaceable"><code>attr-name</code></em>=<em class="replaceable"><code>attr-value-in-subject-DN</code></em>)</code>.</p><p>For example, if the subject DN of the issuer certificate is
      <code class="literal">C=US, CN=Some CA, serialNumber=123456</code>, and the
      attribute specified is <code class="literal">CN</code>, then the LDAP search filter
      used to find the CRL is <code class="literal">(CN=Some CA)</code>.</p><p>In order to distinguish among different CRLs for the same CA issuer,
      specify multiple attributes separated by commas (<code class="literal">,</code>) in
      the same order they occur in the subject DN. When multiple attribute names
      are provided in a comma-separated list, the LDAP search filter used is
      <code class="literal">(cn=<em class="replaceable"><code>attr1</code></em>=<em class="replaceable"><code>attr1-value-in-subject-DN</code></em>,<em class="replaceable"><code>attr2</code></em>=<em class="replaceable"><code>attr2-value-in-subject-DN</code></em>,...,<em class="replaceable"><code>attrN</code></em>=<em class="replaceable"><code>attrN-value-in-subject-DN</code></em>)</code>.</p><p>For example, if the subject DN of the issuer certificate is
      <code class="literal">C=US, CN=Some CA, serialNumber=123456</code>, and the
      attributes specified are <code class="literal">CN,serialNumber</code>, then
      the LDAP search filter used to find the CRL is
      <code class="literal">(cn=CN=Some CA,serialNumber=123456)</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-attr-check-crl</code></p></dd><dt><span class="term">HTTP Parameters for CRL Update</span></dt><dd><p>Your certificate authority should provide the URL to use here,
      from which OpenAM can get CRL updates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-param-get-crl</code></p></dd><dt><span class="term">Match CA Certificate to CRL</span></dt><dd><p>When enabled, OpenAM checks the CRL against the CA certificate to
      ensure it has not been compromised.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMValidateCACert</code></p></dd><dt><span class="term">Cache CRLs in Memory</span></dt><dd><p>When enabled, CRLs will be cached.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                   <code class="literal">openam-am-auth-cert-attr-cache-crl</code></p></dd><dt><span class="term">Update CA CRLs from CRLDistributionPoint</span></dt><dd><p>When enabled, OpenAM updates CRLs from the LDAP directory store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                   <code class="literal">openam-am-auth-cert-update-crl</code></p></dd><dt><span class="term">OCSP Validation</span></dt><dd><p>Enable this to use Online Certificate Status Protocol (OCSP)
      instead of CRLs to check certificates' revocation status.</p><p>If you enable this, you also must configure OSCP for OpenAM
      under Configuration &gt; Server and Sites &gt; Default Server Settings,
      or Configuration &gt; Server and Sites &gt; <em class="replaceable"><code>Server
      Name</code></em> &gt; Security.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-check-ocsp</code></p></dd><dt><span class="term">LDAP Server Where Certificates are Stored</span></dt><dd><p>Identifies the LDAP server with certificates. Remember to specify URLs
      with appropriate port numbers (389 for unencrypted LDAP, 636 for LDAP over SSL).
      When configuring a secure connection, scroll down to enable Use SSL/TLS for LDAP
      Access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-ldap-provider-url</code></p></dd><dt><span class="term">LDAP Search Start or Base DN</span></dt><dd><p>Valid base DN for the LDAP search, such as
      <code class="literal">dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-start-search-loc</code></p></dd><dt><span class="term">LDAP Server Authentication User, LDAP Server Authentication Password</span></dt><dd><p>If OpenAM stores attributes in the LDAP directory, for example to
      manage account lockout, or if the LDAP directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the LDAP directory.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-cert-principal-user</code>, and
      <code class="literal"> iplanet-am-auth-cert-principal-passwd</code></p></dd><dt><span class="term">Use SSL/TLS for LDAP Access</span></dt><dd><p>If you use SSL/TLS for LDAP access, OpenAM must be able to trust the
      LDAP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-use-ssl</code></p></dd><dt><span class="term">Certificate Field Used to Access User Profile</span></dt><dd><p>If the user profile is in a different entry from the user
      certificate, then this can be different from subject DN attribute
      used to find the entry with the certificate. When you select other,
      provide an attribute name in the Other Certificate Field Used to Access
      User Profile text box.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-user-profile-mapper</code></p></dd><dt><span class="term">Other Certificate Field Used to Access User Profile</span></dt><dd><p>This field is only used if the Certificate Field Used to Access
      User Profile attribute is set to other. This field allows a custom
      certificate field to be used as the basis of the user search.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-user-profile-mapper-other</code></p></dd><dt><span class="term">SubjectAltNameExt Value Type to Access User Profile</span></dt><dd><p>Use this if you want to look up the user profile from an RFC 822
      style name, or a User Principal Name as used in Active Directory.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-cert-user-profile-mapper-ext</code></p></dd><dt><span class="term">Trusted Remote Hosts</span></dt><dd><p>Hosts trusted to send certificates to OpenAM, such as load balancers
      doing SSL termination, or OpenAM distributed authentication UI
      instances.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-cert-gw-cert-auth-enabled</code></p></dd><dt><span class="term">HTTP Header Name for Client Certificate</span></dt><dd><p>If you configure trusted hosts, specify the HTTP header name for
      the client certificate inserted by the trusted host.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMHttpParamName</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-cert-auth-level</code></p></dd></dl></div><a class="indexterm" name="d0e2525"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="core-module-conf-hints"></a>2.3.5.&nbsp;Hints for the Core Authentication Module</h3></div></div></div><a class="indexterm" name="d0e2533"></a><p>The Core authentication module is a meta-module.</p><p>The Core module lets you set up the list of modules available,
   and specify what types of client applications can authenticate with which
   modules. It also lets you configure connection pools for access to
   directory servers, and whether to retain objects used during authentication
   for use during logout. Furthermore, the Core module lets you set defaults
   used when configuring authentication in a particular realm.</p><div class="itemizedlist"><p>The Core Authentication module is divided into seven sections:</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-global" title="2.3.5.1.&nbsp;Core - Global Attributes">Section&nbsp;2.3.5.1, &#8220;Core - Global Attributes&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-realm-attributes" title="2.3.5.2.&nbsp;Core - Realm Attributes">Section&nbsp;2.3.5.2, &#8220;Core - Realm Attributes&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-persistent-cookie" title="2.3.5.3.&nbsp;Core - Persistent Cookie (Legacy)">Section&nbsp;2.3.5.3, &#8220;Core - Persistent Cookie (Legacy)&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-account-lockout" title="2.3.5.4.&nbsp;Core - Account Lockout">Section&nbsp;2.3.5.4, &#8220;Core - Account Lockout&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-general" title="2.3.5.5.&nbsp;Core - General">Section&nbsp;2.3.5.5, &#8220;Core - General&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-security" title="2.3.5.6.&nbsp;Core - Security">Section&nbsp;2.3.5.6, &#8220;Core - Security&#8221;</a></p></li><li class="listitem"><p><a class="xref" href="chap-auth-services.html#auth-core-post-auth" title="2.3.5.7.&nbsp;Core - Post Authentication Processing">Section&nbsp;2.3.5.7, &#8220;Core - Post Authentication Processing&#8221;</a></p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthService</code></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-global"></a>2.3.5.1.&nbsp;Core - Global Attributes</h4></div></div></div><a class="indexterm" name="d0e2575"></a><a class="indexterm" name="d0e2582"></a><p>The Global Attributes includes the list of available modules, LDAP connection
            settings, authentication process options, and an option to disable the XUI
            and make the classic UI the default end user interface.
            The Global Attributes are defined in the
            <a href="../../reference/index/chap-config-ref.html#authentication-configuration" class="link">
                <em class="citetitle">Authentication Configuration</em></a> section of the
            <em class="citetitle">Reference</em>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-realm-attributes"></a>2.3.5.2.&nbsp;Core - Realm Attributes</h4></div></div></div><a class="indexterm" name="d0e2600"></a><a class="indexterm" name="d0e2607"></a><p>This section of the Core Authentication module is on the Realm Attributes section
    page before options for Persistent Cookies.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">User Profile</span></dt><dd><p>Whether a user profile needs to exist in the user data store,
      or should be created on successful authentication.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Dynamic</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile if one does not already exist.
         OpenAM then issues the SSOToken. OpenAM creates the user profile 
         in the user data store configured for the realm.</p></dd><dt><span class="term">Dynamic with User Alias</span></dt><dd><p>Specifies that on successful authentication the Authentication
         Service creates a user profile that contains the User Alias List
         attribute which defines one or more aliases that for mapping a
         user's multiple profiles.</p></dd><dt><span class="term">Ignored</span></dt><dd><p>Specifies that a user profile is not required for the
         Authentication Service to issue an SSOToken after a successful
         authentication.</p></dd><dt><span class="term">Required</span></dt><dd><p>Specifies that on successful authentication the user must have
         a user profile in the user data store configured for the realm in
         order for the Authentication Service to issue an SSOToken.</p></dd></dl></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-dynamic-profile-creation</code></p></dd><dt><span class="term">User Profile Dynamic Creation Default Roles</span></dt><dd><p>Specifies the Distinguished Name (DN) of a role to be assigned to
      a new user whose profile is created when either of the Dynamic options
      is selected under the User Profile attribute. There are no default
      values. The role specified must be within the realm for which the
      authentication process is configured.</p><p>This role can be either an OpenAM or Sun DSEE role, but it cannot
      be a filtered role. If you wish to automatically assign specific services
      to the user, you have to configure the Required Services attribute in
      the User Profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-role</code></p></dd><dt><span class="term">Alias Search Attribute Name</span></dt><dd><p>After a user is successfully authenticated, the user's profile is
       retrieved. OpenAM first searches for the user based on the data store settings.
       If that fails to find the user, OpenAM will use the attributes listed here to
       lookup the user profile. This setting accepts any data store specific attribute
       name.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-alias-attr-name</code>
      </p><div class="note"><h3 class="title">Note</h3><p>
        If the <code class="literal">Alias Search Attribute Name</code> property is empty,
        OpenAM uses the <code class="literal">iplanet-am-auth-user-naming-attr</code> property
        from the <code class="literal">iPlanetAmAuthService</code>.
        The <code class="literal">iplanet-am-auth-user-naming-attr</code> property is only
        configurable through the <span class="command"><strong>ssoadm</strong></span> command-line tool and
        not through the OpenAM console.
       </p><div class="screen"><pre>
$ ssoadm get-realm-svc-attrs \
  --adminid amadmin \
  --password-file PATH_TO_PWDFILE \
  --realm REALM \
  --servicename iPlanetAMAuthService

$ ssoadm set-realm-svc-attrs \
  --adminid amadmin \
  --password-file PATH_TO_PWDFILE \
  --realm REALM \
  --servicename iPlanetAMAuthService \
  --attributevalues iplanet-am-auth-user-naming-attr=SEARCH_ATTRIBUTE
       </pre></div></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-persistent-cookie"></a>2.3.5.3.&nbsp;Core - Persistent Cookie (Legacy)</h4></div></div></div><a class="indexterm" name="d0e2702"></a><a class="indexterm" name="d0e2709"></a><p>This section of the Core Authentication module covers the Persistent Cookie options.</p><div class="note"><h3 class="title">Note</h3><p>Two methods are available in OpenAM to configure persistent cookies. The options described
     here and in <a class="xref" href="chap-auth-services.html#authn-from-browser" title="2.6.&nbsp;Authenticating To OpenAM">Section&nbsp;2.6, &#8220;Authenticating To OpenAM&#8221;</a> specify one method. There is also a new module,
     described in <a class="xref" href="chap-auth-services.html#persistent-cookie" title="2.3.18.&nbsp;Hints for the Persistent Cookie Module">Section&nbsp;2.3.18, &#8220;Hints for the Persistent Cookie Module&#8221;</a>. If you want to set up persistent cookies, you are
     encouraged to use the new module. The options described here have no effect on that module.</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Persistent Cookie Mode</span></dt><dd><p>Determines whether users can return to their authenticated session
      after restarting the browser. When enabled, the persistent cookie can be
      used to reauthenticate until the persistent cookie expires (as specified
      by the value of the Persistent Cookie Maximum Time attribute), or until
      the user explicitly logs out. By default, the Authentication Service uses
      only memory cookies (expires when the browser is closed).</p><p>The client must explicitly request a persistent cookie by adding
      <code class="literal">iPSPCookie=yes</code> as a parameter to the login URL. OpenAM
      sets a <code class="literal">DProPCookie</code> as described in
      <a class="xref" href="chap-auth-services.html#authn-from-browser" title="2.6.&nbsp;Authenticating To OpenAM">Section&nbsp;2.6, &#8220;Authenticating To OpenAM&#8221;</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-mode</code></p></dd><dt><span class="term">Persistent Cookie Maximum Time</span></dt><dd><p>Specifies the interval after which a persistent cookie expires.
      The interval begins when the user's session is successfully authenticated.
      The maximum value is 2147483647 (in seconds, so a bit more than 68 years).
      The field accepts any integer value less than the maximum.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-persistent-cookie-time</code></p></dd><dt><span class="term">Persistent Cookie Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
          associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
          <code class="literal">openam-auth-pcookie-auth-level</code></p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>
       The distributed authentication service (DAS) and cross-domain single sign-on
       (CDSSO) do not support the <code class="literal">iPSPCookie/DProPCookie</code>
       query string parameter to set a <code class="literal">DProPCookie</code> in the
       user-agent as a mechanism for cookie persistence. Neither DAS nor CDSSO retains
       <code class="literal">iPSPCookie=yes</code>.
      </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-account-lockout"></a>2.3.5.4.&nbsp;Core - Account Lockout</h4></div></div></div><a class="indexterm" name="d0e2785"></a><a class="indexterm" name="d0e2792"></a><p>This section of the Core Authentication module
      includes details on how account lockouts can be configured.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Login Failure Lockout Mode</span></dt><dd><p>Selecting this attribute enables a physical lockout. Physical
      lockout will inactivate an LDAP attribute (defined in the Lockout
      Attribute Name property) in the user's profile. This attribute works in
      conjunction with several other lockout and notification attributes.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-lockout-mode</code></p></dd><dt><span class="term">Login Failure Lockout Count</span></dt><dd><p>Defines the number of attempts that a user has to authenticate,
      within the time interval defined in Login Failure Lockout Interval,
      before being locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-count</code></p></dd><dt><span class="term">Login Failure Lockout Interval</span></dt><dd><p>Defines the time in minutes during which failed login attempts are
      counted. If one failed login attempt is followed by a second failed
      attempt, within this defined lockout interval time, the lockout count
      starts, and the user is locked out if the number of attempts reaches
      the number defined in Login Failure Lockout Count. If an attempt within
      the defined lockout interval time proves successful before the number of
      attempts reaches the number defined in Login Failure Lockout Count, the
      lockout count is reset.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-duration</code></p></dd><dt><span class="term">Email Address to Send Lockout Notification</span></dt><dd><p>Specify one (or more) email address(es) to which notification is
      sent if a user lockout occurs.</p><p>Separate multiple addresses with spaces, and append
      <code class="literal">|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>charset</code></em></code>
      to addresses for recipients in non-English locales.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-email-address</code></p></dd><dt><span class="term">Warn User After N Failures</span></dt><dd><p>The number of authentication failures after which OpenAM displays
      a warning message that the user will be locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-lockout-warn-user</code></p></dd><dt><span class="term">Login Failure Lockout Duration</span></dt><dd><p>Defines how many minutes a user must wait after a lockout before
      attempting to authenticate again. Entering a value greater than 0 enables
      memory lockout and disables physical lockout. Memory lockout means
      the user's account is locked in memory for the number of minutes
      specified. The account is unlocked after the time period has passed.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-duration</code></p></dd><dt><span class="term">Lockout Duration Multiplier</span></dt><dd><p>Defines a value with which to multiply the value of the Login
      Failure Lockout Duration attribute for each successive lockout. For
      example, if Login Failure Lockout Duration is set to 3 minutes, and the
      Lockout Duration Multiplier is set to 2, the user is locked out of the
      account for 6 minutes. Once the 6 minutes has elapsed, if the user again
      provides the wrong credentials, the lockout duration is then 12 minutes.
      With the Lockout Duration Multiplier, the lockout duration is
      incrementally increased based on the number of times the user has been
      locked out.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunLockoutDurationMultiplier</code></p></dd><dt><span class="term">Lockout Attribute Name</span></dt><dd><p>Defines the LDAP attribute used for physical lockout. The default
      value is <code class="literal">inetuserstatus</code>, although the field in the
      OpenAM console is empty. The Lockout Attribute Value field must also
      contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-name</code></p></dd><dt><span class="term">Lockout Attribute Value</span></dt><dd><p>Specifies the action to take on the attribute defined in Lockout
      Attribute Name. The default value is <code class="literal">inactive</code>,
      although the field in the OpenAM console is empty. The Lockout Attribute
      Name field must also contain an appropriate value.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-lockout-attribute-value</code></p></dd><dt><span class="term">Invalid Attempts Data Attribute Name</span></dt><dd><p>Specifies the LDAP attribute used to hold the number of failed
      authentication attempts towards Login Failure Lockout Count.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthInvalidAttemptsDataAttrName</code></p></dd><dt><span class="term">Store Invalid Attempts in Data Store</span></dt><dd><p>Enables the storage of information regarding failed authentication
      attempts as the value of the Invalid Attempts Data Attribute Name in
      the user data store. In order to store data in this attribute, the
      OpenAM schema has to be loaded. Information stored includes number of
      invalid attempts, time of last failed attempt, lockout time and lockout
      duration. Storing this information in the identity repository allows it
      to be shared among multiple instances of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunStoreInvalidAttemptsInDS</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-general"></a>2.3.5.5.&nbsp;Core - General</h4></div></div></div><a class="indexterm" name="d0e2951"></a><a class="indexterm" name="d0e2958"></a><p>This section of the Core Authentication module includes general options.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Default Authentication Locale</span></dt><dd><p>Specifies the default language subtype to be used by the
      Authentication Service. The default value is
      <code class="literal">en_US</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-locale</code></p></dd><dt><span class="term">Identity Types</span></dt><dd><p>Lists the type or types of identities used during a profile lookup. You can
      choose more than one to search on multiple types if you would like OpenAM to 
      conduct a second lookup if the first lookup fails. Default: Agent and User</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Agent</span></dt><dd><p>Searches for identities under your agents.</p></dd><dt><span class="term">agentgroup</span></dt><dd><p>Searches for identities according to your established agent group.</p></dd><dt><span class="term">agentonly</span></dt><dd><p>Searches for identities only under your agents.</p></dd><dt><span class="term">Group</span></dt><dd><p>Searches for identities according to your established groups.</p></dd><dt><span class="term">User</span></dt><dd><p>Searches for identities according to your users.</p></dd></dl></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMIdentityType</code></p></dd><dt><span class="term">Pluggable User Status Event Classes</span></dt><dd><p>Specifies one or more Java classes used to provide a callback
      mechanism for user status changes during the authentication process.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMAuthCallBack</code>
      OpenAM interface. OpenAM supports account lockout and password changes.
      OpenAM supports password changes through the LDAP authentication module,
      and so the feature is only available for the LDAP module.</p><p>A .jar containing the user status event class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserStatusCallbackPlugins</code></p></dd><dt><span class="term">Default Authentication Level</span></dt><dd><p>Specifies the default authentication level for authentication modules.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-default-auth-level</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-security"></a>2.3.5.6.&nbsp;Core - Security</h4></div></div></div><a class="indexterm" name="d0e3063"></a><a class="indexterm" name="d0e3070"></a><p>This section of the Core Authentication module
              includes basic security options.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Module Based Authentication</span></dt><dd><p>Enables users to authenticate using module-based authentication.
      Otherwise, all attempts at authentication using the
      <code class="literal">module=<em class="replaceable"><code>module-name</code></em></code> login
      parameter result in failure. It is recommended that this be turned off in 
      a production environment.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunEnableModuleBasedAuth</code></p></dd><dt><span class="term">Zero Page Login</span></dt><dd><a class="indexterm" name="d0e3099"></a><p>
       If enabled, allow users to authenticate using only GET request parameters
       without showing a login screen.
       Enable this with caution as browsers can cache
       and servers can log credentials when they are part of the URL.
      </p><p>
       OpenAM always allows HTTP POST requests for zero page login.
      </p><p>
       Default: false (disabled)
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam.auth.zero.page.login.enabled</code>
      </p></dd><dt><span class="term">Zero Page Login Referer Whitelist</span></dt><dd><p>
       List of HTTP Referer URLs for which OpenAM allows zero page login.
       These URLs are supplied in the HTTP request header,
       <code class="literal">Referer</code>, which is designed to
       allow the client to specify the web page
       that provided the link to the requested resource.
      </p><p>
       If you enable zero page login,
       include the URLs here for the pages from which to allow zero page login,
       or leave this list blank to allow zero page login from any Referer.
      </p><p>
       This setting applies for both HTTP GET and also HTTP POST requests
       for zero page login.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam.auth.zero.page.login.referer.whitelist</code>
      </p></dd><dt><span class="term">Zero Page Login Allowed without Referer?</span></dt><dd><p>
       If enabled and zero page login is enabled,
       allow zero page login for requests
       without an HTTP <code class="literal">Referer</code> request header.
      </p><p>
       Default: true (enabled)
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam.auth.zero.page.login.allow.null.referer</code>
      </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="auth-core-post-auth"></a>2.3.5.7.&nbsp;Core - Post Authentication Processing</h4></div></div></div><a class="indexterm" name="d0e3159"></a><a class="indexterm" name="d0e3166"></a><p>This section of the Core Authentication module
              specifies options for post authentication processing.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Default Success Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after successful authentication. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. The default value is
      <code class="literal">/openam/console</code>. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-success-url</code></p></dd><dt><span class="term">Default Failure Login URL</span></dt><dd><p>Accepts a list of values that specifies where users are directed
      after authentication has failed. The format of this attribute is
      <code class="literal"><em class="replaceable"><code>client-type</code></em>|<em class="replaceable"><code>URL</code></em></code>
      although the only value you can specify at this time is a URL
      which assumes the type HTML. Values that do not specify HTTP have
      that appended to the deployment URI.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-login-failure-url</code></p></dd><dt><span class="term">Authentication Post Processing Classes</span></dt><dd><p>Specifies one or more Java classes used to customize post
      authentication processes for successful or unsuccessful logins.
      The Java class must implement the
      <code class="literal">com.sun.identity.authentication.spi.AMPostAuthProcessInterface</code>
      OpenAM interface.</p><p>A .jar containing the post processing class belongs in
      the <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance. If you do not build a .jar, add the class files under
      <code class="filename">WEB-INF/classes</code>. For deployment, add the .jar or
      classes into a custom OpenAM .war file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-post-login-process-class</code></p></dd><dt><span class="term">Generate UserID Mode</span></dt><dd><p>When enabled, the Membership module generates a list of alternate
      user identifiers if the one entered by a user during the
      self-registration process is not valid or already exists. The user
      identifiers are generated by the class specified in the Pluggable User
      Name Generator Class property.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-enabled</code></p></dd><dt><span class="term">Pluggable User Name Generator Class</span></dt><dd><p>Specifies the name of the class used to generate alternate user
      identifiers when Generate UserID Mode is enabled. The default value is
      <code class="literal">com.sun.identity.authentication.spi.DefaultUserIDGenerator</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-username-generator-class</code></p></dd><dt><span class="term">User Attribute Mapping to Session Attribute</span></dt><dd><p>Enables the authenticating user's identity attributes (stored in
      the identity repository) to be set as session properties in the user's
      SSOToken. The value takes the format
      <code class="literal"><em class="replaceable"><code>User-Profile-Attribute</code></em>|<em class="replaceable"><code>Session-Attribute-Name</code></em></code>.
      If <em class="replaceable"><code>Session-Attribute-Name</code></em> is not specified,
      the value of <em class="replaceable"><code>User-Profile-Attribute</code></em> is used.
      All session attributes contain the <code class="literal">am.protected</code> prefix
      to ensure that they cannot be edited by the Client SDK.</p><p>For example, if you define the user profile attribute as mail and
      the user's email address (available in the user session) as
      <code class="literal">user.mail</code>, the entry for this attribute would be
      <code class="literal">mail|user.mail</code>. After a successful authentication,
      the <code class="literal">SSOToken.getProperty(String)</code> method is used to
      retrieve the user profile attribute set in the session. The user's email
      address is retrieved from the user's session using the
      <code class="literal">SSOToken.getProperty("am.protected.user.mail")</code> method
      call.</p><p>Properties that are set in the user session using User Attribute
      Mapping to Session Attributes can not be modified (for example,
      <code class="literal">SSOToken.setProperty(String, String)</code>). This results in
      an <code class="literal">SSOException</code>. Multi-value attributes, such as
      <code class="literal">memberOf</code>, are listed as a single session variable
      with a <code class="literal">|</code> separator.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMUserAttributesSessionMapping</code></p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="datastore-module-conf-hints"></a>2.3.6.&nbsp;Hints for the Data Store Authentication Module</h3></div></div></div><a class="indexterm" name="d0e3324"></a><a class="indexterm" name="d0e3329"></a><p>The Data Store authentication module allows a login using the Identity
   Repository of the realm to authenticate users. Using the Data Store module
   removes the requirement to write an authentication plug-in module, load,
   and then configure the authentication module if you need to authenticate
   against the same data store repository. Additionally, you do not need to
   write a custom authentication module where flat-file authentication is
   needed for the corresponding repository in that realm.</p><p>Yet, the Data Store module is generic. It does not implement data
   store-specific capabilities such as the password policy and password reset
   features provided by LDAP modules. Therefore the Data Store module returns
   failure when such capabilities are invoked.</p><a class="indexterm" name="d0e3336"></a><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthDataStoreService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthDataStoreAuthLevel</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="device-id-match-hints"></a>2.3.7.&nbsp;Hints for the Device ID (Match) Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-deviceid-match"></a><a class="indexterm" name="d0e3368"></a><p>The Device ID (Match) module provides device fingerprinting functionality
    for risk-based authentication. The Device ID (Match) works together with other
    modules, for example, the DataStore, HMAC One-Time Password (HOTP), and
    Device ID (Save) modules in an authentication chain.
   </p><p>
    The Device ID (Match) module collects the unique characteristics of a remote user's computing device
    and compares them to characteristics on a saved device profile.
    The module computes any variances between the collected characteristics
    to those stored on the saved device profile and assigns penalty points for
    each difference.
   </p><p>
    For example, when a user who typically logs on to the Internet
    on a FireFox browser, logs on using Chrome, the Device ID (Match) module notes the
    difference and assigns penalty points to this change in behavior. If
    the module detects additional differences in behavior, such as browser fonts,
    geolocation, etc., then additional points are assessed and calculated. If the
    total maximum number of penalty points exceeds a pre-configured threshold value,
    the Device ID (Match) module fails and control is determined by how you
    configured your authentication chain. For example, if you include the
    HMAC One-Time Password (HOTP) module in your authentication chain
    and if the Device ID (Match) module fails after the maximum number of penalty
    points have been exceeded, then the authentication chain issues a HOTP request to the user,
    requiring the user to identify himself using two-factor authentication.
   </p><p>
    Typically, you configure and gather the following device print items:
   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>User agents, associated with the configuration of a web browser</p></li><li class="listitem"><p>Installed fonts</p></li><li class="listitem"><p>The plugins installed for the web browser</p></li><li class="listitem"><p>The resolution and color depth associated with a display</p></li><li class="listitem"><p>The timezone or even the geolocation of a device</p></li></ul></div><p>The Device ID (Match) module comes out of the box with default
    client-side and server-side JavaScript code, supplying
    the logic necessary to fingerprint the user agent and computer.
    Scripting allows you to customize the code, providing more control over the
    device fingerprint elements that you would like to collect.
    OpenAM supports both the JavaScript (default) and Groovy languages.
    The client-side code must be in JavaScript. The server-side script can be
    written in JavaScript or Groovy.
   </p><div class="important"><h3 class="title">Important</h3><p>
     By default, the maximum penalty points is set to 0, which you can adjust in
     the server-side script.
    </p></div><p>
    To access the Device ID (Match) module page on the
    console, click Configuration &gt; Device Id (Match).
   </p><div class="figure"><a name="figure-device-id-match"></a><div class="figure-title">Figure&nbsp;2.5.&nbsp;Device ID (Match) Module</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/device-id-match.png" align="middle" height="360" alt="Device ID (Match)"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e3405.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><div class="caution"><h3 class="title">Caution</h3><p>The Device ID (Match) module's default JavaScript
    client-side and server-side scripts are fully functional.
    If you change the client-side script, you must also
    make a corresponding change to the server-side script.
    For a safer option if you want to change the behavior of the module,
    you can copy the scripts to a custom scripted module, and edit the code to
    make your own customized version.
   </p></div><p>The Device ID (Match) does not stand on its own within an authentication
    chain and requires additional modules. For example, you can have any
    module that identifies the user (for example, DataStore, Active Directory or others),
    Device ID (Match), any module that provides two-factor authentication,
    (for example, HOTP or SecurID), and Device ID (Save) within your authentication
    chain.</p><p>
    As an example, you can configure the following modules with the
    specified criteria:
   </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="bold"><strong>DataStore - Requisite</strong></span>.
      The Device ID (Match) module requires user authentication information to
      validate the username. You can also use other modules that identify
      the username, such as Active Directory, RADIUS, or Windows NT.
     </p></li><li class="listitem"><p><span class="bold"><strong>Device ID (Match) - Sufficient</strong></span>.
      The Device ID (Match) runs the client-side script, which invokes the
      device fingerprint collectors, captures the data, and converts it into a
      JSON string. It then auto-submits the data in a JSP page to the server-side
      scripting engine.</p><p>
      The server-side script calculates the penalty points based
      on differences between the client device and stored device profile, and
      determines if the client device successfully "matches" the stored profile.
      If a match is successful, OpenAM determines that the client's device has the
      required attributes for a successful authentication.</p><p>
      If the device does not have a match, then the module fails and falls through
      to the HMAC One-Time Password (HOTP) module for further processing.
     </p></li><li class="listitem"><p><span class="bold"><strong>HMAC One-Time Password (HOTP) - Requisite</strong></span>.
      If the user's device does not match a stored profile,
      OpenAM presents the user with a HMAC One-Time Password (HOTP) screen either
      by SMS or email, prompting the user to enter a password.
     </p><p>
      You can also use any other module that provides two-factor authentication.
     </p><p>
      After the HOTP has successfully validated the user, the Device ID (Save)
      module gathers additional data from the user.
      For specific information about the HOTP module, see
      <a class="xref" href="chap-auth-services.html#hotp-module-conf-hints" title="2.3.10.&nbsp;Hints for the HOTP Authentication Module">Section&nbsp;2.3.10, &#8220;Hints for the HOTP Authentication Module&#8221;</a>.
     </p></li><li class="listitem"><p><span class="bold"><strong>Device ID (Save) - Required</strong></span>.
      The Device ID (Save) module provides configuration options to enable
      an auto-save feature on the device profile as well as set a maximum number
      of stored device profiles on the user entry or record.
      Once the maximum number of stored device profiles is reached, OpenAM
      deletes the old data from the user record as new ones are added.
      User records could thus contain both old and new device profiles.
     </p><p>
      If the auto-save feature is not enabled, OpenAM presents the user with a
      screen to save the new device profile.
     </p><p>
      The module also takes the device print and creates a JSON object that includes the ID,
      name, last selected date, selection counter, and device print.
      For specific information about the Device ID (Save) module, see
      <a class="xref" href="chap-auth-services.html#device-id-save-hints" title="2.3.8.&nbsp;Hints for the Device ID (Save) Module">Section&nbsp;2.3.8, &#8220;Hints for the Device ID (Save) Module&#8221;</a>.
     </p><div class="note"><h3 class="title">Note</h3><p>If a user has multiple device profiles, the profile that is the closest
       match to the current client details is used for the comparison result.
      </p></div></li></ol></div><p>You can create modules instances for a particular realm by clicking Access Control
    &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication, and then
    click New under Module Instances to add Device Id (Match) and Device Id (Save).
   </p><p>Under Authentication Chaining, click New to create a new chain, and then enter
    a name for the chain. On the <em class="replaceable"><code>Chain Name</code></em> - Properties
    page, click Add to set up the modules for your authentication chain.
   </p><div class="figure"><a name="figure-device-id-auth-chain"></a><div class="figure-title">Figure&nbsp;2.6.&nbsp;Authentication Chain with Device ID (Match) and Device ID (Save)</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/device-id-auth-chain.png" align="middle" height="360" alt="Device ID (Match) and Device ID (Save)"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e3473.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><p>The Device ID (Match) module has the following properties:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Client-side Script Enabled</span></dt><dd><p>Enable Device ID (Match) to send JavaScript in an authentication page
      to the device to collect data about the device by a self-submitting form.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-client-script-enabled</code></p></dd><dt><span class="term">Client-side Script</span></dt><dd><p>You can see default client-side JavaScript code that you can modify
       if necessary. Note that if you change the client-side script, you must make
       a corresponding change in the server-side script to account for the
       specific addition or removal of an element.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-client-script</code></p></dd><dt><span class="term">Server-side Script Language</span></dt><dd><p>Default: JavaScript. Select Groovy if your script is written in that
       language.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-script-type</code></p></dd><dt><span class="term">Server-side Script</span></dt><dd><p>You can see default server-side JavaScript code that you can modify
       if necessary. Note that a change in the client-side script requires a
       corresponding change in the server-side script to account for the specific
       addition or removal of an element.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-server-script</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
       associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-auth-level</code></p></dd></dl></div><p>
    When the user logs on to the console, OpenAM determines if the user's device
    differs from that of the stored profile.
    If the differences exceed the maximum number of penalty points,
    OpenAM sends an "Enter OTP" page, requiring the
    user to enter a one-time password, which is sent to the user via email or SMS.
    The user also has the option to request a one-time password.
   </p><p>Next, OpenAM presents the user with a "Add to Trusted Devices?" page,
    asking if the user wants to add the device to the list of trusted device profiles.
    If the user clicks "Yes", OpenAM prompts the user to enter a descriptive name
    for the trusted device.
   </p><p>Next, OpenAM presents the user with the User Profile page, where the
    user can click the Dashboard link in the upper left corner to access the My
    Applications and Trusted Devices page. Once on the Dashboard, the user can
    view the list of trusted devices or remove the device by clicking the
    Delete Device link.
   </p><div class="figure"><a name="figure-trusted-device-mgmt"></a><div class="figure-title">Figure&nbsp;2.7.&nbsp;Trusted Device Management on the User Profile Page</div><div class="figure-contents"><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/trusted-device-mgmt.png" align="middle" height="360" alt="Trusted Device Management"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="ld-d0e3553.html" target="longdesc">D</a>]</span></div></div></div></div><br class="figure-break"><a class="indexterm" name="d0e3561"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="device-id-save-hints"></a>2.3.8.&nbsp;Hints for the Device ID (Save) Module</h3></div></div></div><a class="indexterm" name="d0e3569"></a><a class="indexterm" name="d0e3574"></a><p>The Device ID (Save) module auto-saves the device
    profile rather than presenting a Save screen to the user each time a device
    profile requires update. The module also provides a configuration setting for
    the maximum number of stored profiles on the user record.
   </p><div class="note"><h3 class="title">Note</h3><p>If a user has multiple device profiles, the profile that is the closest
     match to the current client details is used for the comparison result.
    </p></div><p>
    Within its configured authentication chain, the Device ID (Save) module also
    takes the device print and creates a JSON object that consists of the ID,
    name, last selected date, selection counter, and device print itself.
   </p><p>The Device ID (Save) module has the following properties:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Automatically store new profiles</span></dt><dd><p>Select the checkbox to automatically store new profiles.
       After successful HMAC one-time password (HOTP) confirmation,
       OpenAM stores the new profile automatically.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-device-id-save-auto-store-profile</code></p></dd><dt><span class="term">Maximum stored profile quantity</span></dt><dd><p>Sets the maximum number of stored profiles on the user's record.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-device-id-save-max-profiles-allowed</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
       associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-device-id-save-auth-level</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="federation-module-conf-hints"></a>2.3.9.&nbsp;Hints for the Federation Authentication Module</h3></div></div></div><a class="indexterm" name="d0e3626"></a><a class="indexterm" name="d0e3631"></a><p>The Federation authentication module is used by a service provider
   to create a user session after validating single sign-on protocol messages.
   This authentication module is used by the SAML, SAMLv2, ID-FF, and
   WS-Federation protocols.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthFederationService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthFederationAuthLevel</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="hotp-module-conf-hints"></a>2.3.10.&nbsp;Hints for the HOTP Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-hotp"></a><a class="indexterm" name="d0e3663"></a><p>The HMAC One-Time Password authentication module works together in an
    authentication chain with any module that stores the <code class="literal">username</code>
    attribute.
    The module uses the <code class="literal">username</code> from the <code class="literal">sharedState</code>
    set by the previous module in the chain and retrieves the user's email address
    or telephone number to send a one-time password to the user. The user then
    enters the password on a Login page and completes the authentication process if
    successful.
   </p><p>
    For example, to set up HOTP in an authentication chain, you can configure
    the Data Store module (or any module that stores the user's
    <code class="literal">username</code>) as the <code class="literal">requisite</code> first module,
    and the HOTP module as the second <code class="literal">requisite</code> module.
    When authentication succeeds against the Data Store module, the HOTP module
    retrieves the Email Address and Telephone Number attributes from the data store
    based on the <code class="literal">username</code> value.
    For the HOTP module to use either attribute, the Email Address must contain
    a valid email address, or the Telephone Number must contain a valid
    SMS telephone number.
   </p><p>
    You can set the HOTP module to automatically generate a password when
    users begin logging into the system. You can also setup mobile phone,
    mobile carrier, and email attributes for tighter controls over where
    the messages are generated and what provider the messages go through to
    reach the user.
   </p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthHOTPService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPAuthLevel</code></p></dd><dt><span class="term">SMS Gateway Implementation Class</span></dt><dd><p>Change this if you must customize the SMS gateway implementation.
      The default class sends an SMS or email, depending on the
      configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMSGatewayImplClassName</code></p></dd><dt><span class="term">Mail Server Host Name</span></dt><dd><p>Host name of the mail server supporting Simple Message Transfer
      Protocol for electronic mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostName</code></p></dd><dt><span class="term">Mail Server Host Port</span></dt><dd><p>The default outgoing mail server port is 25, 465 (when connecting over SSL).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPHostPort</code></p></dd><dt><span class="term">Mail Server Authentication Username</span></dt><dd><p>User name for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserName</code></p></dd><dt><span class="term">Mail Server Authentication Password</span></dt><dd><p>Password for OpenAM to connect to the mail server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPUserPassword</code></p></dd><dt><span class="term">Mail Server Secure Connection</span></dt><dd><p>If OpenAM connects to the mail server securely, OpenAM must be able
      to trust the server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPSSLEnabled</code></p></dd><dt><span class="term">Email From Address</span></dt><dd><p>The <code class="literal">From:</code> address when sending a one-time
      password by mail.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPSMTPFromAddress</code></p></dd><dt><span class="term">One Time Password Validity Length (in minutes)</span></dt><dd><p>One-time passwords are valid for 5 minutes after they are generated
      by default.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordValidityDuration</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the one-time password to 6 or 8 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPPasswordLength</code></p></dd><dt><span class="term">One Time Password Delivery</span></dt><dd><p>Send the one-time password by SMS, by mail, or both.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPasswordDelivery</code></p></dd><dt><span class="term">Mobile Phone Number Attribute Names</span></dt><dd><p>Provides the attribute name used for the text message. The 
      default value is <code class="literal">telephoneNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamTelephoneAttribute</code></p></dd><dt><span class="term">Mobile Carrier Attribute Name</span></dt><dd><p>Provides the name of the carrier that will send the text
      message.</p><p>Every carrier has their own attribute name ending, for example Verizon
      uses @vtext.com or vtext.com. Contact your mobile carrier to find out what their 
      attribute name is. If you will be sending international texts, ask your carrier 
      if a country code is a required.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamSMSCarrierAttribute</code></p></dd><dt><span class="term">Email Attribute Name</span></dt><dd><p>Provides the attribute name used to email the OTP. The
      default value is <code class="literal">mail</code> (email).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openamEmailAttribute</code></p></dd><dt><span class="term">Auto Send OTP Code</span></dt><dd><p>Setup the HOTP module to automatically generate an email
      or text message when users begin the login process. </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthHOTPAutoClicking</code></p></dd></dl></div><a class="indexterm" name="d0e3891"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="http-module-conf-hints"></a>2.3.11.&nbsp;Hints for the HTTP Basic Authentication Module</h3></div></div></div><a class="indexterm" name="d0e3899"></a><p>HTTP basic authentication takes a user name and password from HTTP
   authentication and tries authentication against the backend module in OpenAM,
   depending on what you configure as the Backend Module Name.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthHTTPBasicService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Backend Module Name</span></dt><dd><p>Specifies the module that checks the user credentials. The credentials are
      then supplied to either a Data Store or other identity repository module for authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-http-basic-module-configured</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-httpbasic-auth-level</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="jdbc-module-conf-hints"></a>2.3.12.&nbsp;Hints for the JDBC Authentication Module</h3></div></div></div><a class="indexterm" name="d0e3940"></a><a class="indexterm" name="d0e3945"></a><p>The Java Database Connectivity (JDBC) module lets OpenAM connect to
   a database such as MySQL or Oracle DB to authenticate users.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthJDBCService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Connection Type</span></dt><dd><p>Choose Connection pool is retrieved via JNDI to connect using the
      Java Naming and Directory Interface connection pool supported by the web
      container in which OpenAM runs. Choose Non-persistent JDBC connection to
      connect directly through the JDBC driver.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCConnectionType</code></p></dd><dt><span class="term">Connection Pool JNDI Name</span></dt><dd><p>When using Connection pool is retrieved via JNDI, this specifies
      the pool. How you configure connection pooling depends on the web
      container where you run OpenAM. Refer to the documentation for your
      web container for instructions on setting up connection pooling.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCJndiName</code></p></dd><dt><span class="term">JDBC Driver</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the JDBC
      driver provided by the database.</p><p>The .jar containing the JDBC driver belongs in the
      <code class="filename">WEB-INF/lib</code> directory of the deployed OpenAM
      instance, and so you should add it to a custom OpenAM .war file that you
      deploy.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDriver</code></p></dd><dt><span class="term">JDBC URL</span></dt><dd><p>When using Non-persistent JDBC connection, this specifies the URL
      to connect to the database.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCUrl</code></p></dd><dt><span class="term">Database Username</span></dt><dd><p>Specify the user name to open the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbuser</code></p></dd><dt><span class="term">Database Password</span></dt><dd><p>Specify the password for the user opening the database connection.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCDbpassword</code></p></dd><dt><span class="term">Password Column Name</span></dt><dd><p>Specify the database column name where passwords are stored.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordColumn</code></p></dd><dt><span class="term">Prepared Statement</span></dt><dd><p>Specify the SQL query to return the password corresponding to the
      user to authenticate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCStatement</code></p></dd><dt><span class="term">Class to Transform Password Syntax</span></dt><dd><p>Specify the class that transforms the password retrieved to the
      same format as provided by the user.</p><p>The default class expects the password in clear text. Custom
      classes must implement the
      <code class="literal">JDBCPasswordSyntaxTransform</code> interface.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthJDBCPasswordSyntaxTransformPlugin</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthJDBCAuthLevel</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ldap-module-conf-hints"></a>2.3.13.&nbsp;Hints for the LDAP Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-ldap"></a><a class="indexterm" name="d0e4095"></a><p>OpenAM connects to directory servers using Lightweight Directory
   Access Protocol (LDAP). To build an easy-to-manage, high performance, pure
   Java, open source directory service, try
   <a class="link" href="http://opendj.org" target="_top">OpenDJ</a> directory services.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthLDAPService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Primary LDAP Server, </span><span class="term">Secondary LDAP Server</span></dt><dd><p>Directory servers generally use built-in data replication for high
      availability. Thus a directory service likely consists of a pool of
      replicas to which OpenAM can connect to retrieve and update directory
      data. You set up primary and secondary servers in case a replica is down
      due to maintenance or to a problem with a particular server.</p><p>Set one primary and optionally one secondary directory server for
      each OpenAM server. For the current OpenAM server, specify each directory
      server as a
      <code class="literal"><em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>
      combination. For other OpenAM servers in the deployment, you can specify
      each directory server as
<code class="literal"><em class="replaceable"><code>server-name</code></em>|<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em></code>,
      where <em class="replaceable"><code>server-name</code></em> is the FQDN portion of the
      OpenAM server from the list under Configuration &gt; Servers and
      Sites, and <em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>
      identifies the directory server.</p><p>For example, if the <em class="replaceable"><code>server-name</code></em>
      that is listed is <code class="literal">http://openam.example.com:8080/openam</code>
      and the directory server is accessible at <code class="literal">opendj.example.com:1389</code>,
      you would enter <code class="literal">openam.example.com|opendj.example.com:1389</code>.</p><p>When authenticating users from a directory service that is remote
      from OpenAM, set both the primary and secondary server values.</p><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP Server. Make sure that OpenAM
      can trust the servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      primary is <code class="literal">iplanet-am-auth-ldap-server</code>,
      secondary is <code class="literal">iplanet-am-auth-ldap-server2</code>, and
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">DN to Start User Search</span></dt><dd><p>LDAP data is organized hierarchically, a bit like a file system
      on Windows or UNIX. More specific DNs likely result in better search
      performance. When configuring the module for a particular part of the
      organization, you can perhaps start searches from a specific
      organizational unit such as
      <code class="literal">ou=sales,dc=example,dc=com</code>.</p><p>If multiple entries exist with identical search attribute values,
      make this value specific enough to return only one entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal"> iplanet-am-auth-ldap-base-dn</code></p></dd><dt><span class="term">Bind User DN, Bind User Password</span></dt><dd><p>If OpenAM stores attributes in the directory, for example to
      manage account lockout, or if the directory requires that OpenAM
      authenticate in order to read users' attributes, then OpenAM needs the
      DN and password to authenticate to the directory.</p><p>The default is <code class="literal">cn=Directory Manager</code>. Make sure
      that password is correct before you logout. If it is incorrect, you will
      be locked out. If this should occur, you can login with the super user DN,
      which by default is
      <code class="literal">uid=amAdmin,ou=People,<em class="replaceable"><code>OpenAM-deploy-base</code></em></code>,
      where <em class="replaceable"><code>OpenAM-deploy-base</code></em> you set during
      OpenAM configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-bind-dn</code>,
      <code class="literal">iplanet-am-auth-ldap-bind-passwd</code></p></dd><dt><span class="term">Attributes Used to Retrieve User Profile, </span><span class="term">Attributes Used to Search for a User to be Authenticated, </span><span class="term">User Search Filter, </span><span class="term">Search Scope</span></dt><dd><p>LDAP searches for user entries return entries with attribute
      values matching the filter you provide. For example if you search under
      <code class="literal">ou=people,dc=example,dc=com</code> with a filter
      <code class="literal">"(mail=bjensen@example.com)"</code>, then the directory
      returns the entry that has <code class="literal">mail=bjensen@example.com</code>.
      In this example the attribute used to search for a user is
      <code class="literal">mail</code>. Multiple attribute values mean the user can
      authenticate with any one of the values. For example, if you have
      both <code class="literal">uid</code> and <code class="literal">mail</code>, then Barbara
      Jensen can authenticate with either <code class="literal">bjensen</code> or
      <code class="literal">bjensen@example.com</code>.</p><p>Should you require a more complex filter for performance, you
      add that to the User Search Filter text box. For example, if you search
      on <code class="literal">mail</code> and add User Search Filter
      <code class="literal">(objectClass=inetOrgPerson)</code>, then OpenAM uses the
      resulting search filter
      <code class="literal">(&amp;(mail=<em class="replaceable"><code>address</code></em>)(objectClass=inetOrgPerson))</code>,
      where <em class="replaceable"><code>address</code></em> is the mail address provided
      by the user.</p><p>Scope OBJECT means search only the entry specified as the DN to
      Start User Search, whereas ONELEVEL means search only the entries
      that are directly children of that object. SUBTREE means search the
      entry specified and every entry under it.</p><p><span class="command"><strong>ssoadm</strong></span> attributes:
      <code class="literal">iplanet-am-auth-ldap-user-naming-attribute</code>,
      <code class="literal">iplanet-am-auth-ldap-user-search-attributes</code>,
      <code class="literal">iplanet-am-auth-ldap-search-filter</code>, and
      <code class="literal">iplanet-am-auth-ldap-search-scope</code></p></dd><dt><span class="term">SSL/TLS Access to LDAP Server</span></dt><dd><p>If you enable SSL/TLS, OpenAM must be able to trust LDAP certificates, either because the certificates were
      signed by a CA whose certificate is already included in the trust store
      used by the container where OpenAM runs, or because you imported the
      certificates into the trust store.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-enabled</code></p></dd><dt><span class="term">Return User DN to Authenticate</span></dt><dd><p>When enabled, and OpenAM uses the directory service as the user
      store, the module returns the DN rather than the rather than the User ID,
      so the bind for authentication can be completed without a search to
      retrieve the DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-return-user-dn</code></p></dd><dt><span class="term">User Creation Attributes</span></dt><dd><p>
       This list lets you map (external) attribute names
       from the LDAP directory server
       to (internal) attribute names used by OpenAM.
      </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-ldap-user-creation-attr-list</code></p></dd><dt><span class="term">Minimum Password Length</span></dt><dd><p>Specify the minimum acceptable password length.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-min-password-length</code></p></dd><dt><span class="term">LDAP Behera Password Policy Support</span></dt><dd><p>When enabled, support interoperability with servers that implement
      the Internet-Draft, <a class="link" href="http://tools.ietf.org/html/draft-behera-ldap-password-policy-09" target="_top">Password Policy for LDAP Directories</a>.</p><p>Support for this Internet-Draft is limited to the LDAP
      authentication module. Other components of OpenAM, such as the password
      change functionality in the <code class="literal">/idm/EndUser</code> page, do
      not support the Internet-Draft. In general, outside of the LDAP
      authentication module, OpenAM binds to the directory server as an
      administrator, such as Directory Manager. When OpenAM binds to the
      directory server as an administrator rather than as an end user, many
      features of the Internet-Draft password policies do not apply.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-behera-password-policy-enabled</code></p></dd><dt><span class="term">Trust All Server Certificates</span></dt><dd><p>When enabled, blindly trust server certificates, including
      self-signed test certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-ldap-ssl-trust-all</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Interval</span></dt><dd><p>Specifies how often OpenAM should send a heartbeat request to the
      directory server to ensure that the connection does not remain idle. Some
      network administrators configure firewalls and load balancers to drop
      connections that are idle for too long. You can turn this off by setting
      the value to 0 or to a negative number. To set the units for the interval
      use LDAP Connection Heartbeat Time Unit.</p><p>Default: 1</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">LDAP Connection Heartbeat Time Unit</span></dt><dd><p>Specifies the time unit corresponding to LDAP Connection Heartbeat
      Interval.</p><p>Default: minute</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-ldap-heartbeat-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-ldap-auth-level</code></p></dd></dl></div><a class="indexterm" name="d0e4412"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="msisdn-module-conf-hints"></a>2.3.14.&nbsp;Hints for the MSISDN Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-msisdn"></a><a class="indexterm" name="d0e4426"></a><p>The Mobile Station Integrated Services Digital Network (MSISDN)
   authentication module enables non-interactive authentication using a mobile
   subscriber ISDN associated with a terminal such as a mobile phone.
   The module checks the subscriber ISDN against the value found on a user's
   entry in an LDAP directory service.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthMSISDNService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Trusted Gateway IP Address</span></dt><dd><p>Specifies a list of IP addresses of trusted clients that can access
      MSISDN modules. Either restrict the clients allowed to access the MSISDN
      module by adding each IPv4 or IPv6 address here, or leave the list empty to allow
      all clients to access the module. If you specify the value
      <code class="literal">none</code>, no clients are allowed access.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNTrustedGatewayList</code></p></dd><dt><span class="term">MSISDN Number Search Parameter Name</span></dt><dd><p>Specifies a list of parameter names that identify which parameters
      to search in the request header or cookie header for the MSISDN number.
      For example, if you define x-Cookie-Param, AM_NUMBER, and COOKIE-ID,
      the MSISDN authentication service checks those parameters for the
      MSISDN number.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNParameterNameList</code></p></dd><dt><span class="term">LDAP Server and Port</span></dt><dd><p>If you want to use SSL or TLS for security, then scroll down to
      enable SSL/TLS Access to LDAP. Make sure that OpenAM can trust the
      servers' certificates when using this option.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNLdapProviderUrl</code></p></dd><dt><span class="term">LDAP Start Search DN</span></dt><dd><p>Specify the DN of the entry where the search for the user's MSISDN
      number should start.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNBaseDn</code></p></dd><dt><span class="term">Attribute To Use To Search LDAP</span></dt><dd><p>Specify the name of the attribute in the user's profile that
      contains the MSISDN number to search for the user. The default is
      <code class="literal">sunIdentityMSISDNNumber</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserSearchAttribute</code></p></dd><dt><span class="term">LDAP Server Authentication User</span></dt><dd><p>If OpenAM must authenticate to the directory server in order to
      search, then specify the bind DN. The default is
      <code class="literal">cn=amldapuser,ou=DSAME Users,dc=example,dc=com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalUser</code></p></dd><dt><span class="term">LDAP Server Authentication Password</span></dt><dd><p>Specify the password corresponding to the bind DN.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNPrincipalPasswd</code></p></dd><dt><span class="term">SSL/TLS for LDAP Access</span></dt><dd><p>If you choose to enable SSL or TLS, then make sure that
      OpenAM can trust the servers' certificates.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUseSsl</code></p></dd><dt><span class="term">MSISDN Header Search Attribute</span></dt><dd><p>Specify the headers to use for searching the request for the
      MSISDN number.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cookie Header tells OpenAM to search the cookie.</p></li><li class="listitem"><p>Request Header tells OpenAM to search the request header.</p></li><li class="listitem"><p>Request Parameter tells OpenAM to search the request parameters.</p></li></ul></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNHeaderSearch</code></p></dd><dt><span class="term">LDAP Attribute Used to Retrieve User Profile</span></dt><dd><p>Specify the LDAP attribute that is used during a search to return
      the user profile for MSISDN authentication service. The default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNUserNamingAttribute</code></p></dd><dt><span class="term">Return User DN to DataStore</span></dt><dd><p>Enable this option only when the OpenAM directory is the same as
      the directory configured for MSISDN searches. When enabled, this option
      allows the authentication module to return the DN instead of the User ID.
      OpenAM thus does not need to perform an additional search with the user
      ID to find the user's entry.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunAMAuthMSISDNReturnUserDN</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthMSISDNAuthLevel</code></p></dd></dl></div><a class="indexterm" name="d0e4604"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="OATH-module-conf-hints"></a>2.3.15.&nbsp;Hints for the OATH Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-oath"></a><a class="indexterm" name="d0e4617"></a><p>The Open Authentication (OATH) module provides a more secure method for users to 
      access their accounts with the help of a device, such as their mobile phone or 
      Yubikey. Users can log into OpenAM and update their information more securely from
      a one-time password (OTP) displayed on their device. The OATH module includes the
      <a class="link" href="http://www.openauthentication.org/about/" target="_blank">OATH standard protocols</a> (<a class="link" href="http://tools.ietf.org/html/rfc4226" target="_blank">RFC 4226</a> and 
      <a class="link" href="http://tools.ietf.org/html/rfc6238" target="_blank">
      RFC 6238</a>). The OATH module has several enhancements to the
      HMAC One-Time Password (HOTP) Authentication Module, but does not replace the original
      module for those already using HOTP prior to the 10.1.0 release. The OATH module includes 
      HOTP authentication and Time-Based One-Time Password (TOTP) authentication. Both types
      of authentication require an OATH compliant device that can provide the OTP.</p><p> HOTP authentication generates the OTP every time the user requests a new OTP
      on their device. The device tracks the number of times the user requests a new OTP, called
      the counter. The OTP displays for a period of time you designate in the setup, so the 
      user may be further in the counter on their device than on their account. OpenAM will resynchronize
      the counter when the user finally logs in. To accommodate this, you set the number of 
      passwords a user can generate before their device cannot be resynchronized. For example, if 
      you set the number of HOTP Window Size to 50 and someone presses the button 30 on the
      user's device to generate a new OTP, the counter in OpenAM will review the OTPs until
      it reaches the OTP entered by the user. If someone presses the button 51 times,
      you will need to reset the counter to match the number on the device's counter before the
      user can login to OpenAM. HOTP authentication does not check earlier passwords, so if the 
      user attempts to reset the counter on their device, they will not be able to login until
      you reset the counter in OpenAM to match their device.</p><p>TOTP authentication constantly generates a new OTP based on a time interval you specify.
      The device tracks the last two passwords generated and the current password. The Last Login Time
      monitors the time when a user logs in to make sure that user is not logged in several times
      within the present time period. Once a user log into OpenAM, they must wait for the time it 
      takes TOTP to generate the next two passwords and display them. This prevents others from 
      being able to access the users account using the OTP they entered. The user's account can be
      accessed again after the generation of the third new OTP is generated and displayed on their
      device. For this reason, the TOTP Time-Step Interval should not be so long as to
      lock users out, with a recommended time of 30 seconds.</p><p>An authentication chain can be created to generate an OTP from 
      either HOTP or TOTP.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthOATHService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-auth-level</code></p></dd><dt><span class="term">One Time Password Length (in digits)</span></dt><dd><p>Set the length of the OTP between 6 and 9 digits long. The default value is 6 digits.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-password-length</code></p></dd><dt><span class="term">Minimum Secret Key Length</span></dt><dd><p>The minimal number of characters required to set the Secret Key.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-min-secret-key-length</code></p></dd><dt><span class="term">Secret Key Attribute Name</span></dt><dd><p>The name of the attribute where the key will be stored in the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-secret-key-attribute</code></p></dd><dt><span class="term">OATH Algorithm to Use</span></dt><dd><p>Select whether to use HOTP or TOTP. You can create an authentication chain to
      allow for a greater variety of devices. The default value is HOTP.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-algorithm</code></p></dd><dt><span class="term">HOTP Window Size</span></dt><dd><p>The number of requests that the system and the device can be off to resynchronize 
      the password. If a user passes this number of requests before logging 
      into the system, the password will not work. The default value is 100.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-hotp-window-size</code></p></dd><dt><span class="term">Counter Attribute Name</span></dt><dd><p>The name of the HOTP attribute where the counter will be stored in the user profile.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-hotp-counter-attribute</code></p></dd><dt><span class="term">Add Checksum Digit</span></dt><dd><p>Adds a checksum digit at the end of the HOTP password to verify it was entered correctly. 
      The default value is No.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-add-checksum</code></p></dd><dt><span class="term">Truncation Offset</span></dt><dd><p>Advanced feature that is device specific. Any value below 0 or above 15 will turn off 
      the functionality. The default value is -1. If not required by the device, leave at the default 
      setting.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-truncation-offset</code></p></dd><dt><span class="term">TOTP Time Step Interval</span></dt><dd><p>Defines how long the password will appear on the user's device (in seconds).
      We recommend keeping this number low, for example 30 seconds, because once a user
      logs out, they will not be able to login again until two full time cycles have passed.
      The default value is 30 seconds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-size-of-time-step</code></p></dd><dt><span class="term">TOTP Time Steps</span></dt><dd><p>The number of requests that the system and the device can be off to resynchronize 
      the password. If a user passes this number of requests before logging into the system,
      the password will not work. The default value is 2.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-steps-in-window</code></p></dd><dt><span class="term">Last Login Time Attribute</span></dt><dd><p>The name of the attribute where both HOTP and TOTP authentication will store information
      on when a person last logged in.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oath-last-login-time-attribute-name</code></p></dd></dl></div><p>If you plan to use Yubikey for your OATH module, you will need to take some
    time to set it up. Go to the <a class="link" href="http://www.yubico.com/products/services-software/personalization-tools/use/" target="_blank">
    YubiKey website</a> to configure your YubiKey device. If you do not have a
    YubiKey device, you can purchase them from this page as well.</p><p>Select the appropriate instructions, keeping in mind that the cross-platform
    personalization tool is recommended unless you have specific need for one of the
    other types. You have the greatest selection of platforms for this choice. Each 
    device will need to be setup before use.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="oauth2-module-conf-hints"></a>2.3.16.&nbsp;Hints for the OAuth 2.0/OpenID Connect Authentication Module</h3></div></div></div><a class="indexterm" name="idx-auth-hints-oauth2-oidc"></a><a class="indexterm" name="d0e4803"></a><p>The OAuth 2.0 / OpenID Connect authentication module lets OpenAM
    authenticate clients of OAuth resource servers. References in this section
    are to RFC 6749, <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank">The OAuth
   2.0 Authorization Framework</a>.</p><div class="tip"><h3 class="title">Tip</h3><p>OpenAM provides a wizard for configuring common OAuth 2.0 /
    OpenID Connect authentication providers such as Facebook, Google and
    Microsoft. For more information, see
    <a class="xref" href="chap-auth-services.html#social-authn-wizard-pre-populated" title="2.2.1.&nbsp;Configuring Pre-Populated Social Authentication Providers">Section&nbsp;2.2.1, &#8220;Configuring Pre-Populated Social Authentication Providers&#8221;</a>.</p></div><p>
    If the module is configured to create an account if none exists,
    then you must provide valid SMTP settings.
    As part of account creation, the OAuth 2.0 / OpenID Connect client authentication module
    sends the resource owner an email with an account activation code.
    To send email, OpenAM uses the SMTP settings from the configuration
    for the OAuth 2.0 / OpenID Connect authentication module.
   </p><a class="indexterm" name="d0e4818"></a><a class="indexterm" name="d0e4823"></a><div class="note"><h3 class="title">Note</h3><p>The default settings are for Facebook.</p></div><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthOAuthService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Client ID</span></dt><dd><p>OAuth <code class="literal">client_id</code> as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.2" target="_blank">section 2.2 of RFC 6749</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-id</code></p></dd><dt><span class="term">Client Secret</span></dt><dd><p>OAuth <code class="literal">client_secret</code> as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.3" target="_blank">section 2.3 of RFC 6749</a>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-client-secret</code></p></dd><dt><span class="term">Authentication Endpoint URL</span></dt><dd><p>URL to the end point handling OAuth authentication as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.1" target="_blank">section 3.1 of RFC 6749</a>. The default value is
      <code class="literal">https://www.facebook.com/dialog/oauth</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-service</code></p></dd><dt><span class="term">Access Token Endpoint URL</span></dt><dd><p>URL to the end point handling access tokens as described in
      <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.2" target="_blank">section 3.2 of RFC 6749</a>. The default value is
      <code class="literal">https://graph.facebook.com/oauth/access_token</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-token-service</code></p></dd><dt><span class="term">User Profile Service URL</span></dt><dd><p>User profile URL that returns profile information in JSON
      format. The default value is
      <code class="literal">https://graph.facebook.com/me</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-user-profile-service</code></p></dd><dt><span class="term">Scope</span></dt><dd><p>
       According to
       <a class="link" href="http://tools.ietf.org/html/rfc6749" target="_blank"><em class="citetitle">The OAuth 2.0 Authorization Framework</em></a>,
       a space-separated list of user profile attributes
       that the client application requires.
       The list depends on the permissions
       that the resource owner, such as the end user,
       grants to the client application.
      </p><p>
       Some authorization servers use non-standard separators for scopes.
       Facebook, for example, takes a comma-separated list.
      </p><p>
       Default: <code class="literal">email,read_stream</code> (Facebook example)
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-oauth-scope</code>
      </p></dd><dt><span class="term">Proxy URL</span></dt><dd><p>URL to the <code class="filename">/oauth2c/OAuthProxy.jsp</code> file,
      part of OpenAM.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-sso-proxy-url</code></p></dd><dt><span class="term">Account Mapper</span></dt><dd><p>Class implementing account mapping. The default value is
      <code class="literal">org.forgerock.openam.authentication.modules.common.mapping.AttributeMapper</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper</code></p></dd><dt><span class="term">Account Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes used to find the
      local profile of the authenticated user, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.
      Default values <code class="literal">email=mail</code> and <code class="literal"> id=facebook-id</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-account-mapper-configuration</code></p></dd><dt><span class="term">Account Provider</span></dt><dd><p>An account provider.
       Default:
      <code class="literal">org.forgerock.openam.authentication.modules.common.mapping.AccountProvider</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">org-forgerock-auth-oauth-account-provider</code></p></dd><dt><span class="term">Attribute Mapper</span></dt><dd><p>List of fully qualified class names for implementations that map
       attributes from the OAuth 2.0 authorization server or OpenID Connect
       provider to OpenAM profile attributes.
       Default:
      <code class="literal">org.forgerock.openam.authentication.modules.common.mapping.JsonAttributeMapper</code></p><p>Provided implementations are:</p><table border="0" summary="Simple list" class="simplelist"><tr><td><code class="literal">org.forgerock.openam.authentication.modules.common.mapping.JsonAttributeMapper</code></td></tr><tr><td><code class="literal">org.forgerock.openam.authentication.modules.oidc.JwtAttributeMapper</code>
        (can only be used when using the <code class="literal">openid</code> scope)</td></tr></table><div class="tip"><h3 class="title">Tip</h3><p>You can provide string constructor parameters by appending
       pipe (<code class="literal">|</code>) separated values.</p><p>For example, the
       <code class="literal">org.forgerock.openam.authentication.modules.oidc.JwtAttributeMapper</code>
       class can take two constructor parameters: a comma-separated list of
       attributes and a prefix to apply to their values. Specify these as
       follows:</p><p><code class="literal">org.forgerock.openam.authentication.modules.oidc.JwtAttributeMapper|uid,employeeNumber|myPrefix-</code>
      </p></div><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper</code></p></dd><dt><span class="term">Attribute Mapper Configuration</span></dt><dd><p>Map of OAuth Provider user account attributes to local user profile
      attributes, with values in the form
      <code class="literal"><em class="replaceable"><code>provider-attr</code></em>=<em class="replaceable"><code>local-attr</code></em></code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-attribute-mapper-configuration</code></p></dd><dt><span class="term">Save attributes in the session</span></dt><dd><p>When enabled, add the mapped attributes to the session saved. The
      default mode is <code class="literal">Enabled</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-save-attributes-to-session-flag</code></p></dd><dt><span class="term">Email attribute in OAuth2 Response</span></dt><dd><p>Specifies the attribute identifying email address in the response
      from the profile service in the OAuth provider. This setting is used to
      send an email address with an activation code for accounts created
      dynamically.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-mail-attribute</code></p></dd><dt><span class="term">Create account if it does not exist</span></dt><dd><p>When enabled, if the user profile does not exist, optionally
      retrieve a password and activation code from the user, and then create
      the profile. The default mode is <code class="literal">Enabled</code>.</p><p>When the OAuth 2.0 / OpenID Connect client is configured to create new accounts,
      the SMTP settings must also be valid. As part of account creation,
      the OAuth 2.0 / OpenID Connect client authentication module sends the resource owner
      an email with an account activation code. To send the mail, OpenAM
      uses the SMTP settings you provide here in the OAuth 2.0 / OpenID Connect client
      configuration.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-createaccount-flag</code></p></dd><dt><span class="term">Prompt for password setting and activation code</span></dt><dd><p>When enabled, the user sets a password, receives an activation code
      by email. The user must correctly set both in order for the account to
      be created.  The default mode is <code class="literal">Enabled</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-prompt-password-flag</code></p></dd><dt><span class="term">Map to anonymous user</span></dt><dd><p>When enabled, map the OAuth authenticated user to the anonymous
      user you specify. No account is created, even if Create account if it
      does not exist is enabled.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-map-to-anonymous-flag</code></p></dd><dt><span class="term">Anonymous User</span></dt><dd><p>Specifies an anonymous user that exists in the current realm. The
      default is <code class="literal">anonymous</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-anonymous-user</code></p></dd><dt><span class="term">OAuth 2.0 Provider logout service</span></dt><dd><p>Specifies the optional URL of the OAuth Provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-service-url</code></p></dd><dt><span class="term">Logout options</span></dt><dd><p>Specifies whether not to log the user out without prompting from
      the OAuth Provider on logout, to log the user out without prompting, or
      to prompt the user regarding whether to logout from the OAuth
      provider.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-logout-behaviour</code></p></dd><dt><span class="term">Mail Server Gateway implementation class</span></dt><dd><p>Class to interact with the mail server. Default:
      <code class="literal">org.forgerock. openam.authentication.modules.oauth2.DefaultEmailGatewayImpl</code></p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-email-gwy-impl</code></p></dd><dt><span class="term">SMTP host</span></dt><dd><p>Host name of the mail server. The default is
      <code class="literal">localhost</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-hostname</code></p></dd><dt><span class="term">SMTP port</span></dt><dd><p>SMTP port number for the mail server. The default value is
      <code class="literal">25</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-port</code></p></dd><dt><span class="term">SMTP User Name</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the user name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-username</code></p></dd><dt><span class="term">SMTP User Password</span></dt><dd><p>If the mail server requires authentication to send mail, specifies
      the password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-password</code></p></dd><dt><span class="term">SMTP SSL Enabled</span></dt><dd><p>When enabled, connect to the mail server over SSL. OpenAM must be
      able to trust the SMTP server certificate.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-ssl_enabled</code></p></dd><dt><span class="term">SMTP From address</span></dt><dd><p>Specifies the message sender address, such as
      <code class="literal">no-reply@example.com</code>. The default value is
      <code class="literal">info@forgerock.com</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">org-forgerock-auth-oauth-smtp-email-from</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-oauth-auth-level</code></p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>
     Old uses of <code class="literal">DefaultAccountMapper</code> are automatically
     upgraded to the equivalent default implementations.
    </p></div><p>The following tables show endpoint URLs for OpenAM when <a href="../../admin-guide/index/chap-oauth2.html" class="link">configured as an
    OAuth 2.0 provider</a>.
    The default endpoints are for Facebook as the OAuth 2.0 provider.</p><p>In addition to the endpoint URLs you can set other fields, like scope
    and attribute mapping, depending on the provider you use.</p><div class="table"><a name="oauth2-openam"></a><div class="table-title">Table&nbsp;2.1.&nbsp;Endpoint URLs for OpenAM</div><div class="table-contents"><table summary="Endpoint URLs for OpenAM" width="100%" border="0"><colgroup><col width="50%"><col width="50%"></colgroup><thead><tr><th>OpenAM Field</th><th>Details</th></tr></thead><tbody><tr><td>Authorization Endpoint URL</td><td>
         <p><code class="literal">/oauth2/authorize</code> under the deployment
          URL.<a href="#ftn.oauth2-realms-footnote" class="footnote" name="oauth2-realms-footnote"><sup class="footnote">[a]</sup></a>
         </p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize</code>.</p>
       </td></tr><tr><td>Access Token Endpoint URL</td><td>
         <p><code class="literal">/oauth2/access_token</code> under the deployment
          URL.<a href="chap-auth-services.html#ftn.oauth2-realms-footnote" class="footnoteref"><sup class="footnoteref">[a]</sup></a></p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/access_token</code>.</p></td></tr><tr><td>User Profile Service URL</td><td>
         <p><code class="literal">/oauth2/tokeninfo</code> under the deployment URL.</p>
         <p>Example: <code class="literal">https://openam.example.com:8443/openam/oauth2/tokeninfo</code>.</p></td></tr></tbody><tbody class="footnotes"><tr><td colspan="2"><div id="ftn.oauth2-realms-footnote" class="footnote"><p><a href="#oauth2-realms-footnote" class="para"><sup class="para">[a] </sup></a>This OpenAM endpoint can take additional parameters. In
           particular you must specify the realm if the OpenAM OAuth 2.0
           provider is configured for a subrealm rather than / (Top-Level
           Realm).</p><p>For example, if the OAuth 2.0 provider is configured for the
           realm <code class="literal">/customers</code>, then the authentication endpoint
           URL is as follows:
           <code class="literal">https://openam.example.com:8443/openam/oauth2/authorize?realm=/customers</code></p><p>The <code class="literal">/oauth2/authorize</code> endpoint can also take
           <code class="literal">module</code> and <code class="literal">service</code> parameters.
           Use either as described in <a href="../../admin-guide/index/chap-auth-services.html#authn-from-browser" class="link"><em class="citetitle">Authenticating To OpenAM</em></a>, where
           <code class="literal">module</code> specifies the authentication module
           instance to use or <code class="literal">service</code> specifies the
           authentication chain to use when authenticating the resource
           owner.</p></div></td></tr></tbody></table></div></div><br class="table-break"><a class="indexterm" name="d0e5401"></a></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="oidc-module-conf-hints"></a>2.3.17.&nbsp;Hints for the OpenID Connect id_token bearer Module</h3></div></div></div><a class="indexterm" name="d0e5409"></a><a class="indexterm" name="d0e5414"></a><p>
    The OpenID Connect id_token bearer module lets OpenAM rely on
    an <a class="link" href="http://openid.net/connect/" target="_blank">OpenID Connect 1.0</a> provider's ID Token to authenticate an end
    user.</p><div class="note"><h3 class="title">Note</h3><p>This module validates an OpenID Connect ID token and matches
    it with a user profile. You should not use this module if you want OpenAM
    to act as a client in the full OpenID Connect authentication flow.</p><p>To provision OpenAM as an OpenID Connect client, you should instead configure
    an OAuth 2.0 / OpenID Connect module. OpenAM provides a wizard to configure
     an OAuth 2.0 / OpenID Connect module that will
    authenticate against an OpenID Connect 1.0 provider. For more information, see
    <a class="xref" href="chap-auth-services.html#social-authn-wizard-custom" title="2.2.2.&nbsp;Configuring Custom Social Authentication Providers">Section&nbsp;2.2.2, &#8220;Configuring Custom Social Authentication Providers&#8221;</a>.</p></div><p>The OpenID Connect id_token bearer module expects an OpenID Connect
    ID Token in an HTTP request header.
    It validates the ID Token, and if successful,
    looks up the OpenAM user profile corresponding to the end user
    for whom the ID Token was issued.
    Assuming the ID Token is valid and the profile is found,
    the module authenticates the OpenAM user.
   </p><p>
    You configure the OpenID Connect id_token bearer module
    to specify how OpenAM gets the information needed to validate the ID Token,
    which request header contains the ID Token,
    the issuer identifier for the provider who issued the ID Token,
    and how to map the ID Token claims to an OpenAM user profile.
   </p><div class="note"><h3 class="title">Note</h3><p>The default settings are for Google's provider.</p></div><a class="indexterm" name="d0e5436"></a><a class="indexterm" name="d0e5441"></a><p>
    <span class="command"><strong>ssoadm</strong></span> service name:
    <code class="literal">amAuthOpenIdConnect</code>
   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Configuration type</span></dt><dd><p>
       In order to validate the ID Token from the OpenID Connect provider,
       the module needs either a URL to get the public keys for the provider,
       or the symmetric key for an ID Token signed with a HMAC-based algorithm.
      </p><div class="variablelist"><p>
        By default, the configuration type is
        <code class="literal">.well-known/openid-configuration_url</code>.
        This means the module should retrieve the keys based on
        information in the OpenID Connect Provider Configuration Document.
       </p><p>
        You can instead configure the authentication module
        to validate the ID Token signature
        with the client secret key you provide,
        or to validate the ID token with the keys retrieved
        from the URL to the OpenID Connect provider's JSON Web Key Set.
       </p><dl class="variablelist"><dt><span class="term"><code class="literal">.well-known/openid-configuration_url</code> (Default)</span></dt><dd><p>
          Retrieve the provider keys based on the information provided
          in the OpenID Connect Provider Configuration Document.
         </p><p>
          Specify the URL to the document as the discovery URL.
         </p></dd><dt><span class="term"><code class="literal">client_secret</code></span></dt><dd><p>
          Use the client secret that you specify as the key to validate
          the ID Token signature according to the HMAC,
          using the client secret to the decrypt the hash
          and then checking that the hash matches the hash of the ID Token JWT.
         </p></dd><dt><span class="term"><code class="literal">jwk_url</code></span></dt><dd><p>
          Retrieve the provider's JSON Web Key Set at the URL that you specify.
         </p></dd></dl></div><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-crypto-context-type</code>
      </p></dd><dt><span class="term">Discovery url, jwk url, or client_secret</span></dt><dd><p>
       Edit this field depending on the Configuration type you specified.
      </p><p>
       Default: <code class="literal">https://accounts.google.com/.well-known/openid-configuration</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-crypto-context-value</code>
      </p></dd><dt><span class="term">Name of header referencing the ID Token</span></dt><dd><p>
       The module looks for the ID Token in this HTTP request header.
      </p><p>
       Default: <code class="literal">oidc_id_token</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-header-name</code>
      </p></dd><dt><span class="term">Name of OpenID Connect ID Token Issuer</span></dt><dd><p>
       This corresponds to the expected issue identifier value
       in the <code class="literal">iss</code> of the ID Token.
      </p><p>
       Default: <code class="literal">accounts.google.com</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-issuer-name</code>
      </p></dd><dt><span class="term">Mapping of local LDAP attributes to jwt attributes</span></dt><dd><p>
       This setting maps local user profile attributes
       to OpenID Connect ID Token claims,
       allowing the module to retrieve the user profile based on the ID Token.
      </p><p>
       In OpenID Connect, an ID Token is represented as a JSON Web Token (JWT).
       The
       <a class="link" href="http://openid.net/specs/openid-connect-core-1_0.html#IDToken" target="_blank">ID Token</a> section of the OpenID Connect Core 1.0 specification
       defines a number of claims included in the ID Token for all flows.
       Additional claims depend on the scopes requested of the OpenID Connect
       provider.
      </p><p>
       For each item in the map, the key is the ID Token field name and the
       value is the local user profile attribute name.
      </p><p>
       Default: <code class="literal">mail=email</code>, <code class="literal">uid=sub</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-local-to-jwt-attribute-mappings</code>
      </p></dd><dt><span class="term">Principal Mapper class</span></dt><dd><p>
       The principal mapper matches the OpenID Connect end user
       with an OpenAM account.
       The default principal mapper uses
       the mapping of local attributes to ID Token attributes
       to find a user profile.
      </p><p>
       Default: <code class="literal">org.forgerock.openam.authentication.common.mapping.AttributeMapper</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-principal-mapper-class</code>
      </p></dd><dt><span class="term">Principal Account Provider class</span></dt><dd><p>
       The principal account provider provides the means to search for and
       create OpenID Connect users given a set of attributes.
      </p><p>
       Default: <code class="literal">org.forgerock.openam.authentication.common.mapping.AccountProvider</code>
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">openam-auth-openidconnect-account-provider-class</code>
      </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="persistent-cookie"></a>2.3.18.&nbsp;Hints for the Persistent Cookie Module</h3></div></div></div><a class="indexterm" name="d0e5629"></a><p>The Persistent Cookie module supports the configuration of cookie lifetimes,
    based on requests and a maximum time. It is the preferred method for creating
    a persistent cookie. If you choose this method, be aware that it does not
    interact with the persistent cookie options associated with the Core
    Authentication module.
    Note that, by default, the persistent cookie is called <code class="literal">session-jwt</code>.
   </p><div class="important"><h3 class="title">Important</h3><p>
     If Secure Cookie is enabled (Configuration &gt; Servers and Sites &gt;
     Servers &gt; <em class="replaceable"><code>URL of your server</code></em> &gt; Security
     &gt; Cookies), the Persistent Cookie Module only works over HTTPS.
    </p></div><p><span class="command"><strong>ssoadm</strong></span> service name:
    <code class="literal">iPlanetAMAuthPersistentCookieService</code></p><p>Before you begin, make sure a public key alias is defined in OpenAM.
    The Persistent Cookie module encrypts a JSON Web Token (JWT) using a public key
    from the OpenAM keystore. The keystore must be configured under
    Authentication &gt; All Core Settings &gt; Security. If the keystore changes
    and the default <code class="literal">test</code> key is no longer present, the public
    key alias must be updated to reflect the change, otherwise the module will
    fail. Similarly, in multi-instance deployments, the keypair must be available
    on all OpenAM instances.</p><p>To configure the Persistent Cookie module globally in the console,
    navigate to Configuration &gt; Authentication &gt; Persistent Cookie.
    In the window that appears you should see the following attributes:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Idle Timeout</span></dt><dd><p>Specify the maximum idle time between requests, in hours. If
                  that time is exceeded, the cookie is no longer valid.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                  <code class="literal">openam-auth-persistent-cookie-idle-time</code></p></dd><dt><span class="term">Max Life</span></dt><dd><p>Specify the maximum life of the cookie in hours.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
                  <code class="literal">openam-auth-persistent-cookie-max-life</code></p></dd><dt><span class="term">Enforce Client IP</span></dt><dd><p>
                   When enabled, enforces that the persistent cookie
                   can only be used from the same client IP
                   to which the cookie was issued.
                  </p><p>
                   <span class="command"><strong>ssoadm</strong></span> attribute:
                   <code class="literal">openam-auth-persistent-cookie-enforce-ip</code>
                  </p></dd><dt><span class="term">Use secure cookie</span></dt><dd><p>
             When enabled, adds the "Secure" attribute to the persistent cookie.
            </p><p>
             <span class="command"><strong>ssoadm</strong></span> attribute:
             <code class="literal">openam-auth-persistent-cookie-secure-cookie</code>
            </p></dd><dt><span class="term">Use HTTP only cookie</span></dt><dd><p>
             When enabled, adds the "HttpOnly" attribute to the persistent
             cookie.
            </p><p>
             <span class="command"><strong>ssoadm</strong></span> attribute:
             <code class="literal">openam-auth-persistent-cookie-http-only-cookie</code>
            </p></dd></dl></div><p>
       When the Persistent Cookie module enforces the client IP address,
       and OpenAM lies behind a load balancer or proxy layer,
       configure the load balancer or proxy to send the address
       by using the <code class="literal">X-Forwarded-For</code> header,
       and configure OpenAM to consume and forward the header as necessary.
       For details, see the <em class="citetitle">Installation Guide</em> section,
       <a href="../../install-guide/index/chap-install-multiple.html#handle-request-headers" class="link"><em class="citetitle">Handling HTTP Request Headers</em></a>.
      </p><p>The Persistent Cookie module belongs with a second module in an authentication chain. To see how
      this works, navigate to Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; New.
      Enter a name for the chain and add modules as shown in the figure. The following example shows how a
      Persistent Cookie module is sufficient; if that cookie does not yet exist, authentication in this case
      relies on a data store module such as LDAP.</p><div class="mediaobject" align="center"><a name="figure-persistent-cookie-mod"></a><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/persistent-cookie-mod.png" align="middle" height="360" alt="Including the Persistent Cookie module in an authentication chain"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-persistent-cookie-mod.html" target="longdesc">D</a>]</span></div></div><p>
       Scroll down in the properties page for the chain.
       Set the Post Authentication Processing Class to
       <code class="literal">org.forgerock.openam.authentication.modules.persistentcookie.PersistentCookieAuthModule</code>
       as shown in the following figure:</p><div class="mediaobject" align="center"><a name="figure-persistent-cookie-class"></a><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/persistent-cookie-class.png" align="middle" height="360" alt="Including the Persistent Cookie attribute in the post processing class"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-persistent-cookie-class.html" target="longdesc">D</a>]</span></div></div><p>You should now be able to authenticate automatically, as long as the cookie exists
      for the associated domain.</p><div class="note"><h3 class="title">Note</h3><p>Unlike the legacy Core Authentication module, the Persistent Cookie module does not
      support the iPSPCookie option described in <a class="xref" href="chap-auth-services.html#authn-from-browser" title="2.6.&nbsp;Authenticating To OpenAM">Section&nbsp;2.6, &#8220;Authenticating To OpenAM&#8221;</a></p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="radius-module-conf-hints"></a>2.3.19.&nbsp;Hints for the RADIUS Authentication Module</h3></div></div></div><a class="indexterm" name="d0e5770"></a><a class="indexterm" name="d0e5775"></a><p>The Remote Authentication Dial-In User Service (RADIUS) module lets
   OpenAM authenticate users against RADIUS servers.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthRadiusService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Primary Radius Servers, Secondary Radius Servers</span></dt><dd><p>Specify the IP address or fully qualified domain name of the
      primary RADIUS server. The default is <code class="literal">127.0.0.1</code>
      (localhost loopback).</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">primary is iplanet-am-auth-radius-server1</code>;
      secondary is <code class="literal">iplanet-am-auth-radius-server2</code></p></dd><dt><span class="term">Shared Secret</span></dt><dd><p>Specify the shared secret for RADIUS authentication. The shared
      secret should be as secure as a well-chosen password.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-secret</code></p></dd><dt><span class="term">Port Number</span></dt><dd><p>Specify the RADIUS server port. Default is 1645.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-server-port</code></p></dd><dt><span class="term">Timeout</span></dt><dd><p>Specify how many seconds to wait for the RADIUS server to respond.
      The default value is 3 seconds.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-radius-timeout</code></p></dd><dt><span class="term">Health check interval</span></dt><dd><p>Used for failover. Specify how often OpenAM performs a health check
      on a previously unavailable RADIUS server by sending an invalid
      authentication request. Default: 5 minutes</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">openam-auth-radius-healthcheck-interval</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-radius-auth-level</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sae-module-conf-hints"></a>2.3.20.&nbsp;Hints for the SAE Authentication Module</h3></div></div></div><a class="indexterm" name="d0e5868"></a><a class="indexterm" name="d0e5873"></a><p>The Secure Attribute Exchange (SAE) module lets OpenAM authenticate
   a user who has already authenticated with an entity that can vouch for
   the user to OpenAM, so that OpenAM creates a session for the user.
   This module is useful in virtual federation, where an existing entity
   instructs the local OpenAM instance to use federation protocols to transfer
   authentication and attribute information to a partner application.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
   <code class="literal">sunAMAuthSAEService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">sunAMAuthSAEAuthLevel</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="scripted-module-conf-hints"></a>2.3.21.&nbsp;Hints for Scripted Authentication Modules</h3></div></div></div><a class="indexterm" name="d0e5900"></a><a class="indexterm" name="d0e5905"></a><p>
    This section covers what to configure for scripted authentication modules.
   </p><p>
    A scripted authentication module runs scripts to authenticate a user.
    The configuration for the module can hold two scripts,
    one to include in the web page run on the client user-agent,
    another to run in OpenAM on the server side.
   </p><p>
    The client-side script is intended to retrieve data from the user-agent.
    This must be in a language the user-agent, such as JavaScript,
    even if the server-side script is written in Groovy.
   </p><p>
    The server-side script is intended to handle authentication.
   </p><p>
    Scripts are stored not as files, but instead as OpenAM configuration data.
    This makes it easy to update a script on one OpenAM server,
    and then to allow replication to copy it to other servers.
    You can manage the scripts through OpenAM console,
    where you can write them in the text boxes provided
    or upload them from files.
   </p><p>
    You can also upload scripts using the <span class="command"><strong>ssoadm</strong></span> command.
    To perform the command-line equivalent of the Upload button in the console,
    use the <span class="command"><strong>ssoadm</strong></span> attributes,
    <code class="literal">iplanet-am-auth-scripted-client-script-file</code>
    or <code class="literal">iplanet-am-auth-scripted-server-script-file</code>.
    The following example shows how to create a scripted authentication module,
    sets up a basic configuration with scripts as strings in the configuration,
    and then uploads a server-side script file.
   </p><pre class="brush: shell;">
#
# Create a scripted authentication module.
#
ssoadm \
 create-auth-instance \
 --adminid amadmin \
 --password-file /tmp/pwd.txt \
 --authtype Scripted \
 --realm / \
 --name ScriptedModule

#
# Add basic configuration, including minimal client and server-side scripts.
#
ssoadm \
 update-auth-instance \
 --adminid amadmin \
 --password-file /tmp/pwd.txt \
 --authtype Scripted \
 --realm / \
 --name ScriptedModule \
 --attributevalues \
    iplanet-am-auth-scripted-auth-level=0 \
    iplanet-am-auth-scripted-client-script-enabled=false \
    iplanet-am-auth-scripted-script-type='JavaScript' \
    iplanet-am-auth-scripted-client-script='alert("Hello");' \
    iplanet-am-auth-scripted-server-script='authState=SUCCESS;'

#
# Upload a server-side script from a script file, /tmp/server-side.js.
#
ssoadm \
 update-auth-instance \
 --adminid amadmin \
 --password-file /tmp/pwd.txt \
 --authtype Scripted \
 --realm / \
 --name ScriptedModule \
 --attributevalues \
    iplanet-am-auth-scripted-server-script-file=/tmp/server-side.js
   </pre><p>
    If you have multiple separate sets of client-side and server-side scripts,
    then configure multiple modules, one for each set of scripts.
   </p><p>
    For details on writing authentication module scripts, see the
    <em class="citetitle">Developer Guide</em> chapter,
    <a href="../../dev-guide/index/chap-scripted-auth-module.html" class="link"><em class="citetitle">Scripting Authentication</em></a>.
   </p><p>
    <span class="command"><strong>ssoadm</strong></span> service name:
    <code class="literal">iPlanetAMAuthScriptedService</code>
   </p><div class="variablelist"><p>
     Use the following settings at the realm level
     when configuring an individual scripted authentication module,
     in OpenAM Console under Access Control &gt;
     <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; Module Instances.
    </p><dl class="variablelist"><dt><span class="term">Server-Side Script Language</span></dt><dd><p>
       The language of the server-side script.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-script-type</code>
      </p></dd><dt><span class="term">Client Side Script Enabled</span></dt><dd><p>
       When selected, include the client-side script in the login page
       to be executed on the user-agent prior to the server-side script.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-client-script-enabled</code>
      </p></dd><dt><span class="term">Client Side Script</span></dt><dd><p>
       The script to include in the login page.
       This script is run on the user-agent prior to the server-side script.
      </p><p>
       This script must be written in a language the user-agent can interpret,
       such as JavaScript,
       even if the server-side script is written in Groovy.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-client-script</code>
      </p><p>
       When uploading the script from a file, use the
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-client-script-file</code>
      </p></dd><dt><span class="term">Server Side Script</span></dt><dd><p>
       The script to run in OpenAM after the client-side script has completed.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-server-script</code>
      </p><p>
       When uploading the script from a file, use the
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-server-script-file</code>
      </p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>
       Sets the authentication level used to indicate the level of security
       associated with the scripted authentication module.
      </p><p>
       The value can range from 0 to any positive integer.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-auth-level</code>
      </p></dd></dl></div><div class="variablelist"><p>
     Use the following global configuration settings
     for all scripted authentication modules,
     in OpenAM Console under Configuration &gt; Authentication &gt; Scripted Module.
    </p><dl class="variablelist"><dt><span class="term">Server Side Script Timeout</span></dt><dd><p>
       Sets the maximum execution time to run a single server-side script,
       in seconds.
      </p><p>
       Default: 0 (meaning no timeout)
      </p><p>
       If your server-side scripts send external HTTP requests,
       consider setting an appropriate value for this timeout.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-server-timeout</code>
      </p></dd><dt><span class="term">Core thread pool size</span></dt><dd><p>
       Core size for the pool of threads dedicated to running server-side scripts.
      </p><p>
       Default: 10
      </p><p>
       This setting is not hot-swappable.
       Instead, you must restart OpenAM or the container in which it runs
       for the changes to take effect.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-core-threads</code>
      </p></dd><dt><span class="term">Maximum thread pool size</span></dt><dd><p>
       Maximum size for the pool of threads dedicated to running server-side scripts.
      </p><p>
       Default: 50
      </p><p>
       This setting is not hot-swappable.
       Instead, you must restart OpenAM or the container in which it runs
       for the changes to take effect.
      </p><p>
       <span class="command"><strong>ssoadm</strong></span> attribute:
       <code class="literal">iplanet-am-auth-scripted-core-threads</code>
      </p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h3 class="title"><a name="securid-module-conf-hints"></a>2.3.22.&nbsp;Hints For the SecurID Authentication Module</h3></div></div></div><p>
  The SecurID module lets OpenAM authenticate users
  with RSA Authentication Manager software and RSA SecurID authenticators.
 </p><div class="orderedlist"><p>
   In order to use the SecurID authentication module,
   you must first build an OpenAM war file
   that includes the supporting library,
   <code class="filename">authapi-2005-08-12.jar</code>.
  </p><ol class="orderedlist" type="1"><li class="listitem"><p>
    Unpack the OpenAM .war file.
   </p><div class="screen"><pre>
$ <strong>mkdir /tmp/openam</strong>
$ <strong>cd /tmp/openam/</strong>
$ <strong>jar -xf ~/Downloads/openam/OpenAM-12.0.0.war</strong>
   </pre></div></li><li class="listitem"><p>
    Copy <code class="filename">authapi-2005-08-12.jar</code>
    into the <code class="filename">WEB-INF/lib</code> directory.
   </p><div class="screen"><pre>
$ <strong>cp /path/to/authapi-2005-08-12.jar WEB-INF/lib/</strong>
   </pre></div></li><li class="listitem"><p>
    Pack up the OpenAM .war file to deploy.
   </p><div class="screen"><pre>
$ <strong>jar -cf ../openam.war *</strong>
   </pre></div></li><li class="listitem"><p>Deploy the new .war file.</p><p>
    In this example the .war file to deploy is
    <code class="filename">/tmp/openam.war</code>.
   </p></li></ol></div><a class="indexterm" name="d0e6162"></a><p>
  <span class="command"><strong>ssoadm</strong></span> service name:
  <code class="literal">iPlanetAMAuthSecurIDService</code>
 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">ACE/Server Configuration Path</span></dt><dd><p>
     Specify the directory where
     the SecurID ACE/Server <code class="filename">sdconf.rec</code> file is located,
     which by default is expected under the OpenAM configuration directory,
     such as <code class="filename">$HOME/openam/openam/auth/ace/data</code>.
     The directory must exist before OpenAM can use SecurID authentication.
    </p><p>
     <span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-securid-server-config-path</code>
    </p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>
     Sets the authentication level used
     to indicate the level of security associated with the module.
     The value can range from 0 to any positive integer.
    </p><p>
     <span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-securid-auth-level</code>
    </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="desktop-module-conf-hints"></a>2.3.23.&nbsp;Hints for the Windows Desktop SSO Authentication Module</h3></div></div></div><a class="indexterm" name="d0e6213"></a><a class="indexterm" name="d0e6218"></a><a class="indexterm" name="d0e6221"></a><p>
    The Windows Desktop SSO module uses Kerberos authentication. The user
    presents a Kerberos token to OpenAM through the Simple and Protected
    GSS-API Negotiation Mechanism (SPNEGO) protocol. The Windows Desktop SSO
    authentication module enables desktop single sign on such that a user who
    has already authenticated with a Kerberos Key Distribution Center can
    authenticate to OpenAM without having to provide the login information
    again. Users might need to set up Integrated Windows Authentication in
    Internet Explorer to benefit from single sign on when logged on to
    a Windows desktop.
   </p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthWindowsDesktopSSOService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Service Principal</span></dt><dd><p>Specify the Kerberos principal for authentication in the following
      format.</p><pre class="literallayout">HTTP/<em class="replaceable"><code>host</code></em>.<em class="replaceable"><code>domain</code></em>@<em class="replaceable"><code>dc-domain-name</code></em></pre><p>Here, <em class="replaceable"><code>host</code></em> and
      <em class="replaceable"><code>domain</code></em> correspond to the host and domain names
      of the OpenAM instance, and <em class="replaceable"><code>dc-domain-name</code></em>
      is the domain name of the Windows Kerberos domain controller server.
      The <em class="replaceable"><code>dc-domain-name</code></em> can differ from the domain
      name for OpenAM.</p><p>You set up the account on the Windows domain controller, creating
      a computer account for OpenAM and associating the new account with a
      service provider name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-principal-name</code></p></dd><dt><span class="term">Keytab File Name</span></dt><dd><p>Specify the full path of the keytab file for the Service Principal.
      You generate the keytab file using the Windows <span class="command"><strong>ktpass</strong></span>
      utility.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-keytab-file</code></p></dd><dt><span class="term">Kerberos Realm</span></dt><dd><p>Specify the Kerberos Key Distribution Center realm. For the
      Windows Kerberos service this is the domain controller server domain
      name.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kerberos-realm</code></p></dd><dt><span class="term">Kerberos Server Name</span></dt><dd><p>Specify the fully qualified domain name of the Kerberos Key
      Distribution Center server, such as that of the domain controller
      server.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-kdc</code></p></dd><dt><span class="term">Return Principal with Domain Name</span></dt><dd><p>When enabled, OpenAM automatically returns the Kerberos principal
      with the domain controller's domain name during authentication.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-returnRealm</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-windowsdesktopsso-auth-level</code></p></dd><dt><span class="term">Search for the user in the realm</span></dt><dd><p>
      Validates the user against the configured data stores. If the user from the
      Kerberos token is not found, authentication will fail. If an authentication
      chain is set, the user is able to authenticate through another module.
      This search uses the <code class="literal">Alias Search Attribute Name</code> from
      the core realm attributes. See
      <a href="../../admin-guide/index/chap-auth-services.html#auth-core-realm-attributes" class="link">
       <em class="citetitle">Core - Realm Attributes</em></a> for more information.
     </p><p><span class="command"><strong>ssoadm</strong></span> attribute:
     <code class="literal">iplanet-am-auth-windowsdesktopsso-lookupUserInRealm</code></p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>
     For Windows 7 and later, you will need to turn off the "Enable
     Integrated Windows Authentication" option in Internet Explorer. In addition, you
     will need to add and activate the DisableNTMLPreAuth key to the Windows Registry.
     For detailed instructions, see the Microsoft KB article on when
     <a class="link" href="http://support.microsoft.com/kb/251404" target="_blank"><em class="citetitle">You cannot post data
      to a non-NTLM-authenticated Web site</em></a>.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="winnt-module-conf-hints"></a>2.3.24.&nbsp;Hints for the Windows NT Authentication Module</h3></div></div></div><a class="indexterm" name="d0e6364"></a><a class="indexterm" name="d0e6369"></a><p>The Windows NT module lets OpenAM authenticate against a Microsoft
   Windows NT server.</p><p>This module requires that you install a Samba client in a 
   <code class="filename">bin</code> directory under the OpenAM configuration directory
   such as <code class="filename">$HOME/openam/openam/bin</code>.</p><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">iPlanetAMAuthNTService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Authentication Domain</span></dt><dd><p>Specify the Windows domain name to which users belong.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-domain</code></p></dd><dt><span class="term">Authentication Host</span></dt><dd><p>Specify the NetBIOS name of the Windows NT host to which to
      authenticate users.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-host</code></p></dd><dt><span class="term">Samba Configuration File Name</span></dt><dd><p>Specify the full path to the Samba configuration file.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-samba-config-file-name</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">iplanet-am-auth-nt-auth-level</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="wss-module-conf-hints"></a>2.3.25.&nbsp;Hints for the WSSAuth Authentication Module</h3></div></div></div><a class="indexterm" name="d0e6440"></a><a class="indexterm" name="d0e6445"></a><p>The Web Service Security (WSSAuth) module lets OpenAM validate a
   user name, password combination received as an authentication token in
   a request from a Web Service Client to a Web Service Provider.</p><div lang="en" class="note"><h3 class="title">Note</h3><p>
  The current implementation of the WSSAuth Authentication module, along with
  the Web Service Provider, Web Service Client and STS Client Policy agents,
  were developed for versions 1.0 and 1.3 of the WS-Trust standard. ForgeRock
  now includes configuration options for the RESTful Security Token Service
  (STS), compatible with version 1.4 of the WS-Trust standard, which uses
  client certificate and Kerberos JASPI authentication modules.
 </p><p>
  For more information on the new implementation of STS, see
  <a href="../../admin-guide/index/chap-rest-sts.html" class="link"><em class="citetitle">The RESTful Security
   Token Service</em></a>.
 </p></div><p><span class="command"><strong>ssoadm</strong></span> service name:
   <code class="literal">sunAMAuthWSSAuthModuleService</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">User search attribute</span></dt><dd><p>Specify a user attribute to search for a user. Default is
      <code class="literal">uid</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserSearchAttribute</code></p></dd><dt><span class="term">User realm</span></dt><dd><p>Specify the realm to which users belong. For the OpenAM STS, this
       is <code class="literal">/</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebServicesUserRealm</code></p></dd><dt><span class="term">User password attribute</span></dt><dd><p>Specify the password attribute or that of the password equivalent.
      The default is <code class="literal">userPassword</code>.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesUserPasswordAttribute</code></p></dd><dt><span class="term">Authentication Level</span></dt><dd><p>Sets the authentication level used to indicate the level of security
      associated with the module. The value can range from 0 to any positive integer.</p><p><span class="command"><strong>ssoadm</strong></span> attribute:
      <code class="literal">sunWebservicesAuthenticationLevel</code></p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-authn-chains"></a>2.4.&nbsp;Configuring Authentication Chains</h2></div></div></div><a class="indexterm" name="d0e6528"></a><p>Once you have configured authentication modules, and added the modules
  to the list of module instances, you can configure authentication chains.
  Authentication chains let you handle situations where alternative modules
  are needed, or where a single set of credentials is not sufficient.</p><div class="tip"><h3 class="title">Tip</h3><p>OpenAM provides a wizard for configuring authentication providers,
   including Facebook, Google and Microsoft. The wizard creates a
   relevant Authentication Chain as part of the process. For more
   information, see <a class="xref" href="chap-auth-services.html#configure-social-authn" title="2.2.&nbsp;Configuring Social Authentication">Section&nbsp;2.2, &#8220;Configuring Social Authentication&#8221;</a>.
  </p></div><div class="procedure"><a name="create-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.4.&nbsp;To Create an Authentication Chain</div><ol class="procedure" type="1"><li class="step"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to create the authentication chain.</p></li><li class="step"><p>On the Authentication tab page for the realm, scroll to the bottom
    of the page, and click the New button in the Authentication Chaining
    table.</p></li><li class="step"><p>Give the new authentication chain a name, and add instances of the
    modules to use in the chain.</p></li><li class="step"><p>Assign appropriate criteria (optional, required, requisite, sufficient)
    as described above in <a class="xref" href="chap-auth-services.html#what-is-authn" title="2.1.&nbsp;About Authentication in OpenAM">Section&nbsp;2.1, &#8220;About Authentication in OpenAM&#8221;</a>. You can also
    configure where OpenAM redirects the user upon successful and failed
    authentication, and plug in your post-authentication processing classes
    as necessary.</p></li><li class="step"><p>If you need modules in the chain to share user credentials, then set
    options for the module.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>
       to allow subsequent modules in the authentication chain to use
       the credentials, such as user name and password, captured by this
       module. (Default: <code class="literal">true</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-store-shared-state-enabled</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-store-shared-state-enabled=true</code>
       to store the captured credentials. Shared state is cleared when the
       user successfully authenticates, quits the chain, or logs out.
       (Default: <code class="literal">false</code>)</p></dd><dt><span class="term"><code class="option">iplanet-am-auth-shared-state-behavior-pattern</code></span></dt><dd><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>
       (the default) to try authenticating with the captured password. If
       authentication fails, then OpenAM prompts the user for the credentials
       again.</p><p>Set <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=useFirstPass</code>
       to authenticate with the captured password. If authentication fails,
       then the module fails.</p></dd></dl></div><p>For example, consider a chain with two modules sharing credentials
    according to the default settings. The first module in the chain has the
    option <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>, and
    criteria <code class="literal">REQUIRED</code>. The second module in the chain has
    options <code class="literal">iplanet-am-auth-shared-state-enabled=true</code>,
    <code class="literal">iplanet-am-auth-shared-state-behavior-pattern=tryFirstPass</code>,
    and criteria <code class="literal">REQUIRED</code>. A successful authentication
    sequence happens as follows. The user enters her credentials for the first
    module, successfully authenticating. The first module shares the
    credentials with the second module, successfully authenticating the user
    without prompting again for her credentials, unless the credentials for
    the first module do not successfully authenticate here to the second
    module. Just be sure to separate the options with a space and not a comma.</p></li><li class="step"><p>Save your work.</p></li></ol></div><div class="procedure"><a name="set-default-authn-chain"></a><div class="procedure-title">Procedure&nbsp;2.5.&nbsp;To Select the Default Chain</div><p>Before you select the default chain for users, and especially for
   administrators, test the authentication chain first. For example,
   <code class="literal">http://openam.example.com:8080/openam/UI/Login?service=NewChain</code>.
   If you cannot log in, then go back and fix the authentication chain's
   configuration before making it the default.</p><ol class="procedure" type="1"><li class="step"><p>On the Access Control tab page of the OpenAM console, click the
    realm for which to set the default authentication chain.</p></li><li class="step"><p>If necessary, on the Authentication tab page for the realm, adjust
    the drop-down lists for Organization Authentication Configuration and
    Administrator Authentication Configuration to the appropriate
    authentication chains.</p><p>The Organization Authentication Configuration serves when users
    access <code class="literal">/openam/UI/Login</code>.</p><p>The Administrator Authentication Configuration serves when users
    access <code class="literal">/openam/console</code>.</p><p>You can set these independently to separate administrative login
    from user login. For example, you can change the default user chain, but
    leave the default administrator chain as is to avoid locking yourself
    out as administrator. By default, <code class="literal">amadmin</code> can login at
    <code class="literal">/openam/UI/Login</code>. You can change that for your
    deployment.</p></li><li class="step"><p>Save your work.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authn-post-auth-plugins"></a>2.5.&nbsp;Post Authentication Plugins</h2></div></div></div><a class="indexterm" name="d0e6661"></a><p>Post authentication plugins include custom processing at the end of the
  authentication process, immediately before the subject is authenticated.
  Common uses of post authentication plugins include setting cookies and
  session variables. Post authentication plugins are often used in conjunction
  with policy agents. The post authentication plugin sets custom session
  properties, and then the policy agent injects the custom properties into the
  request header to the protected application.</p><p>In the OpenAM console, you add post authentication plugins to an
  authentication chain. Navigate to Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Authentication &gt; Authentication Chaining &gt;
  <em class="replaceable"><code>Auth Chain Name</code></em>. Scroll down to the Post Authentication
  Processing Class list.</p><div class="variablelist"><div class="variablelist-title">Standard Post Authentication Plugins</div><p>OpenAM provides some post authentication plugins as part of the
   standard product delivery.</p><dl class="variablelist"><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.modules.adaptive.Adaptive</code></span></dt><dd><p>The adaptive authentication plugin serves to save cookies and profile
     attributes after successful authentication.</p><p>Add it to your authentication chains that use the adaptive
     authentication module configured to save cookies and profile
     attributes.</p></dd><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.modules.oauth2.OAuth2PostAuthnPlugin</code></span></dt><dd><p>The OAuth 2.0 post authentication plugin builds a global logout URL
     used by <code class="filename">/oauth2c/OAuthLogout.jsp</code> after successful
     OAuth 2.0 client authentication. This logs the resource owner out
     with the OAuth 2.0 provider when logging out of OpenAM.</p><p>Before using this plugin, configure the OAuth 2.0 authentication
     module with the correct OAuth 2.0 Provider logout service URL, and set
     the Logout options to Log out or Prompt. This plugin cannot succeed unless
     those parameters are correctly set.</p><p>Sometimes OAuth 2.0 providers change their endpoints, including
     their logout URLs. When using a provider like Facebook, Google, or MSN
     make sure you are aware when they change their endpoint locations so that
     you can change your client configuration accordingly.</p></dd><dt><span class="term">Class name: <code class="literal">org.forgerock.openam.authentication.plugins.AccountExpirePlugin</code></span></dt><dd><p>The account expiration post authentication plugin sets an account
     expiration date after successful authentication. OpenAM uses this to
     prevent expired accounts from being used to authenticate.</p><p>The default of 30 days can be changed using the advanced OpenAM
     server property,
     <code class="literal">org.forgerock.openam.authentication.accountExpire.days</code>.</p></dd></dl></div><p>If necessary, you can also write your own custom post authentication
  plugin as described in the <em class="citetitle">Developer's Guide</em> chapter
  on <a href="../../dev-guide/index/chap-post-auth.html" class="link"><em class="citetitle">Creating a Post
  Authentication Plugin</em></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="authn-from-browser"></a>2.6.&nbsp;Authenticating To OpenAM</h2></div></div></div><a class="indexterm" name="d0e6731"></a><p>This section explains how to connect to OpenAM for user authentication
  by adding parameters to the login URL when testing your configuration.</p><p>The base URL to authenticate to OpenAM points to
  <code class="literal">/UI/Login</code> under the deployment URL, such as
  <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>.
  <a href="#ftn.d0e6746" class="footnote" name="d0e6746"><sup class="footnote">[4]</sup></a> You can, however, specify parameters in the query string
  of the URL to request a specific authentication configuration. For example,
  <code class="literal">http://openam.example.com:8080/openam/UI/Login?module=LDAP</code>
  requests that OpenAM use the LDAP authentication module.</p><div class="variablelist"><p>OpenAM accepts the following parameters in the query string. With
   the exception of <code class="literal">IDToken</code> parameters, use no more than
   one occurrence of each.</p><div class="note"><h3 class="title">Note</h3><p>The way you enter parameters depends on whether you are using the
   XUI or the classic UI. For example, if you want to request that OpenAM end the
   user's current session and start a new session in the classic UI, you might enter
   a URL similar to: <code class="literal">http://openam.example.com:8080/openam/UI/Login?locale=fr</code>.
   Alternatively, for the JavaScript-based XUI, the corresponding URL would be subtly different:
   <code class="literal">http://openam.example.com:8080/openam/XUI/#login/&amp;arg=newsession</code>.
   </p></div><dl class="variablelist"><dt><span class="term">arg=newsession</span></dt><dd><p>Request that OpenAM end the user's current session and start a
     new session.</p></dd><dt><span class="term">authlevel</span></dt><dd><p>Request that OpenAM authenticate the user using a module with at
     least the specified authentication level that you have configured.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">module</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">ForceAuth</span></dt><dd><p>If <code class="literal">ForceAuth=true</code>, request that OpenAM force the
     user to authenticate even if she already has a valid session. On
     successful authentication, OpenAM updates the session token.</p></dd><dt><span class="term">goto</span></dt><dd><p>On successful authentication, or successful logout, request that
     OpenAM redirect the user to the specified location. Values must be
     URL encoded.</p></dd><dt><span class="term">gotoOnFail</span></dt><dd><p>On authentication failure, request that OpenAM redirect the user to
     the specified location. Values must be URL encoded.</p></dd><dt><span class="term">IDToken1, IDToken2, ..., IDTokenN</span></dt><dd><p>Pass the specified credentials as <code class="literal">IDToken</code>
     parameters in the URL. The <code class="literal">IDToken</code> credentials map
     to the fields in the login page for the authentication module, such as
     <code class="literal">IDToken1</code> as user ID and <code class="literal">IDToken2</code>
     as password for basic user name, password authentication. The order
     depends on the callbacks in login page for the module;
     <code class="literal">IDTokenN</code> represents the N<sup>th</sup>
     callback of the login page.</p></dd><dt><span class="term">iPSPCookie=yes</span></dt><dd><p>Applicable only if you configure persistent cookies based on
     <a class="xref" href="chap-auth-services.html#auth-core-persistent-cookie" title="2.3.5.3.&nbsp;Core - Persistent Cookie (Legacy)">Section&nbsp;2.3.5.3, &#8220;Core - Persistent Cookie (Legacy)&#8221;</a></p><p>Request that OpenAM return a persistent cookie that remains in the
     browser after the browser is closed, allowing the user to login again
     without being prompted for credentials. This only works if you have
     configured persistent cookie mode for the realm where the user logs
     in.</p><p>OpenAM sets an <code class="literal">DProPCookie</code> that persists until
     expiry. The following screen shot shows an example.</p><div class="mediaobject" align="center"><a name="figure-persistent-dpropcookie"></a><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/persistent-dpropcookie.png" align="middle" height="360" alt="DProPCookie shown in the browser"></td></tr></table></div><p>An alternative persistent cookie mechanism extends the lifetime of
     the normal <code class="literal">iPlanetDirectoryPro</code> using the advanced
     server settings, <code class="literal">openam.session.persist_am_cookie</code>
     or <code class="literal">openam.session.allow_persist_am_cookie</code>, and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code>.</p><p>To set the mechanism globally for the server, browse in the OpenAM
     console to Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
     Name</code></em> &gt; Advanced, and then set
     <code class="literal">openam.session.persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds.</p><p>To allow users to use this mechanism on a per-session basis,
     browse in the OpenAM console to Configuration &gt; Servers and
     Sites &gt; <em class="replaceable"><code>Server Name</code></em> &gt; Advanced, and then
     set <code class="literal">openam.session.allow_persist_am_cookie</code> to
     <code class="literal">true</code> and
     <code class="literal">com.iplanet.am.cookie.timeToLive</code> to the cookie lifetime
     in seconds. (If the OpenAM .war deployed does not include the console, set
     these properties in the .properties configuration file.) Also configure
     the session properties either globally under Configuration &gt; Global
     &gt; Session &gt; Dynamic Attributes, or per realm under Access Control
     &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Services &gt; Session.
     Then, to request the cookie, use
     <code class="literal">openam.session.persist_am_cookie=Yes</code> as one of the
     query string parameters in the login URL.</p><div class="note"><h3 class="title">Note</h3><p>
       Neither the XUI, Persistent Cookie module, distributed authentication
       service (DAS), nor cross-domain single sign-on (CDSSO) support the deprecated
       <code class="literal">iPSPCookie</code>. Similarly, DAS and CDSSO do not support
       <code class="literal">DProPCookie</code>.
      </p></div></dd><dt><span class="term">locale</span></dt><dd><p>Request that OpenAM display the user interface in the specified,
     supported locale. Locale can also be set in the user's profile, in
     the HTTP header from her browser, configured in OpenAM, and so on.</p></dd><dt><span class="term">module</span></dt><dd><p>Request that OpenAM use the authentication module instance as
     configured for the realm where the user is authenticating.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">service</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">realm</span></dt><dd><p>Request that OpenAM authenticate the user to the specified realm.</p></dd><dt><span class="term">service</span></dt><dd><p>Request that OpenAM authenticate the user with the specified
     authentication chain.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">user</code>.</p></dd><dt><span class="term">user</span></dt><dd><p>Request that the user, specified by her OpenAM universal ID,
     authenticate according to the chain specified in her profile.</p><p>As this parameter determines authentication module selection, do
     not use it with <code class="literal">authlevel</code>, <code class="literal">module</code>,
     or <code class="literal">service</code>.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="session-upgrade"></a>2.7.&nbsp;Authentication Levels &amp; Session Upgrade</h2></div></div></div><a class="indexterm" name="d0e6982"></a><p>
   As shown in <a class="xref" href="chap-auth-services.html#configure-authn-modules" title="2.3.&nbsp;Configuring Authentication Modules">Section&nbsp;2.3, &#8220;Configuring Authentication Modules&#8221;</a>,
   authentication modules are configured with an authentication level.
   This configuration sets the level of security associated with the module,
   Stronger forms of authentication are assigned higher authentication levels.
   (Or lower authentication level numbers if the deployment defines
   stronger authentication with lower authentication level numbers.)
   Upon successful authentication, a user's session includes information
   about the authentication level achieved.
  </p><p>
   Authorization policies can require a particular authentication level
   for access to sensitive resources
   (or at most or at least a specified authentication level).
   When a user who is already authenticated in the realm
   tries to access a sensitive resource with a valid session
   but that does not have the requisite authentication level,
   OpenAM denies access to the resource.
   However, OpenAM also returns <em class="firstterm">advices</em>
   with the authorization decision.
   The advices indicate the need for the required authentication level.
   The policy agent or policy enforcement point can then
   send the user back to OpenAM for <em class="firstterm">session upgrade</em>.
  </p><p>
   During session upgrade the user authenticates
   with a stronger authentication module.
   The stronger module is typically part of the same authentication chain
   that handled the original authentication,
   though not required for access to less sensitive resources.
   Upon successful stronger authentication,
   the user session is upgraded to the new authentication level
   and modified to include any settings related to the stronger authentication.
  </p><p>
   If unsuccessful, session upgrade leaves the user session
   as it was before the attempt at stronger authentication.
   If session upgrade failed because the login page times out,
   OpenAM redirects the user's browser to the success URL
   from the last successful authentication.
  </p><p>
   OpenAM policy agents generally handle session upgrade
   without additional configuration,
   as policy agents are built to handle OpenAM's advices.
   If you build your own policy enforcement point (PEP), however,
   take advices and session upgrade into consideration.
   For RESTful PEPs, see the <em class="citetitle">Developer's Guide</em> sections,
   <a href="../../dev-guide/index/chap-rest-authz-policy.html#rest-api-authz-policy-decisions" class="link"><em class="citetitle">Requesting Policy Decisions</em></a>
   and
   <a href="../../dev-guide/index/chap-rest.html#rest-api-auth-json" class="link"><em class="citetitle">Authentication &amp; Logout</em></a>,
   for indications on how to handle advices and session upgrade.
  </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-account-lockout"></a>2.8.&nbsp;Configuring Account Lockout</h2></div></div></div><a class="indexterm" name="d0e7019"></a><div class="itemizedlist"><p>OpenAM supports two different approaches to <em class="firstterm">account
   lockout</em>, where OpenAM locks an account after repeated
   authentication failures. Lockout works with modules for which users
   can enter a password incorrectly.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Memory lockout locks the user account, keeping track of the locked
    state only in memory, and then unlocking the account after a specified
    delay. Memory lockout is also released when OpenAM restarts.</p></li><li class="listitem"><p>Persistent (physical) lockout sets the user account status to
    <code class="literal">inactive</code> in the user profile. For persistent lockout,
    OpenAM tracks failed authentication attempts by writing to the user
    repository.</p><p>Persistent account lockout works independently of account lockout
    mechanisms in the underlying directory server that serves as the user
    data store.</p></li></ul></div><div class="itemizedlist"><p>You configure account lockout by editing settings for the <a href="../../admin-guide/index/chap-auth-services.html#core-module-conf-hints" class="link">core authentication
   module</a>. Access the settings in OpenAM console under Access Control
   &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Authentication &gt; All
   Core Settings..., and then scroll down to the Account Lockout section.
   The inline help explains the settings in detail.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enable lockout by checking Login Failure Lockout Mode, setting
    the number of attempts, and setting the lockout interval and
    duration.</p><p>You can also opt to warn users after several consecutive failures,
    or to multiply the lockout duration on each successive lockout.</p></li><li class="listitem"><p>You can set up email notification upon lockout to an administrator
    if OpenAM is configured to send mail. (Configuration &gt; Servers and Sites &gt;
    Default Server Settings &gt; General &gt; Mail Server.)</p></li><li class="listitem"><p>For persistent lockout, OpenAM sets the value of the user's
    <code class="literal">inetuserstatus</code> profile attribute to
    <code class="literal">inactive</code>. You can also specify another attribute to
    update on lockout. You can further set a non-default attribute on which
    to store the number of failed authentication attempts. When you do store
    the number of failed attempts in the data store, other OpenAM servers
    accessing the user data store can also see the number.</p></li></ul></div><p>If you need to unlock a user's account, find the user under Access
  Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Subjects &gt; User,
  set the user's User Status to Active, and click Save.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-session-quotas"></a>2.9.&nbsp;Configuring Session Quotas</h2></div></div></div><a class="indexterm" name="d0e7075"></a><a class="indexterm" name="d0e7080"></a><p>OpenAM lets you limit the number of active sessions for a user by
  setting session quotas. You also configure session quota exhaustion actions
  so that when a user goes beyond the session quota, OpenAM takes the
  appropriate action.</p><div class="important"><h3 class="title">Important</h3><p>To enforce session quotas across multiple servers in a site, configure
   session failover as described in the <em class="citetitle">Installation Guide</em>
   chapter, <a href="../../install-guide/index/chap-session-failover.html" class="link"><em class="citetitle">Setting Up OpenAM
   Session Failover</em></a>.</p></div><div class="procedure"><a name="session-quotas-and-exhaustion-actions"></a><div class="procedure-title">Procedure&nbsp;2.6.&nbsp;To Configure Session Quotas &amp; Exhaustion Actions</div><p>The session quota applies to all sessions opened for the same
  user (as represented by the user's universal identifier).</p><ol class="procedure" type="1"><li class="step"><p>Log in to OpenAM Console as administrator, and then browse to
   Configuration &gt; Global &gt; Session.</p></li><li class="step"><p>Set Enable Quota Constraints to <code class="literal">ON</code>.</p></li><li class="step"><p>Set Resulting behavior if session quota exhausted.</p><div class="variablelist"><p>The following settings are available by default.</p><dl class="variablelist"><dt><span class="term"><code class="literal">DENY_ACCESS</code></span></dt><dd><p>Deny access, preventing the user from creating an additional
      session.</p></dd><dt><span class="term"><code class="literal">DESTROY_NEXT_EXPIRING</code></span></dt><dd><p>Remove the next session to expire, and create a new session for
      the user. The next session to expire is the session with the minimum
      time left until expiration.</p><p>This is the default setting.</p></dd><dt><span class="term"><code class="literal">DESTROY_OLDEST_SESSION</code></span></dt><dd><p>Remove the oldest session, and create a new session for the
      user.</p></dd><dt><span class="term"><code class="literal">DESTROY_OLD_SESSIONS</code></span></dt><dd><p>Remove all existing sessions, and create a new session for the
      user.</p></dd></dl></div><p>If none of these session quota exhaustion actions fit your deployment,
   you can implement a custom session quota exhaustion action. See the
   <em class="citetitle">Developer's Guide</em> chapter on <a href="../../dev-guide/index/chap-custom-quota-exhaustion-action.html" class="link"><em class="citetitle">Customizing
   Session Quota Exhaustion Actions</em></a> for an example.</p></li><li class="step"><p>Set Active User Sessions to the session quota.</p><p>The default is 5 sessions.</p></li><li class="step"><p>Save your work.</p></li><li class="step"><p>If you have multiple servers but session failover is not configured,
   configure multi-server mode as described below.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>If you have only a single OpenAM server, skip this step. OpenAM
     enforces the session quota you set for the server.</p></li><li class="listitem"><p>If you have multiple servers with session failover configured, then
     also skip this step. In this case OpenAM uses the session store to enforce
     session quotas globally across your deployment. In other words when the
     Set Active User Sessions is 5, a user can have a maximum of 5 active
     sessions.</p></li><li class="listitem"><p>If you have multiple OpenAM servers but session failover is not
     configured, configure multi-server mode for session quotas. Browse to
     Configuration &gt; Servers and Sites &gt; Default Server Settings or
     Configuration &gt; Servers and Sites &gt; <em class="replaceable"><code>Server
     Name</code></em>, and then use the Advanced tab page to set the
     following advanced server property.</p><div class="literallayout"><p>openam.session.useLocalSessionsInMultiServerMode&nbsp;=&nbsp;true</p></div><p>When you set this property to <code class="literal">true</code> for your OpenAM
     servers, users can potentially reach the session quota for each individual
     server before all session quotas are exhausted. In other words if you have
     4 OpenAM servers and Set Active User Sessions is 5, then the user can have
     a maximum of 20 (5 * 4) sessions.</p></li></ul></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-valid-goto-url-resources"></a>2.10.&nbsp;Configuring Valid goto URL Resources</h2></div></div></div><a class="indexterm" name="d0e7189"></a><p>
   By default, OpenAM redirects the user to the URL specified in the
   <code class="literal">goto</code> and <code class="literal">gotoOnFail</code> query string parameters
   supplied to the authentication interface in the login URL.
   You can increase security against possible phishing attacks through open redirect
   by specifying a list of valid URL resources using the Valid
   <code class="literal">goto</code> URL Resource service.
  </p><p>
   OpenAM only redirects a user if the <code class="literal">goto</code> and
   <code class="literal">gotoOnFail</code> URL matches any of the resources specified in
   this setting.
   If no setting is present, it is assumed that the <code class="literal">goto</code> or
   <code class="literal">gotoOnFail</code> URL is valid.
  </p><p>
   The URL whitelisting and pattern matching follow the wildcard rules as specified in
   <span class="olink">
    <em class="citetitle">To Configure a Policy for a Web Site</em></span>.
   There is one main difference: when creating Applications, the URL pattern
   matching for <code class="literal">ApplicationTypes</code> is different from the way
   Applications are matched when creating policies.
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
     <span class="bold"><strong>Creating an Application</strong></span>.
     When creating an application, the default pattern is the asterisk ("*") wildcard.
     There is one exception: the default application,
     <code class="literal">iPlanetAMWebAgentService</code>,
     uses a different pattern matching rule: <code class="literal">*://*:*/*</code> and
     <code class="literal">*://*:*/*?*</code> as opposed to just <code class="literal">*</code>. This
     rule is specified due to the application resource expecting a URI.
    </p></li><li class="listitem"><p>
     <span class="bold"><strong>Creating a Policy</strong></span>.
     When creating a policy, any rule with a trailing asterisk ("*") matches anything,
     including a question mark ("?").
    </p></li></ul></div><p>
   Here are some general examples of URL pattern matching:
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
     If no port is specified, <code class="literal">http://www.example.com</code> canonicalizes
     to <code class="literal">http://www.example.com:80</code> and
     <code class="literal">https://www.example.com</code> canonicalizes
     to <code class="literal">http://www.example.com:443</code>.
    </p></li><li class="listitem"><p>
     A wildcard before "://" only matches up to "://"
    </p><p>
     For example, <code class="literal">http*://*.com/*</code> matches
     <code class="literal">http://www.example.com/hello/world</code> and
     <code class="literal">https://www.example.com/hello</code>.
    </p></li><li class="listitem"><p>
     A wildcard between "://" and ":" matches up to ":"
    </p><p>
     For example, <code class="literal">http://*:85</code> matches <code class="literal">http://www.example.com:85</code>.
    </p></li><li class="listitem"><p>
     A wildcard between ":" and "/" only matches up to the first "/"
    </p><p>
     For example, <code class="literal">http://www.*:*/</code> matches
     <code class="literal">http://www.example.com:80</code>.
     In another example, <code class="literal">http://www.example.com:*</code> matches
     <code class="literal">http://ww.example.com:[any port]</code>
     and <code class="literal">http://www.example.com:[any port]/</code> but nothing more.
    </p></li><li class="listitem"><p>
     A wildcard after "/" matches anything depending on whether it is single-level
     or a wildcard appropriately.
    </p><p>
     For example, <code class="literal">https://www.example.com/*</code> matches
     <code class="literal">https://www.example.com:443/foo/bar/baz/me</code>
    </p></li><li class="listitem"><p>
     If you do not use any wildcards, OpenAM exactly matches the string, so
     <code class="literal">http://www.example.com</code> only matches
     <code class="literal">http://www.example.com</code> but NOT <code class="literal">http://www.example.com/</code>
     (trailing slash).
    </p><p>
     If you put the wildcard after the path, OpenAM expects a path (even if it is blank),
     so <code class="literal">http://www.example.com/*</code> matches
     <code class="literal">http://www.example.com/</code>
     and <code class="literal">http://www.example.com/foo/bar/baz.html</code> but NOT
     <code class="literal">http://www.example.com</code>.
    </p></li><li class="listitem"><p>
     <code class="literal">http://www.example.com:*/</code> matches
     <code class="literal">http://www.example.com/</code>, which also canonicalizes to
     <code class="literal">http://www.example.com:80/</code>.
    </p></li><li class="listitem"><p>
     <code class="literal">https://www.example.com:*/</code> matches
     <code class="literal">https://www.example.com/</code>, which also canonicalizes to
     <code class="literal">https://www.example.com:443/</code>.
    </p></li></ul></div></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d0e641" class="footnote"><p><a href="#d0e641" class="para"><sup class="para">[3] </sup></a>The four flags, required, optional, requisite, and sufficient, come from
  the standards created for the Java Authentication and Authorization Service
  (JAAS).</p></div><div id="ftn.d0e6746" class="footnote"><p><a href="#d0e6746" class="para"><sup class="para">[4] </sup></a>The base URL to logout is similar, for example
  <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap-admin-tools.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-authz-policy.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;1.&nbsp;Administration Interfaces &amp; Tools&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;3.&nbsp;Defining Authorization Policies</td></tr></table></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10000&components=10007&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>