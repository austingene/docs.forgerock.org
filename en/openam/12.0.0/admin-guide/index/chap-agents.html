<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;5.&nbsp;Configuring Policy Agent Profiles</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OpenAM Administration Guide"><link rel="up" href="index.html" title="OpenAM Administration Guide"><link rel="prev" href="chap-realms.html" title="Chapter&nbsp;4.&nbsp;Configuring Realms"><link rel="next" href="chap-audit-logging.html" title="Chapter&nbsp;6.&nbsp;Configuring Audit Logging"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;5.&nbsp;Configuring Policy Agent Profiles</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap-realms.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-audit-logging.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chap-agents"></a>Chapter&nbsp;5.&nbsp;Configuring Policy Agent Profiles</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="chap-agents.html#gateway-or-policy-agent">5.1. Open Identity Gateway or Policy Agent?</a></span></dt><dt><span class="section"><a href="chap-agents.html#kinds-of-agent-profiles">5.2. Kinds of Agent Profiles</a></span></dt><dt><span class="section"><a href="chap-agents.html#create-agent-profiles">5.3. Creating Agent Profiles</a></span></dt><dt><span class="section"><a href="chap-agents.html#delegate-agent-profile-creation">5.4. Delegating Agent Profile Creation</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-policy-agent">5.5. Configuring Web Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-policy-agent">5.6. Configuring Java EE Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-wsp-policy-agent">5.7. Configuring Web Service Provider Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-wsc-policy-agent">5.8. Configuring Web Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-sts-policy-agent">5.9. Configuring Security Token Service Client Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-22-policy-agent">5.10. Configuring Version 2.2 Policy Agents</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-oauth2-client">5.11. Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-agent-auth">5.12. Configuring Agent Authenticators</a></span></dt></dl></div><a class="indexterm" name="d0e16611"></a><p> You install policy agents in web servers and web application containers
  to enforce access policies OpenAM applies to protected web sites and web
  applications. Policy agents depend on OpenAM for all authentication and
  authorization decisions. Their primary responsibility consists in enforcing
  what OpenAM decides in a way that is unobtrusive to the user. In organizations
  with many servers, you might well install many policy agents.</p><p>Policy agents can have local configurations where they are installed,
  but usually you store all policy agent configuration information in the
  OpenAM configuration store, defining policy agent profiles for each, and then
  you let the policy agents access their profiles through OpenAM such that you
  manage all agent configuration changes centrally. This chapter describes how
  to set up policy agent profiles in OpenAM for centralized configuration.</p><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gateway-or-policy-agent"></a>5.1.&nbsp;Open Identity Gateway or Policy Agent?</h2></div></div></div><a class="indexterm" name="d0e16626"></a><p>OpenAM includes both the
  <a class="link" href="http://openig.forgerock.org/" target="_blank">Open Identity
  Gateway (OpenIG)</a> and also a variety of policy agents.
  Both OpenIG
  and also the policy agents enforce policy, redirecting users to authenticate
  when necessary, and controlling access to protected resources. Yet, the
  Identity Gateway runs as a self-contained reverse proxy located between the
  users and the protected applications. Policy agents are installed into the
  servers where applications run, intercepting requests in that context.</p><p>The OpenIG allows you to protect access to applications not
  suited for a policy agent. Not all web servers and Java EE applications have
  policy agents. Not all operating systems work with policy agents.</p><p>Policy agents have the advantage, where you can install them,
  of sitting within your existing server infrastructure. Once you have
  agents installed into the servers with web applications or sites to protect,
  then you can manage their configurations centrally from OpenAM.</p><p>Of course, for organizations with both servers where you can install
  policy agents and also applications that you must protect without touching
  the server, you can use policy agents on the former and the OpenIG
  for the latter.</p></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="kinds-of-agent-profiles"></a>5.2.&nbsp;Kinds of Agent Profiles</h2></div></div></div><a class="indexterm" name="d0e16644"></a><p>When you open the OpenAM console to configure agents for the top level
  realm, you can choose from a number of different types of agents. Web and J2EE policy
  agents are the most common, requiring the least integration effort.</p><a class="indexterm" name="d0e16651"></a><div class="variablelist"><dl class="variablelist"><dt><span class="term">Web</span></dt><dd><p>You install web agents in web servers to protect web sites.</p></dd><dt><span class="term">J2EE</span></dt><dd><p>You install J2EE agents in web application containers to protect
     web applications.</p></dd><dt><span class="term">Web Service Provider</span></dt><dd><p>WSP agents are for use with Web Services Security.</p></dd><dt><span class="term">Web Service Client</span></dt><dd><p>WSC agents are for use with Web Services Security.</p></dd><dt><span class="term">STS Client</span></dt><dd><p>The Security Token Service client agent is for securing
     requests to the Security Token Service.</p></dd><dt><span class="term">2.2 Agents</span></dt><dd><p>Version 2.2 web and Java EE policy agents hold their configuration
     locally, connecting to OpenAM with a user name, password combination.
     This kind of agent is provided for backwards compatibility.</p></dd><dt><span class="term">OAuth 2.0 Client Agent</span></dt><dd><p>OAuth 2.0 clients are registered using this type of policy agent
     profile.</p></dd><dt><span class="term">Agent Authenticator</span></dt><dd><p>The agent authenticator can read agent profiles by connecting
     to OpenAM with a user name, password combination, but unlike the
     agent profile administrator, cannot change agent configuration.</p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create-agent-profiles"></a>5.3.&nbsp;Creating Agent Profiles</h2></div></div></div><a class="indexterm" name="d0e16709"></a><p>This section concerns creating agent profiles, and creating groups
  that let agents inherit settings when you have many agents with nearly
  the same profile settings.</p><div class="procedure"><a name="create-agent-profile"></a><div class="procedure-title">Procedure&nbsp;5.1.&nbsp;To Create an Agent Profile</div><p>To create a new Java EE policy agent profile, you need a name and
   password for the agent, and the URLs to OpenAM and the application to
   protect.</p><ol class="procedure" type="1"><li class="step"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Agent table.</p></li><li class="step"><p>Provide a name for the agent, and also the URLs to OpenAM and to
    the application to protect, then click Create. 
    Note that for Java EE policy agents, an example URL must include
    the <code class="literal">agentapp</code> context:
    <code class="uri">http://www.example.com:8080/agentapp</code>.
   </p><div class="mediaobject" align="center"><a name="figure-create-agent"></a><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="100%"><tr><td align="center"><img src="images/create-agent.png" align="middle" height="360" alt="Creating a new agent profile"></td></tr></table><div class="longdesc-link" align="right"><br clear="all"><span class="longdesc-link">[<a href="figure-create-agent.html" target="longdesc">D</a>]</span></div></div></li><li class="step"><p>After creating the agent profile, you can click the link to the
    new profile to adjust and export the configuration.</p></li></ol></div><div class="procedure"><a name="create-agent-group"></a><div class="procedure-title">Procedure&nbsp;5.2.&nbsp;To Create an Agent Profile Group &amp; Inherit Settings</div><a class="indexterm" name="d0e16752"></a><p>Agent profile groups let you set up multiple agents to inherit
   settings from the group. To create a new Java EE agent profile group,
   you need a name and the URL to the OpenAM server in which you store the
   profile.</p><ol class="procedure" type="1"><li class="step"><p>On the Access Control tab page of the OpenAM console, click the link
    for the realm in which you manage agents.</p></li><li class="step"><p>Click the Agents tab, click the tab page for the kind of agent you
    want to create, and then click the New... button in the Group table.</p><p>After creating the group profile, you can click the link to the new
    group profile to fine-tune or export the configuration.</p></li><li class="step"><p>Inherit group settings by selecting your agent profile, and then
    selecting the group name in the Group drop-down list near the top of
    the profile page.</p><p>You can then adjust inheritance by clicking Inheritance Settings
    on the agent profile page.</p></li></ol></div><div class="procedure"><a name="create-agent-profile-cli"></a><div class="procedure-title">Procedure&nbsp;5.3.&nbsp;To Create an Agent Profile Using the Command Line</div><p>You can create a policy agent profile in OpenAM using the
   <span class="command"><strong>ssoadm</strong></span> command-line tool. You do so by specifying
   the agent properties either as a list of attributes, or by using an
   agent properties file as shown below. Export an existing policy
   agent configuration before you start to see what properties you
   want to set when creating the agent profile.</p><p>The following procedure demonstrates creating a policy agent
   profile using the <span class="command"><strong>ssoadm</strong></span> command.</p><ol class="procedure" type="1"><li class="step"><p>Make sure the <span class="command"><strong>ssoadm</strong></span> command is installed as
    described in the <em class="citetitle">Installation Guide</em> procedure,
    <a href="../../install-guide/index/chap-install-tools.html#install-openam-admin-tools" class="link"><em class="citetitle">To Set Up
     Administration Tools</em></a>.</p></li><li class="step"><p>Determine the list of properties to set in the agent profile.</p><p>The following properties file shows a minimal configuration for a
    policy agent profile.</p><div class="screen"><pre>
$ <strong>cat myAgent.properties</strong>
com.sun.identity.agents.config.agenturi.prefix=http://www.example.com:80/amagent
com.sun.identity.agents.config.cdsso.cdcservlet.url[0]=https://openam.example.com:8443/
  openam/cdcservlet
com.sun.identity.agents.config.fqdn.default=www.example.com
com.sun.identity.agents.config.login.url[0]=http://openam.example.com:8443/
  openam/UI/Login
com.sun.identity.agents.config.logout.url[0]=http://openam.example.com:8443/
  openam/UI/Logout
com.sun.identity.agents.config.remote.logfile=amAgent_www_example_com_80.log
com.sun.identity.agents.config.repository.location=centralized
com.sun.identity.client.notification.url=http://www.example.com:80/
  UpdateAgentCacheServlet?shortcircuit=false
com.sun.identity.client.notification.url=http://www.example.com:80/
  UpdateAgentCacheServlet?shortcircuit=false
sunIdentityServerDeviceKeyValue[0]=agentRootURL=http://www.example.com:80/
sunIdentityServerDeviceStatus=Active
userpassword=password
    </pre></div></li><li class="step"><p>Set up a password file used when authenticating to OpenAM.
    The password file must be read-only for the user who creates the policy
    agent profile, and must not be accessible to other users.
   </p><div class="screen"><pre>
    $ <strong>echo password &gt; /tmp/pwd.txt</strong>
    $ <strong>chmod 400 /tmp/pwd.txt</strong>
   </pre></div></li><li class="step"><p>Create the profile in OpenAM.</p><div class="screen"><pre>
    $ <strong>ssoadm \
    create-agent \
    --realm / \
    --agentname myAgent \
    --agenttype J2EE \
    --adminid amadmin
    --password-file /tmp/pwd.txt \
    --datafile myAgent.properties</strong>

    <em>Agent configuration was created.</em>
   </pre></div><p>At this point you can view the profile in OpenAM Console under
    Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents to make
    sure the configuration is what you expect.</p></li></ol></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="delegate-agent-profile-creation"></a>5.4.&nbsp;Delegating Agent Profile Creation</h2></div></div></div><a class="indexterm" name="d0e16840"></a><p>If you want to create policy agent profiles when installing policy
  agents, then you need the credentials of an OpenAM user who can read and
  write agent profiles.</p><p>You can use the OpenAM administrator account when creating policy agent
  profiles. If however you delegate policy agent installation, then you might
  not want to share OpenAM administrator credentials with everyone who
  installs policy agents.</p><div class="procedure"><a name="create-agent-administrators"></a><div class="procedure-title">Procedure&nbsp;5.4.&nbsp;To Create Agent Administrators for a Realm</div><a class="indexterm" name="d0e16852"></a><p>Follow these steps to create <em class="firstterm">agent administrator</em>
   users for a realm.</p><ol class="procedure" type="1"><li class="step"><p>In OpenAM console, browse to Access Control &gt; <em class="replaceable"><code>Realm
    Name</code></em> &gt; Subjects.</p></li><li class="step"><p>Under Group click New... and create a group for agent
    administrators.</p></li><li class="step"><p>Switch to the Privileges tab for the realm, and click the name of the
    group you created.</p></li><li class="step"><p>Select "Read and write access to all configured Agents," and then
    Save your work.</p></li><li class="step"><p>Return to the Subjects tab, and under User create as many agent
    administrator users as needed.</p></li><li class="step"><p>For each agent administrator user, edit the user profile.</p><p>Under the Group tab of the user profile, add the user to agent
    profile administrator group, and then Save your work.</p></li><li class="step"><p>Provide each system administrator who installs policy agents with
    their agent administrator credentials.</p><p>When installing the policy agent with the
    <code class="option">--custom-install</code> option, the system administrator can
    choose the option to create the profile during installation, and then
    provide the agent administrator user name and the path to a read-only
    file containing the agent administrator password. For silent installs,
    you can add the <code class="option">--acceptLicense</code> option to auto-accept the
    software license agreement. </p></li></ol></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-web-policy-agent"></a>5.5.&nbsp;Configuring Web Policy Agents</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-agents.html#configure-web-pa-global-props">5.5.1. Configuring Web Policy Agent Global Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-pa-application-props">5.5.2. Configuring Web Policy Agent Application Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-pa-sso-props">5.5.3. Configuring Web Policy Agent SSO Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-pa-services-props">5.5.4. Configuring Web Policy Agent OpenAM Services Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-pa-misc-props">5.5.5. Configuring Web Policy Agent Miscellaneous Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-web-pa-advanced-props">5.5.6. Configuring Web Policy Agent Advanced Properties</a></span></dt></dl></div><a class="indexterm" name="d0e16903"></a><p>When you create a web policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.

  <a href="#ftn.d0e16912" class="footnote" name="d0e16912"><sup class="footnote">[6]</sup></a>
 </p><div class="tip"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p><p>This corresponds to the local Java properties configuration file
   that is set up when you install an agent, for example in
   <code class="filename">Agent_001/config/OpenSSOAgentConfiguration.properties</code>.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the agent's container for the changes to take effect.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-global-props"></a>5.5.1.&nbsp;Configuring Web Policy Agent Global Properties</h3></div></div></div><a class="indexterm" name="d0e16932"></a><p>This section covers global web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist"><a name="web-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured web agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p><p>If you change this to a local configuration, you can no longer
      manage the policy agent configuration through OpenAM console.</p><p>Property: <code class="literal">com.sun.identity.agents.config.repository.location</code></p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notification messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Enable Notifications</span></dt><dd><p>If enabled, the agent receives policy updates from the OpenAM
      notification mechanism to maintain its internal cache. If disabled, the
      agent must poll OpenAM for changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notification.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Deployment URI Prefix</span></dt><dd><p>The default value is
      <code class="literal"><em class="replaceable"><code>agent-root-URL</code></em>/amagent</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code></p><p>Hot swap: yes</p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in minutes to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 60.</p><p>Property: <code class="literal">com.sun.identity.agents.config.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Configuration Cleanup Interval</span></dt><dd><p>Interval in minutes to cleanup old agent configuration entries
      unless they are referenced by current requests. Default: 30.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cleanup.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
      the virtual host names to this list as well. OpenAM checks that the
      <code class="literal">goto</code> URLs match one of the agent root URLs for
      CDSSO.</p></dd></dl></div><div class="variablelist"><a name="web-agent-general-properties"></a><div class="variablelist-title">General properties</div><a class="indexterm" name="d0e17095"></a><dl class="variablelist"><dt><span class="term">SSO Only Mode</span></dt><dd><p>When enabled, the agent enforces authentication, so that upon verification
      of the user's identity, the user receives a session token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.only</code></p></dd><dt><span class="term">Resources Access Denied URL</span></dt><dd><p>The URL of the customized access denied page. If no value is
      specified (default), then the agent returns an HTTP status of 403
      (Forbidden).</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.url</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> or even <code class="literal">All</code> for
      fine-grained detail.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.level</code></p><p>You can set the level in the configuration file by module using
      the format
      <code class="literal"><em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>][,<em class="replaceable"><code>module</code></em>[:<em class="replaceable"><code>level</code></em>]]*</code>,
      where <em class="replaceable"><code>module</code></em> is one of
      <code class="literal">AuthService</code>, <code class="literal">NamingService</code>,
      <code class="literal">PolicyService</code>, <code class="literal">SessionService</code>,
      <code class="literal">PolicyEngine</code>, <code class="literal">ServiceEngine</code>,
      <code class="literal">Notification</code>, <code class="literal">PolicyAgent</code>,
      <code class="literal">RemoteLog</code>, or <code class="literal">all</code>,
      and <em class="replaceable"><code>level</code></em> is one of the following.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">0</code>: Disable logging from specified module</p><p>At this level the agent nevertheless logs messages having the
        level value <code class="literal">always</code>.</p></li><li class="listitem"><p><code class="literal">1</code>: Log error messages</p></li><li class="listitem"><p><code class="literal">2</code>: Log warning and error messages</p></li><li class="listitem"><p><code class="literal">3</code>: Log info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">4</code>: Log debug, info, warning, and error messages</p></li><li class="listitem"><p><code class="literal">5</code>: Like level 4, but with even more debugging messages</p></li></ul></div><p>When you omit <em class="replaceable"><code>level</code></em>, the agent uses the
      default level, which is the level associated with the
      <code class="literal">all</code> module.</p><p>The following example used in the local configuration sets the
      log overall level to debug for all messages.</p><pre class="literallayout">com.sun.identity.agents.config.debug.level=all:5</pre></dd><dt><span class="term">Agent Debug File Rotation</span></dt><dd><p>When enabled, rotate the debug file when specified file size is
      reached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.rotate</code></p></dd><dt><span class="term">Agent Debug File Size</span></dt><dd><p>Debug file size in bytes beyond which the log file is rotated. The
      minimum is 1048576 bytes (1 MB), and lower values are reset to 1 MB.
      OpenAM console sets a default of 10 MB.</p><p>Property: <code class="literal">com.sun.identity.agents.config.debug.file.size</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl class="variablelist"><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Remote Audit Log Interval</span></dt><dd><p>Periodic interval in minutes in which audit log messages are sent
      to the remote log file.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.log.interval</code></p><p>Default: 5</p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p><p>Default: 50 MB</p></dd></dl></div><div class="variablelist"><a name="web-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl class="variablelist"><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources. Without this value, the web server can fail to
      start, thus you set the property on agent installation, and only change
      it when absolutely necessary.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.example</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.example</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.example</code>.</p><p>Invalid FQDN values can cause the web server to become unusable
      or render resources inaccessible.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-application-props"></a>5.5.2.&nbsp;Configuring Web Policy Agent Application Properties</h3></div></div></div><a class="indexterm" name="d0e17412"></a><p>This section covers application web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist"><a name="web-agent-not-enforced-url-properties"></a><div class="variablelist-title">Not Enforced URL Processing properties</div><dl class="variablelist"><dt><span class="term">Ignore Path Info for Not Enforced URLs</span></dt><dd><p>When enabled, the path info and query are stripped from the
      request URL before being compared with the URLs of the not enforced list
      for those URLs containing a wildcard character. This prevents a user
      from accessing <code class="literal">http://host/index.html</code> by requesting
      <code class="literal">http://host/index.html/hack.gif</code> when the not enforced
      list includes <code class="literal">http://host/*.gif</code>.</p><div class="note"><h3 class="title">Note</h3><p>This setting is not supported by the Varnish Cache agent.</p></div><p>For a more generally applicable setting, see
      <a class="xref" href="chap-agents.html#web-agent-ignore-path-info-properties" title="Ignore Path Info properties">Ignore Path Info properties</a>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info.for.not.enforced.list</code></p></dd><dt><span class="term">Enable Regular Expressions for Not Enforced URLs (Not yet in OpenAM console)</span></dt><dd><p>Enable use of <a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expressions</a> in
      Not Enforced URL settings by using the following property under Advanced
      &gt; Custom Properties in the agent profile.</p><pre class="literallayout">com.forgerock.agents.notenforced.url.regex.enable=true</pre></dd><dt><span class="term">Not Enforced URLs</span></dt><dd><p>List of URLs for which no authentication is required. You can use
      wildcards to define a pattern for a URL.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URL. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URL.</p><p>OpenAM does not let you mix <code class="literal">*</code> and
      <code class="literal">-*-</code> in the same URL.</p><p>Examples include
      <code class="literal">http://www.example.com/logout.html</code>,
      <code class="literal">http://www.example.com/images/*</code>,
      <code class="literal">http://www.example.com/css/-*-</code>, and
      <code class="literal">http://www.example.com/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">http://www.example.com/images//</code> and
      <code class="literal">http://www.example.com/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url</code></p><p>If you enabled use of <a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expressions</a> to match
      Not Enforced URLs, then all your settings must be done using regular
      expressions. (Do not mix settings; use either the mechanism
      described above or Perl-compatible regular expressions, but not both.)</p><p>The following example shows settings where no authentication is
      required for URLs whose path ends <code class="literal">/publicA</code> or
      <code class="literal">/publicB</code> (with or without query string parameters),
      and no authentication is required to access .png, .jpg, .gif, .js, or .css
      files under URLs that do not contain <code class="literal">/protectedA/</code>
      or <code class="literal">/protectedB/</code>.</p><pre class="literallayout">.*/(PublicServletA|PublicServletB)(\?.*|$)
      ^(?!.*(/protectedA/|/protectedB/)).*\.(png|jpg|gif|js|css)(\?.*|$)</pre></dd><dt><span class="term">Invert Not Enforced URLs</span></dt><dd><p>Only enforce not enforced list of URLs. In other words, enforce
      policy only for those URLs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.invert</code></p></dd><dt><span class="term">Fetch Attributes for Not Enforced URLs</span></dt><dd><p>When enabled, the agent fetches profile, response, and session
      attributes that are mapped by doing policy evaluation, and forwards
      these attributes to not enforced URLs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.url.attributes.enable</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing Properties</div><dl class="variablelist"><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p><div class="note"><h3 class="title">Note</h3><p>
       Loopback addresses are not considered valid IPs on the Not Enforced IP list.
       If specified, the policy agent ignores the loopback address.
      </p></div></dd><dt><span class="term">CIDR Client IP Specification (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, web policy agents with this property set to
      <code class="literal">cidr</code> can use IPv4 netmasks and IP ranges instead of
      wildcards as values for Not Enforced Client IP addresses. Version 3.0.5
      adds support for IPv6, including the IPv6 loopback address,
      <code class="literal">::1</code>.</p><p>When the parameter is defined, wildcards are ignored in Not
      Enforced Client IP settings. Instead, you can use settings such as
      those shown in the following examples.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Netmask Example</span></dt><dd><p>To disable policy agent enforcement for addresses in
         192.168.1.1 to 192.168.1.255, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.1/24</pre><p>The following example shows an IPv6 address with a corresponding network mask.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 2001:5c0:9168:0:0:0:0:2/128</pre><p>Currently the policy agent stops evaluating properties after
         reaching an invalid netmask in the list.</p></dd><dt><span class="term">IP Range Example</span></dt><dd><p>To disable policy agent enforcement for addresses between
         192.168.1.1 to 192.168.4.3 inclusive, use the following setting.</p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = 192.168.1.1-192.168.4.3</pre><p>The following example shows a range of IPv6 addresses. The example
         is displayed over two lines for formatting purposes.
        </p><pre class="literallayout">com.sun.identity.agents.config.notenforced.ip = \
    2001:5c0:9168:0:0:0:0:1-2001:5c0:9168:0:0:0:0:2</pre></dd></dl></div><p>Property: <code class="literal">com.forgerock.agents.config.notenforced.ip.handler</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client IP Validation</span></dt><dd><p>When enabled, validate that the subsequent browser requests come
      from the same IP address that the SSO token is initially issued
      against.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.validation.enable</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are LDAP attribute names, and Map Values
      are HTTP header names.</p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken] =CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl class="variablelist"><dt><span class="term">Attribute Multi Value Separator</span></dt><dd><p>Specifies separator for multiple values. Applies to all types of
      attributes such as profile, session and response attributes. Default:
      <code class="literal">|</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.multi.value.separator</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-sso-props"></a>5.5.3.&nbsp;Configuring Web Policy Agent SSO Properties</h3></div></div></div><a class="indexterm" name="d0e17861"></a><p>This section covers SSO web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist"><a name="web-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl class="variablelist"><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.name</code></p><p>Hot swap: no</p></dd><dt><span class="term">Cookie Security</span></dt><dd><p>When enabled, the agent marks cookies secure, sending them only
      if the communication channel is secure.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.secure</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTPOnly Cookies (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.5, web policy agents with this property set to
      <code class="literal">true</code> mark cookies as HTTPOnly, to prevent scripts
      and third-party programs from accessing the cookies.</p><p>Property: <code class="literal">com.sun.identity.cookie.httponly</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl class="variablelist"><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">Cookies Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO. If this property is left blank, then
      the fully qualified domain name of the cookie for the agent server
      is used to set the cookie domain, meaning that a host cookie rather than
      a domain cookie is set.</p><p>To set the list to <code class="literal">.example.com</code>, and
      <code class="literal">.example.net</code> using the configuration file property,
      include the following.</p><pre class="literallayout">com.sun.identity.agents.config.cdsso.cookie.domain[0]=.example.com
      com.sun.identity.agents.config.cdsso.cookie.domain[1]=.example.net</pre><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cookie.domain</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl class="variablelist"><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies in the format
      <code class="literal"><em class="replaceable"><code>name</code></em>[=<em class="replaceable"><code>value</code></em>][;Domain=<em class="replaceable"><code>value</code></em>]</code>.</p><p>Concrete examples include the following with two list items
      configured.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">LtpaToken</code>, corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[0]=LtpaToken</code>.
        The default domain is taken from FQDN Default.</p></li><li class="listitem"><p><code class="literal">token=value;Domain=subdomain.domain.com</code>,
        corresponding to
        <code class="literal">com.sun.identity.agents.config.cookie.reset[1]= token=value;Domain=subdomain.domain.com</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-services-props"></a>5.5.4.&nbsp;Configuring Web Policy Agent OpenAM Services Properties</h3></div></div></div><a class="indexterm" name="d0e18024"></a><p>This section covers OpenAM services web agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist"><a name="web-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl class="variablelist"><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so that they can authenticate.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">OpenAM Conditional Login URL (Not yet in OpenAM console)</span></dt><dd><p>
  To conditionally redirect users based on the incoming request URL,
  set this property.
 </p><p>
  This takes the incoming request domain to match,
  a vertical bar ( <code class="literal">|</code> ),
  and then a comma-separated list of URLs to which to redirect incoming users.
 </p><p>
  If the domain before the vertical bar matches an incoming request URL,
  then the policy agent uses the list of URLs
  to determine how to redirect the user-agent.

  If the global property FQDN Check
  (<code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code>)
  is enabled for the policy agent,
  then the policy agent iterates through the list
  until it finds an appropriate redirect URL that matches the FQDN check.

  Otherwise, the policy agent redirects the user-agent
  to the first URL in the list.
 </p><p>
  Property: <code class="literal">com.forgerock.agents.conditional.login.url</code>
 </p><p>
  Examples:

  <code class="literal">com.forgerock.agents.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/UI/Login,
  http://openam2.example.com/openam/UI/Login</code>,

  <code class="literal">com.forgerock.agents.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/UI/Login,
  http://openam4.example.com/openam/UI/Login</code>
 </p><p>
  If CDSSO is enabled for the policy agent,
  then this property takes CDSSO Servlet URLs for its values
  (<code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code>),
  rather than OpenAM login URLs.
 </p><p>
  CDSSO examples:

  <code class="literal">com.forgerock.agents.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/cdcservlet,
  http://openam2.example.com/openam/cdcservlet</code>,

  <code class="literal">com.forgerock.agents.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/cdcservlet,
  http://openam4.example.com/openam/cdcservlet</code>
 </p></dd><dt><span class="term">Agent Connection Timeout</span></dt><dd><p>Timeout period in seconds for an agent connection with OpenAM auth
      server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.connection.timeout</code></p><p>Default: 2</p></dd><dt><span class="term">Polling Period for Primary Server</span></dt><dd><p>Interval in minutes, agent polls to check the primary server is up
      and running. Default: 5.</p><p>Property: <code class="literal">com.sun.identity.agents.config.poll.primary.server</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="web-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl class="variablelist"><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd><dt><span class="term">Enable Logout URL Redirect (Not yet in OpenAM console)</span></dt><dd><p>Logout URL redirect is enabled by default.</p><p>When this is disabled, instead of redirecting the user-agent, the
      policy agent performs session logout in the background and then continues
      processing access to the current URL. Disable this using Advanced &gt;
      Custom Properties in the agent profile.</p><pre class="literallayout">com.forgerock.agents.config.logout.redirect.disable=true</pre></dd></dl></div><div class="variablelist"><a name="web-agent-agent-logout-url-properties"></a><div class="variablelist-title">Agent Logout URL properties</div><dl class="variablelist"><dt><span class="term">Logout URL List</span></dt><dd><p>List of application logout URLs, such as
      <code class="literal">http://www.example.com/logout.html</code>.
      The user is logged out of the OpenAM session when these URLs are accessed.
      When using this property, specify a value for the Logout Redirect URL
      property.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.logout.url</code></p></dd><dt><span class="term">Agent Logout URL Regular Expression (Not yet in OpenAM console)</span></dt><dd><p><a class="link" href="http://www.pcre.org/pcre.txt" target="_blank">Perl-compatible regular expression</a> that matches logout URLs.
      Set this using Advanced &gt; Custom Properties in the agent profile.</p><p>For example, to match URLs with <code class="literal">protectedA</code> or
      <code class="literal">protectedB</code> in the path and <code class="literal">op=logout</code>
      in the query string, use the following setting.</p><pre class="brush: ini;">com.forgerock.agents.agent.logout.url.regex= \
      .*(/protectedA\?|/protectedB\?/).*(\&amp;op=logout\&amp;)(.*|$)</pre><p>When you use this property, the agent ignores the settings for
      Logout URL List.</p></dd><dt><span class="term">Logout Cookies List for Reset</span></dt><dd><p>Cookies to be reset upon logout in the same format as the cookie
      reset list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.cookie.reset</code></p></dd><dt><span class="term">Logout Redirect URL</span></dt><dd><p>User gets redirected to this URL after logout. Specify this
      property alongside a Logout URL List.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.redirect.url</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl class="variablelist"><dt><span class="term">Policy Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">SSO Cache Polling Period</span></dt><dd><p>Polling interval in minutes during which an SSO entry remains valid
      after being added to the agent's cache.</p><p>Property: <code class="literal">com.sun.identity.agents.config.sso.cache.polling.interval</code></p><p>Hot swap: no</p></dd><dt><span class="term">User ID Parameter</span></dt><dd><p>Agent sets this value for User Id passed in the session from
      OpenAM to the REMOTE_USER server variable. Default: UserToken.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param</code></p></dd><dt><span class="term">User ID Parameter Type</span></dt><dd><p>User ID can be fetched from either SESSION or LDAP attributes.
      Default: <code class="literal">SESSION</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.userid.param.type</code></p></dd><dt><span class="term">Fetch Policies from Root Resource</span></dt><dd><p>When enabled, the agent caches the policy decision of the
      resource and all resources from the root of the resource down. For
      example, if the resource is <code class="literal">http://host/a/b/c</code>, then
      the root of the resource is <code class="literal">http://host/</code>. This setting
      can be useful when a client is expect to access multiple resources on the
      same path. Yet, caching can be expensive if very many policies are
      defined for the root resource.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fetch.from.root.resource</code></p><p>Default: false</p><p>Hot swap: no</p></dd><dt><span class="term">Retrieve Client Hostname</span></dt><dd><p>When enabled, get the client hostname through DNS reverse lookup
      for use in policy evaluation. This setting can impact performance.</p><p>Property: <code class="literal">com.sun.identity.agents.config.get.client.host.name</code></p></dd><dt><span class="term">Policy Clock Skew</span></dt><dd><p>Time in seconds used adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Use this property to adjust for small time differences encountered
      despite use of a time synchronization service. When this property is
      not set and agent time is greater than OpenAM server time, the agent
      can make policy calls to the OpenAM server before the policy subject
      cache has expired, or you can see infinite redirection occur.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.clock.skew</code></p><p>Hot swap: no</p></dd><dt><span class="term">Realm</span></dt><dd><p>
      Realm where OpenAM starts policy evaluation for this policy agent.
     </p><p>
      Default: / (top level realm)
     </p><p>
      Edit this property when OpenAM should start policy evaluation
      in a realm other than the top level realm, <code class="literal">/</code>,
      when handling policy decision requests from this policy agent.
     </p><p>
      This property is recognized by OpenAM, not the policy agent.
     </p><p>
      Property: <code class="literal">org.forgerock.openam.agents.config.policy.evaluation.realm</code>
     </p><p>
      Hot swap: yes
     </p></dd><dt><span class="term">Application</span></dt><dd><p>
      Application where OpenAM looks for policies to evaluate
      for this policy agent.
     </p><p>
      Default: <code class="literal">iPlanetAMWebAgentService</code>
     </p><p>
      Edit this property when OpenAM should look for policies
      that belong to an application other than
      <code class="literal">iPlanetAMWebAgentService</code>
      when handling policy decision requests from this policy agent.
     </p><p>
      This property is recognized by OpenAM, not the policy agent.
     </p><p>
      Property: <code class="literal">org.forgerock.openam.agents.config.policy.evaluation.application</code>
     </p><p>
      Hot swap: yes
     </p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-misc-props"></a>5.5.5.&nbsp;Configuring Web Policy Agent Miscellaneous Properties</h3></div></div></div><a class="indexterm" name="d0e18352"></a><p>This section covers miscellaneous web agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist"><a name="web-agent-advice-handling-properties"></a><div class="variablelist-title">Advice Handling properties</div><dl class="variablelist"><dt><span class="term">Composite Advice Handling (Not yet in OpenAM console)</span></dt><dd><p>As of version 3.0.4, when set to <code class="literal">true</code>, the agent
      sends composite advice in the query (GET request) instead of sending it
      through a POST request.</p><p>Property: <code class="literal">com.sun.am.use_redirect_for_advice</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl class="variablelist"><dt><span class="term">Agent Locale</span></dt><dd><p>The default locale for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="web-agent-anonymous-user-properties"></a><div class="variablelist-title">Anonymous user properties</div><dl class="variablelist"><dt><span class="term">Anonymous User</span></dt><dd><p>Enable or disable REMOTE_USER processing for anonymous users.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.enable</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-cookie-processing-properties"></a><div class="variablelist-title">Cookie Processing properties</div><dl class="variablelist"><dt><span class="term">Encode special characters in Cookies</span></dt><dd><p>When enabled, use URL encoding for special characters in cookies.
      This is useful when profile, session, and response attributes contain
      special characters, and the attributes fetch mode is set to
      <code class="literal">HTTP_COOKIE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.cookie.special.chars.enable</code></p></dd><dt><span class="term">Profile Attributes Cookie Prefix</span></dt><dd><p>Sets cookie prefix in the attributes headers. Default:
      <code class="literal">HTTP_</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.prefix</code></p></dd><dt><span class="term">Profile Attributes Cookie Maxage</span></dt><dd><p>Maximum age in seconds of custom cookie headers. Default:
      300.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.cookie.maxage</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-url-handling-properties"></a><div class="variablelist-title">URL Handling properties</div><dl class="variablelist"><dt><span class="term">URL Comparison Case Sensitivity Check</span></dt><dd><p>When enabled, enforces case insensitivity in both policy and
      not enforced URL evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.url.comparison.case.ignore</code></p></dd><dt><span class="term">Encode URL's Special Characters</span></dt><dd><p>When enabled, encodes the URL which has special characters before
      doing policy evaluation.</p><p>Property: <code class="literal">com.sun.identity.agents.config.encode.url.special.chars.enable</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-ignore-naming-url-properties"></a><div class="variablelist-title">Ignore Naming URL properties</div><dl class="variablelist"><dt><span class="term">Ignore Preferred Naming URL in Naming Request</span></dt><dd><p>When enabled, do not send a preferred naming URL in the naming request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.preferred.naming.url</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-invalid-url-properties"></a><div class="variablelist-title">Invalid URL properties (Not yet in OpenAM console)</div><dl class="variablelist"><dt><span class="term">Invalid URL Regular Expression</span></dt><dd><p>Use a <a class="link" href="http://www.pcre.org/" target="_blank">Perl-compatible regular expression</a> to filter out invalid
      request URLs. The policy agent reject requests to invalid URLs
      with HTTP 403 Forbidden status without further processing. Use Advanced
      &gt; Custom Properties to set this in the agent profile.</p><p>For example, to filter out URLs containing the symbols in the list
      ./, /., /, ., ,\, %00-%1f, %7f-%ff, %25, %2B, %2C, %7E, .info, use the
      following setting.</p><pre class="brush: ini;">com.forgerock.agents.agent.invalid.url.regex= \
     ^((?!(|/\.|\./||*|\.info|%25|%2B|%2C|%[0-1][0-9a-fA-F]|%[7-9a-fA-F][0-9a-fA-F])).)$</pre></dd></dl></div><div class="variablelist"><a name="web-agent-ignore-server-check-properties"></a><div class="variablelist-title">Ignore Server Check properties</div><dl class="variablelist"><dt><span class="term">Ignore Server Check</span></dt><dd><p>When enabled, do not check whether OpenAM is up before doing a
      302 redirect.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.server.check</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl class="variablelist"><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><div class="note"><h3 class="title">Note</h3><p>This setting is not supported by the Varnish Cache agent.</p></div><p>For example, if the not enforced list includes
      <code class="literal">http://host/*.gif</code>, then stripping path info from the
      request URI prevents access to <code class="literal">http://host/index.html</code>
      by using <code class="literal">http://host/index.html?hack.gif</code>.</p><p>However, when a web server is configured as a reverse proxy for a
      J2EE application server, the path info is interpreted to map a resource
      on the proxy server rather than the application server. This prevents the
      not enforced list or the policy from being applied to the part of the URI
      below the application server path if a wildcard character is used.</p><p>For example, if the not enforced list includes
      <code class="literal">http://host/webapp/servcontext/*</code> and the request URL is
      <code class="literal">http://host/webapp/servcontext/example.jsp</code>, the path
      info is <code class="literal">/servcontext/example.jsp</code> and the resulting
      request URL with path info stripped is
      <code class="literal">http://host/webapp/</code>, which does not match the
      not enforced list. Thus when this property is enabled, path info is
      not stripped from the request URL even if there is a wildcard in the not
      enforced list or policy.</p><p>Make sure therefore when this property is enabled that there is
      nothing following the wildcard in the not enforced list or policy.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-multi-byte-properties"></a><div class="variablelist-title">Multi-byte Enable properties</div><dl class="variablelist"><dt><span class="term">Native Encoding of Profile Attributes</span></dt><dd><p>When enabled, the agent encodes the LDAP header values in the
      default encoding of operating system locale. When disabled, the agent
      uses UTF-8.</p><p>Property: <code class="literal">com.sun.identity.agents.config.convert.mbyte.enable</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-goto-parameter-name-properties"></a><div class="variablelist-title">Goto Parameter Name properties</div><dl class="variablelist"><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
       = http://openam.example.com:8080/openam/cdcservlet?goto=
       http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcservlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
       http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Agent properties</div><dl class="variablelist"><dt><span class="term">Anonymous User Default Value</span></dt><dd><p>User ID of unauthenticated users. Default:
      <code class="literal">anonymous</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.anonymous.user.id</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-web-pa-advanced-props"></a>5.5.6.&nbsp;Configuring Web Policy Agent Advanced Properties</h3></div></div></div><a class="indexterm" name="d0e18620"></a><p>This section covers advanced web agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Web &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist"><a name="web-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies or load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl class="variablelist"><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-lb-properties"></a><div class="variablelist-title">Load Balancer properties</div><dl class="variablelist"><dt><span class="term">Load Balancer Setup</span></dt><dd><p>Enable if a load balancer is used for OpenAM services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.balancer.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Override Request URL Protocol</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the protocol users use is different
      from the protocol the agent uses. When enabled, the protocol is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.protocol</code></p></dd><dt><span class="term">Override Request URL Host</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the host name users use is different
      from the host name the agent uses. When enabled, the host is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.host</code></p></dd><dt><span class="term">Override Request URL Port</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the port users use is different
      from the port the agent uses. When enabled, the port is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.port</code></p></dd><dt><span class="term">Override Notification URL</span></dt><dd><p>Enable if the agent is sitting behind a SSL/TLS off-loader,
      load balancer, or proxy such that the URL users use is different
      from the URL the agent uses. When enabled, the URL is overridden
      with the value from the Agent Deployment URI Prefix (property:
      <code class="literal">com.sun.identity.agents.config.agenturi.prefix</code>).</p><p>Property: <code class="literal">com.sun.identity.agents.config.override.notification.url</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl class="variablelist"><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation. This feature is available in
      the Apache 2.2, Microsoft IIS 6, Microsoft IIS 7, and Sun Java System
      Web Server web policy agents as of version 3.0.3.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">POST Data Entries Cache Period</span></dt><dd><p>POST cache entry lifetime in minutes. Default: 10.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postcache.entry.lifetime</code></p></dd><dt><span class="term">POST Data Preservation Cookie Name (Not yet in OpenAM Console)</span></dt><dd><p>When HTTP POST data preservation is enabled, override properties
      are set to true, and the agent is behind a load balancer, then this
      property sets the name and value of the sticky cookie to use.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.lbcookie</code></p></dd><dt><span class="term">Post Data Preservation URI Prefix (Not yet in OpenAM Console)</span></dt><dd><p>If you run multiple web servers with policy agents behind a load
      balancer that directs traffic based on the request URI, and you need to
      preserve POST data, then set this property.</p><p>By default, policy agents use a dummy URL for POST data preservation,
      <code class="literal">http://<em class="replaceable"><code>agent.host</code></em>:<em class="replaceable"><code>port</code></em>/dummypost/sunpostpreserve</code>,
      to handle POST data across redirects to and from OpenAM. When you set this
      property, the policy agent prefixes the property value to the dummy URL
      path. In other words, when you set
      <code class="literal">com.forgerock.agents.config.pdpuri.prefix = app1</code>,
      the policy agent uses the dummy URL,
      <code class="literal">http://<em class="replaceable"><code>agent.host</code></em>:<em class="replaceable"><code>port</code></em>/app1/dummypost/sunpostpreserve</code>.</p><p>Next, use the prefix you set when you define load balancer URI
      rules. This ensures that clients end up being redirected to the policy
      agent that preserved the POST data.</p><p>Property: <code class="literal">com.forgerock.agents.config.pdpuri.prefix</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-sjsws-properties"></a><div class="variablelist-title">Sun Java System Proxy Server properties</div><dl class="variablelist"><dt><span class="term">Override Proxy Server's Host and Port</span></dt><dd><p>When enabled ignore the host and port settings.</p><p>Property: <code class="literal">com.sun.identity.agents.config.proxy.override.host.port</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="web-agent-iis-properties"></a><div class="variablelist-title">Microsoft IIS Server properties</div><dl class="variablelist"><dt><span class="term">Authentication Type</span></dt><dd><p>The agent should normally perform authentication, so this is not
      required. If necessary, set to <code class="literal">none</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.auth.type</code></p><p>Hot swap: no</p></dd><dt><span class="term">Replay Password Key</span></dt><dd><p>DES key for decrypting the basic authentication password in the
      session.</p><p>Property: <code class="literal">com.sun.identity.agents.config.replaypasswd.key</code></p></dd><dt><span class="term">Filter Priority</span></dt><dd><p>The loading priority of filter, DEFAULT, HIGH, LOW, or MEDIUM.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.filter.priority</code></p></dd><dt><span class="term">Filter configured with OWA</span></dt><dd><p>Enable if the IIS agent filter is configured for OWA.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable</code></p></dd><dt><span class="term">Change URL Protocol to https</span></dt><dd><p>Enable to avoid IE6 security pop-ups.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.change.protocol</code></p></dd><dt><span class="term">Idle Session Timeout Page URL</span></dt><dd><p>URL of the local idle session timeout page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.iis.owa.enable.session.timeout.url</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-domino-properties"></a><div class="variablelist-title">IBM Lotus Domino Server properties</div><dl class="variablelist"><dt><span class="term">Check User in Domino Database</span></dt><dd><p>When enabled, the agent checks whether the user exists in the
      Domino name database.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.check.name.database</code></p></dd><dt><span class="term">Use LTPA token</span></dt><dd><p>Enable if the agent needs to use LTPA Token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.enable</code></p></dd><dt><span class="term">LTPA Token Cookie Name</span></dt><dd><p>The name of the cookie that contains the LTPA token.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.cookie.name</code></p></dd><dt><span class="term">LTPA Token Configuration Name</span></dt><dd><p>The configuration name that the agent uses in order to employ the
      LTPA token mechanism.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.config.name</code></p></dd><dt><span class="term">LTPA Token Organization Name</span></dt><dd><p>The organization name to which the LTPA token belongs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.domino.ltpa.org.name</code></p></dd></dl></div><div class="variablelist"><a name="web-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl class="variablelist"><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-j2ee-policy-agent"></a>5.6.&nbsp;Configuring Java EE Policy Agents</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-global-props">5.6.1. Configuring Java EE Policy Agent Global Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-application-props">5.6.2. Configuring Java EE policy agent Application Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-sso-props">5.6.3. Configuring Java EE policy agent SSO Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-services-props">5.6.4. Configuring Java EE policy agent OpenAM Services Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-misc-props">5.6.5. Configuring Java EE policy agent Miscellaneous Properties</a></span></dt><dt><span class="section"><a href="chap-agents.html#configure-j2ee-pa-advanced-props">5.6.6. Configuring Java EE policy agent Advanced Properties</a></span></dt></dl></div><a class="indexterm" name="d0e18975"></a><p>When you create a Java EE policy agent profile and install the agent,
  you can choose to store the agent configuration centrally and configure
  the agent through OpenAM console. Alternatively, you can choose to store
  the agent configuration locally and configure the agent by changing
  values in the properties file. This section covers centralized configuration,
  indicating the corresponding properties for use in a local configuration
  file where applicable.

  <a href="#ftn.d0e18982" class="footnote" name="d0e18982"><sup class="footnote">[7]</sup></a></p><div class="tip"><h3 class="title">Tip</h3><p>To show the agent properties in configuration file format that
   correspond to what you see in the console, click Export Configuration
   after editing agent properties.</p></div><p>After changing properties specified as "Hot swap: no" you must
  restart the application server or web server, or the agent's container.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-global-props"></a>5.6.1.&nbsp;Configuring Java EE Policy Agent Global Properties</h3></div></div></div><p>This section covers global Java EE agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   Java EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Global.</p><div class="variablelist"><a name="j2ee-agent-profile-properties"></a><div class="variablelist-title">Profile properties</div><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured Java EE agent group
      in order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
      installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Agent Notification URL</span></dt><dd><p>URL used by agent to register notification listeners.</p><p>Property: <code class="literal">com.sun.identity.client.notification.url</code></p><p>Hot swap: no</p></dd><dt><span class="term">Location of Agent Configuration Repository</span></dt><dd><p>Indicates agent's configuration located either on agent's host or
      centrally on OpenAM server.</p><p>If you change this to a local configuration, you can no longer
      manage the policy agent configuration through OpenAM console.</p><p>Property: <code class="literal">com.sun.identity.agents.config.repository.location</code></p></dd><dt><span class="term">Configuration Reload Interval</span></dt><dd><p>Interval in seconds to fetch agent configuration from OpenAM. Used
      if notifications are disabled. Default: 0</p><p>Property: <code class="literal">com.sun.identity.agents.config.load.interval</code></p></dd><dt><span class="term">Agent Configuration Change Notification</span></dt><dd><p>Enable agent to receive notification messages from OpenAM server for
      configuration changes.</p><p>Property: <code class="literal">com.sun.identity.agents.config.change.notification.enable</code></p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>The agent root URL for CDSSO. The valid value is in the format
      <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
      where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
      such as <code class="literal">http</code> or <code class="literal">https</code>,
      <em class="replaceable"><code>hostname</code></em> represents the host name of the
      system where the agent resides, and <em class="replaceable"><code>port</code></em>
      represents the port number on which the agent is installed.
      The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
      the virtual host names to this list as well. OpenAM checks that
      <code class="literal">goto</code> URLs match one of the agent root URLs for
      CDSSO.</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl class="variablelist"><dt><span class="term">Agent Filter Mode</span></dt><dd><p>Specifies how the agent filters requests to protected web
      applications. The global value functions as a default, and applies for
      protected applications that do not have their own filter settings.
      Valid settings include the following.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ALL</code></span></dt><dd><p>Enforce both the Java EE policy defined for the web container where
         the protected application runs, and also OpenAM policies.</p><p>When setting the filter mode to <code class="literal">ALL</code>, set the
         Map Key, but do not set any Corresponding Map Value.</p></dd><dt><span class="term"><code class="literal">J2EE_POLICY</code></span></dt><dd><p>Enforce only the J2EE policy defined for the web container where
         the protected application runs.</p></dd><dt><span class="term"><code class="literal">NONE</code></span></dt><dd><p>Do not enforce policies to protect resources. In other words,
         turn off access management. Not for use in production.</p></dd><dt><span class="term"><code class="literal">SSO_ONLY</code></span></dt><dd><p>Enforce only authentication, not policies.</p></dd><dt><span class="term"><code class="literal">URL_POLICY</code></span></dt><dd><p>Enforce only URL resource-based policies defined in OpenAM.</p><p>When setting the filter mode to <code class="literal">URL_POLICY</code>,
         set the Map Key to the application name and the Corresponding Map
         Value to <code class="literal">URL_POLICY</code>.</p></dd></dl></div><p>Property: <code class="literal">com.sun.identity.agents.config.filter.mode</code></p><p>Hot swap: no</p></dd><dt><span class="term">HTTP Session Binding</span></dt><dd><p>When enabled the agent invalidates the HTTP session upon login
      failure, when the user has no SSO session, or when the principal user
      name does not match the SSO user name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.httpsession.binding</code></p></dd><dt><span class="term">Login Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum
      number of failed login attempts allowed during a single browser session,
      after which the agent blocks requests from the user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.attempt.limit</code></p></dd><dt><span class="term">Custom Response Header</span></dt><dd><p>Specifies the custom headers the agent sets for the client. The
      key is the header name. The value is the header value.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.header</code></p><p>For example,
      <code class="literal">com.sun.identity.agents.config.response.header[Cache-Control]=no-cache</code>.</p></dd><dt><span class="term">Redirect Attempt Limit</span></dt><dd><p>When set to a value other than zero, this defines the maximum number
      of redirects allowed for a single browser session, after which the agent
      blocks the request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.attempt.limit</code></p></dd><dt><span class="term">Agent Debug Level</span></dt><dd><p>Default is <code class="literal">Error</code>. Increase to
      <code class="literal">Message</code> for fine-grained detail.</p><p>Property: <code class="literal">com.iplanet.services.debug.level</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-user-mapping-properties"></a><div class="variablelist-title">User Mapping properties</div><dl class="variablelist"><dt><span class="term">User Mapping Mode</span></dt><dd><p>Specifies the mechanism used to determine the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.mapping.mode</code></p></dd><dt><span class="term">User Attribute Name</span></dt><dd><p>Specifies the data store attribute that contains the user ID.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.attribute.name</code></p></dd><dt><span class="term">User Principal Flag</span></dt><dd><p>When enabled, OpenAM uses both the principal user name and also the
      user ID for authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.principal</code></p></dd><dt><span class="term">User Token Name</span></dt><dd><p>Specifies the session property name for the authenticated user's
      ID. Default: <code class="literal">UserToken</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.user.token</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-audit-properties"></a><div class="variablelist-title">Audit properties</div><dl class="variablelist"><dt><span class="term">Audit Access Types</span></dt><dd><p>Types of messages to log based on user URL access attempts.</p><p>Property: <code class="literal">com.sun.identity.agents.config.audit.accesstype</code></p><p>Valid values for the configuration file property include
      <code class="literal">LOG_NONE</code>, <code class="literal">LOG_ALLOW</code>,
      <code class="literal">LOG_DENY</code>, and <code class="literal">LOG_BOTH</code>.</p></dd><dt><span class="term">Audit Log Location</span></dt><dd><p>Specifies where audit messages are logged. By default, audit
      messages are logged remotely.</p><p>Property: <code class="literal">com.sun.identity.agents.config.log.disposition</code></p><p>Valid values for the configuration file property include
      <code class="literal">REMOTE</code>, <code class="literal">LOCAL</code>, and
      <code class="literal">ALL</code>.</p></dd><dt><span class="term">Remote Log Filename</span></dt><dd><p>Name of file stored on OpenAM server that contains agent audit
      messages if log location is remote or all.</p><p>Property: <code class="literal">com.sun.identity.agents.config.remote.logfile</code></p><p>Hot swap: no</p></dd><dt><span class="term">Rotate Local Audit Log</span></dt><dd><p>When enabled, audit log files are rotated when reaching the
      specified size.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.rotate</code></p></dd><dt><span class="term">Local Audit Log Rotation Size</span></dt><dd><p>Beyond this size limit in bytes the agent rotates the local audit
      log file if rotation is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.local.log.size</code></p><p>Default: 50 MB</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-fqdn-properties"></a><div class="variablelist-title">Fully Qualified Domain Name Checking properties</div><dl class="variablelist"><dt><span class="term">FQDN Check</span></dt><dd><p>Enables checking of FQDN default value and FQDN map values.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code></p></dd><dt><span class="term">FQDN Default</span></dt><dd><p>Fully qualified domain name that the users should use in order to
      access resources.</p><p>This property ensures that when users access protected resources
      on the web server without specifying the FQDN, the agent can redirect
      the users to URLs containing the correct FQDN.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.default</code></p></dd><dt><span class="term">FQDN Virtual Host Map</span></dt><dd><p>Enables virtual hosts, partial hostname and IP address to access
      protected resources. Maps invalid or virtual name keys to valid FQDN
      values so the agent can properly redirect users and the agents receive
      cookies belonging to the domain.</p><p>To map <code class="literal">myserver</code> to
      <code class="literal">myserver.mydomain.example</code>, enter
      <code class="literal">myserver</code> in the Map Key field, and enter
      <code class="literal">myserver.mydomain.example</code> in the Corresponding Map Value
      field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.fqdn.mapping[myserver]= myserver.mydomain.example</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.fqdn.mapping</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-application-props"></a>5.6.2.&nbsp;Configuring Java EE policy agent Application Properties</h3></div></div></div><p>This section covers application J2EE agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Application.</p><div class="variablelist"><a name="j2ee-agent-login-processing-properties"></a><div class="variablelist-title">Login Processing properties</div><dl class="variablelist"><dt><span class="term">Login Form URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-login-page</code> element, such as
      <code class="literal">/myApp/jsp/login.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.form</code></p></dd><dt><span class="term">Login Error URI</span></dt><dd><p>Specifies the list of absolute URIs corresponding to a protected
      application's <code class="filename">web.xml</code>
      <code class="literal">form-error-page</code> element, such as
      <code class="literal">/myApp/jsp/error.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.error.uri</code></p></dd><dt><span class="term">Use Internal Login</span></dt><dd><p>When enabled, the agent uses the internal default content file
      for the login.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.use.internal</code></p></dd><dt><span class="term">Login Content File Name</span></dt><dd><p>Full path name to the file containing custom login content when
      Use Internal Login is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.content.file</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-logout-processing-properties"></a><div class="variablelist-title">Logout Processing properties</div><dl class="variablelist"><dt><span class="term">Application Logout Handler</span></dt><dd><p>Specifies how logout handlers map to specific applications. The key
      is the web application name. The value is the logout handler class.</p><p>To set a global logout handler for applications without other
      logout handlers defined, leave the key empty and set the value to the
      global logout handler class name,
      <code class="literal">GlobalApplicationLogoutHandler</code>.</p><p>To set a logout handler for a specific application, set the key
      to the name of the application, and the value to the logout handler class
      name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.application.handler</code></p></dd><dt><span class="term">Application Logout URI</span></dt><dd><p>Specifies request URIs that indicate logout events. The key is the
      web application name. The value is the application logout URI.</p><p>To set a global logout URI for applications without other logout
      URIs defined, leave the key empty and set the value to the global logout
      URI, <code class="literal">/logout.jsp</code>.</p><p>To set a logout URI for a specific application, set the key to the
      name of the application, and the value to the application logout
      page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.uri</code></p></dd><dt><span class="term">Logout Request Parameter</span></dt><dd><p>Specifies parameters in the HTTP request that indicate logout
      events. The key is the web application name. The value is the logout
      request parameter.</p><p>To set a global logout request parameter for applications without
      other logout request parameters defined, leave the key empty and set the
      value to the global logout request parameter,
      <code class="literal">logoutparam</code>.</p><p>To set a logout request parameter for a specific application, set
      the key to the name of the application, and the value to the application
      logout request parameter, such as <code class="literal">logoutparam</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.request.param</code></p></dd><dt><span class="term">Logout Introspect Enabled</span></dt><dd><p>When enabled, the agent checks the HTTP request body to locate the
      Logout Request Parameter you set.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.introspect.enabled</code></p></dd><dt><span class="term">Logout Entry URI</span></dt><dd><p>Specifies the URIs to return after successful logout and subsequent
      authentication. The key is the web application name. The value is the
      URI to return.</p><p>To set a global logout entry URI for applications without other
      logout entry URIs defined, leave the key empty and set the value to the
      global logout entry URI, <code class="literal">/welcome.html</code>.</p><p>To set a logout entry URI for a specific application, set the key
      to the name of the application, and the value to the application
      logout entry URI, such as <code class="literal">/myApp/welcome.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.entry.uri</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-access-denied-uri-processing-properties"></a><div class="variablelist-title">Access Denied URI Processing properties</div><dl class="variablelist"><dt><span class="term">Resource Access Denied URI</span></dt><dd><p>Specifies the URIs of custom pages to return when access is denied.
      The key is the web application name. The value is the custom URI.</p><p>To set a global custom access denied URI for applications without
      other custom access denied URIs defined, leave the key empty and set the
      value to the global custom access denied URI,
      <code class="literal">/sample/accessdenied.html</code>.</p><p>To set a custom access denied URI for a specific application, set
      the key to the name of the application, and the value to the application
      access denied URI, such as <code class="literal">/myApp/accessdenied.html</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.access.denied.uri</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-not-enforced-uri-properties"></a><div class="variablelist-title">Not Enforced URI Processing properties</div><dl class="variablelist"><dt><span class="term">Not Enforced URIs</span></dt><dd><p>List of URIs for which no authentication is required, and the agent
      does not protect access. You can use wildcards to define a pattern for a
      URI.</p><p>The <code class="literal">*</code> wildcard matches all characters except
      question mark (<code class="literal">?</code>), cannot be escaped, and spans
      multiple levels in a URI. Multiple forward slashes do not match a
      single forward slash, so <code class="literal">*</code> matches
      <code class="literal">mult/iple/dirs</code>, yet <code class="literal">mult/*/dirs</code>
      does not match <code class="literal">mult/dirs</code>.</p><p>The <code class="literal">-*-</code> wildcard matches all characters except
      forward slash (<code class="literal">/</code>) or question mark
      (<code class="literal">?</code>), and cannot be escaped. As it does not match
      <code class="literal">/</code>, <code class="literal">-*-</code> does not span multiple
      levels in a URI.</p><p>OpenAM does not let you mix <code class="literal">*</code> and
      <code class="literal">-*-</code> in the same URI.</p><p>Examples include <code class="literal">/logout.html</code>,
      <code class="literal">/images/*</code>, <code class="literal">/css/-*-</code>, and
      <code class="literal">/*.jsp?locale=*</code>.</p><p>Trailing forward slashes are not recognized as part of a resource
      name. Therefore <code class="literal">/images//</code> and
      <code class="literal">/images</code> are equivalent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri</code></p></dd><dt><span class="term">Invert Not Enforced URIs</span></dt><dd><p>Only enforce not enforced list of URIs. In other words, enforce
      policy only for those URIs and patterns specified in the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.invert</code></p></dd><dt><span class="term">Not Enforced URIs Cache Enabled</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced URI
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.enable</code></p></dd><dt><span class="term">Not Enforced URIs Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      URIs cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.uri.cache.size</code></p><p>Default: 1000</p></dd><dt><span class="term">Refresh Session Idle Time</span></dt><dd><p>When enabled, the agent reset the session idle time when granting
      access to a not enforced URI, prolonging the time before the user must
      authenticate again.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.refresh.session.idletime</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-not-enforced-ip-properties"></a><div class="variablelist-title">Not Enforced IP Processing properties</div><dl class="variablelist"><dt><span class="term">Not Enforced Client IP List</span></dt><dd><p>No authentication and authorization are required for the requests
      coming from these client IP addresses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip</code></p><div class="note"><h3 class="title">Note</h3><p>
       Loopback addresses are not considered valid IPs on the Not Enforced IP list.
       If specified, the policy agent ignores the loopback address.
      </p></div></dd><dt><span class="term">Not Enforced IP Invert List</span></dt><dd><p>Only enforce the not enforced list of IP addresses. In other words,
      enforce policy only for those client addresses and patterns specified in
      the list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.invert</code></p></dd><dt><span class="term">Not Enforced IP Cache Flag</span></dt><dd><p>When enabled, the agent caches evaluation of the not enforced IP
      list.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.enable</code></p></dd><dt><span class="term">Not Enforced IP Cache Size</span></dt><dd><p>When caching is enabled, this limits the number of not enforced
      addresses cached.</p><p>Property: <code class="literal">com.sun.identity.agents.config.notenforced.ip.cache.size</code></p><p>Default: 1000</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-profile-attributes-processing-properties"></a><div class="variablelist-title">Profile Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Profile Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, profile attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, profile attributes are part
      of the HTTP request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.fetch.mode</code></p></dd><dt><span class="term">Profile Attribute Map</span></dt><dd><p>Maps the profile attributes to HTTP headers for the currently
      authenticated user. Map Keys are attribute names, and Map Values
      are HTTP header names. The user profile can be stored in LDAP or any
      other arbitrary data store.
     </p><p>To populate the value of profile attribute CN under
      <code class="literal">CUSTOM-Common-Name</code>: enter CN in the Map Key field,
      and enter <code class="literal">CUSTOM-Common-Name</code> in the Corresponding
      Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping[cn]=CUSTOM-Common-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">common-name</code> becomes
      <code class="literal">HTTP_COMMON_NAME</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.profile.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-response-attributes-processing-properties"></a><div class="variablelist-title">Response Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Response Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, response attributes are introduced into
      the cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, response attributes are part
      of the HTTP request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.fetch.mode</code></p></dd><dt><span class="term">Response Attribute Map</span></dt><dd><p>Maps the policy response attributes to HTTP headers for the
      currently authenticated user. The response attribute is
      the attribute in the policy response to be fetched.</p><p>To populate the value of response attribute <code class="literal">uid</code>
      under <code class="literal">CUSTOM-User-Name</code>: enter <code class="literal">uid</code>
      in the Map Key field, and enter <code class="literal">CUSTOM-User-Name</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.response.attribute.mapping[uid]=Custom-User-Name</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">response-attr-one</code> becomes
      <code class="literal">HTTP_RESPONSE_ATTR_ONE</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.response.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-common-attributes-fetching-properties"></a><div class="variablelist-title">Common Attributes Fetching Processing properties</div><dl class="variablelist"><dt><span class="term">Cookie Separator Character</span></dt><dd><p>Specifies the separator for multiple values of the same attribute
      when it is set as a cookie. Default: <code class="literal">|</code> (also known as the vertical bar character).</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.separator</code></p></dd><dt><span class="term">Fetch Attribute Date Format</span></dt><dd><p>Specifies the <code class="literal">java.text.SimpleDateFormat</code> of date
      attribute values used when an attribute is set in an HTTP header. Default:
      <code class="literal">EEE, d MMM yyyy hh:mm:ss z</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.date.format</code></p></dd><dt><span class="term">Attribute Cookie Encode</span></dt><dd><p>When enabled, attribute values are URL encoded before being set as
      a cookie.</p><p>Property: <code class="literal">com.sun.identity.agents.config.attribute.cookie.encode</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-session-attributes-processing-properties"></a><div class="variablelist-title">Session Attributes Processing properties</div><dl class="variablelist"><dt><span class="term">Session Attribute Fetch Mode</span></dt><dd><p>When set to <code class="literal">HTTP_COOKIE</code> or
      <code class="literal">HTTP_HEADER</code>, session attributes are introduced into the
      cookie or the headers, respectively. When set to
      <code class="literal">REQUEST_ATTRIBUTE</code>, session attributes are part
      of the HTTP request.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.fetch.mode</code></p></dd><dt><span class="term">Session Attribute Map</span></dt><dd><p>Maps session attributes to HTTP headers for the currently
      authenticated user. The session attribute is the attribute in the session
      to be fetched.</p><p>To populate the value of session attribute
      <code class="literal">UserToken</code> under <code class="literal">CUSTOM-userid</code>:
      enter <code class="literal">UserToken</code> in the Map Key field, and enter
      <code class="literal">CUSTOM-userid</code> in
      the Corresponding Map Value field. This corresponds to
      <code class="literal">com.sun.identity.agents.config.session.attribute.mapping[UserToken]=CUSTOM-userid</code>.</p><p>In most cases, in a destination application where an HTTP header
      name shows up as a request header, it is prefixed by
      <code class="literal">HTTP_</code>, lower case letters become upper case, and
      hyphens (<code class="literal">-</code>) become underscores (<code class="literal">_</code>).
      For example, <code class="literal">success-url</code> becomes
      <code class="literal">HTTP_SUCCESS_URL</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.session.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-privilege-attributes-properties"></a><div class="variablelist-title">Privilege Attributes Processing properties</div><p>Privileged attributes are sued when the agent is running in
    <code class="literal">ALL</code> or <code class="literal">J2EE_POLICY</code> filter mode.
    Privileged attributes contain the list of declarative Java EE roles that the
    user can have.
   </p><dl class="variablelist"><dt><span class="term">Default Privileged Attribute</span></dt><dd><p>Specifies that every authenticated user
      with a valid OpenAM session will have the
      <code class="literal">AUTHENTICATED_USERS</code> role.</p><p>Property: <code class="literal">com.sun.identity.agents.config.default.privileged.attribute</code></p></dd><dt><span class="term">Privileged Attribute Type</span></dt><dd><p>Specifies the group and role memberships that will be turned into roles for each
      user.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.type</code></p></dd><dt><span class="term">Privileged Attributes To Lower Case</span></dt><dd><p>Specifies how privileged attribute types should be converted to
      lower case.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.tolowercase</code></p></dd><dt><span class="term">Privileged Session Attribute</span></dt><dd><p>Specifies the list of session property names when an authenticated
      user's roles are store within a session property.
     </p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.session.attribute</code></p></dd><dt><span class="term">Enable Privileged Attribute Mapping</span></dt><dd><p>When enabled, lets you use Privileged Attribute Mapping.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.mapping.enable</code></p></dd><dt><span class="term">Privileged Attribute Mapping</span></dt><dd><p>OpenAM allows original attribute values to be mapped to other
      values. For example, you can map UUIDs to principal names in roles
      specified in a web application's deployment descriptor. For example, to
      map the UUID <code class="literal">id=employee,ou=group,o=openam</code> to the
      principal name <code class="literal">am_employee_role</code> in the deployment
      descriptor, set the key to
      <code class="literal">id=employee,ou=group,o=openam</code>, and the value to
      <code class="literal">am_employee_role</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.privileged.attribute.mapping</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-custom-authentication-properties"></a><div class="variablelist-title">Custom Authentication Processing properties</div><dl class="variablelist"><dt><span class="term">Custom Authentication Handler</span></dt><dd><p>Specifies custom authentication handler classes for users
      authenticated with the application server. The key is the web application
      name and the value is the authentication handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.auth.handler</code></p></dd><dt><span class="term">Custom Logout Handler</span></dt><dd><p>Specifies custom logout handler classes to log users out of the
      application server. The key is the web application name and the value is
      the logout handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.handler</code></p></dd><dt><span class="term">Custom Verification Handler</span></dt><dd><p>Specifies custom verification classes to validate user credentials
      with the local user repository. The key is the web application name and
      the value is the validation handler class name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.verification.handler</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-sso-props"></a>5.6.3.&nbsp;Configuring Java EE policy agent SSO Properties</h3></div></div></div><p>This section covers SSO J2EE agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; SSO</p><div class="variablelist"><a name="j2ee-agent-cookie-properties"></a><div class="variablelist-title">Cookie properties</div><dl class="variablelist"><dt><span class="term">Cookie Name</span></dt><dd><p>Name of the SSO Token cookie used between the OpenAM server and
      the agent. Default: <code class="literal">iPlanetDirectoryPro</code>.</p><p>Property: <code class="literal">com.iplanet.am.cookie.name</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-caching-properties"></a><div class="variablelist-title">Caching properties</div><dl class="variablelist"><dt><span class="term">SSO Cache Enable</span></dt><dd><p>When enabled, the agent exposes SSO Cache through the agent SDK
      APIs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.amsso.cache.enable</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-cdsso-properties"></a><div class="variablelist-title">Cross Domain SSO properties</div><dl class="variablelist"><dt><span class="term">Cross Domain SSO</span></dt><dd><p>Enables Cross Domain Single Sign On.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.enable</code></p></dd><dt><span class="term">CDSSO Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to process CDSSO requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.redirect.uri</code></p></dd><dt><span class="term">CDSSO Servlet URL</span></dt><dd><p>List of URLs of the available CDSSO controllers that the agent can
      use for CDSSO processing. For example,
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code></p></dd><dt><span class="term">CDSSO Clock Skew</span></dt><dd><p>When set to a value other than zero, specifies the clock skew in
      seconds that the agent accepts when determining the validity of the CDSSO
      authentication response assertion.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.clock.skew</code></p></dd><dt><span class="term">CDSSO Trusted ID Provider</span></dt><dd><p>Specifies the list of OpenAM servers or identity providers the
      agent trusts when evaluating CDC Liberty Responses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.trusted.id.provider</code></p></dd><dt><span class="term">CDSSO Secure Enable</span></dt><dd><p>When enabled, the agent marks the SSO Token cookie as secure, thus
      the cookie is only transmitted over secure connections.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.secure.enable</code></p></dd><dt><span class="term">CDSSO Domain List</span></dt><dd><p>List of domains, such as <code class="literal">.example.com</code>, in which
      cookies have to be set in CDSSO.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cdsso.domain</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-cookie-reset-properties"></a><div class="variablelist-title">Cookie Reset properties</div><dl class="variablelist"><dt><span class="term">Cookie Reset</span></dt><dd><p>When enabled, agent resets cookies in the response before
      redirecting to authentication.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.enable</code></p></dd><dt><span class="term">Cookie Reset Name List</span></dt><dd><p>List of cookies to reset if Cookie Reset is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.name</code></p></dd><dt><span class="term">Cookie Reset Domain Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie domain values when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.domain</code></p></dd><dt><span class="term">Cookie Reset Path Map</span></dt><dd><p>Specifies how names from the Cookie Reset Name List correspond to
      cookie paths when the cookie is reset.</p><p>Property: <code class="literal">com.sun.identity.agents.config.cookie.reset.path</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-services-props"></a>5.6.4.&nbsp;Configuring Java EE policy agent OpenAM Services Properties</h3></div></div></div><p>This section covers OpenAM services J2EE agent properties. After
   creating the agent profile, you access these properties in the OpenAM console
   under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt;
   Agents &gt; J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; OpenAM
   Services.</p><div class="variablelist"><a name="j2ee-agent-login-url-properties"></a><div class="variablelist-title">Login URL properties</div><dl class="variablelist"><dt><span class="term">OpenAM Login URL</span></dt><dd><p>OpenAM login page URL, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Login</code>, to
      which the agent redirects incoming users without sufficient credentials
      so that they can authenticate.
      If CDSSO is enabled, this property is not used, instead the CDCServlet URL
      will be used.
     </p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url</code></p></dd><dt><span class="term">OpenAM Conditional Login URL (Not yet in OpenAM console)</span></dt><dd><p>
  To conditionally redirect users based on the incoming request URL,
  set this property.
 </p><p>
  This takes the incoming request domain to match,
  a vertical bar ( <code class="literal">|</code> ),
  and then a comma-separated list of URLs to which to redirect incoming users.
 </p><p>
  If the domain before the vertical bar matches an incoming request URL,
  then the policy agent uses the list of URLs
  to determine how to redirect the user-agent.

  If the global property FQDN Check
  (<code class="literal">com.sun.identity.agents.config.fqdn.check.enable</code>)
  is enabled for the policy agent,
  then the policy agent iterates through the list
  until it finds an appropriate redirect URL that matches the FQDN check.

  Otherwise, the policy agent redirects the user-agent
  to the first URL in the list.
 </p><p>
  Property: <code class="literal">com.sun.identity.agents.config.conditional.login.url</code>
 </p><p>
  Examples:

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/UI/Login,
  http://openam2.example.com/openam/UI/Login</code>,

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/UI/Login,
  http://openam4.example.com/openam/UI/Login</code>
 </p><p>
  If CDSSO is enabled for the policy agent,
  then this property takes CDSSO Servlet URLs for its values
  (<code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url</code>),
  rather than OpenAM login URLs.
 </p><p>
  CDSSO examples:

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[0]=
  login.example.com|http://openam1.example.com/openam/cdcservlet,
  http://openam2.example.com/openam/cdcservlet</code>,

  <code class="literal">com.sun.identity.agents.config.conditional.login.url[1]=
  signin.example.com|http://openam3.example.com/openam/cdcservlet,
  http://openam4.example.com/openam/cdcservlet</code>
 </p></dd><dt><span class="term">Login URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Login
      URL list as the priority for Login and CDSSO URLs when handling
      failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.prioritized</code></p></dd><dt><span class="term">Login URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Login URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.enabled</code></p></dd><dt><span class="term">Login URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Login URLs when Login URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.login.url.probe.timeout</code></p><p>Default: 2000</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-logout-url-properties"></a><div class="variablelist-title">Logout URL properties</div><dl class="variablelist"><dt><span class="term">OpenAM Logout URL</span></dt><dd><p>OpenAM logout page URLs, such as
      <code class="literal">http://openam.example.com:8080/openam/UI/Logout</code>. The
      user is logged out of the OpenAM session when accessing these URLs.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url</code></p></dd><dt><span class="term">OpenAM Conditional Logout URL (Not yet in OpenAM console)</span></dt><dd><p>The values take the incoming request URL to match and a
      comma-separated list of URLs to which to redirect users logging
      out.</p><p>Property: <code class="literal">com.sun.identity.agents.config.conditional.logout.url</code></p><p>Example: <code class="literal">com.sun.identity.agents.config.conditional.logout.url[0]=
      logout.example.com|http://openam1.example.com/openam/UI/Logout,
      http://openam2.example.com/openam/UI/Logout</code></p></dd><dt><span class="term">Logout URL Prioritized</span></dt><dd><p>When enabled, OpenAM uses the priority defined in the OpenAM Logout
      URL list as the priority for Logout URLs when handling failover.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.prioritized</code></p></dd><dt><span class="term">Logout URL Probe</span></dt><dd><p>When enabled, OpenAM checks the availability of OpenAM Logout URLs
      before redirecting to them.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.enabled</code></p></dd><dt><span class="term">Logout URL Probe Timeout</span></dt><dd><p>Timeout period in milliseconds for OpenAM to determine whether
      to failover between Logout URLs when Logout URL Probe is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.logout.url.probe.timeout</code></p><p>Default: 2000</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-agent-authn-service-properties"></a><div class="variablelist-title">Authentication Service properties</div><dl class="variablelist"><dt><span class="term">OpenAM Authentication Service Protocol</span></dt><dd><p>Specifies the protocol used by the OpenAM authentication
      service.</p><p>Property: <code class="literal">com.iplanet.am.server.protocol</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Host Name</span></dt><dd><p>Specifies the OpenAM authentication service host name.</p><p>Property: <code class="literal">com.iplanet.am.server.host</code></p><p>Hot swap: no</p></dd><dt><span class="term">OpenAM Authentication Service Port</span></dt><dd><p>Specifies the OpenAM authentication service port number.</p><p>Property: <code class="literal">com.iplanet.am.server.port</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-policy-client-service-properties"></a><div class="variablelist-title">Policy Client Service properties</div><dl class="variablelist"><dt><span class="term">Realm</span></dt><dd><p>
      Realm where OpenAM starts policy evaluation for this policy agent.
     </p><p>
      Default: / (top level realm)
     </p><p>
      Edit this property when OpenAM should start policy evaluation
      in a realm other than the top level realm, <code class="literal">/</code>,
      when handling policy decision requests from this policy agent.
     </p><p>
      This property is recognized by OpenAM, not the policy agent.
     </p><p>
      Property: <code class="literal">org.forgerock.openam.agents.config.policy.evaluation.realm</code>
     </p><p>
      Hot swap: yes
     </p></dd><dt><span class="term">Application</span></dt><dd><p>
      Application where OpenAM looks for policies to evaluate
      for this policy agent.
     </p><p>
      Default: <code class="literal">iPlanetAMWebAgentService</code>
     </p><p>
      Edit this property when OpenAM should look for policies
      that belong to an application other than
      <code class="literal">iPlanetAMWebAgentService</code>
      when handling policy decision requests from this policy agent.
     </p><p>
      This property is recognized by OpenAM, not the policy agent.
     </p><p>
      Property: <code class="literal">org.forgerock.openam.agents.config.policy.evaluation.application</code>
     </p><p>
      Hot swap: yes
     </p></dd><dt><span class="term">Enable Policy Notifications</span></dt><dd><p>When enabled, OpenAM sends notification about changes to policy.</p><p>Property: <code class="literal">com.sun.identity.agents.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Polling Interval</span></dt><dd><p>Specifies the time in minutes after which the policy cache is
      refreshed.</p><p>Property: <code class="literal">com.sun.identity.agents.polling.interval</code></p><p>Default: 3</p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Cache Mode</span></dt><dd><p>Set to cache mode subtree when only a small number of policy rules
      are defined. For large numbers of policy rules, set to self.</p><p>Property: <code class="literal">com.sun.identity.policy.client.cacheMode</code></p><p>Default: self</p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Boolean Action Values</span></dt><dd><p>Specifies the values, such as <code class="literal">allow</code> and
      <code class="literal">deny</code>, that are associated with boolean policy
      decisions. The string is presented below in multiple lines for readability
      purposes.
     </p><p>Default: <code class="literal">iPlanetAMWebAgentService|GET|allow|deny:
      iPlanetAMWebAgentService|POST|allow|deny:
      iPlanetAMWebAgentService|PUT|allow|deny:
      iPlanetAMWebAgentService|DELETE|allow|deny:
      iPlanetAMWebAgentService|HEAD|allow|deny:
      iPlanetAMWebAgentService|OPTIONS|allow|deny:
      iPlanetAMWebAgentService|PATCH|allow|deny</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.booleanActionValues</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Resource Comparators</span></dt><dd><p>Specifies the comparators used for service names in policy.</p><p>Default: <code class="literal">serviceType=iPlanetAMWebAgentService|
      class=com.sun.identity.policy.plugins.HttpURLResourceName|wildcard=*|
      delimiter=/|caseSensitive=false</code></p><p>Property: <code class="literal">com.sun.identity.policy.client.resourceComparators</code></p><p>Hot swap: no</p></dd><dt><span class="term">Policy Client Clock Skew</span></dt><dd><p>Time in seconds used to adjust time difference between agent system
      and OpenAM. Clock skew in seconds = AgentTime - OpenAMServerTime.</p><p>Default: 10.</p><p>Property: <code class="literal">com.sun.identity.policy.client.clockSkew</code></p><p>Hot swap: no</p></dd><dt><span class="term">URL Policy Env GET Parameters</span></dt><dd><p>Specifies the list of HTTP GET request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.get.param</code></p></dd><dt><span class="term">URL Policy Env POST Parameters</span></dt><dd><p>Specifies the list of HTTP POST request parameters whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.post.param</code></p></dd><dt><span class="term">URL Policy Env jsession Parameters</span></dt><dd><p>Specifies the list of HTTP session attributes whose names and
      values the agents sets in the environment map for URL policy evaluation
      by the OpenAM server.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.env.jsession.param</code></p></dd><dt><span class="term">Use HTTP-Redirect for composite advice</span></dt><dd><p>When enabled, the remote policy client is configured to use
      HTTP-Redirect instead of HTTP-POST for composite advice.</p><p>Property: <code class="literal">com.sun.identity.agents.config.policy.advice.use.redirect</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-user-data-cache-service-properties"></a><div class="variablelist-title">User Data Cache Service properties</div><dl class="variablelist"><dt><span class="term">Enable Notification of User Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update user
      management data caches.</p><p>Property: <code class="literal">com.sun.identity.idm.remote.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">User Data Cache Polling Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached user management data.</p><p>Property: <code class="literal">com.iplanet.am.sdk.remote.pollingTime</code></p><p>Default: 1</p><p>Hot swap: no</p></dd><dt><span class="term">Enable Notification of Service Data Caches</span></dt><dd><p>When enabled, receive notification from OpenAM to update service
      configuration data caches.</p><p>Property: <code class="literal">com.sun.identity.sm.notification.enabled</code></p><p>Hot swap: no</p></dd><dt><span class="term">Service Data Cache Time</span></dt><dd><p>If notifications are not enabled and set to a value other than zero,
      specifies the time in minutes after which the agent polls to update
      cached service configuration data.</p><p>Property: <code class="literal">com.sun.identity.sm.cacheTime</code></p><p>Default: 1</p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-session-client-service-properties"></a><div class="variablelist-title">Session Client Service properties</div><dl class="variablelist"><dt><span class="term">Enable Client Polling</span></dt><dd><p>When enabled, the session client polls to update the session cache
      rather than relying on notifications from OpenAM.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.enable</code></p><p>Hot swap: no</p></dd><dt><span class="term">Client Polling Period</span></dt><dd><p>Specifies the time in seconds after which the session client
      requests an update from OpenAM for cached session information.</p><p>Property: <code class="literal">com.iplanet.am.session.client.polling.period</code></p><p>Default: 180</p><p>Hot swap: no</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-misc-props"></a>5.6.5.&nbsp;Configuring Java EE policy agent Miscellaneous Properties</h3></div></div></div><p>This section covers miscellaneous J2EE agent properties. After creating
   the agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Miscellaneous.</p><div class="variablelist"><a name="j2ee-agent-locale-properties"></a><div class="variablelist-title">Locale properties</div><dl class="variablelist"><dt><span class="term">Locale Language</span></dt><dd><p>The default language for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.language</code></p><p>Hot swap: no</p></dd><dt><span class="term">Locale Country</span></dt><dd><p>The default country for the agent.</p><p>Property: <code class="literal">com.sun.identity.agents.config.locale.country</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-port-check-properties"></a><div class="variablelist-title">Port Check Processing properties</div><dl class="variablelist"><dt><span class="term">Port Check Enable</span></dt><dd><p>When enabled, activate port checking, correcting requests on the
      wrong port.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.enable</code></p></dd><dt><span class="term">Port Check File</span></dt><dd><p>Specifies the name of the file containing the content to handle
      requests on the wrong port when port checking is enabled.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.file</code></p></dd><dt><span class="term">Port Check Setting</span></dt><dd><p>Specifies which ports correspond to which protocols. The agent uses
      the map when handling requests with invalid port numbers during port
      checking.</p><p>Property: <code class="literal">com.sun.identity.agents.config.port.check.setting</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-bypass-principal-list-properties"></a><div class="variablelist-title">Bypass Principal List properties</div><dl class="variablelist"><dt><span class="term">Bypass Principal List</span></dt><dd><p>Specifies a list of principals the agent bypasses for
      authentication and search purposes, such as <code class="literal">guest</code>
      or <code class="literal">testuser</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.bypass.principal</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-password-encryptor-properties"></a><div class="variablelist-title">Agent Password Encryptor properties</div><dl class="variablelist"><dt><span class="term">Encryption Provider</span></dt><dd><p>Specifies the agent's encryption provider class.</p><p>Default: <code class="literal">com.iplanet.services.util.JCEEncryption</code></p><p>Property: <code class="literal">com.iplanet.security.encryptor</code></p><p>Hot swap: no</p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-ignore-path-info-properties"></a><div class="variablelist-title">Ignore Path Info properties</div><dl class="variablelist"><dt><span class="term">Ignore Path Info in Request URL</span></dt><dd><p>When enabled, strip path info from the request URL while doing the
      Not Enforced List check, and URL policy evaluation. This is designed
      to prevent a user from accessing a URI by appending the matching pattern
      in the policy or not enforced list.</p><p>For example, if the not enforced list includes
      <code class="literal">/*.gif</code>, then stripping path info from the request URL
      prevents access to <code class="literal">http://host/index.html</code> by using
      <code class="literal">http://host/index.html?hack.gif</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.ignore.path.info</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-deprecated-properties"></a><div class="variablelist-title">Deprecated Client Browser User Agent Properties</div><dl class="variablelist"><dt><span class="term">Goto Parameter Name</span></dt><dd><p>Property used only when CDSSO is enabled. Only change the default
      value, <code class="literal">goto</code> when the login URL has a landing page
      specified such as,
      <code class="literal">com.sun.identity.agents.config.cdsso.cdcservlet.url
       = http://openam.example.com:8080/openam/cdcservlet?goto=
       http://www.example.com/landing.jsp</code>.
      The agent uses this parameter to append the original request URL
      to this cdcservlet URL. The landing page consumes this parameter to
      redirect to the original URL.</p><p>As an example, if you set this value to <code class="literal">goto2</code>,
      then the complete URL sent for authentication is
      <code class="literal">http://openam.example.com:8080/openam/cdcservlet?goto=
       http://www.example.com/landing.jsp?goto2=http://www.example.com/original.jsp</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.redirect.param</code></p></dd><dt><span class="term">Legacy User Agent Support Enable</span></dt><dd><p>When enabled, provide support for legacy browsers.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.support.enable</code></p></dd><dt><span class="term">Legacy User Agent List</span></dt><dd><p>List of header values that identify legacy browsers. Entries can
      use the wildcard character, <code class="literal">*</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.user.agent</code></p></dd><dt><span class="term">Legacy User Agent Redirect URI</span></dt><dd><p>Specifies a URI the agent uses to redirect legacy user agent
      requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.legacy.redirect.uri</code></p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configure-j2ee-pa-advanced-props"></a>5.6.6.&nbsp;Configuring Java EE policy agent Advanced Properties</h3></div></div></div><p>This section covers advanced J2EE agent properties. After creating the
   agent profile, you access these properties in the OpenAM console under
   Access Control &gt; <em class="replaceable"><code>Realm Name</code></em> &gt; Agents &gt;
   J2EE &gt; <em class="replaceable"><code>Agent Name</code></em> &gt; Advanced.</p><div class="variablelist"><a name="j2ee-agent-client-identification-properties"></a><div class="variablelist-title">Client Identification properties</div><p>If the agent is behind a proxy or load balancer, then the agent can
    get client IP and host name values from the proxy or load balancer. For
    proxies and load balancer that support providing the client IP and host
    name in HTTP headers, you can use the following properties.</p><p>When multiple proxies or load balancers sit in the request path,
    the header values can include a comma-separated list of values with the
    first value representing the client, as in
    <code class="literal">client,next-proxy,first-proxy</code>.</p><dl class="variablelist"><dt><span class="term">Client IP Address Header</span></dt><dd><p>HTTP header name that holds the IP address of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.ip.header</code></p></dd><dt><span class="term">Client Hostname Header</span></dt><dd><p>HTTP header name that holds the hostname of the client.</p><p>Property: <code class="literal">com.sun.identity.agents.config.client.hostname.header</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-web-service-processing-properties"></a><div class="variablelist-title">Web Service Processing properties</div><dl class="variablelist"><dt><span class="term">Web Service Enable</span></dt><dd><p>Enable web service processing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.enable</code></p></dd><dt><span class="term">Web Service End Points</span></dt><dd><p>Specifies a list of web application end points that represent web
      services.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.endpoint</code></p></dd><dt><span class="term">Web Service Process GET Enable</span></dt><dd><p>When enabled, the agent processes HTTP GET requests for web service
      endpoints.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.process.get.enable</code></p></dd><dt><span class="term">Web Service Authenticator</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceAuthenticator</code>,
      used to authenticate web service requests.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.authenticator</code></p></dd><dt><span class="term">Web Service Response Processor</span></dt><dd><p>Specifies a class implementing
      <code class="literal">com.sun.identity.agents.filter.IWebServiceResponseProcessor</code>,
      used to process web service responses.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.responseprocessor</code></p></dd><dt><span class="term">Web Service Internal Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an internal error fault
      for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.internalerror.content</code></p></dd><dt><span class="term">Web Service Authorization Error Content File</span></dt><dd><p>Specifies a file the agent uses to generate an authorization error
      fault for the client application.</p><p>Property: <code class="literal">com.sun.identity.agents.config.webservice.autherror.content</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-alternate-url-properties"></a><div class="variablelist-title">Alternate Agent URL properties</div><dl class="variablelist"><dt><span class="term">Alternative Agent Host Name</span></dt><dd><p>Specifies the host name of the agent protected server to show to
      client browsers, rather than the actual host name.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.host</code></p></dd><dt><span class="term">Alternative Agent Port Name</span></dt><dd><p>Specifies the port number of the agent protected server to show to
      client browsers, rather than the actual port number.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.port</code></p></dd><dt><span class="term">Alternative Agent Protocol</span></dt><dd><p>Specifies the protocol used to contact the agent from the browser
      client browsers, rather than the actual protocol used by the server.
      Either <code class="literal">http</code> or <code class="literal">https</code>.</p><p>Property: <code class="literal">com.sun.identity.agents.config.agent.protocol</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-jboss-properties"></a><div class="variablelist-title">JBoss Application Server properties</div><dl class="variablelist"><dt><span class="term">WebAuthentication Available</span></dt><dd><p>When enabled, allow programmatic authentication with the JBoss
      container using the WebAuthentication feature. This feature works only with
      certain versions of JBoss when the <code class="literal">J2EE_POLICY</code> or
      <code class="literal">ALL</code> filter mode is in use.</p><p>Property: <code class="literal">com.sun.identity.agents.config.jboss.webauth.available</code></p><div class="note"><h3 class="title">Note</h3><p>This setting is not necessary for the JBoss v7 agent.</p></div></dd></dl></div><div class="variablelist"><a name="j2ee-agent-xss-detection-properties"></a><div class="variablelist-title">Cross Site Scripting Detection properties</div><dl class="variablelist"><dt><span class="term">Possible XSS code elements</span></dt><dd><p>Specifies strings that, when found in the request, cause the agent
      to redirect the client to an error page.</p><p>Property: <code class="literal">com.sun.identity.agents.config.xss.code.elements</code></p></dd><dt><span class="term">XSS detection redirect URI</span></dt><dd><p>Maps applications to URIs of customized pages to which to redirect
      clients upon detection of XSS code elements.</p><p>For example, to redirect clients of MyApp to
      <code class="literal">/myapp/error.html</code>, enter MyApp as the Map Key and
      <code class="literal">/myapp/error.html</code> as the Corresponding Map
      Value.</p><p>Property: <code class="literal">com.sun.identity.agents.config.xss.redirect.uri</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-post-data-preservation-properties"></a><div class="variablelist-title">Post Data Preservation properties</div><dl class="variablelist"><dt><span class="term">POST Data Preservation</span></dt><dd><p>Enables HTTP POST data preservation, storing POST data before
      redirecting the browser to the login screen, and then autosubmitting
      the same POST after successful authentication to the original URL.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.enable</code></p></dd><dt><span class="term">Missing PDP entry URI</span></dt><dd><p>Specifies a list of application-specific URIs if the referenced
      Post Data Preservation entry cannot be found in the local cache because
      it has exceeded its POST entry TTL. Either the agent redirects to a
      URI in this list, or it shows an HTTP 403 Forbidden error.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.cache.noentry.url</code></p></dd><dt><span class="term">POST entry TTL</span></dt><dd><p>POST data storage lifetime in milliseconds. Default: 300000.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.cache.entry.ttl</code></p></dd><dt><span class="term">PDP Stickysession mode</span></dt><dd><p>Specifies whether to create a cookie, or to append a query string to
      the URL to assist with sticky load balancing.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.mode</code></p></dd><dt><span class="term">PDP Stickysession key-value</span></dt><dd><p>Specifies the key-value pair for stickysession mode. For example,
      a setting of <code class="literal">lb=myserver</code> either sets an
      <code class="literal">lb</code> cookie with <code class="literal">myserver</code> value, or
      adds <code class="literal">lb=myserver</code> to the URL query string.</p><p>Property: <code class="literal">com.sun.identity.agents.config.postdata.preserve.stickysession.value</code></p></dd></dl></div><div class="variablelist"><a name="j2ee-agent-custom-properties"></a><div class="variablelist-title">Custom properties</div><dl class="variablelist"><dt><span class="term">Custom Properties</span></dt><dd><p>Additional properties to augment the set of properties supported
      by agent. Such properties take the following forms.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">customproperty=custom-value1</code></p></li><li class="listitem"><p><code class="literal">customlist[0]=customlist-value-0</code></p></li><li class="listitem"><p><code class="literal">customlist[1]=customlist-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key1]=custommap-value-1</code></p></li><li class="listitem"><p><code class="literal">custommap[key2]=custommap-value-2</code></p></li></ul></div><p>Property: <code class="literal">com.sun.identity.agents.config.freeformproperties</code></p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsp-policy-agent"></a>5.7.&nbsp;Configuring Web Service Provider Policy Agents</h2></div></div></div><a class="indexterm" name="d0e21257"></a><p>This section covers Web Service Provider (WSP) properties. WSPs
  both validate incoming web service requests from Web Service Clients (WSC),
  and also secure outgoing responses sent back to WSCs.</p><div lang="en" class="note"><h3 class="title">Note</h3><p>
  The current implementation of the WSSAuth Authentication module, along with
  the Web Service Provider, Web Service Client and STS Client Policy agents,
  were developed for versions 1.0 and 1.3 of the WS-Trust standard. ForgeRock
  now includes configuration options for the RESTful Security Token Service
  (STS), compatible with version 1.4 of the WS-Trust standard, which uses
  client certificate and Kerberos JASPI authentication modules.
 </p><p>
  For more information on the new implementation of STS, see
  <a href="../../admin-guide/index/chap-rest-sts.html" class="link"><em class="citetitle">The RESTful Security
   Token Service</em></a>.
 </p></div><p>After creating a WSP profile, you access WSP properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Provider &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><a name="wsp-general-properties"></a><div class="variablelist-title">General properties</div><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist"><a name="wsp-security-properties"></a><div class="variablelist-title">Security properties</div><dl class="variablelist"><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanisms allowed to validate the web service
     request.</p></dd><dt><span class="term">Authentication Chain</span></dt><dd><p>Specifies which OpenAM authentication chain consumes the credentials
     from the web service request to authenticate the WSC.</p></dd><dt><span class="term">Token Conversion Type</span></dt><dd><p>Specifies how to covert the incoming token before issuing requests
     to other WSPs.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers from the request
     for subsequent processing.</p></dd><dt><span class="term">Detect Message Replay</span></dt><dd><p>Yes means the agent checks whether the request is a replay of
     an earlier request, and if so, rejects the request.</p></dd><dt><span class="term">Detect User Token Replay</span></dt><dd><p>Yes means the agent checks whether the user token is a replay
     from an earlier requests, and if so, rejects the request.</p></dd><dt><span class="term">Private Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to verify the request signature.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identifier shared by the WSP and
     WSC.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials compared with
     the user name security token in a request.</p></dd></dl></div><div class="variablelist"><a name="wsp-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl class="variablelist"><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist"><a name="wsp-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl class="variablelist"><dt><span class="term">Is Request Signature Verified</span></dt><dd><p>Yes means verify signatures in requests.</p></dd><dt><span class="term">Is Response Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the response with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign responses is
     referenced in the response.</p></dd><dt><span class="term">Is Request Decrypted</span></dt><dd><p>Yes means do decrypt the specified parts of incoming requests.</p></dd><dt><span class="term">Is Response Encrypted</span></dt><dd><p>Yes means do encrypt the outgoing response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist"><a name="wsp-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl class="variablelist"><dt><span class="term">Public Key Alias of Web Service Client</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify request signatures and encrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign responses and decrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist"><a name="wsp-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl class="variablelist"><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist"><a name="wsp-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl class="variablelist"><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Key Tab File</span></dt><dd><p>Specifies the Kerberos keytab file using the form
     <code class="literal"><em class="replaceable"><code>openam-host</code></em>.HTTP.keytab</code>,
     where <em class="replaceable"><code>openam-host</code></em> is the host name for
     OpenAM.</p></dd><dt><span class="term">Verify Kerberos Signature</span></dt><dd><p>Yes means the agent signs the Kerberos token.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-wsc-policy-agent"></a>5.8.&nbsp;Configuring Web Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d0e21543"></a><p>This section covers Web Service Client (WSC) properties. WSCs
  both secure outgoing requests sent to Web Service Providers (WSP),
  and also validate incoming from WSPs.</p><div lang="en" class="note"><h3 class="title">Note</h3><p>
  The current implementation of the WSSAuth Authentication module, along with
  the Web Service Provider, Web Service Client and STS Client Policy agents,
  were developed for versions 1.0 and 1.3 of the WS-Trust standard. ForgeRock
  now includes configuration options for the RESTful Security Token Service
  (STS), compatible with version 1.4 of the WS-Trust standard, which uses
  client certificate and Kerberos JASPI authentication modules.
 </p><p>
  For more information on the new implementation of STS, see
  <a href="../../admin-guide/index/chap-rest-sts.html" class="link"><em class="citetitle">The RESTful Security
   Token Service</em></a>.
 </p></div><p>After creating a WSC profile, you access WSC properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Web Service Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><a name="wsc-general-properties"></a><div class="variablelist-title">General properties</div><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist"><a name="wsc-security-properties"></a><div class="variablelist-title">Security properties</div><dl class="variablelist"><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure web service requests.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Security Token
     Service. Associated with the STSSecurity Security Mechanism.</p></dd><dt><span class="term">Discovery Configuration</span></dt><dd><p>Specifies the agent used to secure requests to the Discovery
     Service. Associated with the LibertyDiscoverySecurity Security Mechanism.</p></dd><dt><span class="term">User Authentication Required</span></dt><dd><p>Yes means users must authenticate to access the WSC's protected
     page.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers in the request
     for subsequent processing.</p></dd><dt><span class="term">User Pass Through Security Token</span></dt><dd><p>Yes means the agent passes along the Security Token from the Subject,
     rather than generating a token or requesting it from the Security Token
     Service.</p></dd><dt><span class="term">Liberty Service Type URN</span></dt><dd><p>Specifies the Universal Resource Name for the Liberty service type
     used for lookups.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials shared with the
     WSP and used to generate a Username Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identifier shared by the WSP and
     WSC.</p></dd></dl></div><div class="variablelist"><a name="wsc-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl class="variablelist"><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the outgoing request to attribute
     names as retrieved from the SSOToken or the identity repository.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist"><a name="wsc-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl class="variablelist"><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of outgoing requests.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the incoming response.</p></dd></dl></div><div class="variablelist"><a name="wsc-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl class="variablelist"><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist"><a name="wsc-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl class="variablelist"><dt><span class="term">Web Service Security Proxy End Point</span></dt><dd><p>If the WSC sends requests through a web service proxy, specify that
     as the end point here.</p></dd><dt><span class="term">Web Service End Point</span></dt><dd><p>Specifies the end point to which the WSC sends requests.</p></dd></dl></div><div class="variablelist"><a name="wsc-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl class="variablelist"><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-sts-policy-agent"></a>5.9.&nbsp;Configuring Security Token Service Client Policy Agents</h2></div></div></div><a class="indexterm" name="d0e21809"></a><a class="indexterm" name="d0e21814"></a><p>This section covers Security Token Service (STS) Client properties. STS
  clients both secure outgoing requests to trust authorities, and also validate
  incoming requests from trust authorities. You can configure STS clients to
  work with OpenAM's Security Token Service and with its Discovery
  Service.</p><div lang="en" class="note"><h3 class="title">Note</h3><p>
  The current implementation of the WSSAuth Authentication module, along with
  the Web Service Provider, Web Service Client and STS Client Policy agents,
  were developed for versions 1.0 and 1.3 of the WS-Trust standard. ForgeRock
  now includes configuration options for the RESTful Security Token Service
  (STS), compatible with version 1.4 of the WS-Trust standard, which uses
  client certificate and Kerberos JASPI authentication modules.
 </p><p>
  For more information on the new implementation of STS, see
  <a href="../../admin-guide/index/chap-rest-sts.html" class="link"><em class="citetitle">The RESTful Security
   Token Service</em></a>.
 </p></div><p>After creating an STS Client profile, you access STS Client properties
  in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; STS Client &gt; <em class="replaceable"><code>Agent
  Name</code></em>.</p><div class="variablelist"><a name="sts-agent-general-properties"></a><div class="variablelist-title">General properties</div><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>For assigning the agent to a previously configured agent group in
     order to inherit selected properties from the group.</p></dd><dt><span class="term">Password</span></dt><dd><p>Agent password used when creating the password file and when
     installing the agent.</p></dd><dt><span class="term">Status</span></dt><dd><p>Status of the agent configuration.</p></dd><dt><span class="term">WS-Trust Version</span></dt><dd><p>Specifies whether to use WS-Trust 1.3 or 1.0.</p></dd><dt><span class="term">Universal Identifier</span></dt><dd><p>OpenAM identifier for the agent configuration.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-security-properties"></a><div class="variablelist-title">Security properties</div><dl class="variablelist"><dt><span class="term">Security Mechanism</span></dt><dd><p>Specifies the mechanism used to secure the STS request.</p></dd><dt><span class="term">STS Configuration</span></dt><dd><p>Specifies the STS Client agent profile to use if the security
     mechanism is STS Security.</p></dd><dt><span class="term">Preserve Security Headers in Message</span></dt><dd><p>Yes means the agent preserves SOAP security headers for subsequent
     processing.</p></dd><dt><span class="term">Credential for User Token</span></dt><dd><p>Specifies the user name and password credentials the agent uses
     to generate a Username security token.</p></dd><dt><span class="term">Requested Key Type</span></dt><dd><p>Specifies the type of key, such as <code class="literal">PublicKey</code>,
     used to encrypt responses.</p></dd><dt><span class="term">Requested Claims</span></dt><dd><p>Specifies the Uniform Resource Identifiers for the claims to
     be represented in the Security Token.</p></dd><dt><span class="term">DNS Claim</span></dt><dd><p>Specifies a Uniform Resource Identifier shared by the agent and the
     WSC.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-saml-conf-properties"></a><div class="variablelist-title">SAML Configuration properties</div><dl class="variablelist"><dt><span class="term">SAML Attribute Mapping</span></dt><dd><p>Maps SAML attribute names from the incoming request to attribute
     names as retrieved from the SSOToken or the identity repository, used to
     have the Security Token Service generate an appropriate SAML
     assertion.</p></dd><dt><span class="term">SAML NameID Mapper Plugin</span></dt><dd><p>Specifies the class name of a plugin used to perform SAML account
     mapping.</p></dd><dt><span class="term">SAML Attributes Namespace</span></dt><dd><p>Identifies the attribute name space used when generating SAML
     assertions.</p></dd><dt><span class="term">Include Memberships</span></dt><dd><p>Yes means the agent includes the principal's membership as a
     SAML attribute.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-signing-and-encryption-properties"></a><div class="variablelist-title">Signing and Encryption properties</div><dl class="variablelist"><dt><span class="term">Is Response Signature Verified</span></dt><dd><p>Yes means verify signatures in responses.</p></dd><dt><span class="term">Is Request Signed Enabled</span></dt><dd><p>Yes means the agent signs the specified parts of the request with
     its x509 certificate.</p></dd><dt><span class="term">Signing Reference Type</span></dt><dd><p>Specifies how the x509 certificate used to sign requests is
     referenced in the request.</p></dd><dt><span class="term">Is Request Encryption Enabled</span></dt><dd><p>Yes means do encrypt the specified parts of requests.</p></dd><dt><span class="term">Is Response Decrypted</span></dt><dd><p>Yes means do decrypt the response.</p></dd><dt><span class="term">Encryption Algorithm</span></dt><dd><p>Specifies whether to use Advanced Encryption Standard, corresponding
     to an Encryption Strength of 128, 192, or 256, or to use Triple DES with
     a key length of 0, 112, or 168.</p></dd><dt><span class="term">Encryption Strength</span></dt><dd><p>Specifies the key length used for encryption.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-keystore-properties"></a><div class="variablelist-title">Key Store properties</div><dl class="variablelist"><dt><span class="term">Public Key Alias of Web Service Provider</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     verify response signatures and encrypt requests.</p></dd><dt><span class="term">Private Key Alias</span></dt><dd><p>Specifies the alias of the certificate in the key store used to
     sign requests and decrypt responses.</p></dd><dt><span class="term">Key Store Usage</span></dt><dd><p>If you use your own, custom key store, specify how to access it
     here.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-end-points-properties"></a><div class="variablelist-title">End Points properties</div><dl class="variablelist"><dt><span class="term">Security Token Service End Point</span></dt><dd><p>Specifies the URL to the Security Token Service end point.</p></dd><dt><span class="term">Security Token Service MEX End Point</span></dt><dd><p>Specifies the URL to the Security Token Service message exchange
     end point.</p></dd></dl></div><div class="variablelist"><a name="sts-agent-kerberos-properties"></a><div class="variablelist-title">Kerberos Configuration properties</div><dl class="variablelist"><dt><span class="term">Kerberos Domain Server</span></dt><dd><p>Specifies the fully qualified domain name of the Kerberos
     Distribution Center service.</p></dd><dt><span class="term">Kerberos Domain</span></dt><dd><p>Specifies the Kerberos Distribution Center domain name. For
     Windows environments this is the domain controller domain name.</p></dd><dt><span class="term">Kerberos Service Principal</span></dt><dd><p>Specifies the Kerberos principal used by OpenAM, using the form
     <code class="literal">HTTP/<em class="replaceable"><code>openam-fqdn</code></em>@<em class="replaceable"><code>krb-domain</code></em></code>,
     where <em class="replaceable"><code>openam-fqdn</code></em> is the fully qualified domain
     name for OpenAM, and <em class="replaceable"><code>krb-domain</code></em> is the
     Kerberos Domain.</p></dd><dt><span class="term">Kerberos Ticket Cache Directory</span></dt><dd><p>Specifies the directory in which Kerberos Ticket Granting Tickets
     (TGT) are cached. The <span class="command"><strong>kinit</strong></span> command stores the TGT from
     the KDC here.</p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-22-policy-agent"></a>5.10.&nbsp;Configuring Version 2.2 Policy Agents</h2></div></div></div><a class="indexterm" name="d0e22076"></a><p>This section covers version 2.2 agent properties. Version 2.2 agents
  store their configurations locally, with a user name, password combination
  used to connect to OpenAM.</p><div class="warning"><h3 class="title">Warning</h3><p>ForgeRock no longer supports 2.2 agents. Documentation exists only for
   legacy systems. Do not use 2.2 policy agents for new deployments.
  </p></div><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; 2.2 Agents &gt; <em class="replaceable"><code>Agent Name</code></em>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Description</span></dt><dd><p>Specifies a short description for the agent.</p></dd><dt><span class="term">Agent Key Value(s)</span></dt><dd><p>Additional key-value pairs that OpenAM uses to receive agent
     requests concerning credential assertions.</p><p>OpenAM currently supports one property,
     <code class="literal">agentRootURL=<em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>/</code>
     where the key is case-sensitive.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-oauth2-client"></a>5.11.&nbsp;Configuring OAuth 2.0 &amp; OpenID Connect 1.0 Clients</h2></div></div></div><a class="indexterm" name="d0e22136"></a><a class="indexterm" name="d0e22143"></a><a class="indexterm" name="d0e22148"></a><p>When you want to register an OAuth 2.0 client with OpenAM as the
  OAuth 2.0 authorization server, or register an OpenID Connect 1.0 client
  through OpenAM console, then create an OAuth 2.0 Client agent profile.
  After creating the agent profile, you can further configure the properties
  in the OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm
  Name</code></em> &gt; Agents &gt; OAuth 2.0 Client &gt; <em class="replaceable"><code>Client
  Name</code></em>.</p><div class="itemizedlist"><p>The topmost configuration fields are for both OAuth 2.0 and OpenID
   Connect 1.0, whereas others are specifically for OpenID Connect 1.0.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="chap-agents.html#configure-oauth2-client-common" title="Common Client Configuration">Common Client Configuration</a></p></li><li class="listitem"><p><a class="xref" href="chap-agents.html#configure-oauth2-client-openid-connect" title="OpenID Connect 1.0 Client Configuration">OpenID Connect 1.0 Client Configuration</a></p></li></ul></div><div class="variablelist"><a name="configure-oauth2-client-common"></a><div class="variablelist-title">Common Client Configuration</div><p>The following configuration fields are common to OAuth 2.0 and OpenID
   Connect 1.0 clients.</p><dl class="variablelist"><dt><span class="term">Group</span></dt><dd><p>Set this if you have configured an OAuth 2.0 Client agent
     group.</p></dd><dt><span class="term">Status</span></dt><dd><p>Whether the client profile is active for use.</p></dd><dt><span class="term">Client password</span></dt><dd><p>The client password as described by RFC 6749 in the section,
     <a class="link" href="http://tools.ietf.org/html/rfc6749#section-2.3.1" target="_blank">Client Password</a>.</p></dd><dt><span class="term">Client type</span></dt><dd><p>Confidential clients can maintain confidentiality of their
     credentials. Public clients cannot.</p><p>A web application running on a server where its credentials are
     protected is an example of a confidential client.</p><p>A JavaScript client running in a browser is an example of a public
     client.</p></dd><dt><span class="term">Redirection URIs</span></dt><dd><p>Specify client redirection endpoint URIs as described by RFC 6749
     in the section, <a class="link" href="http://tools.ietf.org/html/rfc6749#section-3.1.2" target="_blank">Redirection
     Endpoint</a>. OpenAM's OAuth 2.0 authorization service redirects the
     the resource owner's user-agent back to this endpoint during the
     authorization code grant process. If your client has more than one
     redirection URI, then it must specify the redirection URI to use in
     the authorization request.</p><p>Redirection URIs are required for OpenID Connect 1.0 clients.</p></dd><dt><span class="term">Scopes</span></dt><dd><p>Specify scopes in <code class="literal"><em class="replaceable"><code>scope</code></em></code>
     or <code class="literal"><em class="replaceable"><code>scope</code></em>|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code> format. These scopes are to be
     presented to the resource owner when the resource owner is asked to
     authorize client access to protected resources.</p></dd><dt><span class="term">Display name</span></dt><dd><p>Specify a client name to display to the resource owner
     when the resource owner is asked to authorize client access to protected
     resources. Valid formats include <code class="literal"><em class="replaceable"><code>name</code></em></code> or <code class="literal"><em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     name</code></em></code>.</p></dd><dt><span class="term">Display description</span></dt><dd><p>Specify a client description to display to the resource owner
     when the resource owner is asked to authorize client access to protected
     resources. Valid formats include <code class="literal"><em class="replaceable"><code>description</code></em></code> or <code class="literal"><em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code>.</p></dd><dt><span class="term">Default Scope(s)</span></dt><dd><p>Specify scopes in <code class="literal"><em class="replaceable"><code>scope</code></em></code>
     or <code class="literal"><em class="replaceable"><code>scope</code></em>|<em class="replaceable"><code>locale</code></em>|<em class="replaceable"><code>localized
     description</code></em></code> format. These scopes are set
     automatically when tokens are issued.</p></dd><dt><span class="term">Response Types</span></dt><dd><p>
      Specify response type lists that the client uses.
     </p><div class="itemizedlist"><p>
       The default lists are the following.
      </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <code class="literal">code</code>
       </p></li><li class="listitem"><p>
        <code class="literal">token</code>
       </p></li><li class="listitem"><p>
        <code class="literal">id_token</code>
       </p></li><li class="listitem"><p>
        <code class="literal">code token</code>
       </p></li><li class="listitem"><p>
        <code class="literal">token id_token</code>
       </p></li><li class="listitem"><p>
        <code class="literal">code id_token</code>
       </p></li><li class="listitem"><p>
        <code class="literal">code token id_token</code>
       </p></li></ul></div></dd><dt><span class="term">Contacts</span></dt><dd><p>
      Specify email address of users who administer the client.
     </p></dd><dt><span class="term">Client Name</span></dt><dd><p>
      Specify a human-readable name for the client.
     </p></dd><dt><span class="term">Client JWT Bearer Public Key Certificate</span></dt><dd><p>
      Specify the public key certificate of the client's key pair
      that is used to sign JWTs issued by the client
      and used for client authentication or to request access tokens.
     </p><p>
      This is the base64-encoded X509 certificate containing the public key
      in PEM format, as in the following example.
     </p><pre class="brush: plain;">
-----BEGIN CERTIFICATE-----
MIIDETCCAfmgAwIBAgIEU8SXLjANBgkqhkiG9w0BAQsFADA5MRswGQYDVQQKExJvcGVuYW0uZXhh
bXBsZS5jb20xGjAYBgNVBAMTEWp3dC1iZWFyZXItY2xpZW50MB4XDTE0MTAyNzExNTY1NloXDTI0
MTAyNDExNTY1NlowOTEbMBkGA1UEChMSb3BlbmFtLmV4YW1wbGUuY29tMRowGAYDVQQDExFqd3Qt
YmVhcmVyLWNsaWVudDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAID4ZZ/DIGEBr4QC
2uz0GYFOCUlAPanxX21aYHSvELsWyMa7DJlD+mnjaF8cPRRMkhYZFXDJo/AVcjyblyT3ntqL+2Js
3D7TmS6BSjkxZWsJHyhJIYEoUwwloc0kizgSm15MwBMcbnksQVN5VWiOe4y4JMbi30t6k38lM62K
KtaSPP6jvnW1LTmL9uiqLWz54AM6hU3NlCI3J6Rfh8waBIPAEjmHZNquOl2uGgWumzubYDFJbomL
SQqO58RuKVaSVMwDbmENtMYWXIKQL2xTt5XAbwEQEgJ/zskwpA2aQt1HE6de3UymOhONhRiu4rk3
AIEnEVbxrvy4Ik+wXg7LZVsCAwEAAaMhMB8wHQYDVR0OBBYEFIuI7ejuZTg5tJsh1XyRopGOMBcs
MA0GCSqGSIb3DQEBCwUAA4IBAQBM/+/tYYVIS6LvPl3mfE8V7x+VPXqj/uK6UecAbfmRTrPk1ph+
jjI6nmLX9ncomYALWL/JFiSXcVsZt3/412fOqjakFVS0PmK1vEPxDlav1drnVA33icy1wORRRu5/
qA6mwDYPAZSbm5cDVvCR7Lt6VqJ+D0V8GABFxUw9IaX6ajTqkWhldY77usvNeTD0Xc4R7OqSBrnA
SNCaUlJogWyzhbFlmE9Ne28j4RVpbz/EZn0oc/cHTJ6Lryzsivf4uDO1m3M3kM/MUyXc1Zv3rqBj
TeGSgcqEAd6XlGXY1+M/yIeouUTi0F1bk1rNlqJvd57Xb4CEq17tVbGBm0hkECM8
-----END CERTIFICATE-----
     </pre><p>
      You can generate a key pair and export the certificate
      by using the Java <span class="command"><strong>keytool</strong></span> command.
     </p><div class="screen"><pre>
$ <strong>keytool \
 -genkeypair \
 -keysize 2048 \
 -alias self-signed \
 -keyalg rsa \
 -dname "CN=jwt-bearer-client,O=openam.example.com" \
 -keystore keystore.jks \
 -keypass changeit \
 -storepass changeit \
 -validity 3650 \
 -v</strong>
<em>Generating 2,048 bit RSA key pair and self-signed certificate (SHA256withRSA)
 with a validity of 3,650 days
    for: CN=jwt-bearer-client, O=openam.example.com
[Storing keystore.jks]</em>

$ <strong>keytool \
 -list \
 -alias self-signed \
 -rfc \
 -keystore keystore.jks \
 -keypass changeit \
 -storepass changeit</strong>
<em>Alias name: self-signed
Creation date: Oct 27, 2014
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
-----BEGIN CERTIFICATE-----
MIIDETCCAfmgAwIBAgIEU8SXLjANBgkqhkiG9w0BAQsFADA5MRswGQYDVQQKExJvcGVuYW0uZXhh
bXBsZS5jb20xGjAYBgNVBAMTEWp3dC1iZWFyZXItY2xpZW50MB4XDTE0MTAyNzExNTY1NloXDTI0
MTAyNDExNTY1NlowOTEbMBkGA1UEChMSb3BlbmFtLmV4YW1wbGUuY29tMRowGAYDVQQDExFqd3Qt
YmVhcmVyLWNsaWVudDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAID4ZZ/DIGEBr4QC
2uz0GYFOCUlAPanxX21aYHSvELsWyMa7DJlD+mnjaF8cPRRMkhYZFXDJo/AVcjyblyT3ntqL+2Js
3D7TmS6BSjkxZWsJHyhJIYEoUwwloc0kizgSm15MwBMcbnksQVN5VWiOe4y4JMbi30t6k38lM62K
KtaSPP6jvnW1LTmL9uiqLWz54AM6hU3NlCI3J6Rfh8waBIPAEjmHZNquOl2uGgWumzubYDFJbomL
SQqO58RuKVaSVMwDbmENtMYWXIKQL2xTt5XAbwEQEgJ/zskwpA2aQt1HE6de3UymOhONhRiu4rk3
AIEnEVbxrvy4Ik+wXg7LZVsCAwEAAaMhMB8wHQYDVR0OBBYEFIuI7ejuZTg5tJsh1XyRopGOMBcs
MA0GCSqGSIb3DQEBCwUAA4IBAQBM/+/tYYVIS6LvPl3mfE8V7x+VPXqj/uK6UecAbfmRTrPk1ph+
jjI6nmLX9ncomYALWL/JFiSXcVsZt3/412fOqjakFVS0PmK1vEPxDlav1drnVA33icy1wORRRu5/
qA6mwDYPAZSbm5cDVvCR7Lt6VqJ+D0V8GABFxUw9IaX6ajTqkWhldY77usvNeTD0Xc4R7OqSBrnA
SNCaUlJogWyzhbFlmE9Ne28j4RVpbz/EZn0oc/cHTJ6Lryzsivf4uDO1m3M3kM/MUyXc1Zv3rqBj
TeGSgcqEAd6XlGXY1+M/yIeouUTi0F1bk1rNlqJvd57Xb4CEq17tVbGBm0hkECM8
-----END CERTIFICATE-----</em>
     </pre></div></dd></dl></div><div class="variablelist"><a name="configure-oauth2-client-openid-connect"></a><div class="variablelist-title">OpenID Connect 1.0 Client Configuration</div><p>The following optional configuration fields are for OpenID Connect 1.0
   clients.</p><dl class="variablelist"><dt><span class="term">ID Token Signed Response Algorithm</span></dt><dd><p>Algorithm that the ID Token for this client must be signed with</p><p>
      Default: <code class="literal">RS256</code>
      (RSA with SHA256, where the RSA key comes from the OpenAM keystore)
     </p><p>Valid values are listed in <em class="citetitle">JSON Web Algorithms
     (JWA)</em>: <a class="link" href="http://tools.ietf.org/html/draft-ietf-jose-json-web-algorithms#section-3.1" target="_blank"><em class="citetitle">"alg" (Algorithm) Header Parameter Values for JWS</em></a>.
     OpenAM supports <code class="literal">HmacSHA256</code>,
     <code class="literal">HmacSHA384</code>, and <code class="literal">HmacSHA512</code>.</p></dd><dt><span class="term">Post Logout Redirect URI</span></dt><dd><p>URI to which to redirect the user-agent after the client logout
      process</p></dd><dt><span class="term">Access Token</span></dt><dd><p>The <code class="literal">registration_access_token</code> value that you
     provide when registering the client, and then subsequently when reading
     or updating the client profile.</p></dd><dt><span class="term">Client Session URI</span></dt><dd><p>The relying party (client) URI to which the OpenID Connect Provider
     sends session changed notification messages using the HTML 5 postMessage
     API.</p></dd></dl></div></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure-agent-auth"></a>5.12.&nbsp;Configuring Agent Authenticators</h2></div></div></div><a class="indexterm" name="d0e22446"></a><p>An <em class="firstterm">agent authenticator</em> has read-only access to
  multiple agent profiles defined in the same realm, typically allowing an
  agent to read web service agent profiles.</p><p>After creating the agent profile, you access agent properties in the
  OpenAM console under Access Control &gt; <em class="replaceable"><code>Realm Name</code></em>
  &gt; Agents &gt; Agent Authenticator &gt; <em class="replaceable"><code>Agent
   Name</code></em>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Password</span></dt><dd><p>Specifies the password the agent uses to connect to OpenAM.</p></dd><dt><span class="term">Status</span></dt><dd><p>Specifies whether the agent profile is active, and so can be
     used.</p></dd><dt><span class="term">Agent Profiles allow to Read</span></dt><dd><p>Specifies which agent profiles in the realm the agent authenticator
     can read.</p></dd><dt><span class="term">Agent Root URL for CDSSO</span></dt><dd><p>Specifies the list of agent root URLs for CDSSO. The valid value is
     in the format
     <code class="literal"><em class="replaceable"><code>protocol</code></em>://<em class="replaceable"><code>hostname</code></em>:<em class="replaceable"><code>port</code></em>/</code>
     where <em class="replaceable"><code>protocol</code></em> represents the protocol used,
     such as <code class="literal">http</code> or <code class="literal">https</code>,
     <em class="replaceable"><code>hostname</code></em> represents the host name of the
     system where the agent resides, and <em class="replaceable"><code>port</code></em>
     represents the port number on which the agent is installed.
     The slash following the port number is required.</p><p>If your agent system also has virtual host names, add URLs with
     the virtual host names to this list as well. OpenAM checks that
     <code class="literal">goto</code> URLs match one of the agent root URLs for
     CDSSO.</p></dd></dl></div></div><div class="footnotes"><br><hr class="footnote-hr"><div id="ftn.d0e16912" class="footnote"><p><a href="#d0e16912" class="para"><sup class="para">[6] </sup></a>The configuration file syntax is that
   of a standard Java properties file. See <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load</a> for a description of the format. The value
   of a property specified multiple times is not defined.</p></div><div id="ftn.d0e18982" class="footnote"><p><a href="#d0e18982" class="para"><sup class="para">[7] </sup></a>The configuration file syntax is that
   of a standard Java properties file. See
   <a class="link" href="http://download.oracle.com/javase/6/docs/api/java/util/Properties.html#load%28java.io.Reader%29" target="_top">java.util.Properties.load()</a>
   for a description of the format. The value of a property specified multiple
   times is not defined.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap-realms.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-audit-logging.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;4.&nbsp;Configuring Realms&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Configuring Audit Logging</td></tr></table></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10000&components=10007&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-14']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>