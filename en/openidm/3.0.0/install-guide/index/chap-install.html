<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</title><link rel="stylesheet" type="text/css" href="coredoc.css"><link rel="stylesheet" type="text/css" href="css/coredoc.css"><link rel="stylesheet" type="text/css" href="sh/shCore.css"><link rel="stylesheet" type="text/css" href="sh/shCoreEclipse.css"><link rel="stylesheet" type="text/css" href="sh/shThemeEclipse.css"><script src="http://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script><script src="uses-jquery.js" type="text/javascript"></script><script src="sh/shCore.js" type="text/javascript"></script><script src="sh/shBrushAci.js" type="text/javascript"></script><script src="sh/shBrushBash.js" type="text/javascript"></script><script src="sh/shBrushCsv.js" type="text/javascript"></script><script src="sh/shBrushHttp.js" type="text/javascript"></script><script src="sh/shBrushJava.js" type="text/javascript"></script><script src="sh/shBrushJScript.js" type="text/javascript"></script><script src="sh/shBrushLDIF.js" type="text/javascript"></script><script src="sh/shBrushPlain.js" type="text/javascript"></script><script src="sh/shBrushProperties.js" type="text/javascript"></script><script src="sh/shBrushXml.js" type="text/javascript"></script><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="OpenIDM Installation Guide"><link rel="up" href="index.html" title="OpenIDM Installation Guide"><link rel="prev" href="preface.html" title="Preface"><link rel="next" href="chap-sample.html" title="Chapter&nbsp;2.&nbsp;First OpenIDM Sample"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script type="text/javascript">SyntaxHighlighter.all();</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preface.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-sample.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chap-install"></a>Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</h1></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl class="toc"><dt><span class="section"><a href="chap-install.html#before-you-start">1.1. Before You Run OpenIDM</a></span></dt><dt><span class="section"><a href="chap-install.html#installing-openidm">1.2. Installing and Running OpenIDM</a></span></dt><dt><span class="section"><a href="chap-install.html#first-steps-with-rest">1.3. To Get Started With the OpenIDM REST Interface</a></span></dt></dl></div><p>
  This chapter covers the tasks required to install and start OpenIDM.
 </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="before-you-start"></a>1.1.&nbsp;Before You Run OpenIDM</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-install.html#java-prerequisites">1.1.1. Java Environment</a></span></dt><dt><span class="section"><a href="chap-install.html#application-container-prerequisites">1.1.2. Application Container</a></span></dt></dl></div><p>
   This section covers what you need to know before running OpenIDM.
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="java-prerequisites"></a>1.1.1.&nbsp;Java Environment</h3></div></div></div><a class="indexterm" name="d0e335"></a><p>
    This release of OpenIDM requires Java Development Kit 6 or Java Development
    Kit 7. ForgeRock recommends the most recent update of Java 6 or 7 to ensure
    that you have the latest security fixes.
   </p><p>
    The equivalent version of OpenJDK should work for evaluation.
   </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="application-container-prerequisites"></a>1.1.2.&nbsp;Application Container</h3></div></div></div><a class="indexterm" name="d0e347"></a><p>
    OpenIDM services run in an OSGi container with an embedded Servlet
    container, and an embedded noSQL database. By default the OSGi container is
    Apache Felix. The default Servlet container is Jetty. For OpenIDM
    3.0.0, the only supported configuration is running
    the services in Apache Felix and Jetty.
   </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-openidm"></a>1.2.&nbsp;Installing and Running OpenIDM</h2></div></div></div><p>
    Follow the procedures in this section to install and run OpenIDM.
   </p><div class="procedure"><a name="install-openidm"></a><div class="procedure-title">Procedure&nbsp;1.1.&nbsp;To Install OpenIDM Services</div><a class="indexterm" name="d0e362"></a><p>
     Follow these steps to install OpenIDM.
    </p><ol class="procedure" type="1"><li class="step"><p>
      Make sure you have an appropriate version of Java installed.
     </p><div class="screen"><pre><strong>$ java -version</strong>
      <em>
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07-334)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02-334, mixed mode)</em>
     </pre></div><p>
      Check the release notes for Java requirements in the chapter, <a href="../../release-notes/index/chap-before-you-install.html" class="link"><em class="citetitle">Before You
     Install OpenIDM Software</em></a>.
     </p></li><li class="step"><a class="indexterm" name="d0e384"></a><div class="itemizedlist"><p>
       Download OpenIDM from one of the following locations:
      </p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        <a class="link" href="http://www.forgerock.com/download-stack/" target="_blank">
        Enterprise Downloads</a> has the latest stable, supported release of
        OpenIDM and the other products in the ForgeRock identity stack.
       </p></li><li class="listitem"><p>
        <a class="link" href="http://forgerock.org/openidm.html" target="_blank">
        Builds</a> includes the nightly build, the nightly experimental
        build, and the OpenIDM agents. Note that this is the working version of
        the trunk and should not be used in a production environment.
       </p></li><li class="listitem"><p>
        <a class="link" href="http://forgerock.org/openidm-archive.html" target="_blank">
        Archives</a> includes the stable builds for all previous releases of
        OpenIDM.
       </p></li></ul></div></li><li class="step"><p>
      Unpack the contents of the .zip file into the install location.
     </p><div class="screen"><pre><strong>$ cd /path/to
$ unzip ~/Downloads/openidm-3.0.0.zip
      </strong>
      <em>
...
inflating: openidm/connectors/scriptedsql-connector-[1.1,1.5].jar
inflating: openidm/bin/felix.jar
inflating: openidm/bin/openidm.jar</em>
     </pre></div></li><li class="step"><p>
      By default, OpenIDM listens for HTTP and HTTPS connections on ports 8080
      and 8443, respectively. To change the default port, edit the
      <code class="filename">/path/to/openidm/conf/boot/boot.properties</code> file. For
      more information, see <a href="../../integrators-guide/index/appendix-ports-used.html" class="link"><em class="citetitle">Ports Used</em></a>
      in the <em class="citetitle">Integrator's Guide</em>.
     </p></li><li class="step"><a class="indexterm" name="d0e432"></a><p>Before running OpenIDM in production, replace the default OrientDB
     repository provided for evaluation with a JDBC repository.</p><p>See the chapter on <a href="../../install-guide/index/chap-repository.html" class="link"><em class="citetitle">Installing
     a Repository For Production</em></a> for details.</p></li></ol></div><div class="procedure"><a name="run-openidm"></a><div class="procedure-title">Procedure&nbsp;1.2.&nbsp;To Start OpenIDM Services</div><a class="indexterm" name="d0e448"></a><p>Follow these steps to run OpenIDM interactively.</p><p>To run OpenIDM as a background process, see <a href="../../integrators-guide/index/chap-services.html" class="link"><em class="citetitle">Starting and
    Stopping OpenIDM</em></a> in the <em class="citetitle">Integrator's
    Guide</em>.</p><ol class="procedure" type="1"><li class="step"><p>Start the Felix container, load all OpenIDM services, and start a
     command shell to allow you to manage the container.</p><ul class="stepalternatives">
      <li class="step"><p>Start OpenIDM (UNIX).</p><div class="screen"><pre><strong>$ ./startup.sh</strong>
        <em>
Using OPENIDM_HOME:   /path/to/openidm
Using OPENIDM_OPTS:   -Xmx1024m -Xms1024m
Using LOGGING_CONFIG:
 -Djava.util.logging.config.file=/path/to/openidm/conf/logging.properties
Using boot properties at /path/to/openidm/conf/boot/boot.properties
OpenIDM version "3.0.0" (revision: XXXX)
-&gt; OpenIDM ready
        </em>
       </pre></div></li>
      <li class="step"><p>Start OpenIDM (Windows).</p><div class="screen"><pre><strong>C:\&gt; cd \path\to\openidm
C:\&gt; startup.bat
        </strong>
        <em>
"Using OPENIDM_HOME:   \path\to\openidm"
"Using OPENIDM_OPTS:   -Xmx1024m -Xms1024m -Dfile.encoding=UTF-8"
"Using LOGGING_CONFIG:
 -Djava.util.logging.config.file=\path\to\openidm\conf\logging.properties"
Using boot properties at \path\to\openidm\conf\boot\boot.properties
OpenIDM version "3.0.0" (revision: XXXX)
-&gt; OpenIDM ready
-&gt;
        </em>
       </pre></div></li>
     </ul><p>At the resulting <code class="literal">-&gt;</code> prompt, you can enter
     commands such as <span class="command"><strong>help</strong></span> for usage, or
     <span class="command"><strong>ps</strong></span> to view the bundles installed. To see a list of all
     the OpenIDM core services and their states, enter the following
     command.</p><div class="screen"><pre><strong>-&gt; scr list</strong>
      <em>
   Id   State          Name
[  12] [active       ] org.forgerock.openidm.endpoint
[  13] [active       ] org.forgerock.openidm.endpoint
[  14] [active       ] org.forgerock.openidm.endpoint
[  15] [active       ] org.forgerock.openidm.endpoint
[  16] [active       ] org.forgerock.openidm.endpoint
[  17] [active       ] org.forgerock.openidm.endpoint
[  23] [unsatisfied  ] org.forgerock.openidm.info
[  27] [active       ] org.forgerock.openidm.provisioner.openicf.connectorinfoprovider
[  35] [active       ] org.forgerock.openidm.ui.simple
[  29] [active       ] org.forgerock.openidm.restlet
[   3] [active       ] org.forgerock.openidm.repo.orientdb
[   7] [active       ] org.forgerock.openidm.scope
[   5] [active       ] org.forgerock.openidm.audit
[  32] [active       ] org.forgerock.openidm.schedule
[   2] [unsatisfied  ] org.forgerock.openidm.repo.jdbc
[  31] [active       ] org.forgerock.openidm.workflow
[   9] [active       ] org.forgerock.openidm.managed
[  28] [active       ] org.forgerock.openidm.provisioner.openicf
[  22] [active       ] org.forgerock.openidm.health
[  26] [active       ] org.forgerock.openidm.provisioner
[   0] [active       ] org.forgerock.openidm.config.starter
[  34] [active       ] org.forgerock.openidm.taskscanner
[  20] [active       ] org.forgerock.openidm.external.rest
[   6] [active       ] org.forgerock.openidm.router
[  33] [active       ] org.forgerock.openidm.scheduler
[  19] [unsatisfied  ] org.forgerock.openidm.external.email
[  11] [active       ] org.forgerock.openidm.sync
[  25] [active       ] org.forgerock.openidm.policy
[   8] [active       ] org.forgerock.openidm.script
[  10] [active       ] org.forgerock.openidm.recon
[   4] [active       ] org.forgerock.openidm.http.contextregistrator
[   1] [active       ] org.forgerock.openidm.config
[  18] [active       ] org.forgerock.openidm.endpointservice
[  30] [unsatisfied  ] org.forgerock.openidm.servletfilter
[  24] [active       ] org.forgerock.openidm.infoservice
[  21] [active       ] org.forgerock.openidm.authentication
-&gt;
      </em>
     </pre></div><p>A default startup does not include certain configurable services, 
     which will indicate an <code class="literal">unsatisfied</code> state until they 
     are included in the configuration. As you work through the sample 
     configurations described later in this guide, you will notice that these 
     services are active.</p><p>Startup errors and messages are logged to the console by default.
     You can also view these messages in the log files at
     <code class="filename">/path/to/openidm/logs</code>.</p></li><li class="step"><p>Alternatively, you can manage the container and services from the
     Felix administration console.</p><div class="itemizedlist"><p>Use these hints to connect to the console.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Default Console URL: <a class="link" href="https://localhost:8443/system/console" target="_blank">https://localhost:8443/system/console</a></p></li><li class="listitem"><p>Default user name: <code class="literal">admin</code></p></li><li class="listitem"><p>Default password: <code class="literal">admin</code></p></li></ul></div><div class="itemizedlist"><p>Some basic hints on using the Felix administration console
      follow.</p><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Select the Components tab to see OpenIDM core services and their
       respective states.</p></li><li class="listitem"><p>Select the Shell tab to access the <code class="literal">-&gt;</code>
       prompt.</p></li><li class="listitem"><p>Select the System Information tab to stop or restart the
       container.</p></li></ul></div></li></ol></div><div class="procedure"><a name="stop-openidm"></a><div class="procedure-title">Procedure&nbsp;1.3.&nbsp;To Stop the OpenIDM Services</div><a class="indexterm" name="d0e555"></a><ul class="procedure"><li class="step"><p>You can stop OpenIDM Services from the <code class="literal">-&gt;</code>
      prompt, or through the Felix console.</p><ul class="stepalternatives">
      <li class="step"><p>Either enter the <span class="command"><strong>shutdown</strong></span> command at the
        <code class="literal">-&gt;</code> prompt.</p><div class="screen"><pre>-&gt; shutdown
...
$</pre></div></li>
      <li class="step"><p>Or click Stop on the System Information tab of the Felix console,
        by default <a class="link" href="http://localhost:8080/system/console" target="_blank">http://localhost:8080/system/console</a>.</p><p>This stops the Servlet container as well, and the console is
        no longer accessible.</p></li>
      <li class="step"><p>
        On Unix systems, you can stop OpenIDM by using the
        <span class="command"><strong>shutdown.sh</strong></span> script, located in the
        <code class="filename">/path/to/openidm</code> directory.
       </p><div class="screen"><pre><strong>$ ./shutdown.sh</strong>
<em>./shutdown.sh
Stopping OpenIDM (31391)</em></pre></div></li>
     </ul></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="first-steps-with-rest"></a>1.3.&nbsp;To Get Started With the OpenIDM REST Interface</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="chap-install.html#rest-output-format">1.3.1. Format REST Output for Readability</a></span></dt></dl></div><a class="indexterm" name="d0e605"></a><p>
     OpenIDM provides RESTful access to users in the OpenIDM repository. To
     access the OpenIDM repository over REST, you can use a browser-based REST
     client, such as the
     <a class="link" href="https://chrome.google.com/webstore/detail/simple-rest-client/fhjcajmcbmldlhcimfajhfbgofnpcjmb" target="_top">
     Simple REST Client</a> for Chrome, or <a class="link" href="https://addons.mozilla.org/en-US/firefox/addon/restclient/" target="_top">
     RESTClient</a> for Firefox. Alternatively you can use the
     <span class="command"><strong>curl</strong></span> command-line utility that is included with most
     operating systems. For more information about <span class="command"><strong>curl</strong></span>, see
     <a class="link" href="https://github.com/bagder/curl" target="_top">https://github.com/bagder/curl</a>.
    </p><p>
     OpenIDM is accessible over the regular and secure HTTP ports of the Jetty
     Servlet container, 8080 and 8443.
    </p><p>
     If you want to run <span class="command"><strong>curl</strong></span> over the secure port, 8443, you
     must either include the <span class="command"><strong>--insecure</strong></span> option, or follow the
     instructions shown in
     <a href="../../integrators-guide/index/chap-security.html#rest-over-https" class="link"><em class="citetitle">Restrict
     REST Access to the HTTPS Port</em></a>. You can use those
     instructions with the self-signed certificate that is generated when
     OpenIDM starts, or with a <code class="filename">*.crt</code> file provided by a
     certificate authority.
    </p><p>
     In numerous cases, <span class="command"><strong>curl</strong></span> commands to the secure port
     are depicted with a <code class="literal">--cacert self-signed.crt</code> option.
     Instructions for creating that <code class="filename">self-signed.crt</code> file
     are shown in the aforementioned section on <a href="../../integrators-guide/index/chap-security.html#rest-over-https" class="link"><em class="citetitle">Restrict
     REST Access to the HTTPS Port</em></a>.
    </p><p>
     If you would rather use <span class="command"><strong>curl</strong></span> to connect to the regular
     HTTP port, omit the <code class="literal">--cacert self-signed.crt</code> file and
     point to a regular Jetty HTTP URL such as
     <code class="literal">http://localhost:8080/openidm/...</code>.
    </p><div class="note"><h3 class="title">Note</h3><p>
      All RESTful command line examples in this guide, as depicted with
      <span class="command"><strong>curl</strong></span>, are based on the default configuration of
      OpenIDM. If you change configuration files in directories such as
      <code class="filename">openidm/conf</code> and <code class="filename">openidm/script</code>,
      you might need to modify the RESTful commands to reflect those changes.
     </p><p>
      Most of the examples in this guide use client-assigned IDs when creating
      resources, as it makes the examples easier to read.
     </p><p>
      In general, server-assigned UUIDs are better in production, as they can be
      generated easily in clustered environments.
     </p></div><div class="procedure"><a name="first-rest-steps"></a><ol class="procedure" type="1"><li class="step"><p>Access the following URL to obtain the JSON representation of all
     users in the OpenIDM repository.</p><div class="screen"><pre>$ curl \
 --header "X-OpenIDM-Username: openidm-admin" \
 --header "X-OpenIDM-Password: openidm-admin" \
 http://localhost:8080/openidm/managed/user/?_queryId=query-all-ids</pre></div><p>When you first install OpenIDM with an empty repository, no users
     exist.</p></li><li class="step"><p>Create a user <code class="literal">joe</code> by sending a RESTful POST.</p><p>The following <span class="command"><strong>curl</strong></span> commands create the user
     <code class="literal">joe</code> in the repository.</p><ul class="stepalternatives">
      <li class="step"><p>Create <code class="literal">joe</code> (UNIX).</p><div class="screen"><pre><strong>$ curl \
 --cacert self-signed.crt \
 --header "Content-Type: application/json" \
 --header "X-OpenIDM-Username: openidm-admin" \
 --header "X-OpenIDM-Password: openidm-admin" \
 --request POST \
 --data '{ \
 "userName":"joe", \
 "givenName":"joe", \
 "sn":"smith", \
 "mail":"joe@example.com", \
 "telephoneNumber":"555-123-1234", \
 "password":"TestPassw0rd", \
 "description":"My first user", \
 "_id":"joe" \
 }' \
 https://localhost:8443/openidm/managed/user?_action=create</strong>
        <em>
{
  "userName": "joe",
  "stateProvince": "",
  "postalAddress": "",
  "effectiveAssignments": {},
  "roles": [
    "openidm-authorized"
  ],
  "telephoneNumber": "555-123-1234",
  "password": {
    "$crypto": {
      "value": {
        "key": "openidm-sym-default",
        "iv": "gTcveNaZdSHE1qeBgcmzRw==",
        "cipher": "AES/CBC/PKCS5Padding",
        "data": "X9sCuuvNwSbblxdqS65qxw=="
      },
      "type": "x-simple-encryption",
    }
  },
  "effectiveRoles": [
    "openidm-authorized"
  ],
  "givenName": "joe",
  "address2": "",
  "lastPasswordAttempt": "Tue Feb 25 2014 18:03:40 GMT-0800 (PST)",
  "passwordAttempts": "0",
  "sn": "smith",
  "mail": "joe@example.com",
  "country": "",
  "city": "",
  "_rev": "1",
  "lastPasswordSet": "",
  "postalCode": "",
  "accountStatus": "active",
  "description": "My first user",
  "_id":"joe"
}        </em>
       </pre></div></li>
      <li class="step"><p>Create <code class="literal">joe</code> (Windows).</p><div class="screen"><pre>C:\&gt; curl ^
 --cacert self-signed.crt ^
 --header "Content-Type: application/json" ^
 --header "X-OpenIDM-Username: openidm-admin" ^
 --header "X-OpenIDM-Password: openidm-admin" ^
 --request POST ^
 --data "{ ^
 \"userName\":\"joe\", ^
 \"givenName\":\"joe\", ^
 \"sn\":\"smith\", ^
 \"mail\":\"joe@example.com\", ^
 \"telephoneNumber\":\"555-123-1234\", ^
 \"password\":\"TestPassw0rd\", ^
 \"description\":\"My first user\" ^
 \"_id\":\"joe\" ^
 }" ^
 https://localhost:8443/openidm/managed/user?_action=create</pre></div></li>
     </ul></li><li class="step"><p>Fetch the newly created user from the repository with a RESTful
     GET.</p><div class="screen"><pre><strong>$ curl \
 --cacert self-signed.crt \
 --header "X-OpenIDM-Username: openidm-admin" \
 --header "X-OpenIDM-Password: openidm-admin" \
 --request GET \
 https://localhost:8443/openidm/managed/user/joe
     </strong>
     <em>
{
  "effectiveAssignments": {},
  "effectiveRoles": [
    "openidm-authorized"
  ],
  "stateProvince": "",
  "userName": "joe",
  "postalAddress": "",
  "givenName": "joe",
  "address2": "",
  "lastPasswordAttempt": "Tue Feb 25 2014 18:13:03 GMT-0800 (PST)",
  "passwordAttempts": "0",
  "sn": "smith",
  "mail": "joe@example.com",
  "_rev": "1",
  "_id": "joe",
  "country": "",
  "city": "",
  "lastPasswordSet": "",
  "postalCode": "",
  "description": "My first user",
  "accountStatus": "active",
  "telephoneNumber": "555-123-1234",
  "roles": [
    "openidm-authorized"
  ]
}</em></pre></div></li><li class="step"><p>
      Notice that more attributes are returned for user <code class="literal">joe</code>
      than the attributes you added in the previous step. The additional
      attributes are added by a script named
      <code class="literal">onCreate-user-set-default-fields.js</code> that is triggered
      when a new user is created. For more information, see <a href="../../integrators-guide/index/appendix-objects.html#managed-object-configuration" class="link"><em class="citetitle">Managed Object
      Configuration</em></a> in the <em class="citetitle">Integrator's
      Guide</em>.
     </p><p>
      When you create a user some attributes might be required by the policy
      associated with that user. These are listed in the
      <code class="filename">conf/policy.json</code> file.
     </p></li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="rest-output-format"></a>1.3.1.&nbsp;Format REST Output for Readability</h3></div></div></div><p>
     With all <span class="command"><strong>curl</strong></span>-based REST calls, OpenIDM returns the JSON
     object all on one line.
    </p><p>
     Without a bit of help, the JSON output is formatted all on one line. One
     example is shown below, and it is difficult to read:
    </p><div class="screen"><pre>
     <em>
      {"mail":"joe@example.com","sn":"smith","passwordAttempts":"0",
      "lastPasswordAttempt":"Mon Apr 14 2014 11:13:37 GMT-0800 (GMT-08:00)",
      "address2":"","givenName":"joe","effectiveRoles":["openidm-authorized"],
      "password":{"$crypto":{"type":"x-simple-encryption","value":{"data":
      "OBFVL9cG8uaLoo1N+SMJ3g==","cipher":"AES/CBC/PKCS5Padding","iv":
      "7rlV4EwkwdRHkt19F8g22A==","key":"openidm-sym-default"}}},"country":"",
      "city":"","_rev":"1","lastPasswordSet":"","postalCode":"","_id":"joe3",
      "description":"My first user","accountStatus":"active","telephoneNumber":
      "555-123-1234","roles":["openidm-authorized"],"effectiveAssignments":{},
      "postalAddress":"","stateProvince":"","userName":"joe3"}
     </em>
    </pre></div><p>
     At least two options are available to clean up this output.
    </p><p>
     The standard way to format JSON output is with a JSON parser such as
     <a class="link" href="http://stedolan.github.io/jq/" target="_top">jq</a>. You would
     "pipe" the output of a REST call to <span class="command"><strong>jq</strong></span>, as follows:
    </p><div class="screen"><pre>$<strong> curl \
--cacert self-signed.crt \
--header "X-OpenIDM-Username: openidm-admin" \
--header "X-OpenIDM-Password: openidm-admin" \
--request GET \
"https://localhost:8443/openidm/managed/user/joe" \
| jq .
     </strong>
    </pre></div><p>
     The ForgeRock REST API includes an optional <code class="literal">_prettyPrint</code>
     request parameter. The default value is <code class="literal">false</code>. To
     use the ForgeRock REST API to format output, add a parameter such as
     <code class="literal">?_prettyPrint=true</code> or
     <code class="literal">&amp;_prettyPrint=true</code>, depending on whether it is added
     to the end of an existing request parameter. In this case, the following
     command would return formatted output:
    </p><div class="screen"><pre>$<strong> curl \
--cacert self-signed.crt \
--header "X-OpenIDM-Username: openidm-admin" \
--header "X-OpenIDM-Password: openidm-admin" \
--request GET \
"https://localhost:8443/openidm/managed/user/joe?_prettyPrint=true"
    </strong>
    </pre></div><p>
     Note that most command-line examples in this guide do not show this
     parameter, although the output is formatted for readability.
    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preface.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-sample.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Preface&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;2.&nbsp;First OpenIDM Sample</td></tr></table></div><p>&nbsp;</p><div id="footer"><p>Something wrong on this page? <a href="https://bugster.forgerock.org/jira/secure/CreateIssueDetails!init.jspa?pid=10020&components=10164&issuetype=1">Log a documentation bug.</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23412190-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body></html>