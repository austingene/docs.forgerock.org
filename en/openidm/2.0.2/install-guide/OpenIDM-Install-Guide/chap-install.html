<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</title><link rel="stylesheet" type="text/css" href="css/coredoc.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="OpenIDM-Install-Guide.html" title="OpenIDM 2.0.2 Installation Guide"><link rel="up" href="OpenIDM-Install-Guide.html" title="OpenIDM 2.0.2 Installation Guide"><link rel="prev" href="preface.html" title="Preface"><link rel="next" href="chap-sample.html" title="Chapter&nbsp;2.&nbsp;First OpenIDM Sample"><link rel="copyright" href="legalnotice.html" title="Legal Notice"><script src="http://code.jquery.com/jquery.min.js"></script>
<script>
// On double-click, reformat <div class="screen"> for easy copying.
$(document).ready(function() {
  $(".screen").attr("title", "Double-click [-] to flatten lines.");
  $(".screen").prepend('<img src="../images/minus.png" class="toggle">');
});
$(".screen").live("dblclick", function() {
  $(this).replaceWith(
    "<div class=\"flat\" title=\"Double-click [+] to wrap long lines.\">" +
    $(this).html().replace(/minus\.png/,"plus.png").replace(/\n /g," ") + "\n<!--" + $(this).html() + "-->" +
    "</div>");
});
$(".flat").live("dblclick", function() {
  $(this).replaceWith(
    "<div class=\"screen\" title=\"Double-click [-] to flatten lines.\">" +
    $(this).html().replace(/(.|\n)+<!\-\-/m,"").replace(/\-\-\>/,"").replace(/plus\.png/,"minus.png") +
    "</div>");
});
</script>
<link rel="shortcut icon" href="http://forgerock.org/favicon.ico">
</head ><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preface.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="chap-sample.html">Next</a></td></tr></table><hr></div><div lang="en" class="chapter" title="Chapter&nbsp;1.&nbsp;Installing OpenIDM Services"><div class="titlepage"><div><div><h2 class="title"><a name="chap-install"></a>Chapter&nbsp;1.&nbsp;Installing OpenIDM Services</h2></div></div></div><div class="toc"><div class="toc-title">Table of Contents</div><dl><dt><span class="section"><a href="chap-install.html#before-you-start">1.1. Before You Run OpenIDM</a></span></dt><dt><span class="section"><a href="chap-install.html#installing-openidm">1.2. Installing &amp; Running OpenIDM</a></span></dt></dl></div><p>This chapter covers the tasks required to install and start
 OpenIDM.</p><div class="section" title="1.1.&nbsp;Before You Run OpenIDM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="before-you-start"></a>1.1.&nbsp;Before You Run OpenIDM</h2></div></div></div><p>This section covers what you need to know before running OpenIDM.
  </p><div class="section" title="1.1.1.&nbsp;Java Environment"><div class="titlepage"><div><div><h3 class="title"><a name="java-prerequisites"></a>1.1.1.&nbsp;Java Environment</h3></div></div></div><a class="indexterm" name="d1922e228"></a><p>OpenIDM requires Oracle Java SE JDK 6 update 24 or later.</p><p>The equivalent version of OpenJDK should work for evaluation,
   too.</p></div><div class="section" title="1.1.2.&nbsp;Application Container"><div class="titlepage"><div><div><h3 class="title"><a name="application-container-prerequisites"></a>1.1.2.&nbsp;Application Container</h3></div></div></div><a class="indexterm" name="d1922e241"></a><p>OpenIDM services run in an OSGi container with an embedded Servlet
   container, and an embedded noSQL database. By default the OSGi container is
   Apache Felix. The default Servlet container is Jetty. For OpenIDM
   2.0.2, the only supported configuration is running
   the services in Apache Felix and Jetty.</p></div></div><div class="section" title="1.2.&nbsp;Installing &amp; Running OpenIDM"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-openidm"></a>1.2.&nbsp;Installing &amp; Running OpenIDM</h2></div></div></div><p>Follow the procedures in this section to install and run
   OpenIDM.</p><div class="procedure" title="Procedure&nbsp;1.1.&nbsp;To Install OpenIDM Services"><a name="install-openidm"></a><div class="procedure-title">Procedure&nbsp;1.1.&nbsp;To Install OpenIDM Services</div><a class="indexterm" name="d1922e256"></a><p>Follow these steps to install OpenIDM.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Make sure you have an appropriate version of Java installed.</p><div class="screen">$ java -version
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07-334)
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02-334, mixed mode)</div><p>Check the release notes for Java requirements in the chapter, <span class="olink"><em class="citetitle">Before You
     Install OpenIDM Software</em></span>.</p></li><li class="step" title="Step 2"><a class="indexterm" name="d1922e273"></a><p>Download OpenIDM from the <a class="link" href="http://forgerock.org/openidm.html" target="_top">download page</a>.</p></li><li class="step" title="Step 3"><p>Unpack the contents of the .zip file into the install location.</p><div class="screen">$ cd /path/to
$ unzip ~/Downloads/openidm-2.0.2.zip
...
  inflating: openidm/connectors/openicf-scriptedsql-connector-1.1.0.0.jar
  inflating: openidm/bin/felix.jar   
  inflating: openidm/bin/openidm.jar
$</div></li><li class="step" title="Step 4"><p>By default, OpenIDM listens for HTTP connections on port 8080. To
     change the default port, edit
     <code class="filename">openidm/conf/jetty.xml</code>.</p></li><li class="step" title="Step 5"><a class="indexterm" name="d1922e293"></a><p>Before running OpenIDM in production, replace the default OrientDB
     repository provided for evaluation with a JDBC repository.</p><p>See the chapter on <span class="olink"><em class="citetitle">Installing
     a Repository For Production</em></span> for details.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;1.2.&nbsp;To Start OpenIDM Services"><a name="run-openidm"></a><div class="procedure-title">Procedure&nbsp;1.2.&nbsp;To Start OpenIDM Services</div><a class="indexterm" name="d1922e309"></a><p>Follow these steps to run OpenIDM interactively.</p><p>To run OpenIDM as a background process, see the chapter on <span class="olink"><em class="citetitle">Starting &amp;
    Stopping OpenIDM</em></span> in the <em class="citetitle">Integrator's
    Guide</em>.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Start the Felix container, load all OpenIDM services, and start a
     command shell to allow you to manage the container.</p><ul class="stepalternatives">
      <li class="step" title="Step 1.1"><p>Start OpenIDM (UNIX).</p><div class="screen">$ ./startup.sh
Using OPENIDM_HOME:   /path/to/openidm
Using OPENIDM_OPTS:   -Xmx1024m
Using LOGGING_CONFIG:
 -Djava.util.logging.config.file=/path/to/openidm/conf/logging.properties
Using boot properties at /path/to/openidm/conf/boot/boot.properties
-&gt;</div></li>
      <li class="step" title="Step 1.2"><p>Start OpenIDM (Windows).</p><div class="screen">$ cd \path\to\openidm
$ startup.bat
Start in debug mode [1] default
Start in normal mode [2]
Show help [3]
Chose a number (1-3):

Listening for transport dt_socket at address: 5005
...
-&gt;</div></li>
     </ul><p>At the resulting <code class="literal">-&gt;</code> prompt, you can enter
     commands such as <span class="command"><strong>help</strong></span> for usage, or
     <span class="command"><strong>ps</strong></span> to view the bundles installed. To see a list of all
     the OpenIDM core services and their states, enter the following
     command.</p><div class="screen">-&gt; scr list
   Id   State          Name
[  16] [active       ] org.forgerock.openidm.config.starter
[   7] [active       ] org.forgerock.openidm.external.rest
[  11] [active       ]
 org.forgerock.openidm.provisioner.openicf.connectorinfoprovider
[   1] [active       ] org.forgerock.openidm.router
[  18] [active       ] org.forgerock.openidm.scheduler
[  13] [active       ] org.forgerock.openidm.restlet
[   6] [unsatisfied  ] org.forgerock.openidm.external.email
[  15] [active       ] org.forgerock.openidm.repo.orientdb
[   5] [active       ] org.forgerock.openidm.sync
[   3] [active       ] org.forgerock.openidm.script
[   2] [active       ] org.forgerock.openidm.scope
[   9] [active       ] org.forgerock.openidm.http.contextregistrator
[  17] [active       ] org.forgerock.openidm.config
[   0] [active       ] org.forgerock.openidm.audit
[  14] [unsatisfied  ] org.forgerock.openidm.repo.jdbc
[   4] [active       ] org.forgerock.openidm.managed
[  12] [active       ] org.forgerock.openidm.provisioner.openicf
[   8] [active       ] org.forgerock.openidm.authentication
[  10] [active       ] org.forgerock.openidm.provisioner
-&gt;</div><p>If startup was successful, all states except <code class="literal">email</code>
     and <code class="literal">repo.jdbc</code> are active. If any other services remain
     <code class="literal">unsatisfied</code>, check <code class="filename">openidm/logs</code>
     for errors, and refer to the chapter on <span class="olink"><em class="citetitle">Troubleshooting</em></span> in the
     <em class="citetitle">Integrator's Guide</em>.</p></li><li class="step" title="Step 2"><p>Alternatively, you can manage the container and services from the
     Felix administration console.</p><div class="itemizedlist"><p>Use these hints to connect to the console.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Default Console URL: <a class="link" href="http://localhost:8080/system/console" target="_blank">http://localhost:8080/system/console</a></p></li><li class="listitem"><p>Default user name: <code class="literal">admin</code></p></li><li class="listitem"><p>Default password: <code class="literal">admin</code></p></li></ul></div><div class="itemizedlist"><p>Some basic hints on using the Felix administration console
      follow.</p><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the Components tab to see OpenIDM core services and their
       respective states.</p></li><li class="listitem"><p>Select the Shell tab to access the <code class="literal">-&gt;</code>
       prompt.</p></li><li class="listitem"><p>Select the System Information tab to stop or restart the
       container.</p></li></ul></div></li></ol></div><div class="procedure" title="Procedure&nbsp;1.3.&nbsp;To Get Started With the OpenIDM REST Interface"><a name="first-steps-with-rest"></a><div class="procedure-title">Procedure&nbsp;1.3.&nbsp;To Get Started With the OpenIDM REST Interface</div><a class="indexterm" name="d1922e413"></a><p>OpenIDM provides RESTful access to users in the OpenIDM
    repository.</p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Access the following URL to get a JSON file including all users in
     the OpenIDM repository.</p><div class="screen">$ curl
 --header "X-OpenIDM-Username: openidm-admin"
 --header "X-OpenIDM-Password: openidm-admin"
 http://localhost:8080/openidm/managed/user/?_query-id=query-all-ids</div><p>When you first install OpenIDM with an empty repository, no users
     exist.</p><p>The <span class="command"><strong>curl</strong></span> command line tool is included with most
     operating systems.<sup>[<a name="d1922e430" href="#ftn.d1922e430" class="footnote">1</a>]</sup></p></li><li class="step" title="Step 2"><p>Create a user <code class="literal">joe</code> by sending a RESTful PUT.</p><p>The following <span class="command"><strong>curl</strong></span> commands create the user
     <code class="literal">joe</code> in the repository.</p><ul class="stepalternatives">
      <li class="step" title="Step 2.1"><p>Create <code class="literal">joe</code> (UNIX).</p><div class="screen">$ curl
 --header "X-OpenIDM-Username: openidm-admin"
 --header "X-OpenIDM-Password: openidm-admin"
 --request PUT
 --data '{
 "name":"joe",
 "firstname":"joe",
 "lastname":"smith",
 "email":"joe@abc.com",
 "userPassword":"11111111"
 }'
 http://localhost:8080/openidm/managed/user/joe

{"_id":"joe","_rev":"0"}</div></li>
      <li class="step" title="Step 2.2"><p>Create <code class="literal">joe</code> (Windows).</p><div class="screen">C:\&gt;curl
 --header "X-OpenIDM-Username: openidm-admin"
 --header "X-OpenIDM-Password: openidm-admin"
 --request PUT
 --data {
 \"name\":\"joe\",
 \"firstname\":\"joe\",
 \"lastname\":\"smith\",
 \"email\":\"joe@abc.com\",
 \"userPassword\":\"11111111\"
 }
 http://localhost:8080/openidm/managed/user/joe

{"_id":"joe","_rev":"0"}</div></li>
     </ul></li><li class="step" title="Step 3"><p>Fetch the newly created user from the repository with a RESTful
     GET.</p><div class="screen">$ curl
 --header "X-OpenIDM-Username: openidm-admin"
 --header "X-OpenIDM-Password: openidm-admin"
 http://localhost:8080/openidm/managed/user/joe

{
  "userPassword": "11111111",
  "lastname": "smith",
  "firstname": "joe",
  "_id": "joe",
  "_rev": "0",
  "email": "joe@abc.com",
  "name": "joe"
 }</div><p>The JSON output shown above is formatted for easier reading. OpenIDM
     returns the JSON object all on one line.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;1.4.&nbsp;To Stop the OpenIDM Services"><a name="stop-openidm"></a><div class="procedure-title">Procedure&nbsp;1.4.&nbsp;To Stop the OpenIDM Services</div><a class="indexterm" name="d1922e483"></a><ul class="procedure"><li class="step" title="Step 1"><p>You can stop OpenIDM Services from the <code class="literal">-&gt;</code>
    prompt, or through the Felix console.</p><ul class="stepalternatives">
      <li class="step" title="Step 1.1"><p>Either enter the <span class="command"><strong>shutdown</strong></span> command at the
       <code class="literal">-&gt;</code> prompt.</p><div class="screen">-&gt; shutdown
...
$</div></li>
      <li class="step" title="Step 1.2"><p>Or click Stop on the System Information tab of the Felix console,
       by default <a class="link" href="http://localhost:8080/system/console" target="_blank">http://localhost:8080/system/console</a>.</p><p>This stops the Servlet container as well, and the console is
       no longer accessible.</p></li>
     </ul></li></ul></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a id="ftn.d1922e430" href="#d1922e430" class="para">1</a>] </sup>For more
     information on <span class="command"><strong>curl</strong></span>, see <a class="link" href="http://curl.haxx.se/" target="_top">http://curl.haxx.se/</a>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preface.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="chap-sample.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Preface&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="OpenIDM-Install-Guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;2.&nbsp;First OpenIDM Sample</td></tr></table></div></body></html>