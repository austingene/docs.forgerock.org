<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Thu Jun 27 13:21:03 CEST 2013 -->
<title>ReplicationBroker (OpenDJ API Documentation)</title>
<meta name="date" content="2013-06-27">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ReplicationBroker (OpenDJ API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/service/ListenerThread.html" title="class in org.opends.server.replication.service"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/service/ReplicationBroker.html" target="_top">Frames</a></li>
<li><a href="ReplicationBroker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opends.server.replication.service</div>
<h2 title="Class ReplicationBroker" class="title">Class ReplicationBroker</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.opends.server.replication.service.ReplicationBroker</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.79">ReplicationBroker</a>
extends java.lang.Object</pre>
<div class="block">The broker for Multi-master Replication.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a></strong></code>
<div class="block">Bag class for keeping info we get from a replication server in order to
 compute the best one to connect to.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#NO_CONNECTED_SERVER">NO_CONNECTED_SERVER</a></strong></code>
<div class="block">String reported under cn=monitor when there is no connected RS.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#ReplicationBroker(org.opends.server.replication.service.ReplicationDomain, org.opends.server.replication.common.ServerState, java.lang.String, int, int, long, long, org.opends.server.replication.protocol.ReplSessionSecurity, byte, long)">ReplicationBroker</a></strong>(<a href="../../../../../org/opends/server/replication/service/ReplicationDomain.html" title="class in org.opends.server.replication.service">ReplicationDomain</a>&nbsp;replicationDomain,
                                  <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;state,
                                  java.lang.String&nbsp;baseDn,
                                  int&nbsp;serverID2,
                                  int&nbsp;window,
                                  long&nbsp;generationId,
                                  long&nbsp;heartbeatInterval,
                                  <a href="../../../../../org/opends/server/replication/protocol/ReplSessionSecurity.html" title="class in org.opends.server.replication.protocol">ReplSessionSecurity</a>&nbsp;replSessionSecurity,
                                  byte&nbsp;groupId,
                                  long&nbsp;changeTimeHeartbeatInterval)</code>
<div class="block">Creates a new ReplicationServer Broker for a particular ReplicationDomain.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#changeConfig(java.util.Collection, int, long, byte)">changeConfig</a></strong>(java.util.Collection&lt;java.lang.String&gt;&nbsp;replicationServers,
                        int&nbsp;window,
                        long&nbsp;heartbeatInterval,
                        byte&nbsp;groupId)</code>
<div class="block">Change some configuration parameters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#computeBestReplicationServer(boolean, int, org.opends.server.replication.common.ServerState, java.util.Map, int, byte, long)">computeBestReplicationServer</a></strong>(boolean&nbsp;firstConnection,
                                                        int&nbsp;rsServerId,
                                                        <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;myState,
                                                        java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&gt;&nbsp;rsInfos,
                                                        int&nbsp;localServerId,
                                                        byte&nbsp;groupId,
                                                        long&nbsp;generationId)</code>
<div class="block">Returns the replication server that best fits our need so that we can
 connect to it or determine if we must disconnect from current one to
 re-connect to best server.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#computeBestServerForWeight(java.util.Map, int, int)">computeBestServerForWeight</a></strong>(java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&gt;&nbsp;bestServers,
                                                    int&nbsp;currentRsServerId,
                                                    int&nbsp;localServerId)</code>
<div class="block">Computes the best replication server the local server should be connected
 to so that the load is correctly spread across the topology, following the
 weights guidance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/common/ServerStatus.html" title="enum in org.opends.server.replication.common">ServerStatus</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#computeInitialServerStatus(long, org.opends.server.replication.common.ServerState, int, long)">computeInitialServerStatus</a></strong>(long&nbsp;rsGenId,
                                                    <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;rsState,
                                                    int&nbsp;degradedStatusThreshold,
                                                    long&nbsp;dsGenId)</code>
<div class="block">Determines the status we are starting with according to our state and the
 RS state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getCurrentRcvWindow()">getCurrentRcvWindow</a></strong>()</code>
<div class="block">Get the current receive window size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getCurrentSendWindow()">getCurrentSendWindow</a></strong>()</code>
<div class="block">Get the current send window size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../org/opends/server/replication/common/DSInfo.html" title="class in org.opends.server.replication.common">DSInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getDsList()">getDsList</a></strong>()</code>
<div class="block">Gets the info for DSs in the topology (except us).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getMaxRcvWindow()">getMaxRcvWindow</a></strong>()</code>
<div class="block">Get the maximum receive window size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getMaxSendWindow()">getMaxSendWindow</a></strong>()</code>
<div class="block">Get the maximum send window size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getNumLostConnections()">getNumLostConnections</a></strong>()</code>
<div class="block">Get the number of times the connection was lost.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>short</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getProtocolVersion()">getProtocolVersion</a></strong>()</code>
<div class="block">Get the version of the replication protocol.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getReplicaStates()">getReplicaStates</a></strong>()</code>
<div class="block">Gets the States of all the Replicas currently in the
 Topology.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getReplicationServer()">getReplicationServer</a></strong>()</code>
<div class="block">Get the name of the replicationServer to which this broker is currently
 connected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getRsGroupId()">getRsGroupId</a></strong>()</code>
<div class="block">Gets the group id of the RS we are connected to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../../../org/opends/server/replication/common/RSInfo.html" title="class in org.opends.server.replication.common">RSInfo</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getRsList()">getRsList</a></strong>()</code>
<div class="block">Gets the info for RSs in the topology (except the one we are connected
 to).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.Integer</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getRsServerId()">getRsServerId</a></strong>()</code>
<div class="block">Gets the server id of the RS we are connected to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getRsServerUrl()">getRsServerUrl</a></strong>()</code>
<div class="block">Gets the server url of the RS we are connected to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#getServerId()">getServerId</a></strong>()</code>
<div class="block">Gets the server id.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#hasConnectionError()">hasConnectionError</a></strong>()</code>
<div class="block">Check if the broker could not find any Replication Server and therefore
 connection attempt failed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#isConnected()">isConnected</a></strong>()</code>
<div class="block">Check if the broker is connected to a ReplicationServer and therefore
 ready to received and send Replication Messages.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#isSessionEncrypted()">isSessionEncrypted</a></strong>()</code>
<div class="block">Determine whether the connection to the replication server is encrypted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#publish(org.opends.server.replication.protocol.ReplicationMsg)">publish</a></strong>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg)</code>
<div class="block">Publish a message to the other servers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#publish(org.opends.server.replication.protocol.ReplicationMsg, boolean)">publish</a></strong>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg,
              boolean&nbsp;retryOnFailure)</code>
<div class="block">Publish a message to the other servers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#publishRecovery(org.opends.server.replication.protocol.ReplicationMsg)">publishRecovery</a></strong>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg)</code>
<div class="block">Publish a recovery message to the other servers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#receive()">receive</a></strong>()</code>
<div class="block">Receive a message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#receive(boolean, boolean, boolean)">receive</a></strong>(boolean&nbsp;reconnectToTheBestRS,
              boolean&nbsp;reconnectOnFailure,
              boolean&nbsp;returnOnTopoChange)</code>
<div class="block">Receive a message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#receiveTopo(org.opends.server.replication.protocol.TopologyMsg)">receiveTopo</a></strong>(<a href="../../../../../org/opends/server/replication/protocol/TopologyMsg.html" title="class in org.opends.server.replication.protocol">TopologyMsg</a>&nbsp;topoMsg)</code>
<div class="block">Processes an incoming TopologyMsg.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#reStart(boolean)">reStart</a></strong>(boolean&nbsp;infiniteTry)</code>
<div class="block">restart the ReplicationBroker.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#reStart(org.opends.server.replication.protocol.Session, boolean)">reStart</a></strong>(<a href="../../../../../org/opends/server/replication/protocol/Session.html" title="class in org.opends.server.replication.protocol">Session</a>&nbsp;failingSession,
              boolean&nbsp;infiniteTry)</code>
<div class="block">Restart the ReplicationServer broker after a failure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#setChangeTimeHeartbeatInterval(int)">setChangeTimeHeartbeatInterval</a></strong>(int&nbsp;changeTimeHeartbeatInterval)</code>
<div class="block">Set a new change time heartbeat interval to this broker.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#setGenerationID(long)">setGenerationID</a></strong>(long&nbsp;generationID)</code>
<div class="block">Set the generation id - for test purpose.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#setGroupId(byte)">setGroupId</a></strong>(byte&nbsp;groupId)</code>
<div class="block">Sets the group id of the broker.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#setRecoveryRequired(boolean)">setRecoveryRequired</a></strong>(boolean&nbsp;b)</code>
<div class="block">Set the connectRequiresRecovery to the provided value.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#setSoTimeout(int)">setSoTimeout</a></strong>(int&nbsp;timeout)</code>
<div class="block">Set a timeout value.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#shuttingDown()">shuttingDown</a></strong>()</code>
<div class="block">Returns whether the broker is shutting down.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#signalStatusChange(org.opends.server.replication.common.ServerStatus)">signalStatusChange</a></strong>(<a href="../../../../../org/opends/server/replication/common/ServerStatus.html" title="enum in org.opends.server.replication.common">ServerStatus</a>&nbsp;newStatus)</code>
<div class="block">Signals the RS we just entered a new status.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#start()">start</a></strong>()</code>
<div class="block">Start the ReplicationBroker.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#start(java.util.Collection)">start</a></strong>(java.util.Collection&lt;java.lang.String&gt;&nbsp;replicationServers)</code>
<div class="block">Start the ReplicationBroker.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#startChangeTimeHeartBeatPublishing()">startChangeTimeHeartBeatPublishing</a></strong>()</code>
<div class="block">Starts publishing to the RS the current timestamp used in this server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#stop()">stop</a></strong>()</code>
<div class="block">stop the server.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#stopChangeTimeHeartBeatPublishing()">stopChangeTimeHeartBeatPublishing</a></strong>()</code>
<div class="block">Stops publishing to the RS the current timestamp used in this server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.html#updateWindowAfterReplay()">updateWindowAfterReplay</a></strong>()</code>
<div class="block">This method allows to do the necessary computing for the window
 management after treatment by the worker threads.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NO_CONNECTED_SERVER">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NO_CONNECTED_SERVER</h4>
<pre>public static final&nbsp;java.lang.String <a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.96">NO_CONNECTED_SERVER</a></pre>
<div class="block">String reported under cn=monitor when there is no connected RS.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.opends.server.replication.service.ReplicationBroker.NO_CONNECTED_SERVER">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReplicationBroker(org.opends.server.replication.service.ReplicationDomain, org.opends.server.replication.common.ServerState, java.lang.String, int, int, long, long, org.opends.server.replication.protocol.ReplSessionSecurity, byte, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReplicationBroker</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.228">ReplicationBroker</a>(<a href="../../../../../org/opends/server/replication/service/ReplicationDomain.html" title="class in org.opends.server.replication.service">ReplicationDomain</a>&nbsp;replicationDomain,
                 <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;state,
                 java.lang.String&nbsp;baseDn,
                 int&nbsp;serverID2,
                 int&nbsp;window,
                 long&nbsp;generationId,
                 long&nbsp;heartbeatInterval,
                 <a href="../../../../../org/opends/server/replication/protocol/ReplSessionSecurity.html" title="class in org.opends.server.replication.protocol">ReplSessionSecurity</a>&nbsp;replSessionSecurity,
                 byte&nbsp;groupId,
                 long&nbsp;changeTimeHeartbeatInterval)</pre>
<div class="block">Creates a new ReplicationServer Broker for a particular ReplicationDomain.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>replicationDomain</code> - The replication domain that is creating us.</dd><dd><code>state</code> - The ServerState that should be used by this broker
        when negotiating the session with the replicationServer.</dd><dd><code>baseDn</code> - The base DN that should be used by this broker
        when negotiating the session with the replicationServer.</dd><dd><code>serverID2</code> - The server ID that should be used by this broker
        when negotiating the session with the replicationServer.</dd><dd><code>window</code> - The size of the send and receive window to use.</dd><dd><code>generationId</code> - The generationId for the server associated to the
 provided serverId and for the domain associated to the provided baseDN.</dd><dd><code>heartbeatInterval</code> - The interval (in ms) between heartbeats requested
        from the replicationServer, or zero if no heartbeats are requested.</dd><dd><code>replSessionSecurity</code> - The session security configuration.</dd><dd><code>groupId</code> - The group id of our domain.</dd><dd><code>changeTimeHeartbeatInterval</code> - The interval (in ms) between Change
        time  heartbeats are sent to the RS,
        or zero if no CN heartbeat should be sent.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.260">start</a>()</pre>
<div class="block">Start the ReplicationBroker.</div>
</li>
</ul>
<a name="start(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.275">start</a>(java.util.Collection&lt;java.lang.String&gt;&nbsp;replicationServers)</pre>
<div class="block">Start the ReplicationBroker.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>replicationServers</code> - list of servers used</dd></dl>
</li>
</ul>
<a name="getRsGroupId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRsGroupId</h4>
<pre>public&nbsp;byte&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.298">getRsGroupId</a>()</pre>
<div class="block">Gets the group id of the RS we are connected to.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The group id of the RS we are connected to</dd></dl>
</li>
</ul>
<a name="getRsServerId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRsServerId</h4>
<pre>public&nbsp;java.lang.Integer&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.307">getRsServerId</a>()</pre>
<div class="block">Gets the server id of the RS we are connected to.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The server id of the RS we are connected to</dd></dl>
</li>
</ul>
<a name="getServerId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServerId</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.316">getServerId</a>()</pre>
<div class="block">Gets the server id.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The server id</dd></dl>
</li>
</ul>
<a name="setGenerationID(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setGenerationID</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.339">setGenerationID</a>(long&nbsp;generationID)</pre>
<div class="block">Set the generation id - for test purpose.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>generationID</code> - The generation id</dd></dl>
</li>
</ul>
<a name="getRsServerUrl()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRsServerUrl</h4>
<pre>public&nbsp;java.lang.String&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.348">getRsServerUrl</a>()</pre>
<div class="block">Gets the server url of the RS we are connected to.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The server url of the RS we are connected to</dd></dl>
</li>
</ul>
<a name="computeInitialServerStatus(long, org.opends.server.replication.common.ServerState, int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeInitialServerStatus</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/common/ServerStatus.html" title="enum in org.opends.server.replication.common">ServerStatus</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.1144">computeInitialServerStatus</a>(long&nbsp;rsGenId,
                                      <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;rsState,
                                      int&nbsp;degradedStatusThreshold,
                                      long&nbsp;dsGenId)</pre>
<div class="block">Determines the status we are starting with according to our state and the
 RS state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>rsGenId</code> - The generation id of the RS</dd><dd><code>rsState</code> - The server state of the RS</dd><dd><code>degradedStatusThreshold</code> - The degraded status threshold of the RS</dd><dd><code>dsGenId</code> - The local generation id</dd>
<dt><span class="strong">Returns:</span></dt><dd>The initial status</dd></dl>
</li>
</ul>
<a name="computeBestReplicationServer(boolean, int, org.opends.server.replication.common.ServerState, java.util.Map, int, byte, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeBestReplicationServer</h4>
<pre>public static&nbsp;<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.1533">computeBestReplicationServer</a>(boolean&nbsp;firstConnection,
                                                                   int&nbsp;rsServerId,
                                                                   <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;myState,
                                                                   java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&gt;&nbsp;rsInfos,
                                                                   int&nbsp;localServerId,
                                                                   byte&nbsp;groupId,
                                                                   long&nbsp;generationId)</pre>
<div class="block">Returns the replication server that best fits our need so that we can
 connect to it or determine if we must disconnect from current one to
 re-connect to best server.

 Note: this method is static for test purpose (access from unit tests)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>firstConnection</code> - True if we run this method for the very first
 connection of the broker. False if we run this method to determine if the
 replication server we are currently connected to is still the best or not.</dd><dd><code>rsServerId</code> - The id of the replication server we are currently
 connected to. Only used when firstConnection is false.</dd><dd><code>myState</code> - The local server state.</dd><dd><code>rsInfos</code> - The list of available replication servers and their
 associated information (choice will be made among them).</dd><dd><code>localServerId</code> - The server id for the suffix we are working for.</dd><dd><code>groupId</code> - The groupId we prefer being connected to if possible</dd><dd><code>generationId</code> - The generation id we are using</dd>
<dt><span class="strong">Returns:</span></dt><dd>The computed best replication server. If the returned value is
 null, the best replication server is undetermined but the local server must
 disconnect (so the best replication server is another one than the current
 one). Null can only be returned when firstConnection is false.</dd></dl>
</li>
</ul>
<a name="computeBestServerForWeight(java.util.Map, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeBestServerForWeight</h4>
<pre>public static&nbsp;<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.1893">computeBestServerForWeight</a>(java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service">ReplicationBroker.ReplicationServerInfo</a>&gt;&nbsp;bestServers,
                                                                 int&nbsp;currentRsServerId,
                                                                 int&nbsp;localServerId)</pre>
<div class="block">Computes the best replication server the local server should be connected
 to so that the load is correctly spread across the topology, following the
 weights guidance.
 Warning: This method is expected to be called with at least 2 servers in
 bestServers
 Note: this method is static for test purpose (access from unit tests)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bestServers</code> - The list of replication servers to consider</dd><dd><code>currentRsServerId</code> - The replication server the local server is
        currently connected to. -1 if the local server is not yet connected
        to any replication server.</dd><dd><code>localServerId</code> - The server id of the local server. This is not used
        when it is not connected to a replication server
        (currentRsServerId = -1)</dd>
<dt><span class="strong">Returns:</span></dt><dd>The replication server the local server should be connected to
 as far as the weight is concerned. This may be the currently used one if
 the weight is correctly spread. If the returned value is null, the best
 replication server is undetermined but the local server must disconnect
 (so the best replication server is another one than the current one).</dd></dl>
</li>
</ul>
<a name="reStart(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reStart</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2172">reStart</a>(boolean&nbsp;infiniteTry)</pre>
<div class="block">restart the ReplicationBroker.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>infiniteTry</code> - the socket which failed</dd></dl>
</li>
</ul>
<a name="reStart(org.opends.server.replication.protocol.Session, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reStart</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2183">reStart</a>(<a href="../../../../../org/opends/server/replication/protocol/Session.html" title="class in org.opends.server.replication.protocol">Session</a>&nbsp;failingSession,
           boolean&nbsp;infiniteTry)</pre>
<div class="block">Restart the ReplicationServer broker after a failure.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>failingSession</code> - the socket which failed</dd><dd><code>infiniteTry</code> - the socket which failed</dd></dl>
</li>
</ul>
<a name="publish(org.opends.server.replication.protocol.ReplicationMsg)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>publish</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2250">publish</a>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg)</pre>
<div class="block">Publish a message to the other servers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - the message to publish</dd></dl>
</li>
</ul>
<a name="publish(org.opends.server.replication.protocol.ReplicationMsg, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>publish</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2261">publish</a>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg,
              boolean&nbsp;retryOnFailure)</pre>
<div class="block">Publish a message to the other servers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The message to publish.</dd><dd><code>retryOnFailure</code> - Whether reconnect should automatically be done.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Whether publish succeeded.</dd></dl>
</li>
</ul>
<a name="publishRecovery(org.opends.server.replication.protocol.ReplicationMsg)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>publishRecovery</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2270">publishRecovery</a>(<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;msg)</pre>
<div class="block">Publish a recovery message to the other servers.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - the message to publish</dd></dl>
</li>
</ul>
<a name="receive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2432">receive</a>()
                       throws java.net.SocketTimeoutException</pre>
<div class="block">Receive a message.
 This method is not thread-safe and should either always be
 called in a single thread or protected by a locking mechanism
 before being called. This is a wrapper to the method with a boolean version
 so that we do not have to modify existing tests.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the received message</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.SocketTimeoutException</code> - if the timeout set by setSoTimeout
         has expired</dd></dl>
</li>
</ul>
<a name="receive(boolean, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/protocol/ReplicationMsg.html" title="class in org.opends.server.replication.protocol">ReplicationMsg</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2454">receive</a>(boolean&nbsp;reconnectToTheBestRS,
                     boolean&nbsp;reconnectOnFailure,
                     boolean&nbsp;returnOnTopoChange)
                       throws java.net.SocketTimeoutException</pre>
<div class="block">Receive a message.
 This method is not thread-safe and should either always be
 called in a single thread or protected by a locking mechanism
 before being called.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reconnectToTheBestRS</code> - Whether broker will automatically switch
                             to the best suitable RS.</dd><dd><code>reconnectOnFailure</code> - Whether broker will automatically reconnect
                             on failure.</dd><dd><code>returnOnTopoChange</code> - Whether broker should return TopologyMsg
                             received.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the received message</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.SocketTimeoutException</code> - if the timeout set by setSoTimeout
         has expired</dd></dl>
</li>
</ul>
<a name="getReplicaStates()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicaStates</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.Integer,<a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&gt;&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2653">getReplicaStates</a>()</pre>
<div class="block">Gets the States of all the Replicas currently in the
 Topology.
 When this method is called, a Monitoring message will be sent
 to the Replication Server to which this domain is currently connected
 so that it computes a table containing information about
 all Directory Servers in the topology.
 This Computation involves communications will all the servers
 currently connected and</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The States of all Replicas in the topology (except us)</dd></dl>
</li>
</ul>
<a name="updateWindowAfterReplay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateWindowAfterReplay</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2684">updateWindowAfterReplay</a>()</pre>
<div class="block">This method allows to do the necessary computing for the window
 management after treatment by the worker threads.

 This should be called once the replay thread have done their job
 and the window can be open again.</div>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2705">stop</a>()</pre>
<div class="block">stop the server.</div>
</li>
</ul>
<a name="setSoTimeout(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSoTimeout</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2738">setSoTimeout</a>(int&nbsp;timeout)
                  throws java.net.SocketException</pre>
<div class="block">Set a timeout value.
 With this option set to a non-zero value, calls to the receive() method
 block for only this amount of time after which a
 java.net.SocketTimeoutException is raised.
 The Broker is valid and usable even after such an Exception is raised.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - the specified timeout, in milliseconds.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.SocketException</code> - if there is an error in the underlying protocol,
         such as a TCP error.</dd></dl>
</li>
</ul>
<a name="getReplicationServer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicationServer</h4>
<pre>public&nbsp;java.lang.String&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2754">getReplicationServer</a>()</pre>
<div class="block">Get the name of the replicationServer to which this broker is currently
 connected.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the name of the replicationServer to which this domain
         is currently connected.</dd></dl>
</li>
</ul>
<a name="getMaxRcvWindow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxRcvWindow</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2764">getMaxRcvWindow</a>()</pre>
<div class="block">Get the maximum receive window size.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The maximum receive window size.</dd></dl>
</li>
</ul>
<a name="getCurrentRcvWindow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentRcvWindow</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2774">getCurrentRcvWindow</a>()</pre>
<div class="block">Get the current receive window size.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The current receive window size.</dd></dl>
</li>
</ul>
<a name="getMaxSendWindow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSendWindow</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2784">getMaxSendWindow</a>()</pre>
<div class="block">Get the maximum send window size.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The maximum send window size.</dd></dl>
</li>
</ul>
<a name="getCurrentSendWindow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSendWindow</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2794">getCurrentSendWindow</a>()</pre>
<div class="block">Get the current send window size.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The current send window size.</dd></dl>
</li>
</ul>
<a name="getNumLostConnections()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumLostConnections</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2809">getNumLostConnections</a>()</pre>
<div class="block">Get the number of times the connection was lost.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The number of times the connection was lost.</dd></dl>
</li>
</ul>
<a name="changeConfig(java.util.Collection, int, long, byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changeConfig</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2825">changeConfig</a>(java.util.Collection&lt;java.lang.String&gt;&nbsp;replicationServers,
                   int&nbsp;window,
                   long&nbsp;heartbeatInterval,
                   byte&nbsp;groupId)</pre>
<div class="block">Change some configuration parameters.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>replicationServers</code> - The new list of replication servers.</dd><dd><code>window</code> - The max window size.</dd><dd><code>heartbeatInterval</code> - The heartBeat interval.</dd><dd><code>groupId</code> - The new group id to use</dd>
<dt><span class="strong">Returns:</span></dt><dd>A boolean indicating if the changes
                            requires to restart the service.</dd></dl>
</li>
</ul>
<a name="getProtocolVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProtocolVersion</h4>
<pre>public&nbsp;short&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2860">getProtocolVersion</a>()</pre>
<div class="block">Get the version of the replication protocol.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The version of the replication protocol.</dd></dl>
</li>
</ul>
<a name="isConnected()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isConnected</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2871">isConnected</a>()</pre>
<div class="block">Check if the broker is connected to a ReplicationServer and therefore
 ready to received and send Replication Messages.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the server is connected, false if not.</dd></dl>
</li>
</ul>
<a name="isSessionEncrypted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isSessionEncrypted</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2880">isSessionEncrypted</a>()</pre>
<div class="block">Determine whether the connection to the replication server is encrypted.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the connection is encrypted, false otherwise.</dd></dl>
</li>
</ul>
<a name="signalStatusChange(org.opends.server.replication.common.ServerStatus)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signalStatusChange</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2890">signalStatusChange</a>(<a href="../../../../../org/opends/server/replication/common/ServerStatus.html" title="enum in org.opends.server.replication.common">ServerStatus</a>&nbsp;newStatus)</pre>
<div class="block">Signals the RS we just entered a new status.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>newStatus</code> - The status the local DS just entered</dd></dl>
</li>
</ul>
<a name="setGroupId(byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setGroupId</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2911">setGroupId</a>(byte&nbsp;groupId)</pre>
<div class="block">Sets the group id of the broker.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>groupId</code> - The new group id.</dd></dl>
</li>
</ul>
<a name="getDsList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDsList</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../org/opends/server/replication/common/DSInfo.html" title="class in org.opends.server.replication.common">DSInfo</a>&gt;&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2920">getDsList</a>()</pre>
<div class="block">Gets the info for DSs in the topology (except us).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The info for DSs in the topology (except us)</dd></dl>
</li>
</ul>
<a name="getRsList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRsList</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../../../org/opends/server/replication/common/RSInfo.html" title="class in org.opends.server.replication.common">RSInfo</a>&gt;&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2931">getRsList</a>()</pre>
<div class="block">Gets the info for RSs in the topology (except the one we are connected
 to).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The info for RSs in the topology (except the one we are connected
 to)</dd></dl>
</li>
</ul>
<a name="receiveTopo(org.opends.server.replication.protocol.TopologyMsg)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveTopo</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.2979">receiveTopo</a>(<a href="../../../../../org/opends/server/replication/protocol/TopologyMsg.html" title="class in org.opends.server.replication.protocol">TopologyMsg</a>&nbsp;topoMsg)</pre>
<div class="block">Processes an incoming TopologyMsg.
 Updates the structures for the local view of the topology.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>topoMsg</code> - The topology information received from RS.</dd></dl>
</li>
</ul>
<a name="hasConnectionError()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasConnectionError</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3045">hasConnectionError</a>()</pre>
<div class="block">Check if the broker could not find any Replication Server and therefore
 connection attempt failed.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if the server could not connect to any Replication Server.</dd></dl>
</li>
</ul>
<a name="startChangeTimeHeartBeatPublishing()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startChangeTimeHeartBeatPublishing</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3053">startChangeTimeHeartBeatPublishing</a>()</pre>
<div class="block">Starts publishing to the RS the current timestamp used in this server.</div>
</li>
</ul>
<a name="stopChangeTimeHeartBeatPublishing()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopChangeTimeHeartBeatPublishing</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3079">stopChangeTimeHeartBeatPublishing</a>()</pre>
<div class="block">Stops publishing to the RS the current timestamp used in this server.</div>
</li>
</ul>
<a name="setChangeTimeHeartbeatInterval(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setChangeTimeHeartbeatInterval</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3092">setChangeTimeHeartbeatInterval</a>(int&nbsp;changeTimeHeartbeatInterval)</pre>
<div class="block">Set a new change time heartbeat interval to this broker.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>changeTimeHeartbeatInterval</code> - The new interval (in ms).</dd></dl>
</li>
</ul>
<a name="setRecoveryRequired(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRecoveryRequired</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3108">setRecoveryRequired</a>(boolean&nbsp;b)</pre>
<div class="block">Set the connectRequiresRecovery to the provided value.
 This flag is used to indicate if a recovery of Update is necessary
 after a reconnection to a RS.
 It is the responsibility of the ReplicationDomain to set it during the
 sessionInitiated phase.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - the new value of the connectRequiresRecovery.</dd></dl>
</li>
</ul>
<a name="shuttingDown()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shuttingDown</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/service/ReplicationBroker.html#line.3117">shuttingDown</a>()</pre>
<div class="block">Returns whether the broker is shutting down.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>whether the broker is shutting down.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/service/ListenerThread.html" title="class in org.opends.server.replication.service"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/service/ReplicationBroker.ReplicationServerInfo.html" title="class in org.opends.server.replication.service"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/service/ReplicationBroker.html" target="_top">Frames</a></li>
<li><a href="ReplicationBroker.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
