<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Thu Jun 27 13:21:02 CEST 2013 -->
<title>EntryHistorical (OpenDJ API Documentation)</title>
<meta name="date" content="2013-06-27">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="EntryHistorical (OpenDJ API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/plugin/AttrValueHistorical.html" title="class in org.opends.server.replication.plugin"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/plugin/ExternalChangelogDomain.html" title="class in org.opends.server.replication.plugin"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/plugin/EntryHistorical.html" target="_top">Frames</a></li>
<li><a href="EntryHistorical.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opends.server.replication.plugin</div>
<h2 title="Class EntryHistorical" class="title">Class EntryHistorical</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.opends.server.replication.plugin.EntryHistorical</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.66">EntryHistorical</a>
extends java.lang.Object</pre>
<div class="block">This class is used to store historical information that is
 used to resolve modify conflicts

 It is assumed that the common case is not to have conflict and
 therefore is optimized (in order of importance) for :
  1- detecting potential conflict
  2- fast update of historical information for non-conflicting change
  3- fast and efficient purge
  4- compact
  5- solve conflict. This should also be as fast as possible but
     not at the cost of any of the other previous objectives

 One Historical object is created for each entry in the entry cache
 each Historical Object contains a list of attribute historical information</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#ENTRYUUID_ATTRIBUTE_NAME">ENTRYUUID_ATTRIBUTE_NAME</a></strong></code>
<div class="block">Name of the entryuuid attribute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#HISTORICAL">HISTORICAL</a></strong></code>
<div class="block">Name used to store attachment of historical information in the
 operation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#HISTORICAL_ATTRIBUTE_NAME">HISTORICAL_ATTRIBUTE_NAME</a></strong></code>
<div class="block">Name of the attribute used to store historical information.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#EntryHistorical()">EntryHistorical</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#addedOrRenamedAfter(org.opends.server.replication.common.ChangeNumber)">addedOrRenamedAfter</a></strong>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;cn)</code>
<div class="block">Indicates if the Entry was renamed or added after the ChangeNumber
 that is given as a parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#encodeAndPurge()">encodeAndPurge</a></strong>()</code>
<div class="block">Encode this historical information object in an operational attribute
 and purge it from the values older than the purge delay.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.Iterable&lt;<a href="../../../../../org/opends/server/replication/plugin/FakeOperation.html" title="class in org.opends.server.replication.plugin">FakeOperation</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#generateFakeOperations(org.opends.server.types.Entry)">generateFakeOperations</a></strong>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</code>
<div class="block">Use this historical information to generate fake operations that would
 result in this historical information.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getDNDate()">getDNDate</a></strong>()</code>
<div class="block">Returns the lastChangeNumber when the entry DN was modified.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getEntryUUID(org.opends.server.types.Entry)">getEntryUUID</a></strong>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</code>
<div class="block">Get the entry unique Id in String form.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getEntryUUID(org.opends.server.types.operation.PreOperationAddOperation)">getEntryUUID</a></strong>(<a href="../../../../../org/opends/server/types/operation/PreOperationAddOperation.html" title="interface in org.opends.server.types.operation">PreOperationAddOperation</a>&nbsp;op)</code>
<div class="block">Get the Entry Unique Id from an add operation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getHistoricalAttr(org.opends.server.types.Entry)">getHistoricalAttr</a></strong>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</code>
<div class="block">Get the attribute used to store the historical information from
 the provided Entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getLastPurgedValuesCount()">getLastPurgedValuesCount</a></strong>()</code>
<div class="block">For stats/monitoring purpose, returns the number of historical values
 purged the last time a purge has been applied on this entry historical.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#getOldestCN()">getOldestCN</a></strong>()</code>
<div class="block">Returns the oldest ChangeNumber stored in this entry historical attribute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#isHistoricalAttribute(org.opends.server.types.Attribute)">isHistoricalAttribute</a></strong>(<a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a>&nbsp;attr)</code>
<div class="block">Check if a given attribute is an attribute used to store historical
 information.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html" title="class in org.opends.server.replication.plugin">EntryHistorical</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#newInstanceFromEntry(org.opends.server.types.Entry)">newInstanceFromEntry</a></strong>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</code>
<div class="block">Construct an Historical object from the provided entry by reading the
 historical attribute.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#replayOperation(org.opends.server.types.operation.PreOperationModifyOperation, org.opends.server.types.Entry)">replayOperation</a></strong>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyOperation</a>&nbsp;modifyOperation,
                              <a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;modifiedEntry)</code>
<div class="block">Process an operation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationAddOperation)">setHistoricalAttrToOperation</a></strong>(<a href="../../../../../org/opends/server/types/operation/PreOperationAddOperation.html" title="interface in org.opends.server.types.operation">PreOperationAddOperation</a>&nbsp;addOperation)</code>
<div class="block">Generate an attribute containing the historical information
 from the replication context attached to the provided operation
 and set this attribute in the operation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationModifyDNOperation)">setHistoricalAttrToOperation</a></strong>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyDNOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyDNOperation</a>&nbsp;modifyDNOperation)</code>
<div class="block">For a MODDN operation, add new or update existing historical information.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationModifyOperation)">setHistoricalAttrToOperation</a></strong>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyOperation</a>&nbsp;modifyOperation)</code>
<div class="block">Update the historical information for the provided operation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#setPurgeDelay(long)">setPurgeDelay</a></strong>(long&nbsp;purgeDelay)</code>
<div class="block">Set the delay to purge the historical informations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html#toString()">toString</a></strong>()</code></td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="HISTORICAL_ATTRIBUTE_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HISTORICAL_ATTRIBUTE_NAME</h4>
<pre>public static final&nbsp;java.lang.String <a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.71">HISTORICAL_ATTRIBUTE_NAME</a></pre>
<div class="block">Name of the attribute used to store historical information.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.opends.server.replication.plugin.EntryHistorical.HISTORICAL_ATTRIBUTE_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="HISTORICAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>HISTORICAL</h4>
<pre>public static final&nbsp;java.lang.String <a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.78">HISTORICAL</a></pre>
<div class="block">Name used to store attachment of historical information in the
 operation. This attachement allows to use in several different places
 the historical while reading/writing ONCE it from/to the entry.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.opends.server.replication.plugin.EntryHistorical.HISTORICAL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ENTRYUUID_ATTRIBUTE_NAME">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ENTRYUUID_ATTRIBUTE_NAME</h4>
<pre>public static final&nbsp;java.lang.String <a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.83">ENTRYUUID_ATTRIBUTE_NAME</a></pre>
<div class="block">Name of the entryuuid attribute.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.opends.server.replication.plugin.EntryHistorical.ENTRYUUID_ATTRIBUTE_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EntryHistorical()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EntryHistorical</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.66">EntryHistorical</a>()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.173">toString</a>()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="replayOperation(org.opends.server.types.operation.PreOperationModifyOperation, org.opends.server.types.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replayOperation</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.189">replayOperation</a>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyOperation</a>&nbsp;modifyOperation,
                      <a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;modifiedEntry)</pre>
<div class="block">Process an operation.
 This method is responsible for detecting and resolving conflict for
 modifyOperation. This is done by using the historical information.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>modifyOperation</code> - the operation to be processed</dd><dd><code>modifiedEntry</code> - the entry that is being modified (before modification)</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the replayed operation was in conflict</dd></dl>
</li>
</ul>
<a name="setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationModifyOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHistoricalAttrToOperation</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.228">setHistoricalAttrToOperation</a>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyOperation</a>&nbsp;modifyOperation)</pre>
<div class="block">Update the historical information for the provided operation.
 Steps :
 - compute the historical attribute
 - update the mods in the provided operation by adding the update of the
   historical attribute
 - update the modifiedEntry, already computed by core since we are in the
   preOperation plugin, that is called just before commiting into the DB.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>modifyOperation</code> - the modification.</dd></dl>
</li>
</ul>
<a name="setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationModifyDNOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHistoricalAttrToOperation</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.276">setHistoricalAttrToOperation</a>(<a href="../../../../../org/opends/server/types/operation/PreOperationModifyDNOperation.html" title="interface in org.opends.server.types.operation">PreOperationModifyDNOperation</a>&nbsp;modifyDNOperation)</pre>
<div class="block">For a MODDN operation, add new or update existing historical information.

 This method is NOT static because it relies on this Historical object
 created in the HandleConflictResolution phase.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>modifyDNOperation</code> - the modification for which the historical
                          information should be created.</dd></dl>
</li>
</ul>
<a name="setHistoricalAttrToOperation(org.opends.server.types.operation.PreOperationAddOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHistoricalAttrToOperation</h4>
<pre>public static&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.323">setHistoricalAttrToOperation</a>(<a href="../../../../../org/opends/server/types/operation/PreOperationAddOperation.html" title="interface in org.opends.server.types.operation">PreOperationAddOperation</a>&nbsp;addOperation)</pre>
<div class="block">Generate an attribute containing the historical information
 from the replication context attached to the provided operation
 and set this attribute in the operation.

   For ADD, the historical is made of the changeNumber read from the
   synchronization context attached to the operation.

   Called for both local and synchronization ADD preOperation.

   This historical information will be used to generate fake operation
   in case a Directory Server can not find a Replication Server with
   all its changes at connection time.
   This should only happen if a Directory Server or a Replication Server
   crashes.

   This method is static because there is no Historical object creation
   required here or before(in the HandleConflictResolution phase)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addOperation</code> - The Operation to which the historical attribute will
                     be added.</dd></dl>
</li>
</ul>
<a name="getLastPurgedValuesCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastPurgedValuesCount</h4>
<pre>public&nbsp;int&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.435">getLastPurgedValuesCount</a>()</pre>
<div class="block">For stats/monitoring purpose, returns the number of historical values
 purged the last time a purge has been applied on this entry historical.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the purged values count.</dd></dl>
</li>
</ul>
<a name="encodeAndPurge()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeAndPurge</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.446">encodeAndPurge</a>()</pre>
<div class="block">Encode this historical information object in an operational attribute
 and purge it from the values older than the purge delay.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The historical information encoded in an operational attribute.</dd></dl>
</li>
</ul>
<a name="setPurgeDelay(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPurgeDelay</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.615">setPurgeDelay</a>(long&nbsp;purgeDelay)</pre>
<div class="block">Set the delay to purge the historical informations. The purge is applied
 only when historical attribute is updated (write operations).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>purgeDelay</code> - the purge delay in ms</dd></dl>
</li>
</ul>
<a name="addedOrRenamedAfter(org.opends.server.replication.common.ChangeNumber)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addedOrRenamedAfter</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.630">addedOrRenamedAfter</a>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;cn)</pre>
<div class="block">Indicates if the Entry was renamed or added after the ChangeNumber
 that is given as a parameter.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cn</code> - The ChangeNumber with which the ADD or Rename date must be
           compared.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A boolean indicating if the Entry was renamed or added after
                   the ChangeNumber that is given as a parameter.</dd></dl>
</li>
</ul>
<a name="getDNDate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDNDate</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.646">getDNDate</a>()</pre>
<div class="block">Returns the lastChangeNumber when the entry DN was modified.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The lastChangeNumber when the entry DN was modified.</dd></dl>
</li>
</ul>
<a name="newInstanceFromEntry(org.opends.server.types.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstanceFromEntry</h4>
<pre>public static&nbsp;<a href="../../../../../org/opends/server/replication/plugin/EntryHistorical.html" title="class in org.opends.server.replication.plugin">EntryHistorical</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.670">newInstanceFromEntry</a>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</pre>
<div class="block">Construct an Historical object from the provided entry by reading the
 historical attribute.
 Return an empty object when the entry does not contain any
 historical attribute.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>entry</code> - The entry which historical information must be loaded</dd>
<dt><span class="strong">Returns:</span></dt><dd>The constructed Historical information object</dd></dl>
</li>
</ul>
<a name="generateFakeOperations(org.opends.server.types.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateFakeOperations</h4>
<pre>public static&nbsp;java.lang.Iterable&lt;<a href="../../../../../org/opends/server/replication/plugin/FakeOperation.html" title="class in org.opends.server.replication.plugin">FakeOperation</a>&gt;&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.798">generateFakeOperations</a>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</pre>
<div class="block">Use this historical information to generate fake operations that would
 result in this historical information.
 TODO : This is only implemented for MODIFY, MODRDN and  ADD
        need to complete with DELETE.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>entry</code> - The Entry to use to generate the FakeOperation Iterable.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an Iterable of FakeOperation that would result in this historical
         information.</dd></dl>
</li>
</ul>
<a name="getHistoricalAttr(org.opends.server.types.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistoricalAttr</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a>&gt;&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.868">getHistoricalAttr</a>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</pre>
<div class="block">Get the attribute used to store the historical information from
 the provided Entry.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>entry</code> - The entry containing the historical information.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The Attribute used to store the historical information.
          Several values on the list if several options for this attribute.
          Null if not present.</dd></dl>
</li>
</ul>
<a name="getEntryUUID(org.opends.server.types.Entry)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryUUID</h4>
<pre>public static&nbsp;java.lang.String&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.880">getEntryUUID</a>(<a href="../../../../../org/opends/server/types/Entry.html" title="class in org.opends.server.types">Entry</a>&nbsp;entry)</pre>
<div class="block">Get the entry unique Id in String form.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>entry</code> - The entry for which the unique id should be returned.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The Unique Id of the entry, or a fake one if none is found.</dd></dl>
</li>
</ul>
<a name="getEntryUUID(org.opends.server.types.operation.PreOperationAddOperation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryUUID</h4>
<pre>public static&nbsp;java.lang.String&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.897">getEntryUUID</a>(<a href="../../../../../org/opends/server/types/operation/PreOperationAddOperation.html" title="interface in org.opends.server.types.operation">PreOperationAddOperation</a>&nbsp;op)</pre>
<div class="block">Get the Entry Unique Id from an add operation.
 This must be called after the entry uuid preop plugin (i.e no
 sooner than the replication provider pre-op)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>op</code> - The operation</dd>
<dt><span class="strong">Returns:</span></dt><dd>The Entry Unique Id String form.</dd></dl>
</li>
</ul>
<a name="isHistoricalAttribute(org.opends.server.types.Attribute)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isHistoricalAttribute</h4>
<pre>public static&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.915">isHistoricalAttribute</a>(<a href="../../../../../org/opends/server/types/Attribute.html" title="interface in org.opends.server.types">Attribute</a>&nbsp;attr)</pre>
<div class="block">Check if a given attribute is an attribute used to store historical
 information.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>attr</code> - The attribute that needs to be checked.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a boolean indicating if the given attribute is
          used to store historical information.</dd></dl>
</li>
</ul>
<a name="getOldestCN()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOldestCN</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/EntryHistorical.html#line.948">getOldestCN</a>()</pre>
<div class="block">Returns the oldest ChangeNumber stored in this entry historical attribute.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the oldest ChangeNumber stored in this entry historical attribute.
         Returns null when this historical object has been created from
         an entry that has no historical attribute and after the last
         historical has been purged.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/plugin/AttrValueHistorical.html" title="class in org.opends.server.replication.plugin"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/plugin/ExternalChangelogDomain.html" title="class in org.opends.server.replication.plugin"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/plugin/EntryHistorical.html" target="_top">Frames</a></li>
<li><a href="EntryHistorical.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
