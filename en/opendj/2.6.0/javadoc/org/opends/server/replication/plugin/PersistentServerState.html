<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Thu Jun 27 13:21:02 CEST 2013 -->
<title>PersistentServerState (OpenDJ API Documentation)</title>
<meta name="date" content="2013-06-27">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PersistentServerState (OpenDJ API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/plugin/PendingChanges.html" title="class in org.opends.server.replication.plugin"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/plugin/RemotePendingChanges.html" title="class in org.opends.server.replication.plugin"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/plugin/PersistentServerState.html" target="_top">Frames</a></li>
<li><a href="PersistentServerState.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opends.server.replication.plugin</div>
<h2 title="Class PersistentServerState" class="title">Class PersistentServerState</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.opends.server.replication.plugin.PersistentServerState</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.67">PersistentServerState</a>
extends java.lang.Object</pre>
<div class="block">This class implements a ServerState that is stored in the backend
 used to store the synchronized data and that is therefore persistent
 across server reboot.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#REPLICATION_STATE">REPLICATION_STATE</a></strong></code>
<div class="block">The attribute name used to store the state in the backend.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#PersistentServerState(org.opends.server.types.DN, int)">PersistentServerState</a></strong>(<a href="../../../../../org/opends/server/types/DN.html" title="class in org.opends.server.types">DN</a>&nbsp;baseDn,
                                          int&nbsp;serverId)</code>
<div class="block">create a new ServerState.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#PersistentServerState(org.opends.server.types.DN, int, org.opends.server.replication.common.ServerState)">PersistentServerState</a></strong>(<a href="../../../../../org/opends/server/types/DN.html" title="class in org.opends.server.types">DN</a>&nbsp;baseDn,
                                          int&nbsp;serverId,
                                          <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;state)</code>
<div class="block">Create a new PersistentServerState based on an already existing
 ServerState.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#checkAndUpdateServerState()">checkAndUpdateServerState</a></strong>()</code>
<div class="block">The ServerState is saved to the database periodically,
 therefore in case of crash it is possible that is does not contain
 the latest changes that have been processed and saved to the
 database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#clear()">clear</a></strong>()</code>
<div class="block">Empty the ServerState.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#clearInMemory()">clearInMemory</a></strong>()</code>
<div class="block">Empty the ServerState.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#cover(org.opends.server.replication.common.ChangeNumber)">cover</a></strong>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;covered)</code>
<div class="block">Checks that the ChangeNumber given as a parameter is in this ServerState.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#getMaxChangeNumber(int)">getMaxChangeNumber</a></strong>(int&nbsp;serverID)</code>
<div class="block">Get the largest ChangeNumber seen for a given LDAP server ID.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#loadState()">loadState</a></strong>()</code>
<div class="block">Load the ServerState from the backing entry in database to memory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#save()">save</a></strong>()</code>
<div class="block">Save this object to persistent storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/opends/server/replication/plugin/PersistentServerState.html#update(org.opends.server.replication.common.ChangeNumber)">update</a></strong>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;changeNumber)</code>
<div class="block">Update the Server State with a ChangeNumber.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="REPLICATION_STATE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>REPLICATION_STATE</h4>
<pre>protected static final&nbsp;java.lang.String <a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.79">REPLICATION_STATE</a></pre>
<div class="block">The attribute name used to store the state in the backend.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#org.opends.server.replication.plugin.PersistentServerState.REPLICATION_STATE">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PersistentServerState(org.opends.server.types.DN, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PersistentServerState</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.86">PersistentServerState</a>(<a href="../../../../../org/opends/server/types/DN.html" title="class in org.opends.server.types">DN</a>&nbsp;baseDn,
                     int&nbsp;serverId)</pre>
<div class="block">create a new ServerState.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>baseDn</code> - The baseDN for which the ServerState is created</dd><dd><code>serverId</code> - The serverId</dd></dl>
</li>
</ul>
<a name="PersistentServerState(org.opends.server.types.DN, int, org.opends.server.replication.common.ServerState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PersistentServerState</h4>
<pre>public&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.102">PersistentServerState</a>(<a href="../../../../../org/opends/server/types/DN.html" title="class in org.opends.server.types">DN</a>&nbsp;baseDn,
                     int&nbsp;serverId,
                     <a href="../../../../../org/opends/server/replication/common/ServerState.html" title="class in org.opends.server.replication.common">ServerState</a>&nbsp;state)</pre>
<div class="block">Create a new PersistentServerState based on an already existing
 ServerState.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>baseDn</code> - The baseDN for which the ServerState is created.</dd><dd><code>serverId</code> - The serverId.</dd><dd><code>state</code> - The serverState.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="cover(org.opends.server.replication.common.ChangeNumber)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cover</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.117">cover</a>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;covered)</pre>
<div class="block">Checks that the ChangeNumber given as a parameter is in this ServerState.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>covered</code> - The ChangeNumber that should be checked.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A boolean indicating if this ServerState contains the ChangeNumber
          given in parameter.</dd></dl>
</li>
</ul>
<a name="update(org.opends.server.replication.common.ChangeNumber)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;boolean&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.131">update</a>(<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;changeNumber)</pre>
<div class="block">Update the Server State with a ChangeNumber.
 All operations with smaller CSN and the same serverID must be committed
 before calling this method.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>changeNumber</code> - The committed ChangeNumber.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a boolean indicating if the update was meaningful.</dd></dl>
</li>
</ul>
<a name="save()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.139">save</a>()</pre>
<div class="block">Save this object to persistent storage.</div>
</li>
</ul>
<a name="loadState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadState</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.155">loadState</a>()</pre>
<div class="block">Load the ServerState from the backing entry in database to memory.</div>
</li>
</ul>
<a name="clearInMemory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearInMemory</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.369">clearInMemory</a>()</pre>
<div class="block">Empty the ServerState.
 After this call the Server State will be in the same state
 as if it was just created.</div>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.380">clear</a>()</pre>
<div class="block">Empty the ServerState.
 After this call the Server State will be in the same state
 as if it was just created.</div>
</li>
</ul>
<a name="checkAndUpdateServerState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAndUpdateServerState</h4>
<pre>public final&nbsp;void&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.396">checkAndUpdateServerState</a>()</pre>
<div class="block">The ServerState is saved to the database periodically,
 therefore in case of crash it is possible that is does not contain
 the latest changes that have been processed and saved to the
 database.
 In order to make sure that we don't loose them, search all the entries
 that have been updated after this entry.
 This is done by using the HistoricalCsnOrderingMatchingRule
 and an ordering index for historical attribute</div>
</li>
</ul>
<a name="getMaxChangeNumber(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getMaxChangeNumber</h4>
<pre>public&nbsp;<a href="../../../../../org/opends/server/replication/common/ChangeNumber.html" title="class in org.opends.server.replication.common">ChangeNumber</a>&nbsp;<a href="../../../../../src-html/org/opends/server/replication/plugin/PersistentServerState.html#line.473">getMaxChangeNumber</a>(int&nbsp;serverID)</pre>
<div class="block">Get the largest ChangeNumber seen for a given LDAP server ID.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>serverID</code> - The server ID.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The largest ChangeNumber seen.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/opends/server/replication/plugin/PendingChanges.html" title="class in org.opends.server.replication.plugin"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/opends/server/replication/plugin/RemotePendingChanges.html" title="class in org.opends.server.replication.plugin"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/opends/server/replication/plugin/PersistentServerState.html" target="_top">Frames</a></li>
<li><a href="PersistentServerState.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
